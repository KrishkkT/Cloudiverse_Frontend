import{u as w,j as e}from"./index-CFCMkEAz.js";import{u as k,r as a}from"./vendor-rtOnKvnR.js";import{U as C,S as u,L as S,P as L,g as d,h as P,i as E,j as D,k as W}from"./ui-BA9QmYBK.js";import"./utils-DrXocLQh.js";const T=()=>{const{user:n,logout:h}=w(),s=k(),[o,b]=a.useState([]),[g,f]=a.useState(!0),[c,i]=a.useState(null),[l,j]=a.useState("");a.useEffect(()=>{m()},[]);const m=async()=>{try{i(null);const r=localStorage.getItem("token"),t=await fetch("http://localhost:5000/api/workspaces",{headers:{Authorization:`Bearer ${r}`}});if(t.ok){const N=await t.json();b(N)}else t.status===401?(localStorage.removeItem("token"),s("/login")):i("Failed to load workspaces. Please try again.")}catch(r){console.error("Error fetching workspaces:",r),i("Failed to connect to server. Please check your connection and try again.")}finally{f(!1)}},x=()=>{s("/workspace/new")},y=async()=>{await h(),s("/")},v=r=>{const t={year:"numeric",month:"short",day:"numeric"};return new Date(r).toLocaleDateString(void 0,t)},p=a.useMemo(()=>o.filter(r=>{var t;return r.name.toLowerCase().includes(l.toLowerCase())||((t=r.description)==null?void 0:t.toLowerCase().includes(l.toLowerCase()))}),[o,l]);return c?e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-500 mb-2",children:"Error Loading Workspaces"}),e.jsx("p",{className:"text-text-secondary mb-4",children:c}),e.jsx("button",{onClick:m,className:"btn btn-primary",children:"Retry"})]})})}):e.jsx("div",{className:"min-h-screen bg-background p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 animate-fade-in",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-extrabold text-text-primary tracking-tight",children:["Welcome, ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-500",children:(n==null?void 0:n.name)||"User"})]}),e.jsx("p",{className:"text-text-secondary mt-2 text-lg",children:"Manage and organize your cloud infrastructure projects"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>s("/profile"),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-text-primary hover:bg-white/10 transition-colors font-medium flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{onClick:()=>s("/settings"),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-text-primary hover:bg-white/10 transition-colors font-medium flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{onClick:y,className:"px-4 py-2 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 hover:bg-red-500/20 transition-colors font-medium flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]}),e.jsxs("button",{onClick:x,className:"group px-6 py-3 bg-primary text-white rounded-xl font-semibold shadow-lg shadow-primary/25 hover:shadow-primary/40 hover:-translate-y-0.5 transition-all duration-300 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-300"}),e.jsx("span",{children:"New Project"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-fade-in-up",children:[{label:"Total Projects",value:o.length,icon:d,color:"text-blue-400",bg:"bg-blue-400/10"},{label:"Active Deployments",value:o.filter(r=>r.step==="deployed"||r.step==="active_deployment").length,icon:P,color:"text-green-400",bg:"bg-green-400/10"},{label:"Draft Designs",value:o.filter(r=>r.step!=="deployed"&&r.step!=="active_deployment").length,icon:E,color:"text-purple-400",bg:"bg-purple-400/10"}].map((r,t)=>e.jsx("div",{className:"bg-surface border border-border p-6 rounded-2xl shadow-sm hover:shadow-md transition-shadow duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-text-secondary font-medium mb-1",children:r.label}),e.jsx("p",{className:"text-3xl font-bold text-text-primary",children:r.value})]}),e.jsx("div",{className:`p-4 rounded-xl ${r.bg}`,children:e.jsx(r.icon,{className:`w-8 h-8 ${r.color}`})})]})},t))}),e.jsx("div",{className:"sticky top-4 z-10 bg-background/80 backdrop-blur-xl py-4 -my-4 animate-fade-in-up",children:e.jsxs("div",{className:"relative group max-w-2xl",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(D,{className:"h-5 w-5 text-text-subtle group-focus-within:text-primary transition-colors duration-300"})}),e.jsx("input",{type:"text",placeholder:"Search workspaces...",className:"block w-full pl-12 pr-4 py-4 bg-surface border border-border rounded-xl text-text-primary placeholder-text-subtle focus:ring-2 focus:ring-primary/50 focus:border-transparent transition-all duration-300 shadow-sm",value:l,onChange:r=>j(r.target.value)})]})}),g?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):p.length===0?e.jsxs("div",{className:"text-center py-20 bg-surface border border-dashed border-border rounded-3xl animate-fade-in",children:[e.jsx("div",{className:"w-20 h-20 bg-surface rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(d,{className:"w-10 h-10 text-text-subtle"})}),e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-2",children:"No workspaces found"}),e.jsx("p",{className:"text-text-secondary max-w-sm mx-auto mb-8",children:l?"Try adjusting your search terms":"Create your first workspace to get started with Cloudiverse"}),e.jsx("button",{onClick:x,className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-text-primary hover:bg-white/10 transition-colors font-medium",children:"Create New Project"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 animate-fade-in-up",children:p.map(r=>e.jsxs("div",{onClick:()=>s(`/workspace/${r.id}`),className:"group relative bg-surface border border-border rounded-2xl overflow-hidden hover:border-primary/50 transition-all duration-300 hover:shadow-2xl hover:shadow-primary/5 cursor-pointer flex flex-col",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full blur-3xl -mr-16 -mt-16 group-hover:bg-primary/10 transition-colors duration-500"}),e.jsxs("div",{className:"p-6 flex-1 relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"p-3 bg-background rounded-xl border border-border shadow-sm group-hover:scale-110 transition-transform duration-300",children:e.jsx(d,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[(r.step==="deployed"||r.step==="active_deployment")&&e.jsxs("span",{className:"px-3 py-1 bg-green-500/10 text-green-400 text-xs font-bold rounded-full border border-green-500/20 shadow-sm flex items-center gap-1.5",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"}),"LIVE"]}),r.step==="ready_for_deployment"&&e.jsxs("span",{className:"px-3 py-1 bg-amber-500/10 text-amber-400 text-xs font-bold rounded-full border border-amber-500/20 shadow-sm flex items-center gap-1.5",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-amber-400 animate-pulse"}),"READY"]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),s(`/workspace/${r.id}/settings`)},className:"p-2 hover:bg-white/5 rounded-lg text-text-subtle hover:text-primary transition-colors",children:e.jsx(u,{className:"w-5 h-5"})})]})]}),e.jsx("h3",{className:"text-xl font-bold text-text-primary mb-2 line-clamp-1 group-hover:text-primary transition-colors",children:r.name}),e.jsx("p",{className:"text-text-secondary text-sm line-clamp-2 mb-6 h-10",children:r.description||"No description provided"}),e.jsx("div",{className:"flex items-center gap-4 pt-6 border-t border-border mt-auto",children:e.jsxs("div",{className:"flex items-center text-xs text-text-subtle",children:[e.jsx(W,{className:"w-3.5 h-3.5 mr-1.5"}),e.jsx("span",{children:v(r.updated_at)})]})})]})]},r.id))})]})})};export{T as default};
