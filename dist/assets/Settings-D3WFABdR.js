import{j as e,u as V}from"./index-BJ2RQODn.js";import{r as x,u as W,b as Z}from"./vendor-Bj8RrwSB.js";import{a as g,B as u}from"./utils-D7-Zsnno.js";import{U as k,N as I,d as H,K,Q as F,V as j,W as T,g as Q,Z as Y,r as P,$ as L,a0 as R,p as J,a1 as X,q as ee,a2 as te,a3 as q,a4 as v,S as M,a5 as se,a6 as ae,h as D,L as re}from"./ui-27QXhGAK.js";const B=({user:t})=>{const[i,s]=x.useState(!1),[n,a]=x.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",company:(t==null?void 0:t.company)||""}),[p,o]=x.useState(!1),c=l=>{a({...n,[l.target.name]:l.target.value})},h=async()=>{var l,b;o(!0);try{const d=localStorage.getItem("token"),w=await g.put("http://localhost:5000/api/auth/profile",n,{headers:{Authorization:`Bearer ${d}`}});u.success("Profile updated successfully"),s(!1),setTimeout(()=>window.location.reload(),800)}catch(d){u.error(((b=(l=d.response)==null?void 0:l.data)==null?void 0:b.message)||"Failed to update profile")}finally{o(!1)}},r=()=>{confirm("DANGER: This action is permanent! Are you sure you want to delete your account?")&&u.error("Contact support to delete account manually for now.")};return e.jsxs("div",{className:"p-6 md:p-10 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold bg-gradient-brand bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(k,{className:"text-primary w-6 h-6"})," Account Profile"]}),i?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 text-text-secondary hover:text-text-primary text-sm font-medium transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:h,disabled:p,className:"px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors flex items-center gap-2",children:[p?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(I,{className:"w-4 h-4"}),"Save Changes"]})]}):e.jsx("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-primary border border-primary/20 rounded-lg text-sm font-medium transition-colors",children:"Edit Profile"})]}),e.jsxs("div",{className:"space-y-6 max-w-3xl",children:[e.jsx("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-8 backdrop-blur-sm shadow-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Display Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-subtle w-5 h-5"}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:c,disabled:!i,className:`w-full pl-10 pr-4 py-3 border rounded-xl transition-all outline-none ${i?"bg-background border-primary/50 text-text-primary focus:ring-2 focus:ring-primary/20":"bg-white/5 border-transparent text-text-secondary cursor-not-allowed"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-subtle w-5 h-5"}),e.jsx("input",{type:"email",name:"email",value:n.email,onChange:c,disabled:!i,className:`w-full pl-10 pr-4 py-3 border rounded-xl transition-all outline-none ${i?"bg-background border-primary/50 text-text-primary focus:ring-2 focus:ring-primary/20":"bg-white/5 border-transparent text-text-secondary cursor-not-allowed"}`})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Company / Organization"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-subtle w-5 h-5"}),e.jsx("input",{type:"text",name:"company",value:n.company,onChange:c,placeholder:"Company Name",disabled:!i,className:`w-full pl-10 pr-4 py-3 border rounded-xl transition-all outline-none ${i?"bg-background border-primary/50 text-text-primary focus:ring-2 focus:ring-primary/20":"bg-white/5 border-transparent text-text-secondary cursor-not-allowed"}`})]})]})]})}),e.jsxs("div",{className:"pt-8 border-t border-white/10",children:[e.jsxs("h3",{className:"text-sm font-medium text-red-400 mb-2 flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"})," Danger Zone"]}),e.jsxs("div",{className:"bg-red-500/5 border border-red-500/10 rounded-xl p-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Permanently delete your account and all associated data."}),e.jsx("p",{className:"text-xs text-text-subtle mt-1",children:"This action cannot be undone."})]}),e.jsx("button",{onClick:r,className:"px-4 py-2 border border-red-500/30 text-red-500 hover:bg-red-500/10 rounded-lg text-sm transition-colors font-medium whitespace-nowrap",children:"Delete Account"})]})]})]})]})},le=()=>{var w,S,C,A,$,U,z,_;const[t,i]=x.useState(!0),[s,n]=x.useState(null),[a,p]=x.useState(null),[o,c]=x.useState(!1);x.useEffect(()=>{r(),h()},[]);const h=async()=>{try{const m=localStorage.getItem("token"),f=await g.get("http://localhost:5000/api/billing/usage",{headers:{Authorization:`Bearer ${m}`}});p(f.data)}catch(m){console.error("Failed to fetch usage",m)}},r=async()=>{try{const m=localStorage.getItem("token"),f=await g.get("http://localhost:5000/api/billing/status",{headers:{Authorization:`Bearer ${m}`}});n(f.data)}catch(m){console.error(m),u.error("Failed to load billing status")}finally{i(!1)}},l=async()=>{var m,f;c(!0);try{const y=localStorage.getItem("token"),{data:E}=await g.post("http://localhost:5000/api/billing/subscription",{},{headers:{Authorization:`Bearer ${y}`}}),G={key:E.key_id,subscription_id:E.subscription_id,name:"Cloudiverse Pro",description:"Upgrade to Pro Plan",handler:async function(N){try{const O=await g.post("http://localhost:5000/api/billing/verify",{razorpay_payment_id:N.razorpay_payment_id,razorpay_subscription_id:N.razorpay_subscription_id,razorpay_signature:N.razorpay_signature},{headers:{Authorization:`Bearer ${y}`}});u.success("Upgrade Successful! Welcome to Pro."),r()}catch{u.error("Payment Verification Failed.")}},theme:{color:"#4285F4"}};new window.Razorpay(G).open()}catch(y){console.error(y),u.error(((f=(m=y.response)==null?void 0:m.data)==null?void 0:f.error)||"Upgrade failed")}finally{c(!1)}},b=async()=>{if(confirm("Are you sure? You will lose Pro features at the end of the billing period."))try{c(!0);const m=localStorage.getItem("token");await g.post("http://localhost:5000/api/billing/cancel",{},{headers:{Authorization:`Bearer ${m}`}}),u.success("Subscription cancelled. Active until period end."),r()}catch{u.error("Cancellation failed")}finally{c(!1)}};if(t)return e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx(j,{className:"animate-spin text-primary w-8 h-8"})});const d=(s==null?void 0:s.plan)==="pro"&&(s==null?void 0:s.status)==="active"||(s==null?void 0:s.status)==="canceled_active";return e.jsxs("div",{className:"p-6 md:p-10 animate-fade-in relative",children:[e.jsxs("h2",{className:"text-2xl font-bold bg-gradient-brand bg-clip-text text-transparent mb-8 flex items-center gap-2",children:[e.jsx(T,{className:"text-primary w-6 h-6"})," Billing & Plans"]}),e.jsx("div",{className:"mb-12",children:e.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-8 border ${d?"bg-gradient-to-br from-primary/20 via-primary/5 to-background border-primary/30 shadow-lg shadow-primary/10":"bg-white/5 border-white/10"}`,children:[e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-sm font-semibold tracking-wider text-text-secondary uppercase",children:"Current Plan"}),d&&e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold border ${(s==null?void 0:s.status)==="canceled_active"?"bg-orange-500/20 text-orange-400 border-orange-500/20":"bg-primary/20 text-primary border-primary/20"}`,children:(s==null?void 0:s.status)==="canceled_active"?"CANCELLATION PENDING":"PRO ACTIVE"})]}),e.jsxs("h3",{className:"text-3xl font-black text-text-primary flex items-center gap-3",children:[d?"Pro Plan":"Free Tier",d&&e.jsx(Q,{className:"w-6 h-6 text-yellow-400 fill-yellow-400 drop-shadow-glow"})]}),e.jsx("p",{className:"text-text-secondary mt-2",children:d?(s==null?void 0:s.status)==="canceled_active"?`Access expires on ${new Date(s.renewal_date).toLocaleDateString()}`:`Next billing date: ${new Date(s.renewal_date).toLocaleDateString()}`:"Basic access for personal projects and prototypes."})]}),d&&e.jsx("div",{className:"flex flex-col gap-3",children:(s==null?void 0:s.status)==="canceled_active"?e.jsx("button",{onClick:l,disabled:o,className:"px-5 py-2.5 bg-primary/10 text-primary hover:bg-primary/20 rounded-xl font-medium transition-colors text-sm",children:"Resubscribe"}):e.jsx("button",{onClick:b,disabled:o,className:"px-5 py-2.5 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-xl font-medium transition-colors text-sm",children:"Cancel Subscription"})})]}),d&&e.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-64 h-64 bg-primary/20 blur-3xl rounded-full pointer-events-none"})]})}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("h3",{className:"text-xl font-bold text-text-primary mb-6 flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5 text-primary"})," Usage Statistics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-surface border border-white/5",children:[e.jsx("div",{className:"text-text-secondary text-sm mb-2",children:"Projects Created"}),e.jsxs("div",{className:"text-3xl font-bold text-text-primary",children:[((w=a==null?void 0:a.usage)==null?void 0:w.projects)||0," ",e.jsxs("span",{className:"text-base font-normal text-text-subtle",children:["/ ",((S=a==null?void 0:a.limits)==null?void 0:S.projects)===null?"∞":((C=a==null?void 0:a.limits)==null?void 0:C.projects)||3]})]}),e.jsx("div",{className:"w-full bg-white/10 h-1.5 rounded-full mt-4 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${d?"bg-primary":"bg-yellow-500"}`,style:{width:`${Math.min(100,(((A=a==null?void 0:a.usage)==null?void 0:A.projects)||0)/((($=a==null?void 0:a.limits)==null?void 0:$.projects)||3)*100)}%`}})})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-surface border border-white/5",children:[e.jsx("div",{className:"text-text-secondary text-sm mb-2",children:"AI Requests"}),e.jsx("div",{className:"text-3xl font-bold text-text-primary",children:((U=a==null?void 0:a.usage)==null?void 0:U.ai_requests)||0}),e.jsx("div",{className:"text-xs text-text-subtle mt-2",children:"Total AI generations used"})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-surface border border-white/5",children:[e.jsx("div",{className:"text-text-secondary text-sm mb-2",children:"Exports (TF/Reports)"}),e.jsx("div",{className:"text-3xl font-bold text-text-primary",children:(((z=a==null?void 0:a.usage)==null?void 0:z.terraform_exports)||0)+(((_=a==null?void 0:a.usage)==null?void 0:_.report_downloads)||0)}),e.jsx("div",{className:"text-xs text-text-subtle mt-2",children:"Total exports generated"})]})]})]}),!d&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl",children:[e.jsxs("div",{className:"relative p-8 rounded-3xl border border-white/10 bg-white/5 backdrop-blur-sm flex flex-col",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary",children:"Free"}),e.jsxs("div",{className:"flex items-baseline gap-1 mt-2",children:[e.jsx("span",{className:"text-4xl font-black text-text-primary",children:"₹0"}),e.jsx("span",{className:"text-text-secondary",children:"/month"})]}),e.jsx("p",{className:"text-text-subtle mt-4 text-sm",children:"Perfect for hobbyists and learning cloud architecture."})]}),e.jsx("div",{className:"space-y-4 mb-8 flex-1",children:["3 Projects Limit","Basic Diagram Export","Community Support","Standard Processing"].map((m,f)=>e.jsxs("div",{className:"flex items-center gap-3 text-text-secondary",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center shrink-0",children:e.jsx(P,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-sm",children:m})]},f))}),e.jsx("button",{disabled:!0,className:"w-full py-3 rounded-xl bg-white/5 text-text-secondary font-semibold border border-white/10 cursor-default",children:"Current Plan"})]}),e.jsxs("div",{className:"relative p-1 rounded-3xl bg-gradient-to-b from-primary via-primary/50 to-purple-600 shadow-2xl shadow-primary/20 hover:scale-[1.02] transition-transform duration-300",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-primary to-purple-600 px-4 py-1 rounded-full text-xs font-bold text-white shadow-lg uppercase tracking-wide",children:"Most Popular"}),e.jsxs("div",{className:"h-full bg-surface rounded-[22px] p-8 flex flex-col relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/10 blur-[80px] rounded-full pointer-events-none -mr-16 -mt-16"}),e.jsxs("div",{className:"mb-6 relative z-10",children:[e.jsxs("h3",{className:"text-xl font-bold text-text-primary flex items-center gap-2",children:["Pro ",e.jsx(L,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"})]}),e.jsxs("div",{className:"flex items-baseline gap-1 mt-2",children:[e.jsx("span",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-primary to-purple-500",children:"₹999"}),e.jsx("span",{className:"text-text-secondary",children:"/month"})]}),e.jsx("p",{className:"text-text-subtle mt-4 text-sm",children:"For professionals needing full power and flexibility."})]}),e.jsx("div",{className:"space-y-4 mb-8 flex-1 relative z-10",children:["Unlimited Projects","Terraform Code Export","High-Res Report PDF","Priority Support","Advanced AI Models"].map((m,f)=>e.jsxs("div",{className:"flex items-center gap-3 text-text-primary",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-r from-primary to-purple-500 flex items-center justify-center shrink-0 shadow-md shadow-primary/20",children:e.jsx(P,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-sm font-medium",children:m})]},f))}),e.jsx("button",{onClick:l,disabled:o,className:"w-full py-4 rounded-xl bg-gradient-to-r from-primary to-purple-600 text-white font-bold shadow-lg shadow-primary/30 hover:shadow-primary/50 transition-all flex justify-center items-center gap-2 group relative z-10",children:o?e.jsx(j,{className:"animate-spin w-5 h-5"}):e.jsxs(e.Fragment,{children:["Upgrade Now ",e.jsx(L,{className:"w-4 h-4 group-hover:scale-110 transition-transform fill-white/20"})]})})]})]})]})]})},ie=()=>{const[t,i]=x.useState(null),[s,n]=x.useState(!0);if(x.useEffect(()=>{(async()=>{var o,c,h;try{const r=localStorage.getItem("token"),l=await g.get("http://localhost:5000/api/settings",{headers:{Authorization:`Bearer ${r}`}}),b=((c=(o=l.data)==null?void 0:o.usage)==null?void 0:c.projects_used)||0,d=((h=l.data)==null?void 0:h.plan)==="pro";i({projects:{used:b,limit:d?1e3:3,label:d?"Unlimited":"3 Projects"},storage:{used:1.2,limit:5,unit:"GB"},apiCalls:{used:142,limit:1e3,unit:"reqs"}})}catch{console.error("Failed to fetch usage stats")}finally{n(!1)}})()},[]),s)return e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx(j,{className:"animate-spin text-primary w-8 h-8"})});const a=p=>p>=100?"bg-red-500":p>=80?"bg-yellow-500":"bg-primary";return e.jsxs("div",{className:"p-6 md:p-10 animate-fade-in",children:[e.jsxs("h2",{className:"text-2xl font-bold bg-gradient-brand bg-clip-text text-transparent mb-8 flex items-center gap-2",children:[e.jsx(R,{className:"text-primary w-6 h-6"})," Usage Metrics"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-sm shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-500/10 rounded-xl text-blue-500",children:e.jsx(J,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs font-medium text-text-subtle bg-white/5 px-2 py-1 rounded-lg",children:"Real-time"})]}),e.jsx("h3",{className:"text-text-secondary font-medium mb-1",children:"Active Projects"}),e.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[e.jsx("span",{className:"text-3xl font-bold text-text-primary",children:t.projects.used}),e.jsxs("span",{className:"text-sm text-text-secondary",children:["/ ",t.projects.label]})]}),e.jsx("div",{className:"w-full h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out ${a(t.projects.used/t.projects.limit*100)}`,style:{width:`${Math.min(t.projects.used/t.projects.limit*100,100)}%`}})}),t.projects.used>=t.projects.limit&&t.projects.label!=="Unlimited"&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-yellow-500 text-sm bg-yellow-500/10 p-2 rounded-lg",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"Limit reached. Upgrade for more."})]})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-sm shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-500/10 rounded-xl text-purple-500",children:e.jsx(ee,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs font-medium text-text-subtle bg-white/5 px-2 py-1 rounded-lg",children:"Estimated"})]}),e.jsx("h3",{className:"text-text-secondary font-medium mb-1",children:"Storage Used"}),e.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[e.jsx("span",{className:"text-3xl font-bold text-text-primary",children:t.storage.used}),e.jsxs("span",{className:"text-sm text-text-secondary",children:["/ ",t.storage.limit," ",t.storage.unit]})]}),e.jsx("div",{className:"w-full h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-500 w-[24%] rounded-full"})})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-sm shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-green-500/10 rounded-xl text-green-500",children:e.jsx(te,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs font-medium text-text-subtle bg-white/5 px-2 py-1 rounded-lg",children:"This Month"})]}),e.jsx("h3",{className:"text-text-secondary font-medium mb-1",children:"AI Generations"}),e.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[e.jsx("span",{className:"text-3xl font-bold text-text-primary",children:t.apiCalls.used}),e.jsxs("span",{className:"text-sm text-text-secondary",children:["/ ",t.apiCalls.limit]})]}),e.jsx("div",{className:"w-full h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 w-[14%] rounded-full"})})]})]}),e.jsx("p",{className:"text-center text-text-subtle text-sm",children:"Usage metrics are updated in real-time. Usage resets at the start of each billing cycle."})]})},ne=()=>{const[t,i]=x.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[s,n]=x.useState(!1),a=o=>{i({...t,[o.target.name]:o.target.value})},p=async o=>{var c,h;if(o.preventDefault(),t.newPassword!==t.confirmPassword)return u.error("New passwords do not match");if(t.newPassword.length<6)return u.error("Password must be at least 6 characters");n(!0);try{const r=localStorage.getItem("token");await g.put("http://localhost:5000/api/auth/update-password",{currentPassword:t.currentPassword,newPassword:t.newPassword},{headers:{Authorization:`Bearer ${r}`}}),u.success("Password updated successfully"),i({currentPassword:"",newPassword:"",confirmPassword:""})}catch(r){u.error(((h=(c=r.response)==null?void 0:c.data)==null?void 0:h.message)||"Failed to update password")}finally{n(!1)}};return e.jsxs("div",{className:"p-6 md:p-10 animate-fade-in",children:[e.jsxs("h2",{className:"text-2xl font-bold bg-gradient-brand bg-clip-text text-transparent mb-6 flex items-center gap-2",children:[e.jsx(q,{className:"text-primary w-6 h-6"})," Security Settings"]}),e.jsx("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-8 max-w-2xl backdrop-blur-sm shadow-xl",children:e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-subtle w-5 h-5"}),e.jsx("input",{type:"password",name:"currentPassword",value:t.currentPassword,onChange:a,required:!0,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-xl text-text-primary focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none",placeholder:"Enter current password"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-subtle w-5 h-5"}),e.jsx("input",{type:"password",name:"newPassword",value:t.newPassword,onChange:a,required:!0,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-xl text-text-primary focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none",placeholder:"Enter new password (min. 6 chars)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-subtle w-5 h-5"}),e.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:a,required:!0,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-xl text-text-primary focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none",placeholder:"Confirm new password"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{type:"submit",disabled:s,className:"px-6 py-3 bg-primary text-white font-semibold rounded-xl hover:bg-primary/90 transition-all flex items-center gap-2 shadow-lg shadow-primary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[s?e.jsx(j,{className:"w-5 h-5 animate-spin"}):e.jsx(P,{className:"w-5 h-5"}),"Update Password"]})})]})}),e.jsxs("div",{className:"mt-8 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-xl flex items-start gap-3",children:[e.jsx(F,{className:"w-5 h-5 text-yellow-500 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-yellow-500 font-semibold text-sm",children:"Security Tip"}),e.jsx("p",{className:"text-text-secondary text-sm mt-1",children:"Choosing a strong, unique password helps keep your cloud infrastructure secure. We recommend using a password manager."})]})]})]})},oe=()=>{const[t,i]=x.useState({emailNotifications:!0,marketingEmails:!1,theme:"system"}),[s,n]=x.useState(!1),[a,p]=x.useState(!0);x.useEffect(()=>{o()},[]);const o=async()=>{try{const r=localStorage.getItem("token"),l=await g.get("http://localhost:5000/api/settings",{headers:{Authorization:`Bearer ${r}`}});l.data&&l.data.preferences&&i(b=>({...b,...l.data.preferences}))}catch(r){console.error("Failed to load preferences",r)}finally{p(!1)}},c=async()=>{n(!0);try{const r=localStorage.getItem("token");await g.put("http://localhost:5000/api/settings/preferences",{preferences:t},{headers:{Authorization:`Bearer ${r}`}}),u.success("Preferences saved successfully")}catch{u.error("Failed to save preferences")}finally{n(!1)}},h=({checked:r,onChange:l})=>e.jsx("button",{onClick:()=>l(!r),className:`w-12 h-6 rounded-full p-1 transition-colors duration-200 ease-in-out ${r?"bg-primary":"bg-gray-600"}`,children:e.jsx("div",{className:`w-4 h-4 rounded-full bg-white shadow-sm transform transition-transform duration-200 ease-in-out ${r?"translate-x-6":"translate-x-0"}`})});return a?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx(j,{className:"animate-spin text-primary"})}):e.jsxs("div",{className:"p-6 md:p-10 animate-fade-in",children:[e.jsxs("h2",{className:"text-2xl font-bold bg-gradient-brand bg-clip-text text-transparent mb-6 flex items-center gap-2",children:[e.jsx(M,{className:"text-primary w-6 h-6"})," Preferences"]}),e.jsxs("div",{className:"max-w-3xl space-y-6",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-sm shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-text-secondary"})," Email Notifications"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-text-primary font-medium",children:"Deployment Alerts"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Get notified when your deployments succeed or fail."})]}),e.jsx(h,{checked:t.emailNotifications,onChange:r=>i(l=>({...l,emailNotifications:r}))})]}),e.jsx("div",{className:"border-t border-border/50 my-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-text-primary font-medium",children:"Product Updates"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"Receive news about new features and improvements."})]}),e.jsx(h,{checked:t.marketingEmails,onChange:r=>i(l=>({...l,marketingEmails:r}))})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:c,disabled:s,className:"px-6 py-3 bg-primary text-white font-semibold rounded-xl hover:bg-primary/90 transition-all flex items-center gap-2 shadow-lg shadow-primary/20",children:[s?e.jsx(j,{className:"w-5 h-5 animate-spin"}):e.jsx(I,{className:"w-5 h-5"}),"Save Preferences"]})})]})]})},he=()=>{var h,r;const{user:t,logout:i}=V(),s=W();Z();const[n,a]=x.useState("account"),p=[{id:"account",label:"Account",icon:k},{id:"billing",label:"Billing & Plans",icon:T},{id:"usage",label:"Usage & Limits",icon:R},{id:"security",label:"Security",icon:q},{id:"preferences",label:"Preferences",icon:M}],o=()=>{i(),s("/login")},c=()=>{switch(n){case"account":return e.jsx(B,{user:t});case"billing":return e.jsx(le,{});case"usage":return e.jsx(ie,{});case"security":return e.jsx(ne,{});case"preferences":return e.jsx(oe,{});default:return e.jsx(B,{user:t})}};return e.jsxs("div",{className:"min-h-screen bg-background text-text-primary font-sans flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:hidden p-4 border-b border-white/10 flex items-center justify-between bg-surface/50 backdrop-blur-md sticky top-0 z-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>s("/workspaces"),className:"p-2 hover:bg-white/10 rounded-lg",children:e.jsx(ae,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-bold text-lg",children:"Settings"})]}),e.jsx("button",{onClick:o,className:"p-2 text-red-400 hover:bg-red-500/10 rounded-lg",children:e.jsx(D,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"hidden md:flex flex-col w-72 border-r border-white/5 bg-surface/30 h-screen sticky top-0 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2 cursor-pointer group",onClick:()=>s("/workspaces"),children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-blue-600 flex items-center justify-center shadow-lg shadow-primary/20 group-hover:scale-105 transition-transform",children:e.jsx(re,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex items-center",children:e.jsx("a",{href:"/",children:e.jsx("img",{src:"/cloudiverse.png",alt:"Cloudiverse Architect",className:"h-12 w-auto"})})})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h3",{className:"text-xs font-semibold text-text-subtle uppercase tracking-wider px-4 mb-4",children:"Settings"}),p.map(l=>{const b=l.icon,d=n===l.id;return e.jsxs("button",{onClick:()=>a(l.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group text-sm font-medium ${d?"bg-primary/10 text-primary shadow-sm ring-1 ring-primary/20":"text-text-secondary hover:bg-white/5 hover:text-text-primary"}`,children:[e.jsx(b,{className:`w-5 h-5 ${d?"text-primary":"text-text-subtle group-hover:text-text-primary"}`}),l.label]},l.id)})]}),e.jsxs("div",{className:"pt-6 border-t border-white/5 space-y-2",children:[e.jsxs("button",{onClick:o,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-text-secondary hover:bg-red-500/10 hover:text-red-400 transition-colors text-sm font-medium",children:[e.jsx(D,{className:"w-5 h-5"}),"Sign Out"]}),e.jsx("div",{className:"px-4 py-4 mt-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-brand flex items-center justify-center text-white font-bold text-xs shadow-inner",children:((h=t==null?void 0:t.name)==null?void 0:h.charAt(0))||"U"}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("p",{className:"text-sm font-medium truncate text-text-primary",children:(t==null?void 0:t.name)||"User"}),e.jsx("p",{className:"text-xs text-text-subtle truncate",children:t==null?void 0:t.email})]})]})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto h-screen bg-background relative",children:[e.jsxs("div",{className:"hidden md:flex justify-between items-center px-10 py-6 border-b border-white/5 bg-background/80 backdrop-blur-xl sticky top-0 z-40",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-text-primary",children:(r=p.find(l=>l.id===n))==null?void 0:r.label}),e.jsxs("p",{className:"text-sm text-text-secondary",children:["Manage your ",n," preferences"]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{onClick:()=>s("/workspaces"),className:"px-4 py-2 bg-white/5 hover:bg-white/10 text-text-primary rounded-lg text-sm font-medium border border-white/10 transition-all flex items-center gap-2",children:"Back to Dashboard"})})]}),e.jsx("div",{className:"max-w-5xl mx-auto pb-20",children:c()})]})]})};export{he as default};
