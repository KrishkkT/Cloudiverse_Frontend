import{u as m,j as e}from"./index-lHb7DQJg.js";import{u as x,r as o,f as u}from"./vendor-rtOnKvnR.js";import{O as f}from"./ui-CG_uZszz.js";import"./utils-_x9ZSjUA.js";const k=()=>{const{user:j}=m(),n=x(),[h,t]=o.useState(!0),[i,r]=o.useState(null),l=u.useRef(!1);o.useEffect(()=>{l.current||(l.current=!0,p())},[]);const p=async()=>{try{const s=localStorage.getItem("token"),d={name:"New Project",description:"",project_data:{appDescription:"",projectName:"New Project"}},a=await fetch("http://localhost:5000/api/workspaces",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(d)});if(a.ok){const c=await a.json();n(`/workspace/${c.id}`,{replace:!0})}else{const c=await a.json();r(c.message||"Failed to create workspace"),t(!1)}}catch(s){console.error("Error creating workspace:",s),r("Failed to create workspace. Please try again."),t(!1)}};return i?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("span",{className:"material-icons text-4xl",children:"error_outline"})}),e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Error Creating Workspace"}),e.jsx("p",{className:"text-text-secondary mb-6",children:i}),e.jsxs("div",{className:"flex space-x-3 justify-center",children:[e.jsx("button",{onClick:()=>n("/workspaces"),className:"btn btn-secondary px-4 py-2",children:"Back to Dashboard"}),e.jsx("button",{onClick:()=>{r(null),t(!0),p()},className:"btn btn-primary px-4 py-2",children:"Try Again"})]})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"animate-spin text-primary mx-auto mb-4",size:48}),e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Creating Workspace..."}),e.jsx("p",{className:"text-text-secondary",children:"Setting up your new project"})]})})};export{k as default};
