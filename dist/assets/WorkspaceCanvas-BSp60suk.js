import{j as e}from"./index-BJnrtPxY.js";import{r as V,g as ms,c as Pe,f as Oe,e as fs,u as ps}from"./vendor-C8h9W7XM.js";import{a as Ie}from"./utils-Bh3U_nHs.js";import{c as it,u as xs,a as yt,s as gs,z as bs,P as ys,b as Zr,i as ws,p as vs,g as _s,d as Hr,e as js,f as Ns,h as ks,j as Cs,k as Ss,R as Es,B as As,C as zs,l as Fr}from"./style-CYCMsbVC.js";import"./ui-fva4O29X.js";let Is={data:""},Rs=r=>{if(typeof window=="object"){let l=(r?r.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return l.nonce=window.__nonce__,l.parentNode||(r||document.head).appendChild(l),l.firstChild}return r||Is},Fs=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Os=/\/\*[^]*?\*\/|  +/g,Or=/\n+/g,Me=(r,l)=>{let t="",d="",h="";for(let i in r){let n=r[i];i[0]=="@"?i[1]=="i"?t=i+" "+n+";":d+=i[1]=="f"?Me(n,i):i+"{"+Me(n,i[1]=="k"?"":l)+"}":typeof n=="object"?d+=Me(n,l?l.replace(/([^,])+/g,s=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,s):s?s+" "+c:c)):i):n!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),h+=Me.p?Me.p(i,n):i+":"+n+";")}return t+(l&&h?l+"{"+h+"}":h)+d},De={},qr=r=>{if(typeof r=="object"){let l="";for(let t in r)l+=t+qr(r[t]);return l}return r},Ts=(r,l,t,d,h)=>{let i=qr(r),n=De[i]||(De[i]=(c=>{let b=0,p=11;for(;b<c.length;)p=101*p+c.charCodeAt(b++)>>>0;return"go"+p})(i));if(!De[n]){let c=i!==r?r:(b=>{let p,y,g=[{}];for(;p=Fs.exec(b.replace(Os,""));)p[4]?g.shift():p[3]?(y=p[3].replace(Or," ").trim(),g.unshift(g[0][y]=g[0][y]||{})):g[0][p[1]]=p[2].replace(Or," ").trim();return g[0]})(r);De[n]=Me(h?{["@keyframes "+n]:c}:c,t?"":"."+n)}let s=t&&De.g?De.g:null;return t&&(De.g=De[n]),((c,b,p,y)=>{y?b.data=b.data.replace(y,c):b.data.indexOf(c)===-1&&(b.data=p?c+b.data:b.data+c)})(De[n],l,d,s),n},Bs=(r,l,t)=>r.reduce((d,h,i)=>{let n=l[i];if(n&&n.call){let s=n(t),c=s&&s.props&&s.props.className||/^go/.test(s)&&s;n=c?"."+c:s&&typeof s=="object"?s.props?"":Me(s,""):s===!1?"":s}return d+h+(n??"")},"");function ht(r){let l=this||{},t=r.call?r(l.p):r;return Ts(t.unshift?t.raw?Bs(t,[].slice.call(arguments,1),l.p):t.reduce((d,h)=>Object.assign(d,h&&h.call?h(l.p):h),{}):t,Rs(l.target),l.g,l.o,l.k)}let Vr,wt,vt;ht.bind({g:1});let $e=ht.bind({k:1});function Ds(r,l,t,d){Me.p=l,Vr=r,wt=t,vt=d}function Ge(r,l){let t=this||{};return function(){let d=arguments;function h(i,n){let s=Object.assign({},i),c=s.className||h.className;t.p=Object.assign({theme:wt&&wt()},s),t.o=/ *go\d+/.test(c),s.className=ht.apply(t,d)+(c?" "+c:"");let b=r;return r[0]&&(b=s.as||r,delete s.as),vt&&b[0]&&vt(s),Vr(b,s)}return l?l(h):h}}var Ps=r=>typeof r=="function",ct=(r,l)=>Ps(r)?r(l):r,$s=(()=>{let r=0;return()=>(++r).toString()})(),Yr=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let l=matchMedia("(prefers-reduced-motion: reduce)");r=!l||l.matches}return r}})(),Ls=20,jt="default",Kr=(r,l)=>{let{toastLimit:t}=r.settings;switch(l.type){case 0:return{...r,toasts:[l.toast,...r.toasts].slice(0,t)};case 1:return{...r,toasts:r.toasts.map(n=>n.id===l.toast.id?{...n,...l.toast}:n)};case 2:let{toast:d}=l;return Kr(r,{type:r.toasts.find(n=>n.id===d.id)?1:0,toast:d});case 3:let{toastId:h}=l;return{...r,toasts:r.toasts.map(n=>n.id===h||h===void 0?{...n,dismissed:!0,visible:!1}:n)};case 4:return l.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(n=>n.id!==l.toastId)};case 5:return{...r,pausedAt:l.time};case 6:let i=l.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(n=>({...n,pauseDuration:n.pauseDuration+i}))}}},lt=[],Xr={toasts:[],pausedAt:void 0,settings:{toastLimit:Ls}},Te={},Jr=(r,l=jt)=>{Te[l]=Kr(Te[l]||Xr,r),lt.forEach(([t,d])=>{t===l&&d(Te[l])})},Qr=r=>Object.keys(Te).forEach(l=>Jr(r,l)),Us=r=>Object.keys(Te).find(l=>Te[l].toasts.some(t=>t.id===r)),mt=(r=jt)=>l=>{Jr(l,r)},Ms={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ws=(r={},l=jt)=>{let[t,d]=V.useState(Te[l]||Xr),h=V.useRef(Te[l]);V.useEffect(()=>(h.current!==Te[l]&&d(Te[l]),lt.push([l,d]),()=>{let n=lt.findIndex(([s])=>s===l);n>-1&&lt.splice(n,1)}),[l]);let i=t.toasts.map(n=>{var s,c,b;return{...r,...r[n.type],...n,removeDelay:n.removeDelay||((s=r[n.type])==null?void 0:s.removeDelay)||(r==null?void 0:r.removeDelay),duration:n.duration||((c=r[n.type])==null?void 0:c.duration)||(r==null?void 0:r.duration)||Ms[n.type],style:{...r.style,...(b=r[n.type])==null?void 0:b.style,...n.style}}});return{...t,toasts:i}},Gs=(r,l="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:l,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:(t==null?void 0:t.id)||$s()}),tt=r=>(l,t)=>{let d=Gs(l,r,t);return mt(d.toasterId||Us(d.id))({type:2,toast:d}),d.id},Ne=(r,l)=>tt("blank")(r,l);Ne.error=tt("error");Ne.success=tt("success");Ne.loading=tt("loading");Ne.custom=tt("custom");Ne.dismiss=(r,l)=>{let t={type:3,toastId:r};l?mt(l)(t):Qr(t)};Ne.dismissAll=r=>Ne.dismiss(void 0,r);Ne.remove=(r,l)=>{let t={type:4,toastId:r};l?mt(l)(t):Qr(t)};Ne.removeAll=r=>Ne.remove(void 0,r);Ne.promise=(r,l,t)=>{let d=Ne.loading(l.loading,{...t,...t==null?void 0:t.loading});return typeof r=="function"&&(r=r()),r.then(h=>{let i=l.success?ct(l.success,h):void 0;return i?Ne.success(i,{id:d,...t,...t==null?void 0:t.success}):Ne.dismiss(d),h}).catch(h=>{let i=l.error?ct(l.error,h):void 0;i?Ne.error(i,{id:d,...t,...t==null?void 0:t.error}):Ne.dismiss(d)}),r};var Zs=1e3,Hs=(r,l="default")=>{let{toasts:t,pausedAt:d}=Ws(r,l),h=V.useRef(new Map).current,i=V.useCallback((y,g=Zs)=>{if(h.has(y))return;let u=setTimeout(()=>{h.delete(y),n({type:4,toastId:y})},g);h.set(y,u)},[]);V.useEffect(()=>{if(d)return;let y=Date.now(),g=t.map(u=>{if(u.duration===1/0)return;let w=(u.duration||0)+u.pauseDuration-(y-u.createdAt);if(w<0){u.visible&&Ne.dismiss(u.id);return}return setTimeout(()=>Ne.dismiss(u.id,l),w)});return()=>{g.forEach(u=>u&&clearTimeout(u))}},[t,d,l]);let n=V.useCallback(mt(l),[l]),s=V.useCallback(()=>{n({type:5,time:Date.now()})},[n]),c=V.useCallback((y,g)=>{n({type:1,toast:{id:y,height:g}})},[n]),b=V.useCallback(()=>{d&&n({type:6,time:Date.now()})},[d,n]),p=V.useCallback((y,g)=>{let{reverseOrder:u=!1,gutter:w=8,defaultPosition:m}=g||{},f=t.filter(C=>(C.position||m)===(y.position||m)&&C.height),x=f.findIndex(C=>C.id===y.id),_=f.filter((C,N)=>N<x&&C.visible).length;return f.filter(C=>C.visible).slice(...u?[_+1]:[0,_]).reduce((C,N)=>C+(N.height||0)+w,0)},[t]);return V.useEffect(()=>{t.forEach(y=>{if(y.dismissed)i(y.id,y.removeDelay);else{let g=h.get(y.id);g&&(clearTimeout(g),h.delete(y.id))}})},[t,i]),{toasts:t,handlers:{updateHeight:c,startPause:s,endPause:b,calculateOffset:p}}},qs=$e`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Vs=$e`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ys=$e`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ks=Ge("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${qs} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Vs} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Ys} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Xs=$e`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Js=Ge("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${Xs} 1s linear infinite;
`,Qs=$e`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ea=$e`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ta=Ge("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Qs} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ea} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ra=Ge("div")`
  position: absolute;
`,sa=Ge("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,aa=$e`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,na=Ge("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${aa} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ia=({toast:r})=>{let{icon:l,type:t,iconTheme:d}=r;return l!==void 0?typeof l=="string"?V.createElement(na,null,l):l:t==="blank"?null:V.createElement(sa,null,V.createElement(Js,{...d}),t!=="loading"&&V.createElement(ra,null,t==="error"?V.createElement(Ks,{...d}):V.createElement(ta,{...d})))},oa=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,la=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,ca="0%{opacity:0;} 100%{opacity:1;}",da="0%{opacity:1;} 100%{opacity:0;}",ua=Ge("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ha=Ge("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ma=(r,l)=>{let t=r.includes("top")?1:-1,[d,h]=Yr()?[ca,da]:[oa(t),la(t)];return{animation:l?`${$e(d)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${$e(h)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},fa=V.memo(({toast:r,position:l,style:t,children:d})=>{let h=r.height?ma(r.position||l||"top-center",r.visible):{opacity:0},i=V.createElement(ia,{toast:r}),n=V.createElement(ha,{...r.ariaProps},ct(r.message,r));return V.createElement(ua,{className:r.className,style:{...h,...t,...r.style}},typeof d=="function"?d({icon:i,message:n}):V.createElement(V.Fragment,null,i,n))});Ds(V.createElement);var pa=({id:r,className:l,style:t,onHeightUpdate:d,children:h})=>{let i=V.useCallback(n=>{if(n){let s=()=>{let c=n.getBoundingClientRect().height;d(r,c)};s(),new MutationObserver(s).observe(n,{subtree:!0,childList:!0,characterData:!0})}},[r,d]);return V.createElement("div",{ref:i,className:l,style:t},h)},xa=(r,l)=>{let t=r.includes("top"),d=t?{top:0}:{bottom:0},h=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Yr()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${l*(t?1:-1)}px)`,...d,...h}},ga=ht`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ot=16,ba=({reverseOrder:r,position:l="top-center",toastOptions:t,gutter:d,children:h,toasterId:i,containerStyle:n,containerClassName:s})=>{let{toasts:c,handlers:b}=Hs(t,i);return V.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:ot,left:ot,right:ot,bottom:ot,pointerEvents:"none",...n},className:s,onMouseEnter:b.startPause,onMouseLeave:b.endPause},c.map(p=>{let y=p.position||l,g=b.calculateOffset(p,{reverseOrder:r,gutter:d,defaultPosition:l}),u=xa(y,g);return V.createElement(pa,{id:p.id,key:p.id,onHeightUpdate:b.updateHeight,className:p.visible?ga:"",style:u},p.type==="custom"?ct(p.message,p):h?h(p):V.createElement(fa,{toast:p,position:y}))}))},we=Ne;const xt="http://localhost:5000/api",ya=({workspaceId:r,costEstimation:l,selectedProvider:t,onNext:d,onBack:h,costIntent:i,onFeedbackSubmitted:n,isDeployed:s})=>{const[c,b]=V.useState(null),[p,y]=V.useState(!1),g=async()=>{var u;if(!c&&!s){we.error("Please select an option");return}if(s){d();return}y(!0);try{const w=(u=l.provider_details)==null?void 0:u[t],m=(w==null?void 0:w.cost_range)||{min:0,max:0};let f="cost_effective";if(l.cost_profile)f=l.cost_profile;else if(l.selected_profile)f=l.selected_profile;else if(l.scenarios){const _=w==null?void 0:w.total_monthly_cost;for(const[C,N]of Object.entries(l.scenarios)){const E=N[t];if(E&&_){const O=E.monthly_cost||E.estimated_cost;if(O&&Math.abs(_-O)<.01){f=C;break}}}}f==="costeffective"||f==="cost_effective"||f==="costEffective"?f="cost_effective":f==="highperformance"||f==="high_performance"||f==="highPerformance"?f="high_performance":f==="standard"||f==="Standard"?f="standard":f="cost_effective";const x=xt.endsWith("/")?xt.slice(0,-1):xt;try{await Ie.post(`${x}/feedback`,{workspace_id:r,cost_intent:(i==null?void 0:i.type)||"startup",estimated_min:m.min||0,estimated_max:m.max||0,selected_provider:t,selected_profile:f,user_feedback:c}),we.success("Feedback recorded"),n&&n()}catch(_){console.warn("Feedback failed (non-blocking):",_),we.success("Proceeding to code generation..."),n&&n()}d()}catch(w){console.error("Feedback submission error:",w),we.error("Failed to submit feedback")}finally{y(!1)}};return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-fade-in pb-20",children:[e.jsxs("div",{className:"text-center space-y-4 mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"One Quick Question"}),e.jsx("p",{className:"text-gray-400",children:"Before we generate your Terraform code, help us calibrate our estimator."})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-8",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-6 text-center",children:s?"Cost estimate feedback provided.":"Is this cost estimate within your expected budget?"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>!s&&b("within_budget"),className:`p-4 rounded-xl border flex items-center justify-between transition-all ${c==="within_budget"?"bg-green-500/10 border-green-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"} ${s?"cursor-not-allowed opacity-60":""}`,children:[e.jsx("span",{className:"font-medium",children:"Yes, it looks reasonable"}),c==="within_budget"&&e.jsx("span",{className:"material-icons text-green-500",children:"check_circle"})]}),e.jsxs("button",{onClick:()=>!s&&b("slightly_high"),className:`p-4 rounded-xl border flex items-center justify-between transition-all ${c==="slightly_high"?"bg-yellow-500/10 border-yellow-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"} ${s?"cursor-not-allowed opacity-60":""}`,children:[e.jsx("span",{className:"font-medium",children:"It's a bit higher than expected"}),c==="slightly_high"&&e.jsx("span",{className:"material-icons text-yellow-500",children:"check_circle"})]}),e.jsxs("button",{onClick:()=>!s&&b("too_high"),className:`p-4 rounded-xl border flex items-center justify-between transition-all ${c==="too_high"?"bg-red-500/10 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"} ${s?"cursor-not-allowed opacity-60":""}`,children:[e.jsx("span",{className:"font-medium",children:"No, it's significantly too high"}),c==="too_high"&&e.jsx("span",{className:"material-icons text-red-500",children:"check_circle"})]}),e.jsxs("button",{onClick:()=>!s&&b("unknown"),className:`p-4 rounded-xl border flex items-center justify-between transition-all ${c==="unknown"?"bg-blue-500/10 border-blue-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"} ${s?"cursor-not-allowed opacity-60":""}`,children:[e.jsx("span",{className:"font-medium",children:"I'm not sure / I have no baseline"}),c==="unknown"&&e.jsx("span",{className:"material-icons text-blue-500",children:"check_circle"})]})]})]}),!s&&e.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-white/5",children:[e.jsxs("button",{onClick:h,className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[e.jsx("span",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{children:"Back to Estimate"})]}),e.jsx("button",{onClick:g,disabled:!c&&!s||p,className:"px-8 py-4 bg-gradient-to-r from-primary to-purple-500 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-primary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:s?"View Terraform":"Generate Terraform"}),e.jsx("span",{className:"material-icons",children:"code"})]})})]})]})};var es={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(r,l){(function(t){r.exports=t()})(function(){return function t(d,h,i){function n(b,p){if(!h[b]){if(!d[b]){var y=typeof it=="function"&&it;if(!p&&y)return y(b,!0);if(s)return s(b,!0);var g=new Error("Cannot find module '"+b+"'");throw g.code="MODULE_NOT_FOUND",g}var u=h[b]={exports:{}};d[b][0].call(u.exports,function(w){var m=d[b][1][w];return n(m||w)},u,u.exports,t,d,h,i)}return h[b].exports}for(var s=typeof it=="function"&&it,c=0;c<i.length;c++)n(i[c]);return n}({1:[function(t,d,h){var i=t("./utils"),n=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";h.encode=function(c){for(var b,p,y,g,u,w,m,f=[],x=0,_=c.length,C=_,N=i.getTypeOf(c)!=="string";x<c.length;)C=_-x,y=N?(b=c[x++],p=x<_?c[x++]:0,x<_?c[x++]:0):(b=c.charCodeAt(x++),p=x<_?c.charCodeAt(x++):0,x<_?c.charCodeAt(x++):0),g=b>>2,u=(3&b)<<4|p>>4,w=1<C?(15&p)<<2|y>>6:64,m=2<C?63&y:64,f.push(s.charAt(g)+s.charAt(u)+s.charAt(w)+s.charAt(m));return f.join("")},h.decode=function(c){var b,p,y,g,u,w,m=0,f=0,x="data:";if(c.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var _,C=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===s.charAt(64)&&C--,c.charAt(c.length-2)===s.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=n.uint8array?new Uint8Array(0|C):new Array(0|C);m<c.length;)b=s.indexOf(c.charAt(m++))<<2|(g=s.indexOf(c.charAt(m++)))>>4,p=(15&g)<<4|(u=s.indexOf(c.charAt(m++)))>>2,y=(3&u)<<6|(w=s.indexOf(c.charAt(m++))),_[f++]=b,u!==64&&(_[f++]=p),w!==64&&(_[f++]=y);return _}},{"./support":30,"./utils":32}],2:[function(t,d,h){var i=t("./external"),n=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),c=t("./stream/DataLengthProbe");function b(p,y,g,u,w){this.compressedSize=p,this.uncompressedSize=y,this.crc32=g,this.compression=u,this.compressedContent=w}b.prototype={getContentWorker:function(){var p=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),y=this;return p.on("end",function(){if(this.streamInfo.data_length!==y.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},b.createWorkerFrom=function(p,y,g){return p.pipe(new s).pipe(new c("uncompressedSize")).pipe(y.compressWorker(g)).pipe(new c("compressedSize")).withStreamInfo("compression",y)},d.exports=b},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,d,h){var i=t("./stream/GenericWorker");h.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},h.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,d,h){var i=t("./utils"),n=function(){for(var s,c=[],b=0;b<256;b++){s=b;for(var p=0;p<8;p++)s=1&s?3988292384^s>>>1:s>>>1;c[b]=s}return c}();d.exports=function(s,c){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(b,p,y,g){var u=n,w=g+y;b^=-1;for(var m=g;m<w;m++)b=b>>>8^u[255&(b^p[m])];return-1^b}(0|c,s,s.length,0):function(b,p,y,g){var u=n,w=g+y;b^=-1;for(var m=g;m<w;m++)b=b>>>8^u[255&(b^p.charCodeAt(m))];return-1^b}(0|c,s,s.length,0):0}},{"./utils":32}],5:[function(t,d,h){h.base64=!1,h.binary=!1,h.dir=!1,h.createFolders=!0,h.date=null,h.compression=null,h.compressionOptions=null,h.comment=null,h.unixPermissions=null,h.dosPermissions=null},{}],6:[function(t,d,h){var i=null;i=typeof Promise<"u"?Promise:t("lie"),d.exports={Promise:i}},{lie:37}],7:[function(t,d,h){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",n=t("pako"),s=t("./utils"),c=t("./stream/GenericWorker"),b=i?"uint8array":"array";function p(y,g){c.call(this,"FlateWorker/"+y),this._pako=null,this._pakoAction=y,this._pakoOptions=g,this.meta={}}h.magic="\b\0",s.inherits(p,c),p.prototype.processChunk=function(y){this.meta=y.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(b,y.data),!1)},p.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var y=this;this._pako.onData=function(g){y.push({data:g,meta:y.meta})}},h.compressWorker=function(y){return new p("Deflate",y)},h.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,d,h){function i(u,w){var m,f="";for(m=0;m<w;m++)f+=String.fromCharCode(255&u),u>>>=8;return f}function n(u,w,m,f,x,_){var C,N,E=u.file,O=u.compression,D=_!==b.utf8encode,A=s.transformTo("string",_(E.name)),P=s.transformTo("string",b.utf8encode(E.name)),H=E.comment,oe=s.transformTo("string",_(H)),S=s.transformTo("string",b.utf8encode(H)),L=P.length!==E.name.length,o=S.length!==H.length,U="",ie="",Z="",le=E.dir,$=E.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};w&&!m||(Q.crc32=u.crc32,Q.compressedSize=u.compressedSize,Q.uncompressedSize=u.uncompressedSize);var R=0;w&&(R|=8),D||!L&&!o||(R|=2048);var k=0,te=0;le&&(k|=16),x==="UNIX"?(te=798,k|=function(q,pe){var be=q;return q||(be=pe?16893:33204),(65535&be)<<16}(E.unixPermissions,le)):(te=20,k|=function(q){return 63&(q||0)}(E.dosPermissions)),C=$.getUTCHours(),C<<=6,C|=$.getUTCMinutes(),C<<=5,C|=$.getUTCSeconds()/2,N=$.getUTCFullYear()-1980,N<<=4,N|=$.getUTCMonth()+1,N<<=5,N|=$.getUTCDate(),L&&(ie=i(1,1)+i(p(A),4)+P,U+="up"+i(ie.length,2)+ie),o&&(Z=i(1,1)+i(p(oe),4)+S,U+="uc"+i(Z.length,2)+Z);var J="";return J+=`
\0`,J+=i(R,2),J+=O.magic,J+=i(C,2),J+=i(N,2),J+=i(Q.crc32,4),J+=i(Q.compressedSize,4),J+=i(Q.uncompressedSize,4),J+=i(A.length,2),J+=i(U.length,2),{fileRecord:y.LOCAL_FILE_HEADER+J+A+U,dirRecord:y.CENTRAL_FILE_HEADER+i(te,2)+J+i(oe.length,2)+"\0\0\0\0"+i(k,4)+i(f,4)+A+U+oe}}var s=t("../utils"),c=t("../stream/GenericWorker"),b=t("../utf8"),p=t("../crc32"),y=t("../signature");function g(u,w,m,f){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=m,this.encodeFileName=f,this.streamFiles=u,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(g,c),g.prototype.push=function(u){var w=u.meta.percent||0,m=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(u):(this.bytesWritten+=u.data.length,c.prototype.push.call(this,{data:u.data,meta:{currentFile:this.currentFile,percent:m?(w+100*(m-f-1))/m:100}}))},g.prototype.openedSource=function(u){this.currentSourceOffset=this.bytesWritten,this.currentFile=u.file.name;var w=this.streamFiles&&!u.file.dir;if(w){var m=n(u,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(u){this.accumulate=!1;var w=this.streamFiles&&!u.file.dir,m=n(u,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),w)this.push({data:function(f){return y.DATA_DESCRIPTOR+i(f.crc32,4)+i(f.compressedSize,4)+i(f.uncompressedSize,4)}(u),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var u=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var m=this.bytesWritten-u,f=function(x,_,C,N,E){var O=s.transformTo("string",E(N));return y.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(_,4)+i(C,4)+i(O.length,2)+O}(this.dirRecords.length,m,u,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(u){this._sources.push(u);var w=this;return u.on("data",function(m){w.processChunk(m)}),u.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),u.on("error",function(m){w.error(m)}),this},g.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(u){var w=this._sources;if(!c.prototype.error.call(this,u))return!1;for(var m=0;m<w.length;m++)try{w[m].error(u)}catch{}return!0},g.prototype.lock=function(){c.prototype.lock.call(this);for(var u=this._sources,w=0;w<u.length;w++)u[w].lock()},d.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,d,h){var i=t("../compressions"),n=t("./ZipFileWorker");h.generateWorker=function(s,c,b){var p=new n(c.streamFiles,b,c.platform,c.encodeFileName),y=0;try{s.forEach(function(g,u){y++;var w=function(_,C){var N=_||C,E=i[N];if(!E)throw new Error(N+" is not a valid compression method !");return E}(u.options.compression,c.compression),m=u.options.compressionOptions||c.compressionOptions||{},f=u.dir,x=u.date;u._compressWorker(w,m).withStreamInfo("file",{name:g,dir:f,date:x,comment:u.comment||"",unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions}).pipe(p)}),p.entriesCount=y}catch(g){p.error(g)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,d,h){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var n=new i;for(var s in this)typeof this[s]!="function"&&(n[s]=this[s]);return n}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(n,s){return new i().loadAsync(n,s)},i.external=t("./external"),d.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,d,h){var i=t("./utils"),n=t("./external"),s=t("./utf8"),c=t("./zipEntries"),b=t("./stream/Crc32Probe"),p=t("./nodejsUtils");function y(g){return new n.Promise(function(u,w){var m=g.decompressed.getContentWorker().pipe(new b);m.on("error",function(f){w(f)}).on("end",function(){m.streamInfo.crc32!==g.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):u()}).resume()})}d.exports=function(g,u){var w=this;return u=i.extend(u||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),p.isNode&&p.isStream(g)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",g,!0,u.optimizedBinaryString,u.base64).then(function(m){var f=new c(u);return f.load(m),f}).then(function(m){var f=[n.Promise.resolve(m)],x=m.files;if(u.checkCRC32)for(var _=0;_<x.length;_++)f.push(y(x[_]));return n.Promise.all(f)}).then(function(m){for(var f=m.shift(),x=f.files,_=0;_<x.length;_++){var C=x[_],N=C.fileNameStr,E=i.resolve(C.fileNameStr);w.file(E,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:u.createFolders}),C.dir||(w.file(E).unsafeOriginalName=N)}return f.zipComment.length&&(w.comment=f.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,d,h){var i=t("../utils"),n=t("../stream/GenericWorker");function s(c,b){n.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(b)}i.inherits(s,n),s.prototype._bindStream=function(c){var b=this;(this._stream=c).pause(),c.on("data",function(p){b.push({data:p,meta:{percent:0}})}).on("error",function(p){b.isPaused?this.generatedError=p:b.error(p)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})},s.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},d.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,d,h){var i=t("readable-stream").Readable;function n(s,c,b){i.call(this,c),this._helper=s;var p=this;s.on("data",function(y,g){p.push(y)||p._helper.pause(),b&&b(g)}).on("error",function(y){p.emit("error",y)}).on("end",function(){p.push(null)})}t("../utils").inherits(n,i),n.prototype._read=function(){this._helper.resume()},d.exports=n},{"../utils":32,"readable-stream":16}],14:[function(t,d,h){d.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,n){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,n);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,n)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var n=new Buffer(i);return n.fill(0),n},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,d,h){function i(E,O,D){var A,P=s.getTypeOf(O),H=s.extend(D||{},p);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(E=x(E)),H.createFolders&&(A=f(E))&&_.call(this,A,!0);var oe=P==="string"&&H.binary===!1&&H.base64===!1;D&&D.binary!==void 0||(H.binary=!oe),(O instanceof y&&O.uncompressedSize===0||H.dir||!O||O.length===0)&&(H.base64=!1,H.binary=!0,O="",H.compression="STORE",P="string");var S=null;S=O instanceof y||O instanceof c?O:w.isNode&&w.isStream(O)?new m(E,O):s.prepareContent(E,O,H.binary,H.optimizedBinaryString,H.base64);var L=new g(E,S,H);this.files[E]=L}var n=t("./utf8"),s=t("./utils"),c=t("./stream/GenericWorker"),b=t("./stream/StreamHelper"),p=t("./defaults"),y=t("./compressedObject"),g=t("./zipObject"),u=t("./generate"),w=t("./nodejsUtils"),m=t("./nodejs/NodejsStreamInputAdapter"),f=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var O=E.lastIndexOf("/");return 0<O?E.substring(0,O):""},x=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},_=function(E,O){return O=O!==void 0?O:p.createFolders,E=x(E),this.files[E]||i.call(this,E,null,{dir:!0,createFolders:O}),this.files[E]};function C(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var O,D,A;for(O in this.files)A=this.files[O],(D=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&E(D,A)},filter:function(E){var O=[];return this.forEach(function(D,A){E(D,A)&&O.push(A)}),O},file:function(E,O,D){if(arguments.length!==1)return E=this.root+E,i.call(this,E,O,D),this;if(C(E)){var A=E;return this.filter(function(H,oe){return!oe.dir&&A.test(H)})}var P=this.files[this.root+E];return P&&!P.dir?P:null},folder:function(E){if(!E)return this;if(C(E))return this.filter(function(P,H){return H.dir&&E.test(P)});var O=this.root+E,D=_.call(this,O),A=this.clone();return A.root=D.name,A},remove:function(E){E=this.root+E;var O=this.files[E];if(O||(E.slice(-1)!=="/"&&(E+="/"),O=this.files[E]),O&&!O.dir)delete this.files[E];else for(var D=this.filter(function(P,H){return H.name.slice(0,E.length)===E}),A=0;A<D.length;A++)delete this.files[D[A].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var O,D={};try{if((D=s.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");s.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var A=D.comment||this.comment||"";O=u.generateWorker(this,D,A)}catch(P){(O=new c("error")).error(P)}return new b(O,D.type||"string",D.mimeType)},generateAsync:function(E,O){return this.generateInternalStream(E).accumulate(O)},generateNodeStream:function(E,O){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(O)}};d.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,d,h){d.exports=t("stream")},{stream:void 0}],17:[function(t,d,h){var i=t("./DataReader");function n(s){i.call(this,s);for(var c=0;c<this.data.length;c++)s[c]=255&s[c]}t("../utils").inherits(n,i),n.prototype.byteAt=function(s){return this.data[this.zero+s]},n.prototype.lastIndexOfSignature=function(s){for(var c=s.charCodeAt(0),b=s.charCodeAt(1),p=s.charCodeAt(2),y=s.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===c&&this.data[g+1]===b&&this.data[g+2]===p&&this.data[g+3]===y)return g-this.zero;return-1},n.prototype.readAndCheckSignature=function(s){var c=s.charCodeAt(0),b=s.charCodeAt(1),p=s.charCodeAt(2),y=s.charCodeAt(3),g=this.readData(4);return c===g[0]&&b===g[1]&&p===g[2]&&y===g[3]},n.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,c},d.exports=n},{"../utils":32,"./DataReader":18}],18:[function(t,d,h){var i=t("../utils");function n(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var c,b=0;for(this.checkOffset(s),c=this.index+s-1;c>=this.index;c--)b=(b<<8)+this.byteAt(c);return this.index+=s,b},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},d.exports=n},{"../utils":32}],19:[function(t,d,h){var i=t("./Uint8ArrayReader");function n(s){i.call(this,s)}t("../utils").inherits(n,i),n.prototype.readData=function(s){this.checkOffset(s);var c=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,c},d.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,d,h){var i=t("./DataReader");function n(s){i.call(this,s)}t("../utils").inherits(n,i),n.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},n.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},n.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},n.prototype.readData=function(s){this.checkOffset(s);var c=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,c},d.exports=n},{"../utils":32,"./DataReader":18}],21:[function(t,d,h){var i=t("./ArrayReader");function n(s){i.call(this,s)}t("../utils").inherits(n,i),n.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,c},d.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(t,d,h){var i=t("../utils"),n=t("../support"),s=t("./ArrayReader"),c=t("./StringReader"),b=t("./NodeBufferReader"),p=t("./Uint8ArrayReader");d.exports=function(y){var g=i.getTypeOf(y);return i.checkSupport(g),g!=="string"||n.uint8array?g==="nodebuffer"?new b(y):n.uint8array?new p(i.transformTo("uint8array",y)):new s(i.transformTo("array",y)):new c(y)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,d,h){h.LOCAL_FILE_HEADER="PK",h.CENTRAL_FILE_HEADER="PK",h.CENTRAL_DIRECTORY_END="PK",h.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",h.ZIP64_CENTRAL_DIRECTORY_END="PK",h.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,d,h){var i=t("./GenericWorker"),n=t("../utils");function s(c){i.call(this,"ConvertWorker to "+c),this.destType=c}n.inherits(s,i),s.prototype.processChunk=function(c){this.push({data:n.transformTo(this.destType,c.data),meta:c.meta})},d.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,d,h){var i=t("./GenericWorker"),n=t("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,i),s.prototype.processChunk=function(c){this.streamInfo.crc32=n(c.data,this.streamInfo.crc32||0),this.push(c)},d.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,d,h){var i=t("../utils"),n=t("./GenericWorker");function s(c){n.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(s,n),s.prototype.processChunk=function(c){if(c){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+c.data.length}n.prototype.processChunk.call(this,c)},d.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,d,h){var i=t("../utils"),n=t("./GenericWorker");function s(c){n.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(p){b.dataIsReady=!0,b.data=p,b.max=p&&p.length||0,b.type=i.getTypeOf(p),b.isPaused||b._tickAndRepeat()},function(p){b.error(p)})}i.inherits(s,n),s.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,b=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,b);break;case"uint8array":c=this.data.subarray(this.index,b);break;case"array":case"nodebuffer":c=this.data.slice(this.index,b)}return this.index=b,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},d.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,d,h){function i(n){this.name=n||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(n){this.emit("data",n)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(n){this.emit("error",n)}return!0},error:function(n){return!this.isFinished&&(this.isPaused?this.generatedError=n:(this.isFinished=!0,this.emit("error",n),this.previous&&this.previous.error(n),this.cleanUp()),!0)},on:function(n,s){return this._listeners[n].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(n,s){if(this._listeners[n])for(var c=0;c<this._listeners[n].length;c++)this._listeners[n][c].call(this,s)},pipe:function(n){return n.registerPrevious(this)},registerPrevious:function(n){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=n.streamInfo,this.mergeStreamInfo(),this.previous=n;var s=this;return n.on("data",function(c){s.processChunk(c)}),n.on("end",function(){s.end()}),n.on("error",function(c){s.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var n=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),n=!0),this.previous&&this.previous.resume(),!n},flush:function(){},processChunk:function(n){this.push(n)},withStreamInfo:function(n,s){return this.extraStreamInfo[n]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var n in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,n)&&(this.streamInfo[n]=this.extraStreamInfo[n])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var n="Worker "+this.name;return this.previous?this.previous+" -> "+n:n}},d.exports=i},{}],29:[function(t,d,h){var i=t("../utils"),n=t("./ConvertWorker"),s=t("./GenericWorker"),c=t("../base64"),b=t("../support"),p=t("../external"),y=null;if(b.nodestream)try{y=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(w,m){return new p.Promise(function(f,x){var _=[],C=w._internalType,N=w._outputType,E=w._mimeType;w.on("data",function(O,D){_.push(O),m&&m(D)}).on("error",function(O){_=[],x(O)}).on("end",function(){try{var O=function(D,A,P){switch(D){case"blob":return i.newBlob(i.transformTo("arraybuffer",A),P);case"base64":return c.encode(A);default:return i.transformTo(D,A)}}(N,function(D,A){var P,H=0,oe=null,S=0;for(P=0;P<A.length;P++)S+=A[P].length;switch(D){case"string":return A.join("");case"array":return Array.prototype.concat.apply([],A);case"uint8array":for(oe=new Uint8Array(S),P=0;P<A.length;P++)oe.set(A[P],H),H+=A[P].length;return oe;case"nodebuffer":return Buffer.concat(A);default:throw new Error("concat : unsupported type '"+D+"'")}}(C,_),E);f(O)}catch(D){x(D)}_=[]}).resume()})}function u(w,m,f){var x=m;switch(m){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=m,this._mimeType=f,i.checkSupport(x),this._worker=w.pipe(new n(x)),w.lock()}catch(_){this._worker=new s("error"),this._worker.error(_)}}u.prototype={accumulate:function(w){return g(this,w)},on:function(w,m){var f=this;return w==="data"?this._worker.on(w,function(x){m.call(f,x.data,x.meta)}):this._worker.on(w,function(){i.delay(m,arguments,f)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new y(this,{objectMode:this._outputType!=="nodebuffer"},w)}},d.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,d,h){if(h.base64=!0,h.array=!0,h.string=!0,h.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",h.nodebuffer=typeof Buffer<"u",h.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")h.blob=!1;else{var i=new ArrayBuffer(0);try{h.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(i),h.blob=n.getBlob("application/zip").size===0}catch{h.blob=!1}}}try{h.nodestream=!!t("readable-stream").Readable}catch{h.nodestream=!1}},{"readable-stream":16}],31:[function(t,d,h){for(var i=t("./utils"),n=t("./support"),s=t("./nodejsUtils"),c=t("./stream/GenericWorker"),b=new Array(256),p=0;p<256;p++)b[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;b[254]=b[254]=1;function y(){c.call(this,"utf-8 decode"),this.leftOver=null}function g(){c.call(this,"utf-8 encode")}h.utf8encode=function(u){return n.nodebuffer?s.newBufferFrom(u,"utf-8"):function(w){var m,f,x,_,C,N=w.length,E=0;for(_=0;_<N;_++)(64512&(f=w.charCodeAt(_)))==55296&&_+1<N&&(64512&(x=w.charCodeAt(_+1)))==56320&&(f=65536+(f-55296<<10)+(x-56320),_++),E+=f<128?1:f<2048?2:f<65536?3:4;for(m=n.uint8array?new Uint8Array(E):new Array(E),_=C=0;C<E;_++)(64512&(f=w.charCodeAt(_)))==55296&&_+1<N&&(64512&(x=w.charCodeAt(_+1)))==56320&&(f=65536+(f-55296<<10)+(x-56320),_++),f<128?m[C++]=f:(f<2048?m[C++]=192|f>>>6:(f<65536?m[C++]=224|f>>>12:(m[C++]=240|f>>>18,m[C++]=128|f>>>12&63),m[C++]=128|f>>>6&63),m[C++]=128|63&f);return m}(u)},h.utf8decode=function(u){return n.nodebuffer?i.transformTo("nodebuffer",u).toString("utf-8"):function(w){var m,f,x,_,C=w.length,N=new Array(2*C);for(m=f=0;m<C;)if((x=w[m++])<128)N[f++]=x;else if(4<(_=b[x]))N[f++]=65533,m+=_-1;else{for(x&=_===2?31:_===3?15:7;1<_&&m<C;)x=x<<6|63&w[m++],_--;1<_?N[f++]=65533:x<65536?N[f++]=x:(x-=65536,N[f++]=55296|x>>10&1023,N[f++]=56320|1023&x)}return N.length!==f&&(N.subarray?N=N.subarray(0,f):N.length=f),i.applyFromCharCode(N)}(u=i.transformTo(n.uint8array?"uint8array":"array",u))},i.inherits(y,c),y.prototype.processChunk=function(u){var w=i.transformTo(n.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var m=w;(w=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),w.set(m,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var f=function(_,C){var N;for((C=C||_.length)>_.length&&(C=_.length),N=C-1;0<=N&&(192&_[N])==128;)N--;return N<0||N===0?C:N+b[_[N]]>C?N:C}(w),x=w;f!==w.length&&(n.uint8array?(x=w.subarray(0,f),this.leftOver=w.subarray(f,w.length)):(x=w.slice(0,f),this.leftOver=w.slice(f,w.length))),this.push({data:h.utf8decode(x),meta:u.meta})},y.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:h.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},h.Utf8DecodeWorker=y,i.inherits(g,c),g.prototype.processChunk=function(u){this.push({data:h.utf8encode(u.data),meta:u.meta})},h.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,d,h){var i=t("./support"),n=t("./base64"),s=t("./nodejsUtils"),c=t("./external");function b(m){return m}function p(m,f){for(var x=0;x<m.length;++x)f[x]=255&m.charCodeAt(x);return f}t("setimmediate"),h.newBlob=function(m,f){h.checkSupport("blob");try{return new Blob([m],{type:f})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(m),x.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(m,f,x){var _=[],C=0,N=m.length;if(N<=x)return String.fromCharCode.apply(null,m);for(;C<N;)f==="array"||f==="nodebuffer"?_.push(String.fromCharCode.apply(null,m.slice(C,Math.min(C+x,N)))):_.push(String.fromCharCode.apply(null,m.subarray(C,Math.min(C+x,N)))),C+=x;return _.join("")},stringifyByChar:function(m){for(var f="",x=0;x<m.length;x++)f+=String.fromCharCode(m[x]);return f},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function g(m){var f=65536,x=h.getTypeOf(m),_=!0;if(x==="uint8array"?_=y.applyCanBeUsed.uint8array:x==="nodebuffer"&&(_=y.applyCanBeUsed.nodebuffer),_)for(;1<f;)try{return y.stringifyByChunk(m,x,f)}catch{f=Math.floor(f/2)}return y.stringifyByChar(m)}function u(m,f){for(var x=0;x<m.length;x++)f[x]=m[x];return f}h.applyFromCharCode=g;var w={};w.string={string:b,array:function(m){return p(m,new Array(m.length))},arraybuffer:function(m){return w.string.uint8array(m).buffer},uint8array:function(m){return p(m,new Uint8Array(m.length))},nodebuffer:function(m){return p(m,s.allocBuffer(m.length))}},w.array={string:g,array:b,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return s.newBufferFrom(m)}},w.arraybuffer={string:function(m){return g(new Uint8Array(m))},array:function(m){return u(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:b,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return s.newBufferFrom(new Uint8Array(m))}},w.uint8array={string:g,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:b,nodebuffer:function(m){return s.newBufferFrom(m)}},w.nodebuffer={string:g,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return w.nodebuffer.uint8array(m).buffer},uint8array:function(m){return u(m,new Uint8Array(m.length))},nodebuffer:b},h.transformTo=function(m,f){if(f=f||"",!m)return f;h.checkSupport(m);var x=h.getTypeOf(f);return w[x][m](f)},h.resolve=function(m){for(var f=m.split("/"),x=[],_=0;_<f.length;_++){var C=f[_];C==="."||C===""&&_!==0&&_!==f.length-1||(C===".."?x.pop():x.push(C))}return x.join("/")},h.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(m)?"nodebuffer":i.uint8array&&m instanceof Uint8Array?"uint8array":i.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},h.checkSupport=function(m){if(!i[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},h.MAX_VALUE_16BITS=65535,h.MAX_VALUE_32BITS=-1,h.pretty=function(m){var f,x,_="";for(x=0;x<(m||"").length;x++)_+="\\x"+((f=m.charCodeAt(x))<16?"0":"")+f.toString(16).toUpperCase();return _},h.delay=function(m,f,x){setImmediate(function(){m.apply(x||null,f||[])})},h.inherits=function(m,f){function x(){}x.prototype=f.prototype,m.prototype=new x},h.extend=function(){var m,f,x={};for(m=0;m<arguments.length;m++)for(f in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],f)&&x[f]===void 0&&(x[f]=arguments[m][f]);return x},h.prepareContent=function(m,f,x,_,C){return c.Promise.resolve(f).then(function(N){return i.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new c.Promise(function(E,O){var D=new FileReader;D.onload=function(A){E(A.target.result)},D.onerror=function(A){O(A.target.error)},D.readAsArrayBuffer(N)}):N}).then(function(N){var E=h.getTypeOf(N);return E?(E==="arraybuffer"?N=h.transformTo("uint8array",N):E==="string"&&(C?N=n.decode(N):x&&_!==!0&&(N=function(O){return p(O,i.uint8array?new Uint8Array(O.length):new Array(O.length))}(N))),N):c.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,d,h){var i=t("./reader/readerFor"),n=t("./utils"),s=t("./signature"),c=t("./zipEntry"),b=t("./support");function p(y){this.files=[],this.loadOptions=y}p.prototype={checkSignature:function(y){if(!this.reader.readAndCheckSignature(y)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(g)+", expected "+n.pretty(y)+")")}},isSignature:function(y,g){var u=this.reader.index;this.reader.setIndex(y);var w=this.reader.readString(4)===g;return this.reader.setIndex(u),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var y=this.reader.readData(this.zipCommentLength),g=b.uint8array?"uint8array":"array",u=n.transformTo(g,y);this.zipComment=this.loadOptions.decodeFileName(u)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var y,g,u,w=this.zip64EndOfCentralSize-44;0<w;)y=this.reader.readInt(2),g=this.reader.readInt(4),u=this.reader.readData(g),this.zip64ExtensibleData[y]={id:y,length:g,value:u}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var y,g;for(y=0;y<this.files.length;y++)g=this.files[y],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var y;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(y=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(y);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var y=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(y<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(y);var g=y;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(y=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(y),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var u=this.centralDirOffset+this.centralDirSize;this.zip64&&(u+=20,u+=12+this.zip64EndOfCentralSize);var w=g-u;if(0<w)this.isSignature(g,s.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(y){this.reader=i(y)},load:function(y){this.prepareReader(y),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},d.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,d,h){var i=t("./reader/readerFor"),n=t("./utils"),s=t("./compressedObject"),c=t("./crc32"),b=t("./utf8"),p=t("./compressions"),y=t("./support");function g(u,w){this.options=u,this.loadOptions=w}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(u){var w,m;if(u.skip(22),this.fileNameLength=u.readInt(2),m=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(f){for(var x in p)if(Object.prototype.hasOwnProperty.call(p,x)&&p[x].magic===f)return p[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,w,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var w=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(w),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),u==0&&(this.dosPermissions=63&this.externalFileAttributes),u==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=i(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var w,m,f,x=u.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});u.index+4<x;)w=u.readInt(2),m=u.readInt(2),f=u.readData(m),this.extraFields[w]={id:w,length:m,value:f};u.setIndex(x)},handleUTF8:function(){var u=y.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=b.utf8decode(this.fileName),this.fileCommentStr=b.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var m=n.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var x=n.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var w=i(u.value);return w.readInt(1)!==1||c(this.fileName)!==w.readInt(4)?null:b.utf8decode(w.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var w=i(u.value);return w.readInt(1)!==1||c(this.fileComment)!==w.readInt(4)?null:b.utf8decode(w.readData(u.length-5))}return null}},d.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,d,h){function i(w,m,f){this.name=w,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=m,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var n=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),c=t("./utf8"),b=t("./compressedObject"),p=t("./stream/GenericWorker");i.prototype={internalStream:function(w){var m=null,f="string";try{if(!w)throw new Error("No output type specified.");var x=(f=w.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),m=this._decompressWorker();var _=!this._dataBinary;_&&!x&&(m=m.pipe(new c.Utf8EncodeWorker)),!_&&x&&(m=m.pipe(new c.Utf8DecodeWorker))}catch(C){(m=new p("error")).error(C)}return new n(m,f,"")},async:function(w,m){return this.internalStream(w).accumulate(m)},nodeStream:function(w,m){return this.internalStream(w||"nodebuffer").toNodejsStream(m)},_compressWorker:function(w,m){if(this._data instanceof b&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new c.Utf8EncodeWorker)),b.createWorkerFrom(f,w,m)},_decompressWorker:function(){return this._data instanceof b?this._data.getContentWorker():this._data instanceof p?this._data:new s(this._data)}};for(var y=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<y.length;u++)i.prototype[y[u]]=g;d.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,d,h){(function(i){var n,s,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var b=0,p=new c(w),y=i.document.createTextNode("");p.observe(y,{characterData:!0}),n=function(){y.data=b=++b%2}}else if(i.setImmediate||i.MessageChannel===void 0)n="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var m=i.document.createElement("script");m.onreadystatechange=function(){w(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},i.document.documentElement.appendChild(m)}:function(){setTimeout(w,0)};else{var g=new i.MessageChannel;g.port1.onmessage=w,n=function(){g.port2.postMessage(0)}}var u=[];function w(){var m,f;s=!0;for(var x=u.length;x;){for(f=u,u=[],m=-1;++m<x;)f[m]();x=u.length}s=!1}d.exports=function(m){u.push(m)!==1||s||n()}}).call(this,typeof Pe<"u"?Pe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,d,h){var i=t("immediate");function n(){}var s={},c=["REJECTED"],b=["FULFILLED"],p=["PENDING"];function y(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,x!==n&&m(this,x)}function g(x,_,C){this.promise=x,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function u(x,_,C){i(function(){var N;try{N=_(C)}catch(E){return s.reject(x,E)}N===x?s.reject(x,new TypeError("Cannot resolve promise with itself")):s.resolve(x,N)})}function w(x){var _=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof _=="function")return function(){_.apply(x,arguments)}}function m(x,_){var C=!1;function N(D){C||(C=!0,s.reject(x,D))}function E(D){C||(C=!0,s.resolve(x,D))}var O=f(function(){_(E,N)});O.status==="error"&&N(O.value)}function f(x,_){var C={};try{C.value=x(_),C.status="success"}catch(N){C.status="error",C.value=N}return C}(d.exports=y).prototype.finally=function(x){if(typeof x!="function")return this;var _=this.constructor;return this.then(function(C){return _.resolve(x()).then(function(){return C})},function(C){return _.resolve(x()).then(function(){throw C})})},y.prototype.catch=function(x){return this.then(null,x)},y.prototype.then=function(x,_){if(typeof x!="function"&&this.state===b||typeof _!="function"&&this.state===c)return this;var C=new this.constructor(n);return this.state!==p?u(C,this.state===b?x:_,this.outcome):this.queue.push(new g(C,x,_)),C},g.prototype.callFulfilled=function(x){s.resolve(this.promise,x)},g.prototype.otherCallFulfilled=function(x){u(this.promise,this.onFulfilled,x)},g.prototype.callRejected=function(x){s.reject(this.promise,x)},g.prototype.otherCallRejected=function(x){u(this.promise,this.onRejected,x)},s.resolve=function(x,_){var C=f(w,_);if(C.status==="error")return s.reject(x,C.value);var N=C.value;if(N)m(x,N);else{x.state=b,x.outcome=_;for(var E=-1,O=x.queue.length;++E<O;)x.queue[E].callFulfilled(_)}return x},s.reject=function(x,_){x.state=c,x.outcome=_;for(var C=-1,N=x.queue.length;++C<N;)x.queue[C].callRejected(_);return x},y.resolve=function(x){return x instanceof this?x:s.resolve(new this(n),x)},y.reject=function(x){var _=new this(n);return s.reject(_,x)},y.all=function(x){var _=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=x.length,N=!1;if(!C)return this.resolve([]);for(var E=new Array(C),O=0,D=-1,A=new this(n);++D<C;)P(x[D],D);return A;function P(H,oe){_.resolve(H).then(function(S){E[oe]=S,++O!==C||N||(N=!0,s.resolve(A,E))},function(S){N||(N=!0,s.reject(A,S))})}},y.race=function(x){var _=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=x.length,N=!1;if(!C)return this.resolve([]);for(var E=-1,O=new this(n);++E<C;)D=x[E],_.resolve(D).then(function(A){N||(N=!0,s.resolve(O,A))},function(A){N||(N=!0,s.reject(O,A))});var D;return O}},{immediate:36}],38:[function(t,d,h){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),d.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,d,h){var i=t("./zlib/deflate"),n=t("./utils/common"),s=t("./utils/strings"),c=t("./zlib/messages"),b=t("./zlib/zstream"),p=Object.prototype.toString,y=0,g=-1,u=0,w=8;function m(x){if(!(this instanceof m))return new m(x);this.options=n.assign({level:g,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},x||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var C=i.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(C!==y)throw new Error(c[C]);if(_.header&&i.deflateSetHeader(this.strm,_.header),_.dictionary){var N;if(N=typeof _.dictionary=="string"?s.string2buf(_.dictionary):p.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(C=i.deflateSetDictionary(this.strm,N))!==y)throw new Error(c[C]);this._dict_set=!0}}function f(x,_){var C=new m(_);if(C.push(x,!0),C.err)throw C.msg||c[C.err];return C.result}m.prototype.push=function(x,_){var C,N,E=this.strm,O=this.options.chunkSize;if(this.ended)return!1;N=_===~~_?_:_===!0?4:0,typeof x=="string"?E.input=s.string2buf(x):p.call(x)==="[object ArrayBuffer]"?E.input=new Uint8Array(x):E.input=x,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new n.Buf8(O),E.next_out=0,E.avail_out=O),(C=i.deflate(E,N))!==1&&C!==y)return this.onEnd(C),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(n.shrinkBuf(E.output,E.next_out))):this.onData(n.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&C!==1);return N===4?(C=i.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===y):N!==2||(this.onEnd(y),!(E.avail_out=0))},m.prototype.onData=function(x){this.chunks.push(x)},m.prototype.onEnd=function(x){x===y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},h.Deflate=m,h.deflate=f,h.deflateRaw=function(x,_){return(_=_||{}).raw=!0,f(x,_)},h.gzip=function(x,_){return(_=_||{}).gzip=!0,f(x,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,d,h){var i=t("./zlib/inflate"),n=t("./utils/common"),s=t("./utils/strings"),c=t("./zlib/constants"),b=t("./zlib/messages"),p=t("./zlib/zstream"),y=t("./zlib/gzheader"),g=Object.prototype.toString;function u(m){if(!(this instanceof u))return new u(m);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},m||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||m&&m.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&!(15&f.windowBits)&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,f.windowBits);if(x!==c.Z_OK)throw new Error(b[x]);this.header=new y,i.inflateGetHeader(this.strm,this.header)}function w(m,f){var x=new u(f);if(x.push(m,!0),x.err)throw x.msg||b[x.err];return x.result}u.prototype.push=function(m,f){var x,_,C,N,E,O,D=this.strm,A=this.options.chunkSize,P=this.options.dictionary,H=!1;if(this.ended)return!1;_=f===~~f?f:f===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof m=="string"?D.input=s.binstring2buf(m):g.call(m)==="[object ArrayBuffer]"?D.input=new Uint8Array(m):D.input=m,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new n.Buf8(A),D.next_out=0,D.avail_out=A),(x=i.inflate(D,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&P&&(O=typeof P=="string"?s.string2buf(P):g.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,x=i.inflateSetDictionary(this.strm,O)),x===c.Z_BUF_ERROR&&H===!0&&(x=c.Z_OK,H=!1),x!==c.Z_STREAM_END&&x!==c.Z_OK)return this.onEnd(x),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&x!==c.Z_STREAM_END&&(D.avail_in!==0||_!==c.Z_FINISH&&_!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=s.utf8border(D.output,D.next_out),N=D.next_out-C,E=s.buf2string(D.output,C),D.next_out=N,D.avail_out=A-N,N&&n.arraySet(D.output,D.output,C,N,0),this.onData(E)):this.onData(n.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(H=!0)}while((0<D.avail_in||D.avail_out===0)&&x!==c.Z_STREAM_END);return x===c.Z_STREAM_END&&(_=c.Z_FINISH),_===c.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===c.Z_OK):_!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(D.avail_out=0))},u.prototype.onData=function(m){this.chunks.push(m)},u.prototype.onEnd=function(m){m===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},h.Inflate=u,h.inflate=w,h.inflateRaw=function(m,f){return(f=f||{}).raw=!0,w(m,f)},h.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,d,h){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";h.assign=function(c){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var p=b.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var y in p)p.hasOwnProperty(y)&&(c[y]=p[y])}}return c},h.shrinkBuf=function(c,b){return c.length===b?c:c.subarray?c.subarray(0,b):(c.length=b,c)};var n={arraySet:function(c,b,p,y,g){if(b.subarray&&c.subarray)c.set(b.subarray(p,p+y),g);else for(var u=0;u<y;u++)c[g+u]=b[p+u]},flattenChunks:function(c){var b,p,y,g,u,w;for(b=y=0,p=c.length;b<p;b++)y+=c[b].length;for(w=new Uint8Array(y),b=g=0,p=c.length;b<p;b++)u=c[b],w.set(u,g),g+=u.length;return w}},s={arraySet:function(c,b,p,y,g){for(var u=0;u<y;u++)c[g+u]=b[p+u]},flattenChunks:function(c){return[].concat.apply([],c)}};h.setTyped=function(c){c?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,n)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,s))},h.setTyped(i)},{}],42:[function(t,d,h){var i=t("./common"),n=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var c=new i.Buf8(256),b=0;b<256;b++)c[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;function p(y,g){if(g<65537&&(y.subarray&&s||!y.subarray&&n))return String.fromCharCode.apply(null,i.shrinkBuf(y,g));for(var u="",w=0;w<g;w++)u+=String.fromCharCode(y[w]);return u}c[254]=c[254]=1,h.string2buf=function(y){var g,u,w,m,f,x=y.length,_=0;for(m=0;m<x;m++)(64512&(u=y.charCodeAt(m)))==55296&&m+1<x&&(64512&(w=y.charCodeAt(m+1)))==56320&&(u=65536+(u-55296<<10)+(w-56320),m++),_+=u<128?1:u<2048?2:u<65536?3:4;for(g=new i.Buf8(_),m=f=0;f<_;m++)(64512&(u=y.charCodeAt(m)))==55296&&m+1<x&&(64512&(w=y.charCodeAt(m+1)))==56320&&(u=65536+(u-55296<<10)+(w-56320),m++),u<128?g[f++]=u:(u<2048?g[f++]=192|u>>>6:(u<65536?g[f++]=224|u>>>12:(g[f++]=240|u>>>18,g[f++]=128|u>>>12&63),g[f++]=128|u>>>6&63),g[f++]=128|63&u);return g},h.buf2binstring=function(y){return p(y,y.length)},h.binstring2buf=function(y){for(var g=new i.Buf8(y.length),u=0,w=g.length;u<w;u++)g[u]=y.charCodeAt(u);return g},h.buf2string=function(y,g){var u,w,m,f,x=g||y.length,_=new Array(2*x);for(u=w=0;u<x;)if((m=y[u++])<128)_[w++]=m;else if(4<(f=c[m]))_[w++]=65533,u+=f-1;else{for(m&=f===2?31:f===3?15:7;1<f&&u<x;)m=m<<6|63&y[u++],f--;1<f?_[w++]=65533:m<65536?_[w++]=m:(m-=65536,_[w++]=55296|m>>10&1023,_[w++]=56320|1023&m)}return p(_,w)},h.utf8border=function(y,g){var u;for((g=g||y.length)>y.length&&(g=y.length),u=g-1;0<=u&&(192&y[u])==128;)u--;return u<0||u===0?g:u+c[y[u]]>g?u:g}},{"./common":41}],43:[function(t,d,h){d.exports=function(i,n,s,c){for(var b=65535&i|0,p=i>>>16&65535|0,y=0;s!==0;){for(s-=y=2e3<s?2e3:s;p=p+(b=b+n[c++]|0)|0,--y;);b%=65521,p%=65521}return b|p<<16|0}},{}],44:[function(t,d,h){d.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,d,h){var i=function(){for(var n,s=[],c=0;c<256;c++){n=c;for(var b=0;b<8;b++)n=1&n?3988292384^n>>>1:n>>>1;s[c]=n}return s}();d.exports=function(n,s,c,b){var p=i,y=b+c;n^=-1;for(var g=b;g<y;g++)n=n>>>8^p[255&(n^s[g])];return-1^n}},{}],46:[function(t,d,h){var i,n=t("../utils/common"),s=t("./trees"),c=t("./adler32"),b=t("./crc32"),p=t("./messages"),y=0,g=4,u=0,w=-2,m=-1,f=4,x=2,_=8,C=9,N=286,E=30,O=19,D=2*N+1,A=15,P=3,H=258,oe=H+P+1,S=42,L=113,o=1,U=2,ie=3,Z=4;function le(a,M){return a.msg=p[M],M}function $(a){return(a<<1)-(4<a?9:0)}function Q(a){for(var M=a.length;0<=--M;)a[M]=0}function R(a){var M=a.state,T=M.pending;T>a.avail_out&&(T=a.avail_out),T!==0&&(n.arraySet(a.output,M.pending_buf,M.pending_out,T,a.next_out),a.next_out+=T,M.pending_out+=T,a.total_out+=T,a.avail_out-=T,M.pending-=T,M.pending===0&&(M.pending_out=0))}function k(a,M){s._tr_flush_block(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,M),a.block_start=a.strstart,R(a.strm)}function te(a,M){a.pending_buf[a.pending++]=M}function J(a,M){a.pending_buf[a.pending++]=M>>>8&255,a.pending_buf[a.pending++]=255&M}function q(a,M){var T,j,v=a.max_chain_length,z=a.strstart,W=a.prev_length,G=a.nice_match,F=a.strstart>a.w_size-oe?a.strstart-(a.w_size-oe):0,K=a.window,re=a.w_mask,X=a.prev,ne=a.strstart+H,ye=K[z+W-1],fe=K[z+W];a.prev_length>=a.good_match&&(v>>=2),G>a.lookahead&&(G=a.lookahead);do if(K[(T=M)+W]===fe&&K[T+W-1]===ye&&K[T]===K[z]&&K[++T]===K[z+1]){z+=2,T++;do;while(K[++z]===K[++T]&&K[++z]===K[++T]&&K[++z]===K[++T]&&K[++z]===K[++T]&&K[++z]===K[++T]&&K[++z]===K[++T]&&K[++z]===K[++T]&&K[++z]===K[++T]&&z<ne);if(j=H-(ne-z),z=ne-H,W<j){if(a.match_start=M,G<=(W=j))break;ye=K[z+W-1],fe=K[z+W]}}while((M=X[M&re])>F&&--v!=0);return W<=a.lookahead?W:a.lookahead}function pe(a){var M,T,j,v,z,W,G,F,K,re,X=a.w_size;do{if(v=a.window_size-a.lookahead-a.strstart,a.strstart>=X+(X-oe)){for(n.arraySet(a.window,a.window,X,X,0),a.match_start-=X,a.strstart-=X,a.block_start-=X,M=T=a.hash_size;j=a.head[--M],a.head[M]=X<=j?j-X:0,--T;);for(M=T=X;j=a.prev[--M],a.prev[M]=X<=j?j-X:0,--T;);v+=X}if(a.strm.avail_in===0)break;if(W=a.strm,G=a.window,F=a.strstart+a.lookahead,K=v,re=void 0,re=W.avail_in,K<re&&(re=K),T=re===0?0:(W.avail_in-=re,n.arraySet(G,W.input,W.next_in,re,F),W.state.wrap===1?W.adler=c(W.adler,G,re,F):W.state.wrap===2&&(W.adler=b(W.adler,G,re,F)),W.next_in+=re,W.total_in+=re,re),a.lookahead+=T,a.lookahead+a.insert>=P)for(z=a.strstart-a.insert,a.ins_h=a.window[z],a.ins_h=(a.ins_h<<a.hash_shift^a.window[z+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[z+P-1])&a.hash_mask,a.prev[z&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=z,z++,a.insert--,!(a.lookahead+a.insert<P)););}while(a.lookahead<oe&&a.strm.avail_in!==0)}function be(a,M){for(var T,j;;){if(a.lookahead<oe){if(pe(a),a.lookahead<oe&&M===y)return o;if(a.lookahead===0)break}if(T=0,a.lookahead>=P&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+P-1])&a.hash_mask,T=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),T!==0&&a.strstart-T<=a.w_size-oe&&(a.match_length=q(a,T)),a.match_length>=P)if(j=s._tr_tally(a,a.strstart-a.match_start,a.match_length-P),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=P){for(a.match_length--;a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+P-1])&a.hash_mask,T=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart,--a.match_length!=0;);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else j=s._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(j&&(k(a,!1),a.strm.avail_out===0))return o}return a.insert=a.strstart<P-1?a.strstart:P-1,M===g?(k(a,!0),a.strm.avail_out===0?ie:Z):a.last_lit&&(k(a,!1),a.strm.avail_out===0)?o:U}function ae(a,M){for(var T,j,v;;){if(a.lookahead<oe){if(pe(a),a.lookahead<oe&&M===y)return o;if(a.lookahead===0)break}if(T=0,a.lookahead>=P&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+P-1])&a.hash_mask,T=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=P-1,T!==0&&a.prev_length<a.max_lazy_match&&a.strstart-T<=a.w_size-oe&&(a.match_length=q(a,T),a.match_length<=5&&(a.strategy===1||a.match_length===P&&4096<a.strstart-a.match_start)&&(a.match_length=P-1)),a.prev_length>=P&&a.match_length<=a.prev_length){for(v=a.strstart+a.lookahead-P,j=s._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-P),a.lookahead-=a.prev_length-1,a.prev_length-=2;++a.strstart<=v&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+P-1])&a.hash_mask,T=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),--a.prev_length!=0;);if(a.match_available=0,a.match_length=P-1,a.strstart++,j&&(k(a,!1),a.strm.avail_out===0))return o}else if(a.match_available){if((j=s._tr_tally(a,0,a.window[a.strstart-1]))&&k(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return o}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(j=s._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<P-1?a.strstart:P-1,M===g?(k(a,!0),a.strm.avail_out===0?ie:Z):a.last_lit&&(k(a,!1),a.strm.avail_out===0)?o:U}function de(a,M,T,j,v){this.good_length=a,this.max_lazy=M,this.nice_length=T,this.max_chain=j,this.func=v}function me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*D),this.dyn_dtree=new n.Buf16(2*(2*E+1)),this.bl_tree=new n.Buf16(2*(2*O+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(A+1),this.heap=new n.Buf16(2*N+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*N+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function he(a){var M;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=x,(M=a.state).pending=0,M.pending_out=0,M.wrap<0&&(M.wrap=-M.wrap),M.status=M.wrap?S:L,a.adler=M.wrap===2?0:1,M.last_flush=y,s._tr_init(M),u):le(a,w)}function xe(a){var M=he(a);return M===u&&function(T){T.window_size=2*T.w_size,Q(T.head),T.max_lazy_match=i[T.level].max_lazy,T.good_match=i[T.level].good_length,T.nice_match=i[T.level].nice_length,T.max_chain_length=i[T.level].max_chain,T.strstart=0,T.block_start=0,T.lookahead=0,T.insert=0,T.match_length=T.prev_length=P-1,T.match_available=0,T.ins_h=0}(a.state),M}function ve(a,M,T,j,v,z){if(!a)return w;var W=1;if(M===m&&(M=6),j<0?(W=0,j=-j):15<j&&(W=2,j-=16),v<1||C<v||T!==_||j<8||15<j||M<0||9<M||z<0||f<z)return le(a,w);j===8&&(j=9);var G=new me;return(a.state=G).strm=a,G.wrap=W,G.gzhead=null,G.w_bits=j,G.w_size=1<<G.w_bits,G.w_mask=G.w_size-1,G.hash_bits=v+7,G.hash_size=1<<G.hash_bits,G.hash_mask=G.hash_size-1,G.hash_shift=~~((G.hash_bits+P-1)/P),G.window=new n.Buf8(2*G.w_size),G.head=new n.Buf16(G.hash_size),G.prev=new n.Buf16(G.w_size),G.lit_bufsize=1<<v+6,G.pending_buf_size=4*G.lit_bufsize,G.pending_buf=new n.Buf8(G.pending_buf_size),G.d_buf=1*G.lit_bufsize,G.l_buf=3*G.lit_bufsize,G.level=M,G.strategy=z,G.method=T,xe(a)}i=[new de(0,0,0,0,function(a,M){var T=65535;for(T>a.pending_buf_size-5&&(T=a.pending_buf_size-5);;){if(a.lookahead<=1){if(pe(a),a.lookahead===0&&M===y)return o;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;var j=a.block_start+T;if((a.strstart===0||a.strstart>=j)&&(a.lookahead=a.strstart-j,a.strstart=j,k(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-oe&&(k(a,!1),a.strm.avail_out===0))return o}return a.insert=0,M===g?(k(a,!0),a.strm.avail_out===0?ie:Z):(a.strstart>a.block_start&&(k(a,!1),a.strm.avail_out),o)}),new de(4,4,8,4,be),new de(4,5,16,8,be),new de(4,6,32,32,be),new de(4,4,16,16,ae),new de(8,16,32,32,ae),new de(8,16,128,128,ae),new de(8,32,128,256,ae),new de(32,128,258,1024,ae),new de(32,258,258,4096,ae)],h.deflateInit=function(a,M){return ve(a,M,_,15,8,0)},h.deflateInit2=ve,h.deflateReset=xe,h.deflateResetKeep=he,h.deflateSetHeader=function(a,M){return a&&a.state?a.state.wrap!==2?w:(a.state.gzhead=M,u):w},h.deflate=function(a,M){var T,j,v,z;if(!a||!a.state||5<M||M<0)return a?le(a,w):w;if(j=a.state,!a.output||!a.input&&a.avail_in!==0||j.status===666&&M!==g)return le(a,a.avail_out===0?-5:w);if(j.strm=a,T=j.last_flush,j.last_flush=M,j.status===S)if(j.wrap===2)a.adler=0,te(j,31),te(j,139),te(j,8),j.gzhead?(te(j,(j.gzhead.text?1:0)+(j.gzhead.hcrc?2:0)+(j.gzhead.extra?4:0)+(j.gzhead.name?8:0)+(j.gzhead.comment?16:0)),te(j,255&j.gzhead.time),te(j,j.gzhead.time>>8&255),te(j,j.gzhead.time>>16&255),te(j,j.gzhead.time>>24&255),te(j,j.level===9?2:2<=j.strategy||j.level<2?4:0),te(j,255&j.gzhead.os),j.gzhead.extra&&j.gzhead.extra.length&&(te(j,255&j.gzhead.extra.length),te(j,j.gzhead.extra.length>>8&255)),j.gzhead.hcrc&&(a.adler=b(a.adler,j.pending_buf,j.pending,0)),j.gzindex=0,j.status=69):(te(j,0),te(j,0),te(j,0),te(j,0),te(j,0),te(j,j.level===9?2:2<=j.strategy||j.level<2?4:0),te(j,3),j.status=L);else{var W=_+(j.w_bits-8<<4)<<8;W|=(2<=j.strategy||j.level<2?0:j.level<6?1:j.level===6?2:3)<<6,j.strstart!==0&&(W|=32),W+=31-W%31,j.status=L,J(j,W),j.strstart!==0&&(J(j,a.adler>>>16),J(j,65535&a.adler)),a.adler=1}if(j.status===69)if(j.gzhead.extra){for(v=j.pending;j.gzindex<(65535&j.gzhead.extra.length)&&(j.pending!==j.pending_buf_size||(j.gzhead.hcrc&&j.pending>v&&(a.adler=b(a.adler,j.pending_buf,j.pending-v,v)),R(a),v=j.pending,j.pending!==j.pending_buf_size));)te(j,255&j.gzhead.extra[j.gzindex]),j.gzindex++;j.gzhead.hcrc&&j.pending>v&&(a.adler=b(a.adler,j.pending_buf,j.pending-v,v)),j.gzindex===j.gzhead.extra.length&&(j.gzindex=0,j.status=73)}else j.status=73;if(j.status===73)if(j.gzhead.name){v=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>v&&(a.adler=b(a.adler,j.pending_buf,j.pending-v,v)),R(a),v=j.pending,j.pending===j.pending_buf_size)){z=1;break}z=j.gzindex<j.gzhead.name.length?255&j.gzhead.name.charCodeAt(j.gzindex++):0,te(j,z)}while(z!==0);j.gzhead.hcrc&&j.pending>v&&(a.adler=b(a.adler,j.pending_buf,j.pending-v,v)),z===0&&(j.gzindex=0,j.status=91)}else j.status=91;if(j.status===91)if(j.gzhead.comment){v=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>v&&(a.adler=b(a.adler,j.pending_buf,j.pending-v,v)),R(a),v=j.pending,j.pending===j.pending_buf_size)){z=1;break}z=j.gzindex<j.gzhead.comment.length?255&j.gzhead.comment.charCodeAt(j.gzindex++):0,te(j,z)}while(z!==0);j.gzhead.hcrc&&j.pending>v&&(a.adler=b(a.adler,j.pending_buf,j.pending-v,v)),z===0&&(j.status=103)}else j.status=103;if(j.status===103&&(j.gzhead.hcrc?(j.pending+2>j.pending_buf_size&&R(a),j.pending+2<=j.pending_buf_size&&(te(j,255&a.adler),te(j,a.adler>>8&255),a.adler=0,j.status=L)):j.status=L),j.pending!==0){if(R(a),a.avail_out===0)return j.last_flush=-1,u}else if(a.avail_in===0&&$(M)<=$(T)&&M!==g)return le(a,-5);if(j.status===666&&a.avail_in!==0)return le(a,-5);if(a.avail_in!==0||j.lookahead!==0||M!==y&&j.status!==666){var G=j.strategy===2?function(F,K){for(var re;;){if(F.lookahead===0&&(pe(F),F.lookahead===0)){if(K===y)return o;break}if(F.match_length=0,re=s._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++,re&&(k(F,!1),F.strm.avail_out===0))return o}return F.insert=0,K===g?(k(F,!0),F.strm.avail_out===0?ie:Z):F.last_lit&&(k(F,!1),F.strm.avail_out===0)?o:U}(j,M):j.strategy===3?function(F,K){for(var re,X,ne,ye,fe=F.window;;){if(F.lookahead<=H){if(pe(F),F.lookahead<=H&&K===y)return o;if(F.lookahead===0)break}if(F.match_length=0,F.lookahead>=P&&0<F.strstart&&(X=fe[ne=F.strstart-1])===fe[++ne]&&X===fe[++ne]&&X===fe[++ne]){ye=F.strstart+H;do;while(X===fe[++ne]&&X===fe[++ne]&&X===fe[++ne]&&X===fe[++ne]&&X===fe[++ne]&&X===fe[++ne]&&X===fe[++ne]&&X===fe[++ne]&&ne<ye);F.match_length=H-(ye-ne),F.match_length>F.lookahead&&(F.match_length=F.lookahead)}if(F.match_length>=P?(re=s._tr_tally(F,1,F.match_length-P),F.lookahead-=F.match_length,F.strstart+=F.match_length,F.match_length=0):(re=s._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++),re&&(k(F,!1),F.strm.avail_out===0))return o}return F.insert=0,K===g?(k(F,!0),F.strm.avail_out===0?ie:Z):F.last_lit&&(k(F,!1),F.strm.avail_out===0)?o:U}(j,M):i[j.level].func(j,M);if(G!==ie&&G!==Z||(j.status=666),G===o||G===ie)return a.avail_out===0&&(j.last_flush=-1),u;if(G===U&&(M===1?s._tr_align(j):M!==5&&(s._tr_stored_block(j,0,0,!1),M===3&&(Q(j.head),j.lookahead===0&&(j.strstart=0,j.block_start=0,j.insert=0))),R(a),a.avail_out===0))return j.last_flush=-1,u}return M!==g?u:j.wrap<=0?1:(j.wrap===2?(te(j,255&a.adler),te(j,a.adler>>8&255),te(j,a.adler>>16&255),te(j,a.adler>>24&255),te(j,255&a.total_in),te(j,a.total_in>>8&255),te(j,a.total_in>>16&255),te(j,a.total_in>>24&255)):(J(j,a.adler>>>16),J(j,65535&a.adler)),R(a),0<j.wrap&&(j.wrap=-j.wrap),j.pending!==0?u:1)},h.deflateEnd=function(a){var M;return a&&a.state?(M=a.state.status)!==S&&M!==69&&M!==73&&M!==91&&M!==103&&M!==L&&M!==666?le(a,w):(a.state=null,M===L?le(a,-3):u):w},h.deflateSetDictionary=function(a,M){var T,j,v,z,W,G,F,K,re=M.length;if(!a||!a.state||(z=(T=a.state).wrap)===2||z===1&&T.status!==S||T.lookahead)return w;for(z===1&&(a.adler=c(a.adler,M,re,0)),T.wrap=0,re>=T.w_size&&(z===0&&(Q(T.head),T.strstart=0,T.block_start=0,T.insert=0),K=new n.Buf8(T.w_size),n.arraySet(K,M,re-T.w_size,T.w_size,0),M=K,re=T.w_size),W=a.avail_in,G=a.next_in,F=a.input,a.avail_in=re,a.next_in=0,a.input=M,pe(T);T.lookahead>=P;){for(j=T.strstart,v=T.lookahead-(P-1);T.ins_h=(T.ins_h<<T.hash_shift^T.window[j+P-1])&T.hash_mask,T.prev[j&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=j,j++,--v;);T.strstart=j,T.lookahead=P-1,pe(T)}return T.strstart+=T.lookahead,T.block_start=T.strstart,T.insert=T.lookahead,T.lookahead=0,T.match_length=T.prev_length=P-1,T.match_available=0,a.next_in=G,a.input=F,a.avail_in=W,T.wrap=z,u},h.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,d,h){d.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,d,h){d.exports=function(i,n){var s,c,b,p,y,g,u,w,m,f,x,_,C,N,E,O,D,A,P,H,oe,S,L,o,U;s=i.state,c=i.next_in,o=i.input,b=c+(i.avail_in-5),p=i.next_out,U=i.output,y=p-(n-i.avail_out),g=p+(i.avail_out-257),u=s.dmax,w=s.wsize,m=s.whave,f=s.wnext,x=s.window,_=s.hold,C=s.bits,N=s.lencode,E=s.distcode,O=(1<<s.lenbits)-1,D=(1<<s.distbits)-1;e:do{C<15&&(_+=o[c++]<<C,C+=8,_+=o[c++]<<C,C+=8),A=N[_&O];t:for(;;){if(_>>>=P=A>>>24,C-=P,(P=A>>>16&255)===0)U[p++]=65535&A;else{if(!(16&P)){if(!(64&P)){A=N[(65535&A)+(_&(1<<P)-1)];continue t}if(32&P){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}H=65535&A,(P&=15)&&(C<P&&(_+=o[c++]<<C,C+=8),H+=_&(1<<P)-1,_>>>=P,C-=P),C<15&&(_+=o[c++]<<C,C+=8,_+=o[c++]<<C,C+=8),A=E[_&D];r:for(;;){if(_>>>=P=A>>>24,C-=P,!(16&(P=A>>>16&255))){if(!(64&P)){A=E[(65535&A)+(_&(1<<P)-1)];continue r}i.msg="invalid distance code",s.mode=30;break e}if(oe=65535&A,C<(P&=15)&&(_+=o[c++]<<C,(C+=8)<P&&(_+=o[c++]<<C,C+=8)),u<(oe+=_&(1<<P)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(_>>>=P,C-=P,(P=p-y)<oe){if(m<(P=oe-P)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(L=x,(S=0)===f){if(S+=w-P,P<H){for(H-=P;U[p++]=x[S++],--P;);S=p-oe,L=U}}else if(f<P){if(S+=w+f-P,(P-=f)<H){for(H-=P;U[p++]=x[S++],--P;);if(S=0,f<H){for(H-=P=f;U[p++]=x[S++],--P;);S=p-oe,L=U}}}else if(S+=f-P,P<H){for(H-=P;U[p++]=x[S++],--P;);S=p-oe,L=U}for(;2<H;)U[p++]=L[S++],U[p++]=L[S++],U[p++]=L[S++],H-=3;H&&(U[p++]=L[S++],1<H&&(U[p++]=L[S++]))}else{for(S=p-oe;U[p++]=U[S++],U[p++]=U[S++],U[p++]=U[S++],2<(H-=3););H&&(U[p++]=U[S++],1<H&&(U[p++]=U[S++]))}break}}break}}while(c<b&&p<g);c-=H=C>>3,_&=(1<<(C-=H<<3))-1,i.next_in=c,i.next_out=p,i.avail_in=c<b?b-c+5:5-(c-b),i.avail_out=p<g?g-p+257:257-(p-g),s.hold=_,s.bits=C}},{}],49:[function(t,d,h){var i=t("../utils/common"),n=t("./adler32"),s=t("./crc32"),c=t("./inffast"),b=t("./inftrees"),p=1,y=2,g=0,u=-2,w=1,m=852,f=592;function x(S){return(S>>>24&255)+(S>>>8&65280)+((65280&S)<<8)+((255&S)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(S){var L;return S&&S.state?(L=S.state,S.total_in=S.total_out=L.total=0,S.msg="",L.wrap&&(S.adler=1&L.wrap),L.mode=w,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new i.Buf32(m),L.distcode=L.distdyn=new i.Buf32(f),L.sane=1,L.back=-1,g):u}function N(S){var L;return S&&S.state?((L=S.state).wsize=0,L.whave=0,L.wnext=0,C(S)):u}function E(S,L){var o,U;return S&&S.state?(U=S.state,L<0?(o=0,L=-L):(o=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?u:(U.window!==null&&U.wbits!==L&&(U.window=null),U.wrap=o,U.wbits=L,N(S))):u}function O(S,L){var o,U;return S?(U=new _,(S.state=U).window=null,(o=E(S,L))!==g&&(S.state=null),o):u}var D,A,P=!0;function H(S){if(P){var L;for(D=new i.Buf32(512),A=new i.Buf32(32),L=0;L<144;)S.lens[L++]=8;for(;L<256;)S.lens[L++]=9;for(;L<280;)S.lens[L++]=7;for(;L<288;)S.lens[L++]=8;for(b(p,S.lens,0,288,D,0,S.work,{bits:9}),L=0;L<32;)S.lens[L++]=5;b(y,S.lens,0,32,A,0,S.work,{bits:5}),P=!1}S.lencode=D,S.lenbits=9,S.distcode=A,S.distbits=5}function oe(S,L,o,U){var ie,Z=S.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new i.Buf8(Z.wsize)),U>=Z.wsize?(i.arraySet(Z.window,L,o-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(U<(ie=Z.wsize-Z.wnext)&&(ie=U),i.arraySet(Z.window,L,o-U,ie,Z.wnext),(U-=ie)?(i.arraySet(Z.window,L,o-U,U,0),Z.wnext=U,Z.whave=Z.wsize):(Z.wnext+=ie,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=ie))),0}h.inflateReset=N,h.inflateReset2=E,h.inflateResetKeep=C,h.inflateInit=function(S){return O(S,15)},h.inflateInit2=O,h.inflate=function(S,L){var o,U,ie,Z,le,$,Q,R,k,te,J,q,pe,be,ae,de,me,he,xe,ve,a,M,T,j,v=0,z=new i.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!S||!S.state||!S.output||!S.input&&S.avail_in!==0)return u;(o=S.state).mode===12&&(o.mode=13),le=S.next_out,ie=S.output,Q=S.avail_out,Z=S.next_in,U=S.input,$=S.avail_in,R=o.hold,k=o.bits,te=$,J=Q,M=g;e:for(;;)switch(o.mode){case w:if(o.wrap===0){o.mode=13;break}for(;k<16;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}if(2&o.wrap&&R===35615){z[o.check=0]=255&R,z[1]=R>>>8&255,o.check=s(o.check,z,2,0),k=R=0,o.mode=2;break}if(o.flags=0,o.head&&(o.head.done=!1),!(1&o.wrap)||(((255&R)<<8)+(R>>8))%31){S.msg="incorrect header check",o.mode=30;break}if((15&R)!=8){S.msg="unknown compression method",o.mode=30;break}if(k-=4,a=8+(15&(R>>>=4)),o.wbits===0)o.wbits=a;else if(a>o.wbits){S.msg="invalid window size",o.mode=30;break}o.dmax=1<<a,S.adler=o.check=1,o.mode=512&R?10:12,k=R=0;break;case 2:for(;k<16;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}if(o.flags=R,(255&o.flags)!=8){S.msg="unknown compression method",o.mode=30;break}if(57344&o.flags){S.msg="unknown header flags set",o.mode=30;break}o.head&&(o.head.text=R>>8&1),512&o.flags&&(z[0]=255&R,z[1]=R>>>8&255,o.check=s(o.check,z,2,0)),k=R=0,o.mode=3;case 3:for(;k<32;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}o.head&&(o.head.time=R),512&o.flags&&(z[0]=255&R,z[1]=R>>>8&255,z[2]=R>>>16&255,z[3]=R>>>24&255,o.check=s(o.check,z,4,0)),k=R=0,o.mode=4;case 4:for(;k<16;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}o.head&&(o.head.xflags=255&R,o.head.os=R>>8),512&o.flags&&(z[0]=255&R,z[1]=R>>>8&255,o.check=s(o.check,z,2,0)),k=R=0,o.mode=5;case 5:if(1024&o.flags){for(;k<16;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}o.length=R,o.head&&(o.head.extra_len=R),512&o.flags&&(z[0]=255&R,z[1]=R>>>8&255,o.check=s(o.check,z,2,0)),k=R=0}else o.head&&(o.head.extra=null);o.mode=6;case 6:if(1024&o.flags&&($<(q=o.length)&&(q=$),q&&(o.head&&(a=o.head.extra_len-o.length,o.head.extra||(o.head.extra=new Array(o.head.extra_len)),i.arraySet(o.head.extra,U,Z,q,a)),512&o.flags&&(o.check=s(o.check,U,q,Z)),$-=q,Z+=q,o.length-=q),o.length))break e;o.length=0,o.mode=7;case 7:if(2048&o.flags){if($===0)break e;for(q=0;a=U[Z+q++],o.head&&a&&o.length<65536&&(o.head.name+=String.fromCharCode(a)),a&&q<$;);if(512&o.flags&&(o.check=s(o.check,U,q,Z)),$-=q,Z+=q,a)break e}else o.head&&(o.head.name=null);o.length=0,o.mode=8;case 8:if(4096&o.flags){if($===0)break e;for(q=0;a=U[Z+q++],o.head&&a&&o.length<65536&&(o.head.comment+=String.fromCharCode(a)),a&&q<$;);if(512&o.flags&&(o.check=s(o.check,U,q,Z)),$-=q,Z+=q,a)break e}else o.head&&(o.head.comment=null);o.mode=9;case 9:if(512&o.flags){for(;k<16;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}if(R!==(65535&o.check)){S.msg="header crc mismatch",o.mode=30;break}k=R=0}o.head&&(o.head.hcrc=o.flags>>9&1,o.head.done=!0),S.adler=o.check=0,o.mode=12;break;case 10:for(;k<32;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}S.adler=o.check=x(R),k=R=0,o.mode=11;case 11:if(o.havedict===0)return S.next_out=le,S.avail_out=Q,S.next_in=Z,S.avail_in=$,o.hold=R,o.bits=k,2;S.adler=o.check=1,o.mode=12;case 12:if(L===5||L===6)break e;case 13:if(o.last){R>>>=7&k,k-=7&k,o.mode=27;break}for(;k<3;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}switch(o.last=1&R,k-=1,3&(R>>>=1)){case 0:o.mode=14;break;case 1:if(H(o),o.mode=20,L!==6)break;R>>>=2,k-=2;break e;case 2:o.mode=17;break;case 3:S.msg="invalid block type",o.mode=30}R>>>=2,k-=2;break;case 14:for(R>>>=7&k,k-=7&k;k<32;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}if((65535&R)!=(R>>>16^65535)){S.msg="invalid stored block lengths",o.mode=30;break}if(o.length=65535&R,k=R=0,o.mode=15,L===6)break e;case 15:o.mode=16;case 16:if(q=o.length){if($<q&&(q=$),Q<q&&(q=Q),q===0)break e;i.arraySet(ie,U,Z,q,le),$-=q,Z+=q,Q-=q,le+=q,o.length-=q;break}o.mode=12;break;case 17:for(;k<14;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}if(o.nlen=257+(31&R),R>>>=5,k-=5,o.ndist=1+(31&R),R>>>=5,k-=5,o.ncode=4+(15&R),R>>>=4,k-=4,286<o.nlen||30<o.ndist){S.msg="too many length or distance symbols",o.mode=30;break}o.have=0,o.mode=18;case 18:for(;o.have<o.ncode;){for(;k<3;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}o.lens[W[o.have++]]=7&R,R>>>=3,k-=3}for(;o.have<19;)o.lens[W[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,T={bits:o.lenbits},M=b(0,o.lens,0,19,o.lencode,0,o.work,T),o.lenbits=T.bits,M){S.msg="invalid code lengths set",o.mode=30;break}o.have=0,o.mode=19;case 19:for(;o.have<o.nlen+o.ndist;){for(;de=(v=o.lencode[R&(1<<o.lenbits)-1])>>>16&255,me=65535&v,!((ae=v>>>24)<=k);){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}if(me<16)R>>>=ae,k-=ae,o.lens[o.have++]=me;else{if(me===16){for(j=ae+2;k<j;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}if(R>>>=ae,k-=ae,o.have===0){S.msg="invalid bit length repeat",o.mode=30;break}a=o.lens[o.have-1],q=3+(3&R),R>>>=2,k-=2}else if(me===17){for(j=ae+3;k<j;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}k-=ae,a=0,q=3+(7&(R>>>=ae)),R>>>=3,k-=3}else{for(j=ae+7;k<j;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}k-=ae,a=0,q=11+(127&(R>>>=ae)),R>>>=7,k-=7}if(o.have+q>o.nlen+o.ndist){S.msg="invalid bit length repeat",o.mode=30;break}for(;q--;)o.lens[o.have++]=a}}if(o.mode===30)break;if(o.lens[256]===0){S.msg="invalid code -- missing end-of-block",o.mode=30;break}if(o.lenbits=9,T={bits:o.lenbits},M=b(p,o.lens,0,o.nlen,o.lencode,0,o.work,T),o.lenbits=T.bits,M){S.msg="invalid literal/lengths set",o.mode=30;break}if(o.distbits=6,o.distcode=o.distdyn,T={bits:o.distbits},M=b(y,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,T),o.distbits=T.bits,M){S.msg="invalid distances set",o.mode=30;break}if(o.mode=20,L===6)break e;case 20:o.mode=21;case 21:if(6<=$&&258<=Q){S.next_out=le,S.avail_out=Q,S.next_in=Z,S.avail_in=$,o.hold=R,o.bits=k,c(S,J),le=S.next_out,ie=S.output,Q=S.avail_out,Z=S.next_in,U=S.input,$=S.avail_in,R=o.hold,k=o.bits,o.mode===12&&(o.back=-1);break}for(o.back=0;de=(v=o.lencode[R&(1<<o.lenbits)-1])>>>16&255,me=65535&v,!((ae=v>>>24)<=k);){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}if(de&&!(240&de)){for(he=ae,xe=de,ve=me;de=(v=o.lencode[ve+((R&(1<<he+xe)-1)>>he)])>>>16&255,me=65535&v,!(he+(ae=v>>>24)<=k);){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}R>>>=he,k-=he,o.back+=he}if(R>>>=ae,k-=ae,o.back+=ae,o.length=me,de===0){o.mode=26;break}if(32&de){o.back=-1,o.mode=12;break}if(64&de){S.msg="invalid literal/length code",o.mode=30;break}o.extra=15&de,o.mode=22;case 22:if(o.extra){for(j=o.extra;k<j;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}o.length+=R&(1<<o.extra)-1,R>>>=o.extra,k-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=23;case 23:for(;de=(v=o.distcode[R&(1<<o.distbits)-1])>>>16&255,me=65535&v,!((ae=v>>>24)<=k);){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}if(!(240&de)){for(he=ae,xe=de,ve=me;de=(v=o.distcode[ve+((R&(1<<he+xe)-1)>>he)])>>>16&255,me=65535&v,!(he+(ae=v>>>24)<=k);){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}R>>>=he,k-=he,o.back+=he}if(R>>>=ae,k-=ae,o.back+=ae,64&de){S.msg="invalid distance code",o.mode=30;break}o.offset=me,o.extra=15&de,o.mode=24;case 24:if(o.extra){for(j=o.extra;k<j;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}o.offset+=R&(1<<o.extra)-1,R>>>=o.extra,k-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){S.msg="invalid distance too far back",o.mode=30;break}o.mode=25;case 25:if(Q===0)break e;if(q=J-Q,o.offset>q){if((q=o.offset-q)>o.whave&&o.sane){S.msg="invalid distance too far back",o.mode=30;break}pe=q>o.wnext?(q-=o.wnext,o.wsize-q):o.wnext-q,q>o.length&&(q=o.length),be=o.window}else be=ie,pe=le-o.offset,q=o.length;for(Q<q&&(q=Q),Q-=q,o.length-=q;ie[le++]=be[pe++],--q;);o.length===0&&(o.mode=21);break;case 26:if(Q===0)break e;ie[le++]=o.length,Q--,o.mode=21;break;case 27:if(o.wrap){for(;k<32;){if($===0)break e;$--,R|=U[Z++]<<k,k+=8}if(J-=Q,S.total_out+=J,o.total+=J,J&&(S.adler=o.check=o.flags?s(o.check,ie,J,le-J):n(o.check,ie,J,le-J)),J=Q,(o.flags?R:x(R))!==o.check){S.msg="incorrect data check",o.mode=30;break}k=R=0}o.mode=28;case 28:if(o.wrap&&o.flags){for(;k<32;){if($===0)break e;$--,R+=U[Z++]<<k,k+=8}if(R!==(4294967295&o.total)){S.msg="incorrect length check",o.mode=30;break}k=R=0}o.mode=29;case 29:M=1;break e;case 30:M=-3;break e;case 31:return-4;case 32:default:return u}return S.next_out=le,S.avail_out=Q,S.next_in=Z,S.avail_in=$,o.hold=R,o.bits=k,(o.wsize||J!==S.avail_out&&o.mode<30&&(o.mode<27||L!==4))&&oe(S,S.output,S.next_out,J-S.avail_out)?(o.mode=31,-4):(te-=S.avail_in,J-=S.avail_out,S.total_in+=te,S.total_out+=J,o.total+=J,o.wrap&&J&&(S.adler=o.check=o.flags?s(o.check,ie,J,S.next_out-J):n(o.check,ie,J,S.next_out-J)),S.data_type=o.bits+(o.last?64:0)+(o.mode===12?128:0)+(o.mode===20||o.mode===15?256:0),(te==0&&J===0||L===4)&&M===g&&(M=-5),M)},h.inflateEnd=function(S){if(!S||!S.state)return u;var L=S.state;return L.window&&(L.window=null),S.state=null,g},h.inflateGetHeader=function(S,L){var o;return S&&S.state&&2&(o=S.state).wrap?((o.head=L).done=!1,g):u},h.inflateSetDictionary=function(S,L){var o,U=L.length;return S&&S.state?(o=S.state).wrap!==0&&o.mode!==11?u:o.mode===11&&n(1,L,U,0)!==o.check?-3:oe(S,L,U,U)?(o.mode=31,-4):(o.havedict=1,g):u},h.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,d,h){var i=t("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];d.exports=function(p,y,g,u,w,m,f,x){var _,C,N,E,O,D,A,P,H,oe=x.bits,S=0,L=0,o=0,U=0,ie=0,Z=0,le=0,$=0,Q=0,R=0,k=null,te=0,J=new i.Buf16(16),q=new i.Buf16(16),pe=null,be=0;for(S=0;S<=15;S++)J[S]=0;for(L=0;L<u;L++)J[y[g+L]]++;for(ie=oe,U=15;1<=U&&J[U]===0;U--);if(U<ie&&(ie=U),U===0)return w[m++]=20971520,w[m++]=20971520,x.bits=1,0;for(o=1;o<U&&J[o]===0;o++);for(ie<o&&(ie=o),S=$=1;S<=15;S++)if($<<=1,($-=J[S])<0)return-1;if(0<$&&(p===0||U!==1))return-1;for(q[1]=0,S=1;S<15;S++)q[S+1]=q[S]+J[S];for(L=0;L<u;L++)y[g+L]!==0&&(f[q[y[g+L]]++]=L);if(D=p===0?(k=pe=f,19):p===1?(k=n,te-=257,pe=s,be-=257,256):(k=c,pe=b,-1),S=o,O=m,le=L=R=0,N=-1,E=(Q=1<<(Z=ie))-1,p===1&&852<Q||p===2&&592<Q)return 1;for(;;){for(A=S-le,H=f[L]<D?(P=0,f[L]):f[L]>D?(P=pe[be+f[L]],k[te+f[L]]):(P=96,0),_=1<<S-le,o=C=1<<Z;w[O+(R>>le)+(C-=_)]=A<<24|P<<16|H|0,C!==0;);for(_=1<<S-1;R&_;)_>>=1;if(_!==0?(R&=_-1,R+=_):R=0,L++,--J[S]==0){if(S===U)break;S=y[g+f[L]]}if(ie<S&&(R&E)!==N){for(le===0&&(le=ie),O+=o,$=1<<(Z=S-le);Z+le<U&&!(($-=J[Z+le])<=0);)Z++,$<<=1;if(Q+=1<<Z,p===1&&852<Q||p===2&&592<Q)return 1;w[N=R&E]=ie<<24|Z<<16|O-m|0}}return R!==0&&(w[O+R]=S-le<<24|64<<16|0),x.bits=ie,0}},{"../utils/common":41}],51:[function(t,d,h){d.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,d,h){var i=t("../utils/common"),n=0,s=1;function c(v){for(var z=v.length;0<=--z;)v[z]=0}var b=0,p=29,y=256,g=y+1+p,u=30,w=19,m=2*g+1,f=15,x=16,_=7,C=256,N=16,E=17,O=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=new Array(2*(g+2));c(oe);var S=new Array(2*u);c(S);var L=new Array(512);c(L);var o=new Array(256);c(o);var U=new Array(p);c(U);var ie,Z,le,$=new Array(u);function Q(v,z,W,G,F){this.static_tree=v,this.extra_bits=z,this.extra_base=W,this.elems=G,this.max_length=F,this.has_stree=v&&v.length}function R(v,z){this.dyn_tree=v,this.max_code=0,this.stat_desc=z}function k(v){return v<256?L[v]:L[256+(v>>>7)]}function te(v,z){v.pending_buf[v.pending++]=255&z,v.pending_buf[v.pending++]=z>>>8&255}function J(v,z,W){v.bi_valid>x-W?(v.bi_buf|=z<<v.bi_valid&65535,te(v,v.bi_buf),v.bi_buf=z>>x-v.bi_valid,v.bi_valid+=W-x):(v.bi_buf|=z<<v.bi_valid&65535,v.bi_valid+=W)}function q(v,z,W){J(v,W[2*z],W[2*z+1])}function pe(v,z){for(var W=0;W|=1&v,v>>>=1,W<<=1,0<--z;);return W>>>1}function be(v,z,W){var G,F,K=new Array(f+1),re=0;for(G=1;G<=f;G++)K[G]=re=re+W[G-1]<<1;for(F=0;F<=z;F++){var X=v[2*F+1];X!==0&&(v[2*F]=pe(K[X]++,X))}}function ae(v){var z;for(z=0;z<g;z++)v.dyn_ltree[2*z]=0;for(z=0;z<u;z++)v.dyn_dtree[2*z]=0;for(z=0;z<w;z++)v.bl_tree[2*z]=0;v.dyn_ltree[2*C]=1,v.opt_len=v.static_len=0,v.last_lit=v.matches=0}function de(v){8<v.bi_valid?te(v,v.bi_buf):0<v.bi_valid&&(v.pending_buf[v.pending++]=v.bi_buf),v.bi_buf=0,v.bi_valid=0}function me(v,z,W,G){var F=2*z,K=2*W;return v[F]<v[K]||v[F]===v[K]&&G[z]<=G[W]}function he(v,z,W){for(var G=v.heap[W],F=W<<1;F<=v.heap_len&&(F<v.heap_len&&me(z,v.heap[F+1],v.heap[F],v.depth)&&F++,!me(z,G,v.heap[F],v.depth));)v.heap[W]=v.heap[F],W=F,F<<=1;v.heap[W]=G}function xe(v,z,W){var G,F,K,re,X=0;if(v.last_lit!==0)for(;G=v.pending_buf[v.d_buf+2*X]<<8|v.pending_buf[v.d_buf+2*X+1],F=v.pending_buf[v.l_buf+X],X++,G===0?q(v,F,z):(q(v,(K=o[F])+y+1,z),(re=D[K])!==0&&J(v,F-=U[K],re),q(v,K=k(--G),W),(re=A[K])!==0&&J(v,G-=$[K],re)),X<v.last_lit;);q(v,C,z)}function ve(v,z){var W,G,F,K=z.dyn_tree,re=z.stat_desc.static_tree,X=z.stat_desc.has_stree,ne=z.stat_desc.elems,ye=-1;for(v.heap_len=0,v.heap_max=m,W=0;W<ne;W++)K[2*W]!==0?(v.heap[++v.heap_len]=ye=W,v.depth[W]=0):K[2*W+1]=0;for(;v.heap_len<2;)K[2*(F=v.heap[++v.heap_len]=ye<2?++ye:0)]=1,v.depth[F]=0,v.opt_len--,X&&(v.static_len-=re[2*F+1]);for(z.max_code=ye,W=v.heap_len>>1;1<=W;W--)he(v,K,W);for(F=ne;W=v.heap[1],v.heap[1]=v.heap[v.heap_len--],he(v,K,1),G=v.heap[1],v.heap[--v.heap_max]=W,v.heap[--v.heap_max]=G,K[2*F]=K[2*W]+K[2*G],v.depth[F]=(v.depth[W]>=v.depth[G]?v.depth[W]:v.depth[G])+1,K[2*W+1]=K[2*G+1]=F,v.heap[1]=F++,he(v,K,1),2<=v.heap_len;);v.heap[--v.heap_max]=v.heap[1],function(fe,Ce){var ke,Re,Ze,je,qe,Ve,Fe=Ce.dyn_tree,Je=Ce.max_code,rt=Ce.stat_desc.static_tree,st=Ce.stat_desc.has_stree,at=Ce.stat_desc.extra_bits,Qe=Ce.stat_desc.extra_base,Le=Ce.stat_desc.max_length,He=0;for(je=0;je<=f;je++)fe.bl_count[je]=0;for(Fe[2*fe.heap[fe.heap_max]+1]=0,ke=fe.heap_max+1;ke<m;ke++)Le<(je=Fe[2*Fe[2*(Re=fe.heap[ke])+1]+1]+1)&&(je=Le,He++),Fe[2*Re+1]=je,Je<Re||(fe.bl_count[je]++,qe=0,Qe<=Re&&(qe=at[Re-Qe]),Ve=Fe[2*Re],fe.opt_len+=Ve*(je+qe),st&&(fe.static_len+=Ve*(rt[2*Re+1]+qe)));if(He!==0){do{for(je=Le-1;fe.bl_count[je]===0;)je--;fe.bl_count[je]--,fe.bl_count[je+1]+=2,fe.bl_count[Le]--,He-=2}while(0<He);for(je=Le;je!==0;je--)for(Re=fe.bl_count[je];Re!==0;)Je<(Ze=fe.heap[--ke])||(Fe[2*Ze+1]!==je&&(fe.opt_len+=(je-Fe[2*Ze+1])*Fe[2*Ze],Fe[2*Ze+1]=je),Re--)}}(v,z),be(K,ye,v.bl_count)}function a(v,z,W){var G,F,K=-1,re=z[1],X=0,ne=7,ye=4;for(re===0&&(ne=138,ye=3),z[2*(W+1)+1]=65535,G=0;G<=W;G++)F=re,re=z[2*(G+1)+1],++X<ne&&F===re||(X<ye?v.bl_tree[2*F]+=X:F!==0?(F!==K&&v.bl_tree[2*F]++,v.bl_tree[2*N]++):X<=10?v.bl_tree[2*E]++:v.bl_tree[2*O]++,K=F,ye=(X=0)===re?(ne=138,3):F===re?(ne=6,3):(ne=7,4))}function M(v,z,W){var G,F,K=-1,re=z[1],X=0,ne=7,ye=4;for(re===0&&(ne=138,ye=3),G=0;G<=W;G++)if(F=re,re=z[2*(G+1)+1],!(++X<ne&&F===re)){if(X<ye)for(;q(v,F,v.bl_tree),--X!=0;);else F!==0?(F!==K&&(q(v,F,v.bl_tree),X--),q(v,N,v.bl_tree),J(v,X-3,2)):X<=10?(q(v,E,v.bl_tree),J(v,X-3,3)):(q(v,O,v.bl_tree),J(v,X-11,7));K=F,ye=(X=0)===re?(ne=138,3):F===re?(ne=6,3):(ne=7,4)}}c($);var T=!1;function j(v,z,W,G){J(v,(b<<1)+(G?1:0),3),function(F,K,re,X){de(F),te(F,re),te(F,~re),i.arraySet(F.pending_buf,F.window,K,re,F.pending),F.pending+=re}(v,z,W)}h._tr_init=function(v){T||(function(){var z,W,G,F,K,re=new Array(f+1);for(F=G=0;F<p-1;F++)for(U[F]=G,z=0;z<1<<D[F];z++)o[G++]=F;for(o[G-1]=F,F=K=0;F<16;F++)for($[F]=K,z=0;z<1<<A[F];z++)L[K++]=F;for(K>>=7;F<u;F++)for($[F]=K<<7,z=0;z<1<<A[F]-7;z++)L[256+K++]=F;for(W=0;W<=f;W++)re[W]=0;for(z=0;z<=143;)oe[2*z+1]=8,z++,re[8]++;for(;z<=255;)oe[2*z+1]=9,z++,re[9]++;for(;z<=279;)oe[2*z+1]=7,z++,re[7]++;for(;z<=287;)oe[2*z+1]=8,z++,re[8]++;for(be(oe,g+1,re),z=0;z<u;z++)S[2*z+1]=5,S[2*z]=pe(z,5);ie=new Q(oe,D,y+1,g,f),Z=new Q(S,A,0,u,f),le=new Q(new Array(0),P,0,w,_)}(),T=!0),v.l_desc=new R(v.dyn_ltree,ie),v.d_desc=new R(v.dyn_dtree,Z),v.bl_desc=new R(v.bl_tree,le),v.bi_buf=0,v.bi_valid=0,ae(v)},h._tr_stored_block=j,h._tr_flush_block=function(v,z,W,G){var F,K,re=0;0<v.level?(v.strm.data_type===2&&(v.strm.data_type=function(X){var ne,ye=4093624447;for(ne=0;ne<=31;ne++,ye>>>=1)if(1&ye&&X.dyn_ltree[2*ne]!==0)return n;if(X.dyn_ltree[18]!==0||X.dyn_ltree[20]!==0||X.dyn_ltree[26]!==0)return s;for(ne=32;ne<y;ne++)if(X.dyn_ltree[2*ne]!==0)return s;return n}(v)),ve(v,v.l_desc),ve(v,v.d_desc),re=function(X){var ne;for(a(X,X.dyn_ltree,X.l_desc.max_code),a(X,X.dyn_dtree,X.d_desc.max_code),ve(X,X.bl_desc),ne=w-1;3<=ne&&X.bl_tree[2*H[ne]+1]===0;ne--);return X.opt_len+=3*(ne+1)+5+5+4,ne}(v),F=v.opt_len+3+7>>>3,(K=v.static_len+3+7>>>3)<=F&&(F=K)):F=K=W+5,W+4<=F&&z!==-1?j(v,z,W,G):v.strategy===4||K===F?(J(v,2+(G?1:0),3),xe(v,oe,S)):(J(v,4+(G?1:0),3),function(X,ne,ye,fe){var Ce;for(J(X,ne-257,5),J(X,ye-1,5),J(X,fe-4,4),Ce=0;Ce<fe;Ce++)J(X,X.bl_tree[2*H[Ce]+1],3);M(X,X.dyn_ltree,ne-1),M(X,X.dyn_dtree,ye-1)}(v,v.l_desc.max_code+1,v.d_desc.max_code+1,re+1),xe(v,v.dyn_ltree,v.dyn_dtree)),ae(v),G&&de(v)},h._tr_tally=function(v,z,W){return v.pending_buf[v.d_buf+2*v.last_lit]=z>>>8&255,v.pending_buf[v.d_buf+2*v.last_lit+1]=255&z,v.pending_buf[v.l_buf+v.last_lit]=255&W,v.last_lit++,z===0?v.dyn_ltree[2*W]++:(v.matches++,z--,v.dyn_ltree[2*(o[W]+y+1)]++,v.dyn_dtree[2*k(z)]++),v.last_lit===v.lit_bufsize-1},h._tr_align=function(v){J(v,2,3),q(v,C,oe),function(z){z.bi_valid===16?(te(z,z.bi_buf),z.bi_buf=0,z.bi_valid=0):8<=z.bi_valid&&(z.pending_buf[z.pending++]=255&z.bi_buf,z.bi_buf>>=8,z.bi_valid-=8)}(v)}},{"../utils/common":41}],53:[function(t,d,h){d.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,d,h){(function(i){(function(n,s){if(!n.setImmediate){var c,b,p,y,g=1,u={},w=!1,m=n.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(n);f=f&&f.setTimeout?f:n,c={}.toString.call(n.process)==="[object process]"?function(N){process.nextTick(function(){_(N)})}:function(){if(n.postMessage&&!n.importScripts){var N=!0,E=n.onmessage;return n.onmessage=function(){N=!1},n.postMessage("","*"),n.onmessage=E,N}}()?(y="setImmediate$"+Math.random()+"$",n.addEventListener?n.addEventListener("message",C,!1):n.attachEvent("onmessage",C),function(N){n.postMessage(y+N,"*")}):n.MessageChannel?((p=new MessageChannel).port1.onmessage=function(N){_(N.data)},function(N){p.port2.postMessage(N)}):m&&"onreadystatechange"in m.createElement("script")?(b=m.documentElement,function(N){var E=m.createElement("script");E.onreadystatechange=function(){_(N),E.onreadystatechange=null,b.removeChild(E),E=null},b.appendChild(E)}):function(N){setTimeout(_,0,N)},f.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var E=new Array(arguments.length-1),O=0;O<E.length;O++)E[O]=arguments[O+1];var D={callback:N,args:E};return u[g]=D,c(g),g++},f.clearImmediate=x}function x(N){delete u[N]}function _(N){if(w)setTimeout(_,0,N);else{var E=u[N];if(E){w=!0;try{(function(O){var D=O.callback,A=O.args;switch(A.length){case 0:D();break;case 1:D(A[0]);break;case 2:D(A[0],A[1]);break;case 3:D(A[0],A[1],A[2]);break;default:D.apply(s,A)}})(E)}finally{x(N),w=!1}}}}function C(N){N.source===n&&typeof N.data=="string"&&N.data.indexOf(y)===0&&_(+N.data.slice(y.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Pe<"u"?Pe:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(es);var wa=es.exports;const va=ms(wa);var ts={exports:{}};(function(r,l){(function(t,d){d()})(Pe,function(){function t(b,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob(["\uFEFF",b],{type:b.type}):b}function d(b,p,y){var g=new XMLHttpRequest;g.open("GET",b),g.responseType="blob",g.onload=function(){c(g.response,p,y)},g.onerror=function(){console.error("could not download file")},g.send()}function h(b){var p=new XMLHttpRequest;p.open("HEAD",b,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function i(b){try{b.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),b.dispatchEvent(p)}}var n=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Pe=="object"&&Pe.global===Pe?Pe:void 0,s=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=n.saveAs||(typeof window!="object"||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(b,p,y){var g=n.URL||n.webkitURL,u=document.createElement("a");p=p||b.name||"download",u.download=p,u.rel="noopener",typeof b=="string"?(u.href=b,u.origin===location.origin?i(u):h(u.href)?d(b,p,y):i(u,u.target="_blank")):(u.href=g.createObjectURL(b),setTimeout(function(){g.revokeObjectURL(u.href)},4e4),setTimeout(function(){i(u)},0))}:"msSaveOrOpenBlob"in navigator?function(b,p,y){if(p=p||b.name||"download",typeof b!="string")navigator.msSaveOrOpenBlob(t(b,y),p);else if(h(b))d(b,p,y);else{var g=document.createElement("a");g.href=b,g.target="_blank",setTimeout(function(){i(g)})}}:function(b,p,y,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof b=="string")return d(b,p,y);var u=b.type==="application/octet-stream",w=/constructor/i.test(n.HTMLElement)||n.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||u&&w||s)&&typeof FileReader<"u"){var f=new FileReader;f.onloadend=function(){var C=f.result;C=m?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=C:location=C,g=null},f.readAsDataURL(b)}else{var x=n.URL||n.webkitURL,_=x.createObjectURL(b);g?g.location=_:location.href=_,g=null,setTimeout(function(){x.revokeObjectURL(_)},4e4)}});n.saveAs=c.saveAs=c,r.exports=c})})(ts);var Tr=ts.exports;const _a=({provider:r,region:l,projectName:t})=>{const[d,h]=V.useState(!1),[i,n]=V.useState(0),[s,c]=V.useState(new Set),b=N=>{n(i===N?-1:N)},p=(N,E)=>{N.stopPropagation();const O=new Set(s);O.has(E)?O.delete(E):(O.add(E),i===E&&E<C.length-1&&n(E+1)),c(O)},y=(N,E)=>{navigator.clipboard.writeText(N),we.success(`Copied ${E}`)},g=(r==null?void 0:r.toLowerCase().replace(/\s+/g,""))||"aws",u=g==="aws"||g.includes("amazon"),w=g==="azure"||g.includes("microsoft");g==="gcp"||g.includes("google");const[m,f]=V.useState("Windows"),x=()=>{const N=m==="Windows"?[{cmd:"winget install Hashicorp.Terraform",label:"Install Terraform"}]:[{cmd:`brew tap hashicorp/tap
brew install hashicorp/tap/terraform`,label:"Install Terraform"}];let E=[];return u?E=m==="Windows"?[{cmd:"msiexec.exe /i https://awscli.amazonaws.com/AWSCLIV2.msi",label:"Install AWS CLI"},{cmd:"aws --version",label:"Verify AWS CLI"}]:[{cmd:"brew install awscli",label:"Install AWS CLI"},{cmd:"aws --version",label:"Verify AWS CLI"}]:w?E=m==="Windows"?[{cmd:`Invoke-WebRequest -Uri https://aka.ms/installazurecliwindows -OutFile AzureCLI.msi
msiexec.exe /i AzureCLI.msi`,label:"Install Azure CLI"}]:[{cmd:"brew install azure-cli",label:"Install Azure CLI"}]:E=m==="Windows"?[{cmd:`Invoke-WebRequest -Uri https://dl.google.com/dl/cloudsdk/channels/rapid/GoogleCloudSDKInstaller.exe -OutFile gcloud-installer.exe
.\\gcloud-installer.exe`,label:"Install GCP CLI"}]:[{cmd:"brew install --cask google-cloud-sdk",label:"Install GCP CLI"}],[...E,...N]},_=()=>u?[{cmd:`# Run configure to set up credentials
aws configure

# You will be prompted for:
# 1. AWS Access Key ID: [PASTE_ACCESS_KEY]
# 2. AWS Secret Access Key: [PASTE_SECRET_KEY]
# 3. Default region name: ${l||"ap-south-1"}
# 4. Default output format: json`,label:"Configure AWS Options"}]:w?[{cmd:`az login
# Browser will open for authentication`,label:"Login to Azure"},{cmd:`az account list --output table
# Copy subscription ID from list
az account set --subscription "[SUBSCRIPTION_ID]"`,label:"Set Subscription"}]:[{cmd:`gcloud auth application-default login
# Browser will open for authentication`,label:"Login to GCP"},{cmd:`# List available projects
gcloud projects list

# Set target project
gcloud config set project [PROJECT_ID]`,label:"Set Project"}],C=[{title:u?"Create AWS Account":w?"Create Azure Account":"Create GCP Account",duration:"5 min",description:"Ensure you have a valid cloud provider account with billing enabled.",links:[{label:u?"AWS Free Tier":w?"Azure Free Account":"GCP Free Tier",url:u?"https://aws.amazon.com/free":w?"https://azure.microsoft.com/free":"https://cloud.google.com/free"}],commands:null},{title:"Install CLI & Terraform",duration:"3 min",description:"Install the necessary command-line tools to interact with your cloud provider and deploy infrastructure.",links:[{label:"Terraform Download",url:"https://www.terraform.io/downloads"},{label:u?"AWS CLI Guide":w?"Azure CLI Guide":"GCloud CLI Guide",url:u?"https://aws.amazon.com/cli/":w?"https://learn.microsoft.com/cli/azure/install-azure-cli":"https://cloud.google.com/sdk/docs/install"}],isInstallStep:!0,commands:x()},{title:"Login & Select Region",duration:"2 min",description:"Authenticate your CLI sessions and target the correct region.",links:null,commands:_()},{title:"Initialize Terraform",duration:"2 min",description:"Prepare your working directory for the new configuration.",links:null,commands:[{cmd:`unzip ${t||"project"}-terraform.zip
cd ${g}/
terraform init`,label:"Init Commands"}]},{title:"Deploy Infrastructure",duration:"3 min",description:"Preview and apply the changes to your cloud environment.",links:null,commands:[{cmd:`terraform plan
terraform apply`,label:"Deploy Commands"}]},{title:"Verify Services",duration:"2 min",description:"Confirm that all resources are up and running as expected.",links:null,checklist:["Infrastructure created successfully (no errors)","Application endpoint is reachable (if applicable)","Database connection verified","Resources appear in Cloud Console"],isVerification:!0}];return e.jsxs("div",{className:"bg-[#1e1e1e] rounded-xl border border-white/5 shadow-xl overflow-hidden animate-fade-in font-sans",children:[e.jsxs("div",{onClick:()=>h(!d),className:"bg-[#252525] px-6 py-5 border-b border-white/10 flex items-center justify-between cursor-pointer hover:bg-[#2a2a2a] transition-colors select-none",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white tracking-wide",children:"Deployment Guide"}),e.jsxs("p",{className:"text-xs text-gray-400",children:[d?"Follow these steps to deploy on ":"Click to expand deployment steps for ",e.jsx("span",{className:"text-primary font-semibold",children:u?"AWS":w?"Azure":"GCP"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider ${u?"bg-[#FF9900]/10 text-[#FF9900] border border-[#FF9900]/20":w?"bg-[#0078D4]/10 text-[#0078D4] border border-[#0078D4]/20":"bg-[#4285F4]/10 text-[#4285F4] border border-[#4285F4]/20"}`,children:u?"Amazon Web Services":w?"Microsoft Azure":"Google Cloud"}),e.jsxs("a",{href:"https://cloudiverse.app/docs",target:"_blank",rel:"noreferrer",onClick:N=>N.stopPropagation(),className:"text-gray-400 hover:text-white text-xs flex items-center space-x-1 transition-colors",children:[e.jsx("span",{children:"Docs"}),e.jsx("span",{className:"material-icons text-[10px]",children:"open_in_new"})]}),e.jsx("span",{className:`material-icons text-gray-400 transition-transform duration-300 ${d?"rotate-180":""}`,children:"expand_more"})]})]}),d&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("div",{className:"p-6 space-y-3 bg-[#1e1e1e]",children:C.map((N,E)=>{const O=i===E,D=s.has(E);return e.jsxs("div",{className:`rounded-lg border transition-all duration-300 overflow-hidden ${O?"bg-[#2a2a2a] border-primary/30 shadow-lg scale-[1.01]":"bg-[#252525] border-white/5 hover:bg-[#2d2d2d] cursor-pointer"}`,children:[e.jsxs("div",{onClick:()=>b(E),className:"px-5 py-4 flex items-center justify-between select-none",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-6 h-6 rounded-md flex items-center justify-center text-xs font-bold font-mono ${O?"bg-primary text-white":"bg-white/10 text-gray-400"}`,children:E+1}),e.jsx("span",{className:`font-medium transition-colors ${O?"text-white":"text-gray-300"}`,children:N.title})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:N.duration}),e.jsx("div",{onClick:A=>p(A,E),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all cursor-pointer hover:scale-110 ${D?"bg-green-500 border-green-500 text-black":"border-gray-600 hover:border-gray-400"}`,children:D&&e.jsx("span",{className:"material-icons text-sm font-bold",children:"check"})})]})]}),O&&e.jsx("div",{className:"px-5 pb-5 pt-0 animate-fade-in-down",children:e.jsxs("div",{className:"pl-10 space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-400 leading-relaxed border-l-2 border-white/10 pl-3",children:N.description}),N.isInstallStep&&e.jsx("div",{className:"flex space-x-2 mb-2",children:["Windows","macOS"].map(A=>e.jsx("button",{onClick:()=>f(A),className:`px-4 py-2 text-xs font-bold rounded-lg transition-all ${m===A?"bg-primary text-white shadow-lg shadow-primary/20":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:A},A))}),N.links&&e.jsx("div",{className:"flex flex-wrap gap-2",children:N.links.map((A,P)=>e.jsxs("a",{href:A.url,target:"_blank",rel:"noreferrer",className:"px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-full text-xs text-primary transition-colors flex items-center space-x-1 border border-transparent hover:border-primary/20",children:[e.jsx("span",{children:A.label}),e.jsx("span",{className:"material-icons text-[10px]",children:"launch"})]},P))}),N.commands&&N.commands.map((A,P)=>e.jsxs("div",{className:"group relative rounded-lg overflow-hidden border border-black/50 bg-[#151515]",children:[e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>y(A.cmd,"command"),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded text-gray-300 hover:text-white transition-colors",children:e.jsx("span",{className:"material-icons text-xs",children:"content_copy"})})}),e.jsx("pre",{className:"p-4 font-mono text-sm text-gray-300 overflow-x-auto whitespace-pre-wrap",children:A.cmd})]},P)),N.isVerification&&N.checklist&&e.jsxs("div",{className:"bg-green-500/5 rounded-lg border border-green-500/10 p-4 space-y-2",children:[N.checklist.map((A,P)=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-green-500 rounded border-gray-600 bg-black/20 focus:ring-0 focus:ring-offset-0 transition-colors"}),e.jsx("span",{className:"text-sm text-gray-300 group-hover:text-white transition-colors",children:A})]},P)),e.jsx("div",{className:"pt-2 mt-2",children:e.jsxs("button",{onClick:()=>window.open(u?"https://console.aws.amazon.com":w?"https://portal.azure.com":"https://console.cloud.google.com","_blank"),className:"text-xs text-green-400 hover:text-green-300 underline underline-offset-2 flex items-center space-x-1",children:[e.jsx("span",{children:"Open Console"}),e.jsx("span",{className:"material-icons text-[10px]",children:"open_in_new"})]})})]}),E<C.length-1&&e.jsx("div",{className:"pt-2",children:e.jsxs("button",{onClick:()=>n(E+1),className:"text-xs font-medium text-gray-500 hover:text-white transition-colors flex items-center space-x-1",children:[e.jsx("span",{children:"Continue to next step"}),e.jsx("span",{className:"material-icons text-xs",children:"arrow_downward"})]})})]})})]},E)})}),s.size===C.length&&e.jsx("div",{className:"bg-green-500/10 border-t border-green-500/20 px-6 py-3 text-center",children:e.jsxs("span",{className:"text-green-400 text-sm font-bold flex items-center justify-center space-x-2",children:[e.jsx("span",{className:"material-icons text-lg",children:"celebration"}),e.jsx("span",{children:"Deployment Completed!"})]})})]})]})},Br="http://localhost:5000/api",ja=({workspaceId:r,infraSpec:l,selectedProvider:t,costEstimation:d,onComplete:h,onBack:i,isDeployed:n,onTerraformLoaded:s})=>{var U,ie,Z,le;const[c,b]=V.useState(!0),[p,y]=V.useState(null),[g,u]=V.useState("main.tf"),[w,m]=V.useState([]),[f,x]=V.useState(null),[_,C]=V.useState(!1),[N,E]=V.useState(!1);V.useEffect(()=>{(async()=>{var Q,R,k,te,J,q,pe,be,ae;try{if(!(l!=null&&l.sizing)){console.warn("[TERRAFORM] Skipping generation - Step 3 not completed (missing sizing)"),x("Cost analysis must be completed before generating Terraform. Please go back and complete Step 3."),b(!1);return}if(!((Q=l==null?void 0:l.region)!=null&&Q.resolved_region)){console.warn("[TERRAFORM] Skipping generation - Step 2 region resolution not completed"),x("Region resolution must be completed before generating Terraform. Please go back and ensure Step 2 is completed."),b(!1);return}const de=(R=d.provider_details)==null?void 0:R[t],me=((k=Object.entries(d.scenarios||{}).find(([he,xe])=>{var ve;return((ve=xe[t])==null?void 0:ve.monthly_cost)===(de==null?void 0:de.total_monthly_cost)}))==null?void 0:k[0])||"standard";try{const he=await Ie.post(`${Br}/workflow/terraform`,{workspace_id:r,infraSpec:l,provider:t,profile:me,project_name:l.project_name||"cloudiverse-project",requirements:{}});if(he.data.success){const xe=ve=>{const a={};for(const[M,T]of Object.entries(ve)){const j=M.split("/");let v=a;for(let z=0;z<j.length-1;z++){const W=j[z];v[W]||(v[W]={}),v=v[W]}v[j[j.length-1]]=T}return a};he.data.terraform.structure==="modular"?(y(xe(he.data.terraform.project)),console.log("[TERRAFORM] Hash:",((te=he.data.terraform_hash)==null?void 0:te.substring(0,16))+"..."),console.log("[TERRAFORM] Manifest:",he.data.deployment_manifest)):y({"main.tf":he.data.terraform.code}),m(he.data.services||[]),s&&s()}}catch(he){console.warn("Terraform generation failed (non-blocking):",he),console.error("[TERRAFORM ERROR] Full error:",(J=he.response)==null?void 0:J.data);const xe=((pe=(q=he.response)==null?void 0:q.data)==null?void 0:pe.message)||he.message||"",ve=((ae=(be=he.response)==null?void 0:be.data)==null?void 0:ae.details)||"";if(console.error("[TERRAFORM ERROR] Message:",xe),console.error("[TERRAFORM ERROR] Details:",ve),xe.includes("No template for pattern")||xe.includes("not available")||xe.includes("under construction"))C(!0),console.log("[TERRAFORM UX] Pattern template not available - showing coming soon message");else{const a=`Failed to generate Terraform code: ${xe}${ve?`
`+ve:""}`;x(a)}throw he}}catch(de){console.error("Terraform generation failed:",de),x("Failed to generate Terraform code. Please try again.")}finally{b(!1)}})()},[r,l,t,d]);const O=()=>{if(!p)return"";const $=g.split("/");let Q=p;for(const R of $)if(typeof Q=="object"&&Q[R])Q=Q[R];else return"";return typeof Q=="string"?Q:""},D=($,Q="")=>{let R=[];for(const[k,te]of Object.entries($)){const J=Q?`${Q}/${k}`:k;typeof te=="string"?R.push(J):typeof te=="object"&&(R=R.concat(D(te,J)))}return R},A=($,Q="")=>{const R=[];for(const[k,te]of Object.entries($)){const J=Q?`${Q}/${k}`:k;typeof te=="string"?R.push({path:J,name:k,type:"file",depth:J.split("/").length-1}):typeof te=="object"&&(R.push({path:J,name:k,type:"folder",depth:J.split("/").length-1}),R.push(...A(te,J)))}return R},P=()=>{const $=O();navigator.clipboard.writeText($),we.success(`Copied ${g} to clipboard`)},H=async()=>{if(p){E(!0);try{const $=we.loading("Preparing deployment package..."),Q=await Ie.get(`${Br}/workflow/export-terraform?provider=${t}&workspaceId=${r}`,{responseType:"blob"}),k=`${l.project_name||"cloudiverse-project"}-terraform.zip`;Tr.saveAs(Q.data,k),we.success("Downloaded Terraform project with Deployment Guide",{id:$})}catch($){console.error("Export failed:",$),we.error("Failed to download export package",{id:"dl_zip"}),console.warn("Falling back to client-side zip generation...");const Q=new va,R=l.project_name||"cloudiverse-project",k=(J,q)=>{for(const[pe,be]of Object.entries(J))if(typeof be=="string")q.file(pe,be);else if(typeof be=="object"){const ae=q.folder(pe);k(be,ae)}};k(p,Q),Q.file("README.txt",`Generated by Cloudiverse (Client-side Fallback).
Please refer to online documentation for deployment instructions.`);const te=await Q.generateAsync({type:"blob"});Tr.saveAs(te,`${R}-terraform-fallback.zip`),we.dismiss(),we.success("Downloaded backup zip (client-side generated)")}finally{E(!1)}}};if(c)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full border-4 border-transparent border-t-primary animate-spin"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-semibold text-white",children:"Generating Infrastructure Code"}),e.jsxs("p",{className:"text-gray-400 mt-2",children:["Creating Terraform configuration for ",t,"..."]})]})]});if(_){const $=(l==null?void 0:l.architecture_pattern)||((U=l==null?void 0:l.service_classes)==null?void 0:U.pattern_name)||"this pattern";return e.jsx("div",{className:"max-w-4xl mx-auto space-y-6 animate-fade-in pb-20",children:e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-6",children:[e.jsx("div",{className:"text-amber-500 text-6xl material-icons",children:"construction"}),e.jsxs("div",{className:"text-center max-w-2xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Terraform Generation Coming Soon"}),e.jsxs("p",{className:"text-gray-300 text-lg mb-2",children:["Terraform generation for ",e.jsx("span",{className:"text-primary font-semibold",children:$})," is not available yet."]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Your architecture and cost estimates are saved and validated. You can continue with manual infrastructure setup or check back later for automated Terraform generation."})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 w-full max-w-2xl",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Your Architecture Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300",children:"Pattern"}),e.jsx("span",{className:"text-white font-semibold",children:$})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300",children:"Provider"}),e.jsx("span",{className:"text-white font-semibold",children:t.toUpperCase()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300",children:"Services"}),e.jsx("span",{className:"text-white font-semibold",children:((Z=(ie=l==null?void 0:l.service_classes)==null?void 0:ie.required_services)==null?void 0:Z.length)||0})]})]})]}),e.jsxs("button",{onClick:h,className:"mt-6 px-8 py-3 bg-primary hover:bg-primary/90 rounded-xl text-white font-semibold transition-colors flex items-center space-x-2",children:[e.jsx("span",{className:"material-icons",children:"check_circle"}),e.jsx("span",{children:"Continue to Dashboard"})]})]})})}if(f)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-6 animate-fade-in",children:[e.jsx("div",{className:"text-red-500 text-6xl material-icons",children:"error_outline"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-semibold text-white",children:"Generation Failed"}),e.jsx("p",{className:"text-red-400 mt-2",children:f}),e.jsx("button",{onClick:i,className:"mt-6 px-6 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",children:"Go Back"})]})]});p&&D(p);const oe=p?A(p):[],S=O();($=>{const Q=$==null?void 0:$.toLowerCase();return Q==="aws"?[{cmd:"terraform init",desc:"Initialize Terraform working directory"},{cmd:"terraform plan",desc:"Generate and show an execution plan"},{cmd:"terraform apply",desc:"Builds or changes infrastructure"}]:Q==="azure"?[{cmd:"az login",desc:"Log in to Azure CLI"},{cmd:"terraform init",desc:"Initialize Terraform"},{cmd:"terraform apply",desc:"Deploy infrastructure"}]:Q==="gcp"?[{cmd:"gcloud auth application-default login",desc:"Acquire new user credentials"},{cmd:"terraform init",desc:"Initialize Terraform"},{cmd:"terraform apply",desc:"Deploy infrastructure"}]:[]})(t),t==null||t.toLowerCase().replace(/\s+/g,"");const o=w.length>0?w:oe.filter($=>!$.name.endsWith(".tf")&&!$.name.endsWith(".md")&&!$.type==="folder").map($=>$.name.replace(".tf",""));return o.length>0||p&&typeof p=="object"&&Object.keys(p).filter($=>$.endsWith(".tf")&&$!=="main.tf"&&$!=="variables.tf"&&$!=="outputs.tf").map($=>$.replace(".tf","")),e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Infrastructure Code"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Modular Terraform project for ",t]})]}),e.jsxs("div",{className:"flex space-x-3 items-center",children:[e.jsxs("button",{onClick:P,className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-gray-300 hover:text-white hover:bg-white/10 transition-colors flex items-center space-x-2",children:[e.jsx("span",{className:"material-icons text-sm",children:"content_copy"}),e.jsx("span",{className:"text-sm",children:"Copy File"})]}),e.jsxs("button",{onClick:H,disabled:N,className:`px-4 py-2 bg-primary/10 border border-primary/20 rounded-lg text-primary transition-colors flex items-center space-x-2 ${N?"opacity-50 cursor-wait":"hover:bg-primary/20"}`,children:[N?e.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}):e.jsx("span",{className:"material-icons text-sm",children:"download"}),e.jsx("span",{className:"text-sm",children:N?"Zip...":"Download ZIP"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"col-span-1 bg-surface border border-border rounded-xl p-4 max-h-[600px] overflow-y-auto",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Project Files"}),e.jsx("div",{className:"space-y-1",children:oe.map($=>{const Q=$.type==="folder",R=$.path===g,k=$.depth*16;return e.jsxs("button",{onClick:()=>!Q&&u($.path),disabled:Q,className:`w-full text-left px-2 py-1.5 rounded text-xs font-mono transition-colors flex items-center space-x-2 ${Q?"text-amber-400 font-semibold cursor-default":R?"bg-primary/20 text-primary border border-primary/30":"text-gray-400 hover:text-white hover:bg-white/5"}`,style:{paddingLeft:`${8+k}px`},children:[e.jsx("span",{className:"material-icons text-xs",children:Q?"folder":$.name.endsWith(".tf")?"description":$.name.endsWith(".md")?"article":"insert_drive_file"}),e.jsx("span",{className:"truncate",children:$.name})]},$.path)})})]}),e.jsxs("div",{className:"col-span-3 bg-[#1e1e1e] rounded-xl border border-white/10 overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"flex items-center px-4 py-2 bg-white/5 border-b border-white/5",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500/50"}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500/50"}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500/50"})]}),e.jsx("span",{className:"ml-4 text-xs font-mono text-gray-400",children:g})]}),e.jsx("div",{className:"p-4 overflow-x-auto max-h-[550px] overflow-y-auto",children:e.jsx("pre",{className:"font-mono text-sm text-gray-300 leading-relaxed",children:S||"// Select a file to view"})})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(_a,{provider:t,region:(le=l.region)==null?void 0:le.resolved_region,projectName:l.project_name})}),e.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-white/5 mt-8",children:[e.jsxs("button",{onClick:i,className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[e.jsx("span",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{children:"Back to Diagram"})]}),e.jsxs("button",{onClick:h,className:"px-8 py-4 bg-primary hover:bg-primary/90 border border-primary/20 rounded-xl text-black font-bold transition-all flex items-center space-x-3",children:[e.jsx("span",{className:"material-icons",children:"summarize"}),e.jsx("span",{children:"View Summary"})]})]})]})},Na=({workspaceId:r,infraSpec:l,costEstimation:t,onNext:d,onBack:h,onRequirementsCaptured:i,isDeployed:n})=>{const[s,c]=V.useState({nfr:{availability:"99.5",latency:"medium",compliance:[],data_residency:"",cost_ceiling_usd:null,security_level:"standard"},region:{primary_region:"india",secondary_region:"",multi_region:!1},data_classes:{},data_retention:{},deployment_strategy:"rolling",downtime_allowed:!0,observability:{logs:!0,metrics:!0,alerts:!1}}),[b,p]=V.useState("region"),y=(f,x)=>{c(_=>({..._,region:{..._.region,[f]:x}}))},g=f=>{c(x=>({...x,deployment_strategy:f}))},u=(f,x)=>{c(_=>({..._,observability:{..._.observability,[f]:x}}))},w=()=>{try{if(!s||Object.keys(s).length===0){console.error("Requirements data is empty");return}i&&i(s),d()}catch(f){console.error("Error in handleSubmit:",f)}},m=[{id:"region",label:"Region",icon:"public"},{id:"data",label:"Data",icon:"database"},{id:"deployment",label:"Deployment",icon:"build"},{id:"observability",label:"Monitoring",icon:"monitoring"}];return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in pb-20",children:[e.jsxs("div",{className:"text-center space-y-4 mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"System Requirements"}),e.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Configure region, data, deployment, and monitoring settings for your infrastructure."})]}),e.jsx("div",{className:"flex flex-wrap gap-2 border-b border-white/10 pb-4",children:m.map(f=>e.jsxs("button",{onClick:()=>p(f.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center space-x-2 ${b===f.id?"bg-primary/20 text-white border border-primary/30":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx("span",{className:"material-icons text-sm",children:f.icon}),e.jsx("span",{children:f.label})]},f.id))}),e.jsxs("fieldset",{disabled:n,className:"bg-surface border border-border rounded-2xl p-6 transition-opacity duration-300 disabled:opacity-60",children:[b==="region"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Region Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Primary Region"}),e.jsxs("select",{value:s.region.primary_region,onChange:f=>y("primary_region",f.target.value),className:"w-full bg-surface border border-border rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary",children:[e.jsx("option",{value:"us-east-1",children:"US East (N. Virginia)"}),e.jsx("option",{value:"us-west-2",children:"US West (Oregon)"}),e.jsx("option",{value:"eu-west-1",children:"EU (Ireland)"}),e.jsx("option",{value:"eu-central-1",children:"EU (Frankfurt)"}),e.jsx("option",{value:"ap-southeast-1",children:"Asia Pacific (Singapore)"}),e.jsx("option",{value:"ap-northeast-1",children:"Asia Pacific (Tokyo)"}),e.jsx("option",{value:"ca-central-1",children:"Canada (Central)"}),e.jsx("option",{value:"sa-east-1",children:"South America (So Paulo)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Secondary Region (Optional)"}),e.jsxs("select",{value:s.region.secondary_region,onChange:f=>y("secondary_region",f.target.value),className:"w-full bg-surface border border-border rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary",children:[e.jsx("option",{value:"",children:"None"}),e.jsx("option",{value:"us-east-1",children:"US East (N. Virginia)"}),e.jsx("option",{value:"us-west-2",children:"US West (Oregon)"}),e.jsx("option",{value:"eu-west-1",children:"EU (Ireland)"}),e.jsx("option",{value:"eu-central-1",children:"EU (Frankfurt)"}),e.jsx("option",{value:"ap-southeast-1",children:"Asia Pacific (Singapore)"}),e.jsx("option",{value:"ap-northeast-1",children:"Asia Pacific (Tokyo)"}),e.jsx("option",{value:"ca-central-1",children:"Canada (Central)"}),e.jsx("option",{value:"sa-east-1",children:"South America (So Paulo)"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-surface/50 rounded-xl border border-border",children:[e.jsx("input",{type:"checkbox",id:"multi-region",checked:s.region.multi_region,onChange:f=>y("multi_region",f.target.checked),className:"w-5 h-5 text-primary bg-surface border-border rounded focus:ring-primary"}),e.jsx("label",{htmlFor:"multi-region",className:"text-white",children:"Enable multi-region deployment for high availability"})]}),s.nfr.compliance.includes("GDPR")&&e.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"material-icons text-amber-400 text-sm mt-0.5",children:"info"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-200 mb-1",children:"Data Residency Notice"}),e.jsx("p",{className:"text-sm text-amber-200/80",children:"GDPR compliance requires data to be stored within EU regions. Primary region must be EU-based."})]})]})})]}),b==="data"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Data Classification & Retention"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-4",children:"Data Classification"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Classify your data types to apply appropriate security measures"}),e.jsx("div",{className:"space-y-4",children:[{type:"user_profiles",label:"User Profiles",desc:"Names, emails, personal preferences, account details"},{type:"payment_data",label:"Payment Data",desc:"Credit cards, billing info, transaction history"},{type:"documents",label:"Documents",desc:"User-uploaded files, images, videos, PDFs"},{type:"logs",label:"System Logs",desc:"Application logs, access logs, error traces"},{type:"analytics",label:"Analytics",desc:"Usage metrics, user behavior, performance data"},{type:"backup",label:"Backup Data",desc:"Backup copies, snapshots, archived data"}].map(f=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface/30 rounded-xl border border-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:f.label}),e.jsx("div",{className:"text-sm text-gray-400",children:f.desc})]}),e.jsxs("select",{value:s.data_classes[f.type]||"",onChange:x=>c(_=>({..._,data_classes:{..._.data_classes,[f.type]:x.target.value}})),className:"bg-surface border border-border rounded-lg px-3 py-2 text-white focus:outline-none focus:border-primary",children:[e.jsx("option",{value:"",children:"Unclassified"}),e.jsx("option",{value:"public",children:"Public"}),e.jsx("option",{value:"internal",children:"Internal"}),e.jsx("option",{value:"confidential",children:"Confidential"}),e.jsx("option",{value:"restricted",children:"Restricted"})]})]},f.type))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-4",children:"Data Retention"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Define how long different data types should be retained"}),e.jsx("div",{className:"space-y-4",children:[{type:"user_profiles",label:"User Profiles"},{type:"payment_data",label:"Payment Data"},{type:"logs",label:"System Logs"},{type:"analytics",label:"Analytics Data"}].map(f=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface/30 rounded-xl border border-border",children:[e.jsx("div",{children:e.jsx("div",{className:"font-medium text-white",children:f.label})}),e.jsx("input",{type:"text",placeholder:"e.g., 7 years, 90 days",value:s.data_retention[f.type]||"",onChange:x=>c(_=>({..._,data_retention:{..._.data_retention,[f.type]:x.target.value}})),className:"bg-surface border border-border rounded-lg px-3 py-2 text-white focus:outline-none focus:border-primary w-40"})]},f.type))})]})]})]}),b==="deployment"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Deployment Strategy"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-4",children:"Deployment Strategy"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[{value:"rolling",label:"Rolling",desc:"Instances updated gradually, minimal risk"},{value:"blue-green",label:"Blue/Green",desc:"Zero downtime with instant rollback capability"},{value:"canary",label:"Canary",desc:"Test with small traffic before full rollout"},{value:"batch",label:"Batch",desc:"All instances updated at once, fastest but risky"}].map(f=>e.jsxs("div",{onClick:()=>!n&&g(f.value),className:`p-4 rounded-xl border transition-all ${n?"cursor-not-allowed opacity-60":"cursor-pointer"} ${s.deployment_strategy===f.value?"border-primary bg-primary/10 text-white":"border-white/10 text-gray-400 hover:border-white/20 hover:bg-white/5"}`,children:[e.jsx("div",{className:"font-medium",children:f.label}),e.jsx("div",{className:"text-xs opacity-70 mt-1",children:f.desc})]},f.value))})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-surface/50 rounded-xl border border-border",children:[e.jsx("input",{type:"checkbox",id:"downtime-allowed",checked:s.downtime_allowed,onChange:f=>c(x=>({...x,downtime_allowed:f.target.checked})),className:"w-5 h-5 text-primary bg-surface border-border rounded focus:ring-primary"}),e.jsx("label",{htmlFor:"downtime-allowed",className:"text-white",children:"Downtime is allowed during deployment"})]}),e.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"material-icons text-blue-400 text-sm mt-0.5",children:"info"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-blue-200 mb-1",children:"Strategy Recommendations"}),e.jsxs("p",{className:"text-sm text-blue-200/80",children:[" High availability systems: Blue/Green or Canary",e.jsx("br",{})," Development systems: Rolling",e.jsx("br",{})," Batch: Only for non-critical systems"]})]})]})})]})]}),b==="observability"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Observability & Monitoring"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface/30 rounded-xl border border-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"Application Logging"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Capture application and system logs"})]}),e.jsxs("div",{className:"relative inline-block w-12 h-6",children:[e.jsx("input",{type:"checkbox",checked:s.observability.logs,onChange:f=>u("logs",f.target.checked),className:"sr-only",id:"logs-toggle"}),e.jsx("label",{htmlFor:"logs-toggle",className:`block w-12 h-6 rounded-full cursor-pointer transition-colors ${s.observability.logs?"bg-primary":"bg-gray-600"}`,children:e.jsx("span",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${s.observability.logs?"transform translate-x-6":""}`})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface/30 rounded-xl border border-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"Infrastructure Metrics"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Monitor CPU, memory, disk, and network"})]}),e.jsxs("div",{className:"relative inline-block w-12 h-6",children:[e.jsx("input",{type:"checkbox",checked:s.observability.metrics,onChange:f=>u("metrics",f.target.checked),className:"sr-only",id:"metrics-toggle"}),e.jsx("label",{htmlFor:"metrics-toggle",className:`block w-12 h-6 rounded-full cursor-pointer transition-colors ${s.observability.metrics?"bg-primary":"bg-gray-600"}`,children:e.jsx("span",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${s.observability.metrics?"transform translate-x-6":""}`})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface/30 rounded-xl border border-border",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"Alerting System"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Get notified of issues and anomalies"})]}),e.jsxs("div",{className:"relative inline-block w-12 h-6",children:[e.jsx("input",{type:"checkbox",checked:s.observability.alerts,onChange:f=>u("alerts",f.target.checked),className:"sr-only",id:"alerts-toggle"}),e.jsx("label",{htmlFor:"alerts-toggle",className:`block w-12 h-6 rounded-full cursor-pointer transition-colors ${s.observability.alerts?"bg-primary":"bg-gray-600"}`,children:e.jsx("span",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${s.observability.alerts?"transform translate-x-6":""}`})})]})]})]}),e.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/20 rounded-xl",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"material-icons text-green-400 text-sm mt-0.5",children:"info"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-green-200 mb-1",children:"Observability Benefits"}),e.jsx("p",{className:"text-sm text-green-200/80",children:"Monitoring and logging are essential for production systems. They help identify issues before they impact users."})]})]})})]})]}),!n&&e.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-white/5",children:[e.jsxs("button",{onClick:h,className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[e.jsx("span",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{children:"Back"})]}),e.jsxs("button",{onClick:w,className:"px-8 py-4 bg-gradient-to-r from-primary to-purple-500 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-primary/20",children:[e.jsx("span",{children:"Continue to Architecture"}),e.jsx("span",{className:"material-icons",children:"arrow_forward"})]})]})]})},rs=({id:r,x:l,y:t,width:d,height:h,style:i,color:n,strokeColor:s,strokeWidth:c,className:b,borderRadius:p,shapeRendering:y,onClick:g,selected:u})=>{const{background:w,backgroundColor:m}=i||{},f=n||w||m;return Oe.createElement("rect",{className:Zr(["react-flow__minimap-node",{selected:u},b]),x:l,y:t,rx:p,ry:p,width:d,height:h,fill:f,stroke:s,strokeWidth:c,shapeRendering:y,onClick:g?x=>g(x,r):void 0})};rs.displayName="MiniMapNode";var ka=V.memo(rs);const Ca=r=>r.nodeOrigin,Sa=r=>r.getNodes().filter(l=>!l.hidden&&l.width&&l.height),gt=r=>r instanceof Function?r:()=>r;function Ea({nodeStrokeColor:r="transparent",nodeColor:l="#e2e2e2",nodeClassName:t="",nodeBorderRadius:d=5,nodeStrokeWidth:h=2,nodeComponent:i=ka,onClick:n}){const s=yt(Sa,Hr),c=yt(Ca),b=gt(l),p=gt(r),y=gt(t),g=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return Oe.createElement(Oe.Fragment,null,s.map(u=>{const{x:w,y:m}=_s(u,c).positionAbsolute;return Oe.createElement(i,{key:u.id,x:w,y:m,width:u.width,height:u.height,style:u.style,selected:u.selected,className:y(u),color:b(u),borderRadius:d,strokeColor:p(u),strokeWidth:h,shapeRendering:g,onClick:n,id:u.id})}))}var Aa=V.memo(Ea);const za=200,Ia=150,Ra=r=>{const l=r.getNodes(),t={x:-r.transform[0]/r.transform[2],y:-r.transform[1]/r.transform[2],width:r.width/r.transform[2],height:r.height/r.transform[2]};return{viewBB:t,boundingRect:l.length>0?js(Ns(l,r.nodeOrigin),t):t,rfId:r.rfId}},Fa="react-flow__minimap-desc";function ss({style:r,className:l,nodeStrokeColor:t="transparent",nodeColor:d="#e2e2e2",nodeClassName:h="",nodeBorderRadius:i=5,nodeStrokeWidth:n=2,nodeComponent:s,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:b="none",maskStrokeWidth:p=1,position:y="bottom-right",onClick:g,onNodeClick:u,pannable:w=!1,zoomable:m=!1,ariaLabel:f="React Flow mini map",inversePan:x=!1,zoomStep:_=10,offsetScale:C=5}){const N=xs(),E=V.useRef(null),{boundingRect:O,viewBB:D,rfId:A}=yt(Ra,Hr),P=(r==null?void 0:r.width)??za,H=(r==null?void 0:r.height)??Ia,oe=O.width/P,S=O.height/H,L=Math.max(oe,S),o=L*P,U=L*H,ie=C*L,Z=O.x-(o-O.width)/2-ie,le=O.y-(U-O.height)/2-ie,$=o+ie*2,Q=U+ie*2,R=`${Fa}-${A}`,k=V.useRef(0);k.current=L,V.useEffect(()=>{if(E.current){const q=gs(E.current),pe=de=>{const{transform:me,d3Selection:he,d3Zoom:xe}=N.getState();if(de.sourceEvent.type!=="wheel"||!he||!xe)return;const ve=-de.sourceEvent.deltaY*(de.sourceEvent.deltaMode===1?.05:de.sourceEvent.deltaMode?1:.002)*_,a=me[2]*Math.pow(2,ve);xe.scaleTo(he,a)},be=de=>{const{transform:me,d3Selection:he,d3Zoom:xe,translateExtent:ve,width:a,height:M}=N.getState();if(de.sourceEvent.type!=="mousemove"||!he||!xe)return;const T=k.current*Math.max(1,me[2])*(x?-1:1),j={x:me[0]-de.sourceEvent.movementX*T,y:me[1]-de.sourceEvent.movementY*T},v=[[0,0],[a,M]],z=ws.translate(j.x,j.y).scale(me[2]),W=xe.constrain()(z,v,ve);xe.transform(he,W)},ae=bs().on("zoom",w?be:null).on("zoom.wheel",m?pe:null);return q.call(ae),()=>{q.on("zoom",null)}}},[w,m,x,_]);const te=g?q=>{const pe=vs(q);g(q,{x:pe[0],y:pe[1]})}:void 0,J=u?(q,pe)=>{const be=N.getState().nodeInternals.get(pe);u(q,be)}:void 0;return Oe.createElement(ys,{position:y,style:r,className:Zr(["react-flow__minimap",l]),"data-testid":"rf__minimap"},Oe.createElement("svg",{width:P,height:H,viewBox:`${Z} ${le} ${$} ${Q}`,role:"img","aria-labelledby":R,ref:E,onClick:te},f&&Oe.createElement("title",{id:R},f),Oe.createElement(Aa,{onClick:J,nodeColor:d,nodeStrokeColor:t,nodeBorderRadius:i,nodeClassName:h,nodeStrokeWidth:n,nodeComponent:s}),Oe.createElement("path",{className:"react-flow__minimap-mask",d:`M${Z-ie},${le-ie}h${$+ie*2}v${Q+ie*2}h${-$-ie*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fill:c,fillRule:"evenodd",stroke:b,strokeWidth:p,pointerEvents:"none"})))}ss.displayName="MiniMap";var Oa=V.memo(ss);function Ta(r,l){if(r.match(/^[a-z]+:\/\//i))return r;if(r.match(/^\/\//))return window.location.protocol+r;if(r.match(/^[a-z]+:/i))return r;const t=document.implementation.createHTMLDocument(),d=t.createElement("base"),h=t.createElement("a");return t.head.appendChild(d),t.body.appendChild(h),l&&(d.href=l),h.href=r,h.href}const Ba=(()=>{let r=0;const l=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(r+=1,`u${l()}${r}`)})();function We(r){const l=[];for(let t=0,d=r.length;t<d;t++)l.push(r[t]);return l}let Ke=null;function as(r={}){return Ke||(r.includeStyleProperties?(Ke=r.includeStyleProperties,Ke):(Ke=We(window.getComputedStyle(document.documentElement)),Ke))}function dt(r,l){const d=(r.ownerDocument.defaultView||window).getComputedStyle(r).getPropertyValue(l);return d?parseFloat(d.replace("px","")):0}function Da(r){const l=dt(r,"border-left-width"),t=dt(r,"border-right-width");return r.clientWidth+l+t}function Pa(r){const l=dt(r,"border-top-width"),t=dt(r,"border-bottom-width");return r.clientHeight+l+t}function ns(r,l={}){const t=l.width||Da(r),d=l.height||Pa(r);return{width:t,height:d}}function $a(){let r,l;try{l=process}catch{}const t=l&&l.env?l.env.devicePixelRatio:null;return t&&(r=parseInt(t,10),Number.isNaN(r)&&(r=1)),r||window.devicePixelRatio||1}const ze=16384;function La(r){(r.width>ze||r.height>ze)&&(r.width>ze&&r.height>ze?r.width>r.height?(r.height*=ze/r.width,r.width=ze):(r.width*=ze/r.height,r.height=ze):r.width>ze?(r.height*=ze/r.width,r.width=ze):(r.width*=ze/r.height,r.height=ze))}function ut(r){return new Promise((l,t)=>{const d=new Image;d.onload=()=>{d.decode().then(()=>{requestAnimationFrame(()=>l(d))})},d.onerror=t,d.crossOrigin="anonymous",d.decoding="async",d.src=r})}async function Ua(r){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(r)).then(encodeURIComponent).then(l=>`data:image/svg+xml;charset=utf-8,${l}`)}async function Ma(r,l,t){const d="http://www.w3.org/2000/svg",h=document.createElementNS(d,"svg"),i=document.createElementNS(d,"foreignObject");return h.setAttribute("width",`${l}`),h.setAttribute("height",`${t}`),h.setAttribute("viewBox",`0 0 ${l} ${t}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),h.appendChild(i),i.appendChild(r),Ua(h)}const Ee=(r,l)=>{if(r instanceof l)return!0;const t=Object.getPrototypeOf(r);return t===null?!1:t.constructor.name===l.name||Ee(t,l)};function Wa(r){const l=r.getPropertyValue("content");return`${r.cssText} content: '${l.replace(/'|"/g,"")}';`}function Ga(r,l){return as(l).map(t=>{const d=r.getPropertyValue(t),h=r.getPropertyPriority(t);return`${t}: ${d}${h?" !important":""};`}).join(" ")}function Za(r,l,t,d){const h=`.${r}:${l}`,i=t.cssText?Wa(t):Ga(t,d);return document.createTextNode(`${h}{${i}}`)}function Dr(r,l,t,d){const h=window.getComputedStyle(r,t),i=h.getPropertyValue("content");if(i===""||i==="none")return;const n=Ba();try{l.className=`${l.className} ${n}`}catch{return}const s=document.createElement("style");s.appendChild(Za(n,t,h,d)),l.appendChild(s)}function Ha(r,l,t){Dr(r,l,":before",t),Dr(r,l,":after",t)}const Pr="application/font-woff",$r="image/jpeg",qa={woff:Pr,woff2:Pr,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:$r,jpeg:$r,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Va(r){const l=/\.([^./]*?)$/g.exec(r);return l?l[1]:""}function Nt(r){const l=Va(r).toLowerCase();return qa[l]||""}function Ya(r){return r.split(/,/)[1]}function _t(r){return r.search(/^(data:)/)!==-1}function Ka(r,l){return`data:${l};base64,${r}`}async function is(r,l,t){const d=await fetch(r,l);if(d.status===404)throw new Error(`Resource "${d.url}" not found`);const h=await d.blob();return new Promise((i,n)=>{const s=new FileReader;s.onerror=n,s.onloadend=()=>{try{i(t({res:d,result:s.result}))}catch(c){n(c)}},s.readAsDataURL(h)})}const bt={};function Xa(r,l,t){let d=r.replace(/\?.*/,"");return t&&(d=r),/ttf|otf|eot|woff2?/i.test(d)&&(d=d.replace(/.*\//,"")),l?`[${l}]${d}`:d}async function kt(r,l,t){const d=Xa(r,l,t.includeQueryParams);if(bt[d]!=null)return bt[d];t.cacheBust&&(r+=(/\?/.test(r)?"&":"?")+new Date().getTime());let h;try{const i=await is(r,t.fetchRequestInit,({res:n,result:s})=>(l||(l=n.headers.get("Content-Type")||""),Ya(s)));h=Ka(i,l)}catch(i){h=t.imagePlaceholder||"";let n=`Failed to fetch resource: ${r}`;i&&(n=typeof i=="string"?i:i.message),n&&console.warn(n)}return bt[d]=h,h}async function Ja(r){const l=r.toDataURL();return l==="data:,"?r.cloneNode(!1):ut(l)}async function Qa(r,l){if(r.currentSrc){const i=document.createElement("canvas"),n=i.getContext("2d");i.width=r.clientWidth,i.height=r.clientHeight,n==null||n.drawImage(r,0,0,i.width,i.height);const s=i.toDataURL();return ut(s)}const t=r.poster,d=Nt(t),h=await kt(t,d,l);return ut(h)}async function en(r,l){var t;try{if(!((t=r==null?void 0:r.contentDocument)===null||t===void 0)&&t.body)return await ft(r.contentDocument.body,l,!0)}catch{}return r.cloneNode(!1)}async function tn(r,l){return Ee(r,HTMLCanvasElement)?Ja(r):Ee(r,HTMLVideoElement)?Qa(r,l):Ee(r,HTMLIFrameElement)?en(r,l):r.cloneNode(os(r))}const rn=r=>r.tagName!=null&&r.tagName.toUpperCase()==="SLOT",os=r=>r.tagName!=null&&r.tagName.toUpperCase()==="SVG";async function sn(r,l,t){var d,h;if(os(l))return l;let i=[];return rn(r)&&r.assignedNodes?i=We(r.assignedNodes()):Ee(r,HTMLIFrameElement)&&(!((d=r.contentDocument)===null||d===void 0)&&d.body)?i=We(r.contentDocument.body.childNodes):i=We(((h=r.shadowRoot)!==null&&h!==void 0?h:r).childNodes),i.length===0||Ee(r,HTMLVideoElement)||await i.reduce((n,s)=>n.then(()=>ft(s,t)).then(c=>{c&&l.appendChild(c)}),Promise.resolve()),l}function an(r,l,t){const d=l.style;if(!d)return;const h=window.getComputedStyle(r);h.cssText?(d.cssText=h.cssText,d.transformOrigin=h.transformOrigin):as(t).forEach(i=>{let n=h.getPropertyValue(i);i==="font-size"&&n.endsWith("px")&&(n=`${Math.floor(parseFloat(n.substring(0,n.length-2)))-.1}px`),Ee(r,HTMLIFrameElement)&&i==="display"&&n==="inline"&&(n="block"),i==="d"&&l.getAttribute("d")&&(n=`path(${l.getAttribute("d")})`),d.setProperty(i,n,h.getPropertyPriority(i))})}function nn(r,l){Ee(r,HTMLTextAreaElement)&&(l.innerHTML=r.value),Ee(r,HTMLInputElement)&&l.setAttribute("value",r.value)}function on(r,l){if(Ee(r,HTMLSelectElement)){const t=l,d=Array.from(t.children).find(h=>r.value===h.getAttribute("value"));d&&d.setAttribute("selected","")}}function ln(r,l,t){return Ee(l,Element)&&(an(r,l,t),Ha(r,l,t),nn(r,l),on(r,l)),l}async function cn(r,l){const t=r.querySelectorAll?r.querySelectorAll("use"):[];if(t.length===0)return r;const d={};for(let i=0;i<t.length;i++){const s=t[i].getAttribute("xlink:href");if(s){const c=r.querySelector(s),b=document.querySelector(s);!c&&b&&!d[s]&&(d[s]=await ft(b,l,!0))}}const h=Object.values(d);if(h.length){const i="http://www.w3.org/1999/xhtml",n=document.createElementNS(i,"svg");n.setAttribute("xmlns",i),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const s=document.createElementNS(i,"defs");n.appendChild(s);for(let c=0;c<h.length;c++)s.appendChild(h[c]);r.appendChild(n)}return r}async function ft(r,l,t){return!t&&l.filter&&!l.filter(r)?null:Promise.resolve(r).then(d=>tn(d,l)).then(d=>sn(r,d,l)).then(d=>ln(r,d,l)).then(d=>cn(d,l))}const ls=/url\((['"]?)([^'"]+?)\1\)/g,dn=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,un=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function hn(r){const l=r.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${l})(['"]?\\))`,"g")}function mn(r){const l=[];return r.replace(ls,(t,d,h)=>(l.push(h),t)),l.filter(t=>!_t(t))}async function fn(r,l,t,d,h){try{const i=t?Ta(l,t):l,n=Nt(l);let s;return h||(s=await kt(i,n,d)),r.replace(hn(l),`$1${s}$3`)}catch{}return r}function pn(r,{preferredFontFormat:l}){return l?r.replace(un,t=>{for(;;){const[d,,h]=dn.exec(t)||[];if(!h)return"";if(h===l)return`src: ${d};`}}):r}function cs(r){return r.search(ls)!==-1}async function ds(r,l,t){if(!cs(r))return r;const d=pn(r,t);return mn(d).reduce((i,n)=>i.then(s=>fn(s,n,l,t)),Promise.resolve(d))}async function Xe(r,l,t){var d;const h=(d=l.style)===null||d===void 0?void 0:d.getPropertyValue(r);if(h){const i=await ds(h,null,t);return l.style.setProperty(r,i,l.style.getPropertyPriority(r)),!0}return!1}async function xn(r,l){await Xe("background",r,l)||await Xe("background-image",r,l),await Xe("mask",r,l)||await Xe("-webkit-mask",r,l)||await Xe("mask-image",r,l)||await Xe("-webkit-mask-image",r,l)}async function gn(r,l){const t=Ee(r,HTMLImageElement);if(!(t&&!_t(r.src))&&!(Ee(r,SVGImageElement)&&!_t(r.href.baseVal)))return;const d=t?r.src:r.href.baseVal,h=await kt(d,Nt(d),l);await new Promise((i,n)=>{r.onload=i,r.onerror=l.onImageErrorHandler?(...c)=>{try{i(l.onImageErrorHandler(...c))}catch(b){n(b)}}:n;const s=r;s.decode&&(s.decode=i),s.loading==="lazy"&&(s.loading="eager"),t?(r.srcset="",r.src=h):r.href.baseVal=h})}async function bn(r,l){const d=We(r.childNodes).map(h=>us(h,l));await Promise.all(d).then(()=>r)}async function us(r,l){Ee(r,Element)&&(await xn(r,l),await gn(r,l),await bn(r,l))}function yn(r,l){const{style:t}=r;l.backgroundColor&&(t.backgroundColor=l.backgroundColor),l.width&&(t.width=`${l.width}px`),l.height&&(t.height=`${l.height}px`);const d=l.style;return d!=null&&Object.keys(d).forEach(h=>{t[h]=d[h]}),r}const Lr={};async function Ur(r){let l=Lr[r];if(l!=null)return l;const d=await(await fetch(r)).text();return l={url:r,cssText:d},Lr[r]=l,l}async function Mr(r,l){let t=r.cssText;const d=/url\(["']?([^"')]+)["']?\)/g,i=(t.match(/url\([^)]+\)/g)||[]).map(async n=>{let s=n.replace(d,"$1");return s.startsWith("https://")||(s=new URL(s,r.url).href),is(s,l.fetchRequestInit,({result:c})=>(t=t.replace(n,`url(${c})`),[n,c]))});return Promise.all(i).then(()=>t)}function Wr(r){if(r==null)return[];const l=[],t=/(\/\*[\s\S]*?\*\/)/gi;let d=r.replace(t,"");const h=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=h.exec(d);if(c===null)break;l.push(c[0])}d=d.replace(h,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,n="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",s=new RegExp(n,"gi");for(;;){let c=i.exec(d);if(c===null){if(c=s.exec(d),c===null)break;i.lastIndex=s.lastIndex}else s.lastIndex=i.lastIndex;l.push(c[0])}return l}async function wn(r,l){const t=[],d=[];return r.forEach(h=>{if("cssRules"in h)try{We(h.cssRules||[]).forEach((i,n)=>{if(i.type===CSSRule.IMPORT_RULE){let s=n+1;const c=i.href,b=Ur(c).then(p=>Mr(p,l)).then(p=>Wr(p).forEach(y=>{try{h.insertRule(y,y.startsWith("@import")?s+=1:h.cssRules.length)}catch(g){console.error("Error inserting rule from remote css",{rule:y,error:g})}})).catch(p=>{console.error("Error loading remote css",p.toString())});d.push(b)}})}catch(i){const n=r.find(s=>s.href==null)||document.styleSheets[0];h.href!=null&&d.push(Ur(h.href).then(s=>Mr(s,l)).then(s=>Wr(s).forEach(c=>{n.insertRule(c,n.cssRules.length)})).catch(s=>{console.error("Error loading remote stylesheet",s)})),console.error("Error inlining remote css file",i)}}),Promise.all(d).then(()=>(r.forEach(h=>{if("cssRules"in h)try{We(h.cssRules||[]).forEach(i=>{t.push(i)})}catch(i){console.error(`Error while reading CSS rules from ${h.href}`,i)}}),t))}function vn(r){return r.filter(l=>l.type===CSSRule.FONT_FACE_RULE).filter(l=>cs(l.style.getPropertyValue("src")))}async function _n(r,l){if(r.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=We(r.ownerDocument.styleSheets),d=await wn(t,l);return vn(d)}function hs(r){return r.trim().replace(/["']/g,"")}function jn(r){const l=new Set;function t(d){(d.style.fontFamily||getComputedStyle(d).fontFamily).split(",").forEach(i=>{l.add(hs(i))}),Array.from(d.children).forEach(i=>{i instanceof HTMLElement&&t(i)})}return t(r),l}async function Nn(r,l){const t=await _n(r,l),d=jn(r);return(await Promise.all(t.filter(i=>d.has(hs(i.style.fontFamily))).map(i=>{const n=i.parentStyleSheet?i.parentStyleSheet.href:null;return ds(i.cssText,n,l)}))).join(`
`)}async function kn(r,l){const t=l.fontEmbedCSS!=null?l.fontEmbedCSS:l.skipFonts?null:await Nn(r,l);if(t){const d=document.createElement("style"),h=document.createTextNode(t);d.appendChild(h),r.firstChild?r.insertBefore(d,r.firstChild):r.appendChild(d)}}async function Cn(r,l={}){const{width:t,height:d}=ns(r,l),h=await ft(r,l,!0);return await kn(h,l),await us(h,l),yn(h,l),await Ma(h,t,d)}async function Sn(r,l={}){const{width:t,height:d}=ns(r,l),h=await Cn(r,l),i=await ut(h),n=document.createElement("canvas"),s=n.getContext("2d"),c=l.pixelRatio||$a(),b=l.canvasWidth||t,p=l.canvasHeight||d;return n.width=b*c,n.height=p*c,l.skipAutoScale||La(n),n.style.width=`${b}`,n.style.height=`${p}`,l.backgroundColor&&(s.fillStyle=l.backgroundColor,s.fillRect(0,0,n.width,n.height)),s.drawImage(i,0,0,n.width,n.height),n}async function En(r,l={}){return(await Sn(r,l)).toDataURL()}const Gr={client:{bg:"#4B5563",border:"#9CA3AF",text:"#F9FAFB"},network:{bg:"#1E40AF",border:"#3B82F6",text:"#DBEAFE"},compute:{bg:"#7C3AED",border:"#A78BFA",text:"#EDE9FE"},database:{bg:"#059669",border:"#10B981",text:"#D1FAE5"},storage:{bg:"#DC2626",border:"#EF4444",text:"#FEE2E2"},security:{bg:"#EA580C",border:"#F97316",text:"#FFEDD5"},messaging:{bg:"#DB2777",border:"#EC4899",text:"#FCE7F3"},observability:{bg:"#0891B2",border:"#06B6D4",text:"#CFFAFE"},integration:{bg:"#65A30D",border:"#84CC16",text:"#ECFCCB"},other:{bg:"#6B7280",border:"#9CA3AF",text:"#F3F4F6"}},An={client:"",cdn:"",loadbalancer:"",apigateway:"",websocketgateway:"",appcompute:"",computeserverless:"",computecontainer:"",computevm:"",batchcompute:"",mlinferenceservice:"",relationaldatabase:"",nosqldatabase:"",analyticaldatabase:"",cache:"",objectstorage:"",blockstorage:"",auth:"",identityauth:"",messagequeue:"",eventstreaming:"",eventbus:"",etlorchestration:"",datawarehouse:"",logging:"",monitoring:"",paymentgateway:"",pushnotificationservice:"",secretsmanagement:"",waf:"",networking:""};function zn(r,l,t="LR"){const d=new Fr.graphlib.Graph;return d.setDefaultEdgeLabel(()=>({})),d.setGraph({rankdir:t,nodesep:60,ranksep:100,align:"DL",ranker:"longest-path",marginx:20,marginy:20}),r.forEach(i=>{d.setNode(i.id,{width:200,height:80})}),l.forEach(i=>{d.setEdge(i.source,i.target)}),Fr.layout(d),{nodes:r.map(i=>{const n=d.node(i.id);return{...i,position:{x:n.x-100,y:n.y-40}}}),edges:l}}function In(r){if(!(r!=null&&r.architecture))return{nodes:[],edges:[]};const{nodes:l=[],edges:t=[]}=r.architecture,d=l.map(i=>{const n=i.category||"other",s=Gr[n]||Gr.other,c=An[i.type]||"";return{id:i.id,type:"default",data:{label:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1 p-3",children:[e.jsx("div",{className:"text-2xl",children:c}),e.jsx("div",{className:"text-xs font-bold text-center leading-tight",style:{color:s.text},children:i.label}),i.role&&e.jsx("div",{className:"text-[9px] opacity-70 italic",style:{color:s.text},children:i.role.replace(/_/g," ")})]})},position:{x:0,y:0},style:{background:s.bg,border:`2px solid ${s.border}`,borderRadius:"12px",padding:"8px",width:200,height:80,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 12px ${s.border}40`},draggable:!1}}),h=t.map((i,n)=>({id:`edge-${n}`,source:i.from,target:i.to,label:i.label||"",type:"smoothstep",animated:!0,labelShowBg:!0,labelBgPadding:[8,4],labelBgBorderRadius:6,pathOptions:{borderRadius:20},style:{stroke:"#4B5563",strokeWidth:2},labelStyle:{fill:"#E5E7EB",fontSize:10,fontWeight:500,letterSpacing:"0.05em"},labelBgStyle:{fill:"#111827",stroke:"#374151",strokeWidth:1,fillOpacity:.95}}));return{nodes:d,edges:h}}const Rn=({architectureData:r,provider:l,pattern:t})=>{const{nodes:d,edges:h}=V.useMemo(()=>In(r),[r,l]),{nodes:i,edges:n}=V.useMemo(()=>zn(d,h),[d,h]),[s,c,b]=ks(i),[p,y,g]=Cs(n);Oe.useEffect(()=>{c(i),y(n)},[i,n,c,y]);const[u,w]=Oe.useState(!1),m=V.useCallback(()=>{w(!0);const f=Ss(s),x=f.width+100,_=f.height+100,C=-f.x+50,N=-f.y+50,E=`translate(${C}px, ${N}px) scale(1)`,O=document.querySelector(".react-flow__viewport");if(!O){console.error("Viewport element not found"),w(!1);return}En(O,{backgroundColor:"#0F172A",width:x,height:_,style:{width:`${x}px`,height:`${_}px`,transform:E},pixelRatio:3}).then(D=>{const A=document.createElement("a");A.download=`architecture-${l}-${t}-${Date.now()}.png`,A.href=D,A.click()}).catch(D=>{console.error("Failed to export diagram:",D),alert("Failed to export diagram: "+D.message)}).finally(()=>{w(!1)})},[s,l,t]);return s.length===0?e.jsx("div",{className:"bg-black/20 rounded-xl p-12 min-h-[500px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("span",{className:"material-icons text-gray-500 text-6xl",children:"cloud_off"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"No architecture data available"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:m,disabled:u,className:`px-4 py-2 bg-primary/20 border border-primary/40 text-primary rounded-lg transition-colors flex items-center space-x-2 text-sm font-semibold ${u?"opacity-50 cursor-wait":"hover:bg-primary/30"}`,children:[u?e.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin"}):e.jsx("span",{className:"material-icons text-lg",children:"download"}),e.jsx("span",{children:u?"Downloading...":"Download PNG (Full)"})]})}),e.jsx("div",{className:"relative bg-[#0F172A] rounded-xl border border-white/10 overflow-hidden",style:{height:"600px"},children:e.jsxs(Es,{nodes:s,edges:p,onNodesChange:b,onEdgesChange:g,fitView:!0,fitViewOptions:{padding:.2},minZoom:.5,maxZoom:2,nodesDraggable:!1,nodesConnectable:!1,elementsSelectable:!1,panOnDrag:!0,zoomOnScroll:!0,preventScrolling:!0,children:[e.jsx(As,{color:"#1E293B",gap:20,size:1}),e.jsx(zs,{showInteractive:!1,style:{background:"#1F2937",border:"1px solid #374151",borderRadius:"8px"}}),e.jsx(Oa,{nodeColor:f=>(f.style||{}).background||"#6B7280",maskColor:"#0F172A99",style:{background:"#1F2937"}})]})})]})},Fn="http://localhost:5000/api",On=({workspaceId:r,infraSpec:l,costEstimation:t,selectedProvider:d,selectedProfile:h,usageProfile:i,requirementsData:n,architectureData:s,onArchitectureDataLoaded:c,onNext:b,onBack:p,isDeployed:y})=>{var f;const[g,u]=V.useState(!0),[w,m]=V.useState(null);return V.useEffect(()=>{(async()=>{if(!(!l||!d||!h))try{const _=localStorage.getItem("token"),C=_?{Authorization:`Bearer ${_}`}:{},N=await Ie.post(`${Fn}/workflow/architecture`,{workspace_id:r,infraSpec:l,provider:d,profile:h,usage_profile:(i==null?void 0:i.usage_profile)||{},intent:(l==null?void 0:l.locked_intent)||{},requirements:n||{}},{headers:C});if(!N.data||!N.data.data)throw new Error("Invalid response structure from architecture endpoint");c&&c(N.data.data),m(null)}catch(_){console.error("Architecture loading error:",_),m("Failed to load architecture diagram. Using fallback view."),we.error("Failed to load architecture diagram")}finally{u(!1)}})()},[r,l,d,h,i,n,c]),w?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in pb-20",children:[e.jsxs("div",{className:"text-center space-y-4 mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Architecture Design"}),e.jsx("p",{className:"text-gray-400",children:"Architecture diagram could not be loaded, but you can continue to Terraform generation."})]}),e.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"material-icons text-amber-400 text-sm mt-0.5",children:"warning"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-amber-200 mb-1",children:"Architecture Not Available"}),e.jsx("p",{className:"text-sm text-amber-200/80",children:"The architecture diagram could not be generated, but your infrastructure specification is ready for Terraform generation."})]})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-white/5",children:[e.jsxs("button",{onClick:p,className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[e.jsx("span",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{children:"Back to Cost"})]}),e.jsxs("button",{onClick:b,className:"px-8 py-4 bg-gradient-to-r from-primary to-purple-500 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-primary/20",children:[e.jsx("span",{children:"Continue to Feedback"}),e.jsx("span",{className:"material-icons",children:"arrow_forward"})]})]})]}):g&&!s?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in pb-20",children:[e.jsxs("div",{className:"text-center space-y-4 mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Architecture Design Confirmation"}),e.jsx("p",{className:"text-gray-400",children:"Generating your cloud architecture diagram..."})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full border-4 border-transparent border-t-primary animate-spin"})]}),e.jsx("p",{className:"text-xl font-semibold text-white",children:"Generating Architecture"}),e.jsx("p",{className:"text-gray-400",children:"Creating your provider-specific diagram..."})]})]}):e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-fade-in pb-20",children:[e.jsxs("div",{className:"text-center space-y-4 mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Architecture Design Confirmation"}),e.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"This architecture reflects the recommended setup based on your requirements and usage."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Provider"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold
                            ${d==="AWS"?"bg-[#FF9900]/20 text-[#FF9900]":d==="GCP"?"bg-[#4285F4]/20 text-[#4285F4]":"bg-[#0078D4]/20 text-[#0078D4]"}`,children:d==="AWS"?"AWS":d==="GCP"?"GCP":"AZ"}),e.jsx("div",{children:e.jsx("div",{className:"font-bold text-white text-lg",children:d==="AZURE"?"Azure":d})})]})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Scenario"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/20 flex items-center justify-center",children:e.jsx("span",{className:"material-icons text-primary",children:"tune"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white text-lg capitalize",children:h==null?void 0:h.replace("_"," ")}),e.jsx("div",{className:"text-xs text-gray-400",children:"Cost optimization profile"})]})]})]})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"material-icons mr-2",children:"design_services"}),"Architecture Diagram"]}),e.jsx(Rn,{architectureData:s,provider:d,pattern:(l==null?void 0:l.architecture_pattern)||"SERVERLESS_WEB_APP"}),e.jsx("div",{className:"text-xs text-gray-500 mt-4 text-center italic",children:'Interactive architecture diagram. Use mouse wheel to zoom, drag to pan. Click "Download PNG" to export.'})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"material-icons mr-2",children:"inventory"}),"Services Used (",d==="AZURE"?"Azure":d,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(f=s==null?void 0:s.services)==null?void 0:f.map((x,_)=>e.jsx("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10 hover:bg-white/10 transition-colors group",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-bold text-white text-lg",children:x.pretty_name||x.name.replace(/_/g," ").replace(/\b\w/g,C=>C.toUpperCase())}),e.jsx("a",{href:`/docs?section=cloud-services&provider=${d==null?void 0:d.toLowerCase()}&service=${x.name.toLowerCase()}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-primary opacity-0 group-hover:opacity-100 transition-opacity",title:"View Documentation",children:e.jsx("span",{className:"material-icons text-sm",children:"info"})})]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:x.description}),e.jsx("div",{className:"text-xs text-gray-500 mt-2 capitalize font-mono",children:x.category})]})})},_))})]}),e.jsxs("div",{className:"flex flex-col space-y-6 pt-8 border-t border-white/5",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Choose Your Deployment Method"}),e.jsx("p",{className:"text-sm text-gray-400",children:"How would you like to deploy this infrastructure?"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y?e.jsxs("div",{className:"p-6 bg-surface border border-border rounded-2xl opacity-60 cursor-not-allowed",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center",children:e.jsx("span",{className:"material-icons text-blue-400 text-2xl",children:"visibility"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"View Configuration"}),e.jsx("p",{className:"text-xs text-gray-400",children:"View Terraform & Setup"})]})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Review the generated Terraform code and deployment details."})]}):e.jsxs("button",{onClick:()=>b("self"),className:"p-6 bg-surface border border-border rounded-2xl hover:border-primary/50 transition-all group text-left",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center",children:e.jsx("span",{className:"material-icons text-blue-400 text-2xl group-hover:text-primary transition-colors",children:"download_done"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white group-hover:text-primary transition-colors",children:"Self Deployment"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Download & deploy manually"})]})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Get the Terraform code and deploy it yourself using your own credentials and workflow."})]}),y?e.jsxs("div",{className:"p-6 bg-surface border border-border rounded-2xl opacity-40 cursor-not-allowed text-left relative",children:[e.jsx("div",{className:"absolute top-3 right-3 px-2 py-1 bg-gradient-to-r from-gray-600 to-gray-700 text-white text-[10px] font-bold rounded-full",children:"DISABLED"}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-500/20 flex items-center justify-center",children:e.jsx("span",{className:"material-icons text-green-400 text-2xl",children:"rocket_launch"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:"One-Click Deploy"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Automated cloud deployment"})]})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"We handle the deployment for you. Just connect your cloud account and we'll do the rest."}),e.jsxs("div",{className:"mt-4 flex items-center text-xs text-gray-500",children:[e.jsx("span",{className:"material-icons text-sm mr-1",children:"check"}),"Zero DevOps required"]})]}):e.jsxs("button",{onClick:()=>!y&&b("oneclick"),disabled:y,className:"p-6 bg-surface border border-border rounded-2xl transition-all group text-left relative hover:border-green-500/50",children:[e.jsx("div",{className:"absolute top-3 right-3 px-2 py-1 bg-gradient-to-r from-green-400 to-emerald-500 text-black text-[10px] font-bold rounded-full",children:"COMING SOON"}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-500/20 flex items-center justify-center",children:e.jsx("span",{className:"material-icons text-green-400 text-2xl",children:"rocket_launch"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white group-hover:text-green-400 transition-colors",children:"One-Click Deploy"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Automated cloud deployment"})]})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"We handle the deployment for you. Just connect your cloud account and we'll do the rest."}),e.jsxs("div",{className:"mt-4 flex items-center text-xs text-gray-500",children:[e.jsx("span",{className:"material-icons text-sm mr-1",children:"check"}),"Zero DevOps required"]})]})]}),!y&&e.jsxs("button",{onClick:p,className:"mx-auto px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[e.jsx("span",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{children:"Back to Cost Estimation"})]})]})]})},Ue="http://localhost:5000",Ln=()=>{var Fe,Je,rt,st,at,Qe,Le,He,Ct,St,Et,At,zt,It,Rt,Ft,Ot,Tt,Bt,Dt,Pt,$t,Lt,Ut,Mt,Wt,Gt,Zt,Ht,qt,Vt,Yt,Kt,Xt,Jt,Qt,er,tr,rr,sr,ar,nr,ir,or,lr,cr,dr,ur,hr,mr,fr,pr,xr,gr,br,yr,wr,vr,_r,jr,Nr,kr,Cr,Sr,Er,Ar,zr;const{id:r}=fs(),l=ps(),[t,d]=V.useState("input"),[h,i]=V.useState(""),[n,s]=V.useState([]),[c,b]=V.useState(null),[p,y]=V.useState(null),[g,u]=V.useState(null),[w,m]=V.useState(!1),[f,x]=V.useState(null),[_,C]=V.useState(!1),[N,E]=V.useState(null),[O,D]=V.useState(null),[A,P]=V.useState(null),[H,oe]=V.useState("cost_effective"),[S,L]=V.useState(r==="new"?null:r),[o,U]=V.useState(null),[ie,Z]=V.useState(null),[le,$]=V.useState(!1),[Q,R]=V.useState(null),[k,te]=V.useState(!1),[J,q]=V.useState(null),[pe,be]=V.useState(!1),[ae,de]=V.useState({domains:[],facets:[]}),[me,he]=V.useState(""),[xe,ve]=V.useState(""),[a,M]=V.useState(new Set),[T,j]=V.useState(!1),[v,z]=V.useState(!1),[W,G]=V.useState(!1),[F,K]=V.useState(""),[re,X]=V.useState(null);V.useEffect(()=>{A&&F&&h!==F?z(!0):A&&F&&h===F&&z(!1)},[h,F,A]),V.useEffect(()=>{(async()=>{try{const Y=localStorage.getItem("token"),B=Y?{Authorization:`Bearer ${Y}`}:{},ee=await Ie.get(`${Ue}/api/workflow/domains`,{headers:B});ee.data&&de(ee.data)}catch(Y){console.warn("Failed to fetch domains:",Y.message)}})()},[]);const ne=(I,Y="An error occurred")=>{var ee,se,ce,ue,ge,Se;console.error("[API ERROR]",I),m(!1);let B=Y;return((ee=I.response)==null?void 0:ee.status)===401?(B="Your session has expired. Please login again.",we.error(B),setTimeout(()=>l("/login"),1500)):((se=I.response)==null?void 0:se.status)===500?(B="Server error occurred. Our team has been notified.",X(B)):I.response?(B=((ue=(ce=I.response)==null?void 0:ce.data)==null?void 0:ue.msg)||((Se=(ge=I.response)==null?void 0:ge.data)==null?void 0:Se.error)||B,we.error(B)):(B="Cannot connect to server. Please ensure the backend is running.",X(B)),B},ye=async()=>{if(k){d("usage_review");return}if(N){console.log("Usage profile already exists, skipping redundant AI call."),d("usage_review");return}m(!0),d("processing_usage");try{const I=localStorage.getItem("token"),Y=I?{Authorization:`Bearer ${I}`}:{},B=await Ie.post(`${Ue}/api/workflow/predict-usage`,{intent:O,infraSpec:p},{headers:Y});setTimeout(()=>{E(B.data.data),d("usage_review"),m(!1),we.success("Usage estimates generated!")},1e3)}catch(I){ne(I,"Failed to estimate usage."),d("review_spec")}},fe=async()=>{if(k){d("cost_estimation");return}if(!p||!O){we.error("Missing infrastructure data. Please restart.");return}m(!0),d("processing_cost"),we.loading("Analyzing costs across providers...",{id:"cost-analysis"});try{const I=localStorage.getItem("token"),Y=I?{Authorization:`Bearer ${I}`}:{},B={infraSpec:p,intent:O,cost_profile:H,usage_profile:{...N==null?void 0:N.usage_profile,source:W?"user_provided":"ai_inferred"}};z(!1),K(h);const ee=await Ie.post(`${Ue}/api/workflow/cost-analysis`,B,{headers:Y});if(we.dismiss("cost-analysis"),ee.data.step==="cost_estimation")setTimeout(()=>{var ue;const se=ee.data.data;P(se),se.sizing&&y(ge=>({...ge,sizing:se.sizing}));const ce=((ue=se.recommended)==null?void 0:ue.provider)||se.recommended_provider;U(ce?ce.toUpperCase():null),d("cost_estimation"),we.success("Cost analysis complete!")},100);else throw new Error("Unexpected response from cost analysis")}catch(I){we.dismiss("cost-analysis"),ne(I,"Failed to analyze costs."),d("usage_review")}finally{m(!1)}};V.useEffect(()=>{(async()=>{var Y,B,ee,se,ce;if(r)try{const ue=localStorage.getItem("token"),ge=ue?{Authorization:`Bearer ${ue}`}:{},Ae=(await Ie.get(`${Ue}/api/workspaces/${r}`,{headers:ge})).data;if(((((B=(Y=Ae.state_json)==null?void 0:Y.deployment)==null?void 0:B.status)||Ae.step)==="active"||Ae.step==="active_deployment")&&(te(!0),console.log("[WORKSPACE] Deployed workspace - editing disabled")),L(Ae.id),u({id:Ae.project_id,name:Ae.name}),Ae.state_json){const _e=Ae.state_json;let Ye=_e.step||Ae.step||"input";Ye==="confirm_intent"&&(Ye="input"),d(Ye),i(_e.description||""),s(_e.history||[]),b(_e.currentQuestion||null),y(_e.infraSpec||null),_e.aiSnapshot&&D(_e.aiSnapshot),_e.costEstimation&&P(_e.costEstimation),_e.costProfile&&oe(_e.costProfile),_e.selectedProvider?U(_e.selectedProvider):(se=(ee=_e.costEstimation)==null?void 0:ee.recommended)!=null&&se.provider&&U(_e.costEstimation.recommended.provider.toUpperCase()),_e.is_live!==void 0&&be(_e.is_live),_e.is_deployed&&te(_e.is_deployed),_e.projectData&&u(nt=>({...nt,..._e.projectData})),_e.usageProfile&&E(_e.usageProfile)}K(h),console.log("Workspace loaded:",Ae.name)}catch(ue){ne(ue,"Failed to load workspace."),((ce=ue.response)==null?void 0:ce.status)===404&&l("/workspaces")}})()},[r,l]);const Ce=async()=>{if(!k){if(!h.trim()){we.error("Please describe your project first!");return}m(!0),d("processing");try{const I=localStorage.getItem("token"),Y=I?{Authorization:`Bearer ${I}`}:{},B=await Ie.post(`${Ue}/api/workflow/analyze`,{userInput:h,conversationHistory:n,input_type:"DESCRIPTION",domain:me||void 0,subdomain:xe||void 0},{headers:Y});setTimeout(()=>{const{step:ee,data:se}=B.data;m(!1),se!=null&&se.full_analysis&&D(se.full_analysis),ee==="refine_requirements"?(b(se),d("question")):ee==="confirm_intent"?(b(se),d("confirm_intent")):ee==="infra_spec_generated"?(y(se),u({name:se.project_name}),d("review_spec"),we.success("Architecture Generated Successfully!")):(console.warn("Unknown Step:",ee),!ee&&!se&&(we.error("Server returned empty response."),d("input")))},1200)}catch(I){ne(I,"Failed to analyze your request."),d("input")}}},ke=V.useMemo(()=>{var I,Y,B;return!(ae!=null&&ae.domains)||!me||!xe?{}:((B=(Y=(I=ae.domains.find(ee=>ee.id===me))==null?void 0:I.subdomains)==null?void 0:Y.find(ee=>ee.id===xe))==null?void 0:B.strategy)||{}},[ae,me,xe]),Re=I=>{b(Y=>({...Y,features:{...Y.features,[I]:!0}}))},Ze=I=>{const Y=new Set(a);Y.has(I)?Y.delete(I):Y.add(I),M(Y)},je=async I=>{if(!k){m(!0),d("processing");try{const Y=localStorage.getItem("token"),B=Y?{Authorization:`Bearer ${Y}`}:{},ee=h||(g==null?void 0:g.name)||"User confirmed intent",se={...I};se.features&&ke&&Object.entries(ke).forEach(([ue,ge])=>{ge===!0&&se.features[ue]!==!1&&se.features[ue]!==!0&&(se.features[ue]=!0)}),ke!=null&&ke.addons&&a.size>0&&ke.addons.forEach(ue=>{a.has(ue.id)&&Object.entries(ue.apply_axes||{}).forEach(([ge,Se])=>{typeof Se=="boolean"?(se.features||(se.features={}),se.features[ge]=Se):(se.intent||(se.intent={}),se.intent[ge]=Se)})});const ce=await Ie.post(`${Ue}/api/workflow/analyze`,{userInput:ee,conversationHistory:n,input_type:"CONFIRMATION",approvedIntent:se},{headers:B});setTimeout(()=>{const{step:ue,data:ge}=ce.data;m(!1),ue==="refine_requirements"?(b(ge),d("question")):ue==="infra_spec_generated"&&(y(ge),u({name:ge.project_name}),d("review_spec"),we.success("Architecture Generated Successfully!"))},1e3)}catch(Y){ne(Y,"Failed to confirm intent."),d("confirm_intent")}}},qe=async I=>{k||(x(I),setTimeout(async()=>{const Y=[...n,{role:"user",content:h},{role:"assistant",content:c.clarifying_question},{role:"user",content:I}];s(Y),b(null),x(null),m(!0),d("processing_spec");try{const B=localStorage.getItem("token"),ee=B?{Authorization:`Bearer ${B}`}:{},se=await Ie.post(`${Ue}/api/workflow/analyze`,{userInput:h,conversationHistory:Y,input_type:"AXIS_ANSWER",ai_snapshot:O||(c==null?void 0:c.full_analysis)},{headers:ee});setTimeout(()=>{const{step:ce,data:ue}=se.data;m(!1),ue!=null&&ue.full_analysis&&D(ue.full_analysis),ce==="refine_requirements"?(b(ue),d("question")):ce==="confirm_intent"?(b(ue),d("confirm_intent")):ce==="infra_spec_generated"&&(y(ue),u({name:ue.project_name}),d("review_spec"),we.success("Architecture Refined & Generated!"))},1200)}catch(B){ne(B,"Failed to process your answer."),d("question")}},600))},Ve=async(I=!1)=>{if(k){console.log("Draft save skipped: Project is deployed (read-only)");return}try{const Y=localStorage.getItem("token"),B={workspaceId:S,projectId:g==null?void 0:g.id,name:(g==null?void 0:g.name)||`Draft ${new Date().toLocaleTimeString()}`,step:t,state:{history:n,description:h,currentQuestion:c,infraSpec:p,projectData:g,aiSnapshot:O,costEstimation:A,costProfile:H,usageProfile:N,step:t}},ee=Y?{Authorization:`Bearer ${Y}`}:{},se=await Ie.post(`${Ue}/api/workspaces/save`,B,{headers:ee});L(se.data.workspaceId),se.data.projectId&&u(ce=>({...ce,id:se.data.projectId})),I||we.success(`Draft ${S?"Updated":"Saved"} Successfully!`)}catch(Y){I?console.error("Silent Save Error:",Y):ne(Y,"Failed to save draft.")}};return V.useEffect(()=>{if(t&&S&&t!=="input"&&t!=="processing"&&!k){const I=setTimeout(()=>{Ve(!0),console.log(`[Auto-save] Step: ${t}`)},1500);return()=>clearTimeout(I)}},[t,p,A,k]),e.jsxs("div",{className:"flex h-screen bg-background text-white font-inter overflow-hidden relative selection:bg-primary/30",children:[e.jsx(ba,{position:"top-right",toastOptions:{style:{background:"var(--color-surface, #171E2B)",color:"#fff",border:"1px solid var(--color-border, #2E3645)"}}}),re&&e.jsxs("div",{className:"fixed top-0 left-0 right-0 z-[1000] bg-red-600/95 backdrop-blur-md text-white p-4 shadow-2xl flex items-center justify-center gap-6 animate-slide-down border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"material-icons text-white animate-pulse",children:"report_problem"}),e.jsx("span",{className:"font-bold text-lg tracking-wide",children:re})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>{X(null),window.location.reload()},className:"px-6 py-2 bg-white text-red-600 rounded-xl text-sm font-black hover:bg-gray-100 transition-all transform hover:scale-105 active:scale-95 shadow-lg",children:"RECONNECT NOW"}),e.jsx("button",{onClick:()=>X(null),className:"p-2 hover:bg-white/10 rounded-full transition-colors",title:"Dismiss",children:e.jsx("span",{className:"material-icons text-xl",children:"close"})})]})]}),e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary/5 rounded-full blur-[120px]"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[30%] h-[30%] bg-blue-500/5 rounded-full blur-[100px]"})]}),e.jsx("div",{className:"w-64 bg-surface/80 backdrop-blur-xl border-r border-border flex flex-col justify-between p-6 hidden md:flex z-10",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-primary font-bold text-xl tracking-tight",children:[e.jsx("span",{className:"material-icons text-2xl",children:"cloud_circle"}),e.jsx("span",{children:"Cloudiverse"})]}),e.jsxs("nav",{className:"space-y-3",children:[e.jsxs("div",{className:`px-4 py-3 rounded-xl font-medium flex items-center space-x-3 transition-all cursor-pointer 
                            ${t==="input"||t==="question"||t==="processing"?"bg-primary/10 border border-primary/20 text-primary shadow-lg shadow-primary/5":"text-gray-400 hover:bg-white/5"}`,onClick:()=>d("input"),children:[e.jsx("span",{className:"material-icons text-sm",children:"edit_note"}),e.jsx("span",{children:"Requirements"}),p&&t!=="input"&&t!=="question"&&t!=="processing"&&e.jsx("span",{className:"material-icons text-xs text-green-500 ml-auto",children:"check_circle"})]}),e.jsxs("div",{className:`px-4 py-3 rounded-xl font-medium flex items-center space-x-3 transition-all 
                            ${t==="review_spec"?"bg-primary/10 border border-primary/20 text-primary shadow-lg shadow-primary/5":!p&&!k?"opacity-50 cursor-not-allowed text-gray-500":"text-gray-400 hover:bg-white/5 cursor-pointer"}`,onClick:()=>(p||k)&&d("review_spec"),children:[e.jsx("span",{className:"material-icons text-sm",children:"schema"}),e.jsx("span",{children:"Specification"}),(p||k)&&t!=="review_spec"&&e.jsx("span",{className:"material-icons text-xs text-green-500 ml-auto",children:"check_circle"})]}),e.jsxs("div",{className:`px-4 py-3 rounded-xl font-medium flex items-center space-x-3 transition-all 
                            ${t==="cost_estimation"||t==="processing_cost"?"bg-primary/10 border border-primary/20 text-primary shadow-lg shadow-primary/5":!p&&!k?"opacity-50 cursor-not-allowed text-gray-500":"text-gray-400 hover:bg-white/5 cursor-pointer"}`,onClick:()=>(A||k)&&d("cost_estimation"),children:[e.jsx("span",{className:"material-icons text-sm",children:"savings"}),e.jsx("span",{children:"Cost Estimator"}),(A||k)&&t!=="cost_estimation"&&t!=="processing_cost"&&e.jsx("span",{className:"material-icons text-xs text-green-500 ml-auto",children:"check_circle"})]}),e.jsxs("div",{className:`px-4 py-3 rounded-xl font-medium flex items-center space-x-3 transition-all 
                            ${t==="architecture"?"bg-primary/10 border border-primary/20 text-primary shadow-lg shadow-primary/5":!A&&!k?"opacity-50 cursor-not-allowed text-gray-500":"text-gray-400 hover:bg-white/5 cursor-pointer"}`,onClick:()=>(A||k)&&d("architecture"),children:[e.jsx("span",{className:"material-icons text-sm",children:"account_tree"}),e.jsx("span",{children:"Diagram"}),(ie||k)&&t!=="architecture"&&e.jsx("span",{className:"material-icons text-xs text-green-500 ml-auto",children:"check_circle"})]}),(J==="self"||k)&&e.jsxs("div",{className:`px-4 py-3 rounded-xl font-medium flex items-center space-x-3 transition-all 
                                ${t==="terraform_view"||t==="deployment_ready"?"bg-primary/10 border border-primary/20 text-primary shadow-lg shadow-primary/5":!le&&!k?"opacity-50 cursor-not-allowed text-gray-500":"text-gray-400 hover:bg-white/5 cursor-pointer"}`,onClick:()=>(le||k)&&d("terraform_view"),children:[e.jsx("span",{className:"material-icons text-sm",children:"code"}),e.jsx("span",{children:"Terraform"}),(le||k)&&t!=="terraform_view"&&t!=="deployment_ready"&&e.jsx("span",{className:"material-icons text-xs text-green-500 ml-auto",children:"check_circle"})]}),e.jsxs("div",{className:"px-4 py-3 rounded-xl font-medium flex items-center space-x-3 transition-all cursor-pointer text-gray-400 hover:bg-white/5",onClick:()=>l(`/workspace/${S}/settings`),children:[e.jsx("span",{className:"material-icons text-sm",children:"settings"}),e.jsx("span",{children:"Settings"})]})]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col relative overflow-y-auto z-10 backdrop-blur-sm",children:[e.jsxs("header",{className:"min-h-[72px] py-4 border-b border-white/5 flex items-center justify-between px-8 bg-black/30 backdrop-blur-md sticky top-0 z-20 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-lg font-medium text-gray-200 tracking-wide",children:(g==null?void 0:g.name)||"Untitled Project"}),e.jsx("div",{className:"flex items-center space-x-2",children:k?e.jsxs("span",{className:"px-3 py-1 rounded-full bg-green-500/10 border border-green-500/20 text-[10px] font-bold text-green-400 tracking-wider uppercase flex items-center space-x-1",children:[e.jsx("span",{className:"material-icons text-[10px]",children:"check_circle"}),e.jsx("span",{children:"Self-Deployed"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"px-3 py-1 rounded-full bg-white/5 border border-white/10 text-[10px] font-bold text-gray-400 tracking-wider uppercase",children:"Draft Mode"}),e.jsxs("button",{onClick:()=>Ve(!1),className:"px-3 py-1 rounded-full bg-primary/10 border border-primary/20 text-[10px] font-bold text-primary hover:bg-primary/20 transition-colors uppercase tracking-wider flex items-center space-x-1",children:[e.jsx("span",{className:"material-icons text-[10px]",children:"save"}),e.jsx("span",{children:S?"Update Draft":"Save Draft"})]})]})})]}),e.jsxs("button",{onClick:()=>l("/workspaces"),className:"px-4 py-2 rounded-xl bg-white/5 border border-white/10 text-sm font-medium text-gray-400 hover:bg-white/10 hover:text-white transition-colors flex items-center space-x-2",children:[e.jsx("span",{className:"material-icons text-sm",children:"dashboard"}),e.jsx("span",{children:"Workspace Dashboard"})]})]}),e.jsx("div",{className:"flex-1 p-6 pt-4 flex",children:e.jsxs("div",{className:"w-full max-w-5xl space-y-8 mx-auto",children:[k&&e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"material-icons text-green-400",children:"verified"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-400 font-bold",children:"Deployed Project"}),e.jsx("span",{className:"text-gray-400 ml-2 text-sm",children:" View-only mode. Navigate using the sidebar to review all details."})]})]}),e.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-300 text-xs font-bold rounded-full",children:"READ-ONLY"})]}),!k&&v&&e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4 flex items-center justify-between animate-shake",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"material-icons text-yellow-500",children:"warning"}),e.jsxs("div",{className:"text-sm text-yellow-200",children:[e.jsx("b",{children:"Assumption Drift:"})," The project description has changed. Previous cost estimates may no longer be valid."]})]}),e.jsx("button",{onClick:()=>Ce(),className:"px-4 py-2 bg-yellow-500 text-black font-bold text-xs rounded-lg hover:bg-yellow-400 transition-colors",children:"Re-Analyze"})]}),(t==="processing"||t==="processing_spec")&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-white/10 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-4 border-primary rounded-full border-t-transparent animate-spin"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"material-icons text-4xl text-white animate-pulse",children:"grain"})})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:t==="processing"?"Analyzing Intent...":"Generating Blueprint..."}),e.jsx("p",{className:"text-gray-400 animate-pulse",children:"Architecting your production-grade infrastructure"})]})]}),t==="input"&&e.jsxs("div",{className:"space-y-8 animate-fade-in-up mt-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-white via-gray-200 to-gray-500 tracking-tight",children:k?"Deployed Architecture":"Architect Your Vision"}),e.jsx("p",{className:"text-lg text-gray-400 max-w-2xl mx-auto leading-relaxed",children:k?"Review your deployed infrastructure configuration below.":"Describe your application in plain English. Our AI Discovery Engine will analyze your intent and generate a production-grade infrastructure specification."})]}),!k&&e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-5 mb-6 shadow-lg backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"p-1.5 bg-primary/10 rounded-lg",children:e.jsx("span",{className:"material-icons text-primary text-sm",children:"category"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-bold text-white block",children:"Project Domain"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Select a domain to get tailored architecture patterns"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"Primary Domain"}),e.jsxs("select",{value:me,onChange:I=>{he(I.target.value),ve("")},disabled:!((Fe=ae==null?void 0:ae.domains)!=null&&Fe.length),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white text-sm focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all disabled:opacity-50 disabled:cursor-wait appearance-none",style:{colorScheme:"dark"},children:[e.jsx("option",{value:"",style:{backgroundColor:"#111827",color:"white"},children:(Je=ae==null?void 0:ae.domains)!=null&&Je.length?"Auto-detect from description (Default)":"Loading domains..."}),(rt=ae==null?void 0:ae.domains)==null?void 0:rt.map(I=>e.jsx("option",{value:I.id,style:{backgroundColor:"#111827",color:"white"},children:I.label||I.name},I.id))]})]}),e.jsxs("div",{className:`transition-opacity duration-300 ${me?"opacity-100":"opacity-50"}`,children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"Subdomain Strategy"}),e.jsxs("select",{value:xe,onChange:I=>ve(I.target.value),disabled:!me,className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white text-sm focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all disabled:opacity-50 disabled:cursor-not-allowed appearance-none",style:{colorScheme:"dark"},children:[e.jsx("option",{value:"",style:{backgroundColor:"#111827",color:"white"},children:"General Implementation"}),(Qe=(at=(st=ae==null?void 0:ae.domains)==null?void 0:st.find(I=>I.id===me))==null?void 0:at.subdomains)==null?void 0:Qe.map(I=>e.jsx("option",{value:I.id,style:{backgroundColor:"#111827",color:"white"},children:I.label},I.id))]})]})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary to-blue-600 rounded-2xl blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200"}),e.jsxs("div",{className:"relative bg-surface border border-border rounded-2xl p-2 shadow-2xl",children:[e.jsx("textarea",{className:"w-full h-48 bg-transparent text-xl p-8 focus:outline-none resize-none placeholder-gray-600 text-gray-200 font-light leading-relaxed disabled:opacity-60 disabled:cursor-not-allowed",placeholder:"e.g., I need a highly scalable e-commerce backend with microservices, handling 50k concurrent users, and strict PCI compliance...",value:h,onChange:I=>i(I.target.value),disabled:k,readOnly:k}),e.jsxs("div",{className:"flex justify-between items-center px-8 py-5 bg-white/5 rounded-b-xl border-t border-white/5",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 disabled:opacity-40 disabled:cursor-not-allowed",disabled:k,children:e.jsx("span",{className:"material-icons text-xl",children:"mic"})}),e.jsx("button",{className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 disabled:opacity-40 disabled:cursor-not-allowed",disabled:k,children:e.jsx("span",{className:"material-icons text-xl",children:"attach_file"})})]}),!k&&e.jsxs("button",{onClick:Ce,className:"flex items-center space-x-3 px-8 py-3 bg-primary hover:bg-primary-hover text-black font-bold rounded-xl transition-all transform hover:scale-[1.02] shadow-lg shadow-primary/20",children:[e.jsx("span",{children:"Generate Architecture"}),e.jsx("span",{className:"material-icons text-lg",children:"auto_awesome"})]})]})]})]})]}),t==="question"&&c&&e.jsxs("div",{className:"space-y-8 animate-fade-in-up max-w-4xl mx-auto mt-12 pb-20",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-icons text-primary text-3xl",children:"psychology"})}),e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Clarifying Requirements"}),e.jsx("p",{className:"text-gray-400",children:c.clarifying_question})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:(Le=c.suggested_options)==null?void 0:Le.map((I,Y)=>e.jsxs("button",{onClick:()=>qe(typeof I=="object"?I.value||I.label:I),className:`p-6 bg-surface border rounded-2xl text-left transition-all group relative overflow-hidden
                                                ${f===(typeof I=="object"?I.value||I.label:I)?"border-primary ring-1 ring-primary":"border-border hover:border-white/20"}`,children:[e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-white mb-1",children:typeof I=="object"?I.label:I}),I.description&&e.jsx("div",{className:"text-sm text-gray-400 line-clamp-2",children:I.description})]}),e.jsx("span",{className:"material-icons text-gray-600 group-hover:text-primary transition-colors",children:"arrow_forward"})]}),f===(typeof I=="object"?I.value||I.label:I)&&e.jsx("div",{className:"absolute inset-0 bg-primary/5 animate-pulse"})]},Y))})]}),t==="confirm_intent"&&c&&e.jsxs("div",{className:"space-y-8 animate-fade-in-up max-w-3xl mx-auto mt-12 pb-20",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Confirm Project Scope"}),e.jsx("p",{className:"text-gray-400",children:"We've analyzed your requirements. Please confirm this summary before we generate the infrastructure."})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-3xl p-8 shadow-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-[100px] -mr-32 -mt-32"}),e.jsxs("div",{className:"space-y-8 relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"px-3 py-1 bg-primary/10 border border-primary/20 text-primary rounded-full text-[10px] font-bold uppercase tracking-widest",children:"AI Intent Snapshot"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase",children:"Confirmed"})]}),c.exclusions&&c.exclusions.length>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase",children:"Excluded"})]}),Object.entries(ke||{}).filter(([Y,B])=>{var ee,se;return B===!0&&((ee=c.features)==null?void 0:ee[Y])!==!0&&((se=c.features)==null?void 0:se[Y])!==!1}).length>0?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-400"}),e.jsx("span",{className:"text-[10px] text-gray-500 uppercase",children:"Suggested"})]}):null]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Goal"}),e.jsx("p",{className:"text-white font-medium capitalize prose prose-invert",children:((Ct=(He=c.intent)==null?void 0:He.primary_domain)==null?void 0:Ct.replace(/_/g," "))||"Building an application"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Workload Pattern"}),e.jsx("p",{className:"text-white/80 text-sm italic",children:((Et=(St=c.intent)==null?void 0:St.workload_type)==null?void 0:Et.replace(/_/g," "))||"Standard Workload"})]}),c.exclusions&&c.exclusions.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-red-500/70 uppercase tracking-widest mb-2 flex items-center",children:[e.jsx("span",{className:"material-icons text-xs mr-1",children:"block"}),"Explicit Exclusions"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.exclusions.map((I,Y)=>e.jsx("span",{className:"px-2 py-0.5 bg-red-500/10 text-red-400 border border-red-500/20 rounded text-[10px] font-bold uppercase tracking-wider line-through decoration-red-500/50",children:I.replace(/_/g," ")},Y))})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white/5 rounded-2xl p-5 border border-white/5",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-4",children:"Feature Resolution"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-[10px] text-green-500 font-bold uppercase",children:"Confirmed Present"}),e.jsxs("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[Object.entries(c.features||{}).filter(([I,Y])=>Y===!0).map(([I,Y],B)=>e.jsxs("li",{className:"flex items-center text-xs text-gray-200 bg-green-500/5 px-2 py-1 rounded border border-green-500/10",children:[e.jsx("span",{className:"material-icons text-[12px] text-green-500 mr-2",children:"check_circle"}),e.jsx("span",{className:"capitalize",children:I.replace(/_/g," ")})]},B)),Object.values(c.features||{}).filter(I=>I===!0).length===0&&e.jsx("li",{className:"text-xs text-gray-500 italic",children:"None detected."})]})]}),(()=>{var Y,B,ee,se;const I=Object.entries(ke||{}).filter(([ce,ue])=>{var ge,Se;return ue===!0&&((ge=c.features)==null?void 0:ge[ce])!==!0&&((Se=c.features)==null?void 0:Se[ce])!==!1});return I.length===0?null:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-[10px] text-blue-400 font-bold uppercase flex items-center justify-between",children:[e.jsxs("span",{children:["Suggested for ",((se=(ee=(B=(Y=ae==null?void 0:ae.domains)==null?void 0:Y.find(ce=>ce.id===me))==null?void 0:B.subdomains)==null?void 0:ee.find(ce=>ce.id===xe))==null?void 0:se.label)||"This Domain"]}),e.jsx("span",{className:"text-[9px] bg-blue-500/10 px-1.5 rounded text-blue-300",children:"Click to Confirm"})]}),e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:I.map(([ce],ue)=>e.jsxs("li",{onClick:()=>Re(ce),className:"flex items-center text-xs text-gray-300 bg-blue-500/5 px-2 py-2 rounded border border-blue-500/10 hover:bg-blue-500/20 hover:border-blue-400 transition-all cursor-pointer group",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border border-blue-500/30 flex items-center justify-center mr-2 bg-blue-500/0 group-hover:bg-blue-500/20 transition-all",children:e.jsx("span",{className:"material-icons text-[10px] text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"add"})}),e.jsx("span",{className:"capitalize",children:ce.replace(/_/g," ")})]},ue))})]})})(),(()=>{const Y=((ke==null?void 0:ke.addons)||[]).filter(B=>Object.entries(B.trigger_when||{}).every(([ee,se])=>{var ue,ge;let ce=(ue=c.features)==null?void 0:ue[ee];return ce===void 0&&(ce=(ge=c.intent)==null?void 0:ge[ee]),ce==null&&(ce="unknown"),se.includes(ce)}));return Y.length===0?null:e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"text-[10px] text-purple-400 font-bold uppercase flex items-center justify-between",children:[e.jsx("span",{children:"Recommended Enhancements"}),e.jsx("span",{className:"text-[9px] bg-purple-500/10 px-1.5 rounded text-purple-300",children:"Optional"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:Y.map(B=>{const ee=a.has(B.id);return e.jsxs("div",{onClick:()=>Ze(B.id),className:`
                                                                                        group relative flex items-start space-x-3 p-3 rounded-xl border transition-all cursor-pointer
                                                                                        ${ee?"bg-purple-500/10 border-purple-500/30 shadow-[0_0_15px_-3px_rgba(168,85,247,0.15)]":"bg-white/5 border-white/5 hover:bg-white/10 hover:border-white/10"}
                                                                                    `,children:[e.jsx("div",{className:`
                                                                                        mt-0.5 w-4 h-4 rounded border flex items-center justify-center transition-colors
                                                                                        ${ee?"bg-purple-500 border-purple-500":"border-gray-600 group-hover:border-gray-400"}
                                                                                    `,children:ee&&e.jsx("span",{className:"material-icons text-[10px] text-white",children:"check"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-xs font-semibold mb-0.5 ${ee?"text-purple-300":"text-gray-300"}`,children:B.label}),e.jsx("div",{className:"text-[10px] text-gray-500 leading-snug",children:B.description})]})]},B.id)})})]})})()]})]})})]}),e.jsxs("div",{className:"pt-6 border-t border-white/5 flex flex-col space-y-4",children:[e.jsxs("p",{className:"text-xs text-gray-400 text-center",children:[e.jsx("span",{className:"material-icons text-[10px] align-middle mr-1",children:"lock"}),"Confirming locks this intent as the ",e.jsx("b",{children:"Single Source of Truth"}),"."]}),e.jsxs("button",{onClick:()=>je(c.full_analysis),className:"w-full py-4 bg-primary hover:bg-primary-hover text-black font-extrabold rounded-2xl transition-all transform hover:scale-[1.01] shadow-xl shadow-primary/20 flex items-center justify-center space-x-3",children:[e.jsx("span",{children:"Confirm & Generate Blueprint"}),e.jsx("span",{className:"material-icons",children:"rocket_launch"})]})]})]})]})]}),t==="review_spec"&&p&&e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full blur-[60px] -mr-10 -mt-10"}),e.jsx("button",{onClick:()=>l(`/workspace/${S}/settings`),className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors rounded-lg p-2 hover:bg-white/5",children:e.jsx("span",{className:"material-icons text-sm",children:"settings"})}),e.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-4",children:"Project Snapshot"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 relative z-10",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Project Name"}),e.jsx("div",{className:"text-xl font-bold text-white tracking-tight flex items-center space-x-2 group",children:e.jsx("span",{children:(g==null?void 0:g.name)||p.project_name||"My Cloud Project"})}),e.jsxs("div",{className:"mt-2 group",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",title:g==null?void 0:g.description,children:(g==null?void 0:g.description)||p.project_summary||h||"No description provided."})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Project Type"}),e.jsxs("div",{className:"inline-flex items-center space-x-2 px-3 py-1 bg-white/5 rounded-full text-sm text-gray-300 border border-white/5",children:[e.jsx("span",{className:"material-icons text-xs",children:"category"}),e.jsx("span",{className:"capitalize",children:((At=p.architecture_pattern)==null?void 0:At.replace(/_/g," "))||"Web App"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Client Type"}),e.jsxs("div",{className:"inline-flex items-center space-x-2 px-3 py-1 bg-white/5 rounded-full text-sm text-gray-300 border border-white/5",children:[e.jsx("span",{className:"material-icons text-xs",children:"devices"}),e.jsx("span",{className:"capitalize",children:((zt=O==null?void 0:O.intent)==null?void 0:zt.client_type)||"Web"})]})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-white/5",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(O==null?void 0:O.features)&&Object.entries(O.features).filter(([I,Y])=>Y===!0).map(([I])=>e.jsx("span",{className:"px-2 py-1 bg-blue-500/10 text-blue-400 border border-blue-500/20 rounded text-[10px] font-bold uppercase tracking-wider",children:I.replace(/_/g," ")},I))})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-green-500/20 flex items-center justify-center text-green-400 text-xs font-bold",children:""}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"How we understood your project"})]}),e.jsxs("div",{className:"bg-surface/50 border border-border rounded-2xl p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(It=p.explanations)==null?void 0:It.slice(0,4).map((I,Y)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"material-icons text-gray-500 text-sm mt-0.5",children:"check"}),e.jsx("span",{className:"text-sm text-gray-300 leading-relaxed",children:I})]},Y)),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"material-icons text-gray-500 text-sm mt-0.5",children:"check"}),e.jsxs("span",{className:"text-sm text-gray-300 leading-relaxed",children:["Traffic scale assumption: ",e.jsx("span",{className:"text-white font-medium",children:((Rt=p.assumptions)==null?void 0:Rt.traffic_tier)||"Medium"})]})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-4 italic",children:"Based on your description and selected options."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"material-icons text-primary",children:"schema"}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Architecture Overview"})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 relative overflow-hidden group hover:border-primary/30 transition-all duration-500",children:[e.jsxs("p",{className:"text-white font-medium text-lg leading-relaxed border-b border-white/5 pb-4 mb-6",children:['"',p.project_summary||"Optimized cloud infrastructure.",'"']}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Included Services & Infrastructure"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:(Ft=p.modules)==null?void 0:Ft.map((I,Y)=>e.jsxs("div",{className:"flex items-center p-3 bg-white/5 rounded-xl border border-white/5 hover:border-primary/20 transition-colors",children:[e.jsx("span",{className:"material-icons text-gray-500 text-sm mr-3",children:I.category==="compute"?"memory":I.category==="storage"?"storage":I.category==="database"?"database":"cloud"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-bold text-white",children:I.service_name||I.type}),e.jsx("div",{className:"text-xs text-primary/80 uppercase font-bold tracking-wider",children:I.category})]})]},Y))})]}),e.jsxs("div",{className:"flex items-start space-x-2 bg-blue-500/5 p-4 rounded-xl border border-blue-500/10",children:[e.jsx("span",{className:"material-icons text-blue-400 text-sm mt-0.5",children:"info"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["This architecture is designed for ",e.jsx("strong",{children:(Ot=p.assumptions)==null?void 0:Ot.traffic_tier})," traffic. Proceed to usage estimation to see detailed costs."]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{onClick:ye,disabled:w||k,className:"px-8 py-4 bg-gradient-to-r from-primary to-purple-500 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-primary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{children:"Estimate Usage & Costs"}),e.jsx("span",{className:"material-icons",children:"analytics"})]})})]}),t==="processing_usage"&&e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full border-4 border-transparent border-t-primary animate-spin"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-semibold text-white",children:"Analyzing Usage Patterns"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"AI is predicting realistic user traffic, storage, and bandwidth..."})]})]}),t==="usage_review"&&N&&e.jsxs("div",{className:"space-y-8 animate-fade-in pb-20 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Estimated Usage Profile"}),e.jsxs("div",{className:"relative group",children:[e.jsx("span",{className:"material-icons text-gray-400 cursor-help hover:text-primary transition-colors",children:"info"}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-4 py-3 bg-gray-800 text-white text-xs rounded-xl shadow-lg w-72 opacity-0 group-hover:opacity-100 transition-opacity z-50 pointer-events-none",children:[e.jsx("strong",{className:"text-primary",children:"Infracost Integration"}),e.jsx("p",{className:"mt-1 text-gray-300 leading-relaxed",children:"These values are used to generate Infracost usage inputs for accurate, usage-based cloud pricing. Adjust to match your expected workload."}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-800"})]})]})]}),e.jsxs("p",{className:"text-gray-400 max-w-2xl mx-auto",children:['Based on your project description ("',g==null?void 0:g.name,`"), we've inferred the following usage patterns to generate accurate costs.`]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 flex flex-col hover:border-primary/50 transition-all group relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3",children:e.jsx("span",{className:"material-icons text-primary/20 group-hover:text-primary/40 transition-colors text-4xl",children:"group"})}),e.jsx("h3",{className:"text-gray-400 text-xs uppercase font-bold tracking-widest mb-4",children:"Scale: Monthly Users"}),e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold mb-1",children:"Min"}),e.jsx("input",{type:"number",disabled:k,className:`w-24 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white font-bold focus:border-primary outline-none transition-colors ${k?"opacity-50 cursor-not-allowed":""}`,value:((Bt=(Tt=N==null?void 0:N.usage_profile)==null?void 0:Tt.monthly_users)==null?void 0:Bt.min)||0,onChange:I=>{const Y=parseInt(I.target.value)||0;E(B=>{var ee;return{...B,usage_profile:{...(B==null?void 0:B.usage_profile)||{},monthly_users:{...((ee=B==null?void 0:B.usage_profile)==null?void 0:ee.monthly_users)||{},min:Y}}}}),G(!0)}})]}),e.jsx("span",{className:"text-gray-600 self-end mb-2",children:"to"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold mb-1",children:"Max"}),e.jsx("input",{type:"number",disabled:k,className:`w-24 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white font-bold focus:border-primary outline-none transition-colors ${k?"opacity-50 cursor-not-allowed":""}`,value:((Pt=(Dt=N==null?void 0:N.usage_profile)==null?void 0:Dt.monthly_users)==null?void 0:Pt.max)||0,onChange:I=>{const Y=parseInt(I.target.value)||0;E(B=>{var ee;return{...B,usage_profile:{...(B==null?void 0:B.usage_profile)||{},monthly_users:{...((ee=B==null?void 0:B.usage_profile)==null?void 0:ee.monthly_users)||{},max:Y}}}}),G(!0)}})]})]}),e.jsxs("div",{className:"space-y-2 mt-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),e.jsx("span",{className:"text-[10px] text-green-400 font-bold uppercase tracking-wider",children:"Expected Traffic"})]}),e.jsxs("p",{className:"text-[11px] text-gray-400 italic leading-relaxed",children:['"',(($t=N.rationale)==null?void 0:$t.monthly_users)||"Based on typical growth for this workload type.",'"']})]})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 flex flex-col hover:border-blue-500/50 transition-all group relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3",children:e.jsx("span",{className:"material-icons text-blue-500/20 group-hover:text-blue-500/40 transition-colors text-4xl",children:"swap_horiz"})}),e.jsx("h3",{className:"text-gray-400 text-xs uppercase font-bold tracking-widest mb-4",children:"Network: Data Transfer (GB)"}),e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold mb-1",children:"Min"}),e.jsx("input",{type:"number",disabled:k,className:`w-24 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white font-bold focus:border-blue-500 outline-none transition-colors ${k?"opacity-50 cursor-not-allowed":""}`,value:((Ut=(Lt=N==null?void 0:N.usage_profile)==null?void 0:Lt.data_transfer_gb)==null?void 0:Ut.min)||0,onChange:I=>{const Y=parseInt(I.target.value)||0;E(B=>{var ee;return{...B,usage_profile:{...(B==null?void 0:B.usage_profile)||{},data_transfer_gb:{...((ee=B==null?void 0:B.usage_profile)==null?void 0:ee.data_transfer_gb)||{},min:Y}}}}),G(!0)}})]}),e.jsx("span",{className:"text-gray-600 self-end mb-2",children:"to"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold mb-1",children:"Max"}),e.jsx("input",{type:"number",disabled:k,className:`w-24 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white font-bold focus:border-blue-500 outline-none transition-colors ${k?"opacity-50 cursor-not-allowed":""}`,value:((Wt=(Mt=N==null?void 0:N.usage_profile)==null?void 0:Mt.data_transfer_gb)==null?void 0:Wt.max)||0,onChange:I=>{const Y=parseInt(I.target.value)||0;E(B=>{var ee;return{...B,usage_profile:{...(B==null?void 0:B.usage_profile)||{},data_transfer_gb:{...((ee=B==null?void 0:B.usage_profile)==null?void 0:ee.data_transfer_gb)||{},max:Y}}}}),G(!0)}})]})]}),e.jsxs("div",{className:"space-y-2 mt-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-[10px] text-blue-400 font-bold uppercase tracking-wider",children:"Egress/Bandwidth"})]}),e.jsxs("p",{className:"text-[11px] text-gray-400 italic leading-relaxed",children:['"',((Gt=N.rationale)==null?void 0:Gt.data_transfer_gb)||"Simulates content delivery and API interactions.",'"']})]})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 flex flex-col hover:border-purple-500/50 transition-all group relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3",children:e.jsx("span",{className:"material-icons text-purple-500/20 group-hover:text-purple-500/40 transition-colors text-4xl",children:"storage"})}),e.jsx("h3",{className:"text-gray-400 text-xs uppercase font-bold tracking-widest mb-4",children:"Capacity: Storage (GB)"}),e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold mb-1",children:"Min"}),e.jsx("input",{type:"number",disabled:k,className:`w-24 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white font-bold focus:border-purple-500 outline-none transition-colors ${k?"opacity-50 cursor-not-allowed":""}`,value:((Ht=(Zt=N==null?void 0:N.usage_profile)==null?void 0:Zt.data_storage_gb)==null?void 0:Ht.min)||0,onChange:I=>{const Y=parseInt(I.target.value)||0;E(B=>{var ee;return{...B,usage_profile:{...(B==null?void 0:B.usage_profile)||{},data_storage_gb:{...((ee=B==null?void 0:B.usage_profile)==null?void 0:ee.data_storage_gb)||{},min:Y}}}}),G(!0)}})]}),e.jsx("span",{className:"text-gray-600 self-end mb-2",children:"to"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold mb-1",children:"Max"}),e.jsx("input",{type:"number",disabled:k,className:`w-24 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white font-bold focus:border-purple-500 outline-none transition-colors ${k?"opacity-50 cursor-not-allowed":""}`,value:((Vt=(qt=N==null?void 0:N.usage_profile)==null?void 0:qt.data_storage_gb)==null?void 0:Vt.max)||0,onChange:I=>{const Y=parseInt(I.target.value)||0;E(B=>{var ee;return{...B,usage_profile:{...(B==null?void 0:B.usage_profile)||{},data_storage_gb:{...((ee=B==null?void 0:B.usage_profile)==null?void 0:ee.data_storage_gb)||{},max:Y}}}}),G(!0)}})]})]}),e.jsxs("div",{className:"space-y-2 mt-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500"}),e.jsx("span",{className:"text-[10px] text-purple-400 font-bold uppercase tracking-wider",children:"Data Footprint"})]}),e.jsxs("p",{className:"text-[11px] text-gray-400 italic leading-relaxed",children:['"',((Yt=N.rationale)==null?void 0:Yt.data_storage_gb)||((Kt=N.rationale)==null?void 0:Kt.storage_gb)||"Accounts for both database and file assets.",'"']})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-white/5",children:[e.jsxs("button",{onClick:()=>d("review_spec"),disabled:k,className:`px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium transition-colors flex items-center space-x-2 ${k?"opacity-50 cursor-not-allowed":"hover:bg-white/10"}`,children:[e.jsx("span",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{children:"Back to Architecture"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{onClick:()=>{oe("cost_effective"),fe()},disabled:w||k,className:"px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-green-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{children:"Cost Effective"}),e.jsx("span",{className:"material-icons",children:"trending_down"})]}),e.jsxs("button",{onClick:()=>{oe("high_performance"),fe()},disabled:w||k,className:"px-8 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-blue-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{children:"High Performance"}),e.jsx("span",{className:"material-icons",children:"speed"})]})]})]})]}),t==="cost_estimation"&&A&&e.jsxs("div",{className:"space-y-8 animate-fade-in pb-20 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"material-icons text-primary",children:"cloud"}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Cloud Provider Comparison"})]}),e.jsx("div",{className:"text-xs text-gray-500 italic",children:"Select a provider to see specific details"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:(A.rankings||[]).map(I=>{var B;const Y=o===I.provider;return e.jsxs("div",{onClick:()=>U(I.provider.toUpperCase()),className:`cursor-pointer rounded-2xl p-5 border transition-all relative overflow-hidden flex flex-col justify-between
                                                        ${Y?"bg-primary/10 border-primary shadow-lg shadow-primary/20 scale-[1.02]":"bg-surface border-border hover:border-white/20"}`,children:[I.recommended&&e.jsx("div",{className:"absolute top-0 right-0 px-3 py-1 bg-gradient-to-r from-yellow-400 to-amber-500 text-[10px] font-bold text-black uppercase tracking-tighter rounded-bl-xl shadow-lg",children:"Recommended"}),e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold
                                                            ${I.provider==="AWS"?"bg-[#FF9900]/20 text-[#FF9900]":I.provider==="GCP"?"bg-[#4285F4]/20 text-[#4285F4]":"bg-[#0078D4]/20 text-[#0078D4]"}`,children:I.provider==="AWS"?"AWS":I.provider==="GCP"?"GCP":"AZ"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white",children:I.provider==="AZURE"?"Azure":I.provider}),e.jsxs("div",{className:"text-[10px] text-gray-400 uppercase tracking-widest",children:[I.score,"% Score"]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-xl font-bold text-white leading-tight",children:[((B=I.cost_range)==null?void 0:B.formatted)||I.formatted_cost,I.monthly_cost&&I.monthly_cost<1&&e.jsx("div",{className:"text-[10px] text-amber-400",children:I.cost_intent==="hobby"?"Hobby-scale lower bound":"Estimated minimum"})]}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:I.recommended?"Recommended configuration (Cost-Effective)":"Estimated Monthly Cost"}),(()=>{let ee="standard";if(A.scenarios){for(const[se,ce]of Object.entries(A.scenarios))if(ce[I.provider]){ee=se;break}}return e.jsxs("div",{className:"text-[10px] text-gray-400",children:[ee.replace("_"," ").replace(/\b\w/g,se=>se.toUpperCase())," profile"]})})(),I.recommended&&(A==null?void 0:A.recommendation_facts)&&e.jsx("div",{className:"text-[10px] text-amber-400 italic mt-1",children:A.recommendation_facts.facts.dominant_drivers[0]?`${A.recommendation_facts.facts.dominant_drivers[0].name} is a key cost driver at your usage level.`:"Based on your usage patterns and cost optimization."})]}),Y&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-primary/20 flex items-center justify-between text-[10px] text-primary font-bold uppercase tracking-wider",children:[e.jsx("span",{children:"Selected"}),e.jsx("span",{className:"material-icons text-[12px]",children:"check_circle"})]})]},I.provider)})})]}),(()=>{var Ae,pt,_e,Ye,nt,Ir,Rr;const I=(A.rankings||[]).find(Be=>Be.recommended),B=(A.rankings||[]).find(Be=>Be.provider===o)||I;if(!B)return null;const ee={AWS:{strengths:["Largest service catalog","Most mature ML/AI services","Best-in-class serverless (Lambda)","Global infrastructure"],bestFor:["Enterprise workloads","ML/AI applications","Scalable architectures","Multi-region deployments"]},GCP:{strengths:["Cost-effective compute","Superior Kubernetes (GKE)","Advanced analytics","Strong ML tooling"],bestFor:["Data analytics","Machine learning","Container workloads","Startups & scale-ups"]},AZURE:{strengths:["Enterprise integration","Hybrid cloud leader","Microsoft ecosystem","Strong compliance"],bestFor:["Enterprise IT","Hybrid deployments","Microsoft stack users","Regulated industries"]}},ce=[...A.rankings||[]].sort((Be,et)=>(Be.monthly_cost||0)-(et.monthly_cost||0))[0],ue=B.provider===(ce==null?void 0:ce.provider),ge=B.provider==="AZURE"?"Azure":B.provider,Se={strengths:((Ae=B.pros)==null?void 0:Ae.length)>0?B.pros:((pt=ee[B.provider])==null?void 0:pt.strengths)||[],bestFor:((_e=B.best_for)==null?void 0:_e.length)>0?B.best_for:((Ye=ee[B.provider])==null?void 0:Ye.bestFor)||[]};return e.jsxs("details",{className:"group bg-gradient-to-br from-surface/80 to-surface/40 border border-border rounded-2xl transition-all hover:border-primary/30",children:[e.jsxs("summary",{className:"px-6 py-4 cursor-pointer flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-bold
                                                        ${B.provider==="AWS"?"bg-[#FF9900]/20 text-[#FF9900]":B.provider==="GCP"?"bg-[#4285F4]/20 text-[#4285F4]":"bg-[#0078D4]/20 text-[#0078D4]"}`,children:B.provider==="AWS"?"AWS":B.provider==="GCP"?"GCP":"AZ"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-white",children:["Why ",ge,"?"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to see why this provider is recommended"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[B.recommended&&e.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-yellow-400 to-amber-500 text-black text-xs font-bold rounded-full",children:" Best Match"}),e.jsx("span",{className:"material-icons text-gray-400 group-open:rotate-180 transition-transform",children:"expand_more"})]})]}),e.jsxs("div",{className:"px-6 pb-6 space-y-4 animate-fade-in",children:[e.jsxs("p",{className:"text-sm text-gray-200 leading-relaxed",children:["Based on your ",e.jsx("span",{className:"text-primary font-semibold",children:H.replace("_"," ")})," profile and project requirements, ",e.jsx("span",{className:"text-white font-semibold",children:ge})," is",ue?` the most cost-effective option at ${B.formatted_cost||`$${(nt=B.monthly_cost)==null?void 0:nt.toFixed(2)}/mo`}`:` your best choice at ${B.formatted_cost||`$${(Ir=B.monthly_cost)==null?void 0:Ir.toFixed(2)}/mo`}`,"."]}),Se.strengths.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-xs text-gray-400 uppercase tracking-wider font-bold",children:["Why ",ge," Works For You"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Se.strengths.slice(0,4).map((Be,et)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[e.jsx("span",{className:"material-icons text-green-400 text-sm",children:"check_circle"}),Be]},et))})]}),Se.bestFor.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:Se.bestFor.slice(0,4).map((Be,et)=>e.jsx("span",{className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] rounded-full border border-white/10",children:Be},et))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-6 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Overall Score"}),e.jsxs("div",{className:"text-lg font-bold text-primary",children:[B.score||B.final_score,"%"]})]}),B.cost_score&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Cost"}),e.jsx("div",{className:"text-lg font-bold text-green-400",children:B.cost_score})]}),B.performance_score&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Performance"}),e.jsx("div",{className:"text-lg font-bold text-blue-400",children:B.performance_score})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Estimated Monthly"}),e.jsx("div",{className:"text-xl font-bold text-white",children:B.formatted_cost||`$${(Rr=B.monthly_cost)==null?void 0:Rr.toFixed(2)}`})]})]})]})]})})(),e.jsxs("details",{className:"group bg-surface/50 border border-border rounded-2xl transition-all hover:border-primary/30",children:[e.jsxs("summary",{className:"px-6 py-4 cursor-pointer flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"material-icons text-green-400 text-lg",children:"verified"}),e.jsx("span",{className:"font-bold text-white",children:"Confidence Details"}),e.jsxs("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 rounded text-[10px] font-bold",children:[A.confidence_percentage||Math.round((A.confidence||0)*100),"%"]})]}),e.jsx("span",{className:"material-icons text-gray-400 group-open:rotate-180 transition-transform",children:"expand_more"})]}),e.jsxs("div",{className:"px-6 pb-6 space-y-4 animate-fade-in",children:[e.jsxs("p",{className:"text-sm text-gray-400 leading-relaxed",children:["Confidence is based on the ",e.jsx("strong",{className:"text-white",children:'"weakest link"'})," principle  the overall score is capped by the lowest individual factor."]}),e.jsx("div",{className:"space-y-3",children:e.jsx("div",{className:"space-y-3",children:(()=>{var Y,B,ee,se,ce,ue,ge;const I=A.confidence_breakdown||(A.breakdown?{usage_completeness:{label:"Based on input density",score:Math.round((A.breakdown.usage_confidence||.5)*100)},pricing_method:{label:"Based on provider API coverage",score:Math.round((A.breakdown.estimate_type_score||.8)*100)},architecture_completeness:{label:"Based on service definitions",score:Math.round((A.breakdown.architecture_score||.7)*100)}}:null);return I?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"material-icons text-blue-400 text-lg",children:"data_usage"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:"Usage Data Completeness"}),e.jsx("div",{className:"text-xs text-gray-400",children:((Y=I.usage_completeness)==null?void 0:Y.label)||"Inferred from description"})]})]}),e.jsxs("div",{className:"text-lg font-bold text-blue-400",children:[((B=I.usage_completeness)==null?void 0:B.score)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"material-icons text-green-400 text-lg",children:"calculate"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:"Pricing Method Reliability"}),e.jsx("div",{className:"text-xs text-gray-400",children:((ee=I.pricing_method)==null?void 0:ee.label)||"Heuristic Estimation"})]})]}),e.jsxs("div",{className:"text-lg font-bold text-green-400",children:[((se=I.pricing_method)==null?void 0:se.score)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"material-icons text-purple-400 text-lg",children:"architecture"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:"Architecture Completeness"}),e.jsx("div",{className:"text-xs text-gray-400",children:((ce=I.architecture_completeness)==null?void 0:ce.label)||"Pattern-based Standard"})]})]}),e.jsxs("div",{className:"text-lg font-bold text-purple-400",children:[((ue=I.architecture_completeness)==null?void 0:ue.score)||0,"%"]})]})]}):e.jsx("div",{className:"text-sm text-gray-500 italic",children:((ge=A.confidence_explanation)==null?void 0:ge[0])||"Detailed breakdown not generated, but overall confidence is calculated."})})()})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"material-icons text-green-400",children:"paid"}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Cost Details & Confidence"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 flex flex-col justify-center items-center text-center",children:[e.jsxs("div",{className:"relative w-24 h-24 mb-3",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 36 36",children:[e.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#2E3645",strokeWidth:"4"}),e.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:typeof A.confidence=="number"&&A.confidence>.8?"#22c55e":typeof A.confidence=="number"&&A.confidence>.5?"#eab308":"#ef4444",strokeWidth:"4",strokeDasharray:`${(A.confidence||0)*100}, 100`})]}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:e.jsxs("span",{className:"text-xl font-bold text-white",children:[typeof A.confidence=="number"?(A.confidence*100).toFixed(0):"0","%"]})})]}),e.jsxs("div",{className:"text-sm font-bold text-white uppercase tracking-wider flex items-center space-x-2",children:[e.jsx("span",{children:"Confidence"}),e.jsxs("div",{className:"relative group",children:[e.jsx("span",{className:"material-icons text-xs text-gray-400 cursor-help",children:"info"}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg shadow-lg w-64 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[((Xt=A.confidence_explanation)==null?void 0:Xt.join(". "))||"Confidence based on service resolution, data quality, and estimate type.",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-800"})]})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2 line-clamp-2",children:((Jt=A.confidence_explanation)==null?void 0:Jt[0])||"Based on architecture completeness and data quality."}),(((Qt=A.recommended)==null?void 0:Qt.estimate_type)||((tr=(er=A.providers)==null?void 0:er[o])==null?void 0:tr.estimate_type))&&e.jsx("div",{className:"mt-3 w-full",children:e.jsx("div",{className:`px-3 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wider ${((rr=A.recommended)==null?void 0:rr.estimate_type)==="exact"||((ar=(sr=A.providers)==null?void 0:sr[o])==null?void 0:ar.estimate_type)==="exact"?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-amber-500/20 text-amber-400 border border-amber-500/30"}`,children:((nr=A.recommended)==null?void 0:nr.estimate_type)==="exact"||((or=(ir=A.providers)==null?void 0:ir[o])==null?void 0:or.estimate_type)==="exact"?" Exact (Terraform-based)":" Estimated (Heuristic)"})})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 flex flex-col justify-center items-center text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-3",children:(()=>{var Y,B;const I=(Y=A.rankings)==null?void 0:Y.find(ee=>ee.provider===o);if(!(I!=null&&I.score)){const ee=A.scenarios?Object.values(A.scenarios).map(se=>se[o]).find(se=>se):null;return(ee==null?void 0:ee.score)||((B=A.recommended)==null?void 0:B.score)||"N/A"}return I.score})()}),e.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wider",children:"% Score"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[o||"Provider"," competitiveness"]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 bg-surface border border-border rounded-2xl p-6",children:[e.jsx("h4",{className:"text-xs text-gray-500 uppercase font-bold mb-4",children:"Estimate Based On"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:(lr=N==null?void 0:N.usage_profile)!=null&&lr.monthly_users?typeof N.usage_profile.monthly_users=="object"?`${(N.usage_profile.monthly_users.min||0).toLocaleString()} - ${(N.usage_profile.monthly_users.max||0).toLocaleString()}`:N.usage_profile.monthly_users.toLocaleString():(ur=(dr=(cr=A==null?void 0:A.recommendation_facts)==null?void 0:cr.facts)==null?void 0:dr.usage)!=null&&ur.monthly_users?typeof A.recommendation_facts.facts.usage.monthly_users=="object"?`${(A.recommendation_facts.facts.usage.monthly_users.min||0).toLocaleString()} - ${(A.recommendation_facts.facts.usage.monthly_users.max||0).toLocaleString()}`:A.recommendation_facts.facts.usage.monthly_users.toLocaleString():"5,000"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Monthly Users"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:(hr=N==null?void 0:N.usage_profile)!=null&&hr.data_transfer_gb?typeof N.usage_profile.data_transfer_gb=="object"?`${N.usage_profile.data_transfer_gb.min||0} - ${N.usage_profile.data_transfer_gb.max||0} GB`:`${N.usage_profile.data_transfer_gb} GB`:(pr=(fr=(mr=A==null?void 0:A.recommendation_facts)==null?void 0:mr.facts)==null?void 0:fr.usage)!=null&&pr.data_transfer_gb?typeof A.recommendation_facts.facts.usage.data_transfer_gb=="object"?`${A.recommendation_facts.facts.usage.data_transfer_gb.min||0} - ${A.recommendation_facts.facts.usage.data_transfer_gb.max||0} GB`:`${A.recommendation_facts.facts.usage.data_transfer_gb} GB`:"50 GB"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Data Transfer"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:(xr=N==null?void 0:N.usage_profile)!=null&&xr.data_storage_gb?typeof N.usage_profile.data_storage_gb=="object"?`${N.usage_profile.data_storage_gb.min||0} - ${N.usage_profile.data_storage_gb.max||0} GB`:`${N.usage_profile.data_storage_gb} GB`:(yr=(br=(gr=A==null?void 0:A.recommendation_facts)==null?void 0:gr.facts)==null?void 0:br.usage)!=null&&yr.data_storage_gb?typeof A.recommendation_facts.facts.usage.data_storage_gb=="object"?`${A.recommendation_facts.facts.usage.data_storage_gb.min||0} - ${A.recommendation_facts.facts.usage.data_storage_gb.max||0} GB`:`${A.recommendation_facts.facts.usage.data_storage_gb} GB`:"10 GB"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Storage"})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-white/5",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{var B,ee,se;return((((B=A.recommended)==null?void 0:B.provider)===o?A.recommended.services:null)||((se=(ee=A.provider_details)==null?void 0:ee[o||"aws"])==null?void 0:se.services)||[]).slice(0,6).map((ce,ue)=>e.jsx("span",{className:"px-3 py-1 bg-white/5 border border-white/10 rounded-full text-xs text-gray-300",children:ce.cloud_service||ce.display_name},ue))})()})}),(A==null?void 0:A.recommendation_facts)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-amber-500/20",children:[e.jsxs("div",{className:"text-xs text-amber-400 font-bold uppercase tracking-wider mb-2",children:["Why ",A.recommendation_facts.provider.toUpperCase(),"?"]}),e.jsx("div",{className:"space-y-1 text-xs text-gray-300",children:A.recommendation_facts.pros.map((I,Y)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-green-400 mr-1",children:""}),e.jsx("span",{children:I})]},Y))})]}),e.jsxs("button",{onClick:()=>d("usage_review"),disabled:k,className:`mt-4 w-full py-2 text-gray-400 text-xs font-medium rounded-lg transition-colors flex items-center justify-center space-x-1 ${k?"opacity-50 cursor-not-allowed":"hover:text-white hover:bg-white/5"}`,children:[e.jsx("span",{className:"material-icons text-xs",children:"edit"}),e.jsx("span",{children:"Refine assumptions"})]})]})]})]}),e.jsxs("div",{className:"border border-white/5 rounded-2xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>x(f==="scenarios"?null:"scenarios"),className:"w-full p-4 bg-white/5 hover:bg-white/10 flex items-center justify-between transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Scaling Scenarios"}),e.jsx("span",{className:`material-icons text-gray-400 transition-transform ${f==="scenarios"?"rotate-180":""}`,children:"expand_more"})]}),f==="scenarios"&&e.jsxs("div",{className:"p-6 bg-surface animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-bold text-white",children:"If traffic doubles?"}),e.jsx("span",{className:"text-[10px] font-bold text-red-400 bg-red-400/10 px-2 py-0.5 rounded uppercase",children:"+25%"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Cost scales with bandwidth and API requests."})]}),e.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-bold text-white",children:"If storage doubles?"}),e.jsx("span",{className:"text-[10px] font-bold text-green-400 bg-green-400/10 px-2 py-0.5 rounded uppercase",children:"+5%"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Storage is generally the most cost-effective component."})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/20 rounded-xl p-4",children:[e.jsx("div",{className:"text-lg font-bold text-white mb-1",children:"Estimated Cost Range"}),e.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:((wr=A.cost_range)==null?void 0:wr.formatted)||"$0.00 - $0.00/month"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Depends on scaling, availability, and performance choices"})]})]})]}),e.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 flex items-start space-x-3",children:[e.jsx("span",{className:"material-icons text-amber-400 text-sm mt-0.5",children:"warning"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-xs text-amber-200/90 leading-relaxed",children:(()=>{var B,ee,se,ce,ue,ge;const I=((B=A.recommended)==null?void 0:B.estimate_type)||((se=(ee=A.providers)==null?void 0:ee[o])==null?void 0:se.estimate_type)||"heuristic",Y=((ce=A.recommended)==null?void 0:ce.estimate_reason)||((ge=(ue=A.providers)==null?void 0:ue[o])==null?void 0:ge.estimate_reason);return I==="exact"||I==="infracost"?e.jsxs(e.Fragment,{children:[e.jsx("strong",{className:"font-bold",children:"Exact Pricing:"})," These costs are calculated using real Terraform + Infracost CLI and represent actual provider pricing. Final costs may vary based on actual resource usage, region selection, and any enterprise discounts."]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{className:"font-bold",children:"Estimated Pricing:"})," This is an approximate cost estimate based on formula-driven provider pricing for ",o||"the selected provider",".",Y&&e.jsxs("span",{className:"block mt-1 text-[10px] italic",children:["(",Y,")"]}),e.jsx("span",{className:"block mt-1",children:"Exact costs will be calculated when Terraform is generated and will depend on actual resource usage, region selection, and any enterprise discounts."})]})})()})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-white/5",children:[e.jsxs("button",{onClick:()=>d("usage_review"),disabled:k,className:`px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium transition-colors flex items-center space-x-2 ${k?"opacity-50 cursor-not-allowed":"hover:bg-white/10"}`,children:[e.jsx("span",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{children:"Back to Usage"})]}),e.jsxs("button",{onClick:()=>{d("architecture")},disabled:k,className:`px-8 py-4 bg-gradient-to-r from-primary to-purple-500 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 transition-all shadow-lg shadow-primary/20 ${k?"opacity-50 cursor-not-allowed":"hover:opacity-90"}`,children:[e.jsx("span",{children:"View Diagram"}),e.jsx("span",{className:"material-icons",children:"account_tree"})]})]})]}),t==="requirements"&&e.jsx(Na,{workspaceId:r,infraSpec:p,costEstimation:A,onNext:()=>d("architecture"),onBack:()=>d("cost_estimation"),onRequirementsCaptured:R,isDeployed:k}),t==="architecture"&&e.jsx(On,{workspaceId:r,infraSpec:p,costEstimation:A,selectedProvider:o,selectedProfile:H,usageProfile:N,requirementsData:Q,architectureData:ie,onArchitectureDataLoaded:Z,onNext:I=>{q(I),I==="self"?d("feedback"):we("One-Click deployment coming soon!",{icon:""})},onBack:()=>d("cost_estimation"),isDeployed:k}),t==="feedback"&&e.jsx(ya,{workspaceId:r,costEstimation:A,selectedProvider:o,costIntent:N==null?void 0:N.intent,onFeedbackSubmitted:()=>$(!0),onNext:()=>d("terraform_view"),onBack:()=>d("architecture"),isDeployed:k}),t==="terraform_view"&&e.jsx(ja,{workspaceId:r,infraSpec:p,selectedProvider:o,costEstimation:A,onComplete:()=>d("deployment_summary"),onBack:()=>d("feedback"),isDeployed:k}),t==="processing_cost"&&e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full border-4 border-transparent border-t-primary animate-spin"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-semibold text-white",children:"Analyzing Cloud Costs"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Comparing AWS, GCP, and Azure pricing..."})]})]}),t==="deployment_ready"&&e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-500/20 mb-6",children:e.jsx("span",{className:"material-icons text-4xl text-green-400",children:"check_circle"})}),e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Deployment Active"}),e.jsx("p",{className:"text-gray-400 mt-3 max-w-md",children:"Your infrastructure is live and running."})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("button",{onClick:()=>l("/workspaces"),className:"px-10 py-4 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-green-500/20",children:[e.jsx("span",{className:"material-icons",children:"dashboard"}),e.jsx("span",{children:"Return to Dashboard"})]}),e.jsxs("button",{onClick:()=>d("terraform_view"),className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[e.jsx("span",{className:"material-icons",children:"code"}),e.jsx("span",{children:"View Code"})]})]})]}),t==="deployment_summary"&&e.jsxs("div",{className:"space-y-8 animate-fade-in pb-20 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center space-y-4 mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"material-icons text-green-400 text-4xl",children:"check_circle"})}),e.jsx("h2",{className:"text-3xl font-bold text-white",children:k?"Self-Deployment Confirmed":"Ready for Self-Deployment"}),e.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:k?"Your project is marked as self-deployed. You can manage your infrastructure using the generated Terraform code.":"Your Terraform configuration is ready. Download it below to deploy to your cloud provider."})]}),e.jsx("div",{className:"bg-surface border border-border rounded-2xl p-6 mb-8 max-w-3xl mx-auto shadow-xl",children:e.jsxs("div",{className:"flex flex-col space-y-6",children:[e.jsxs("div",{className:"border-b border-border pb-6 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-primary/10 rounded-full mb-3",children:e.jsx("span",{className:"material-icons text-primary text-2xl",children:"rocket_launch"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:(g==null?void 0:g.name)||(p==null?void 0:p.project_name)||"Untitled Project"}),e.jsxs("p",{className:"text-gray-400 text-sm italic",children:['"',h||"No description provided.",'"']})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"material-icons text-blue-400",children:"cloud"}),e.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Cloud Provider"})]}),e.jsx("span",{className:"text-white font-bold",children:o||"AWS"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"material-icons text-purple-400",children:"schema"}),e.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Architecture Pattern"})]}),e.jsx("span",{className:"text-white font-bold text-sm capitalize truncate max-w-[150px]",title:((vr=p==null?void 0:p.architecture_pattern)==null?void 0:vr.replace(/_/g," "))||((_r=p==null?void 0:p.canonical_architecture)==null?void 0:_r.pattern_name),children:((jr=p==null?void 0:p.architecture_pattern)==null?void 0:jr.replace(/_/g," "))||((Nr=p==null?void 0:p.canonical_architecture)==null?void 0:Nr.pattern_name)||"Custom Architecture"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"material-icons text-orange-400",children:"public"}),e.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Region"})]}),e.jsx("span",{className:"text-white font-bold text-sm",children:((kr=p==null?void 0:p.region)==null?void 0:kr.resolved_region)||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"material-icons text-green-400",children:"paid"}),e.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Est. Monthly Cost"})]}),e.jsx("span",{className:"text-white font-bold",children:((Sr=(Cr=A==null?void 0:A.rankings)==null?void 0:Cr.find(I=>I.provider===o))==null?void 0:Sr.formatted_cost)||"$0/mo"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"material-icons text-yellow-400",children:"layers"}),e.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Services Configured"})]}),e.jsx("span",{className:"text-white font-bold",children:((Er=p==null?void 0:p.modules)==null?void 0:Er.length)||((zr=(Ar=p==null?void 0:p.canonical_architecture)==null?void 0:Ar.deployable_services)==null?void 0:zr.length)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl border border-white/5 hover:border-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"material-icons text-cyan-400",children:"settings_applications"}),e.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Deployment Method"})]}),e.jsx("span",{className:"px-2 py-1 bg-cyan-500/20 text-cyan-400 rounded text-xs font-bold uppercase",children:"Self Deployment"})]})]})]})}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("button",{onClick:async()=>{if(k){l("/workspaces");return}j(!0);try{const I=localStorage.getItem("token"),Y=I?{Authorization:`Bearer ${I}`}:{};await Ie.put(`http://localhost:5000/api/workspaces/${r}/deploy`,{deployment_method:"self",provider:o},{headers:Y}),we.success(" Project marked as Self-Deployed!",{duration:4e3}),te(!0),l("/workspaces")}catch(I){ne(I,"Failed to confirm deployment.")}finally{j(!1)}},disabled:T,className:`px-10 py-4 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 transition-all shadow-lg shadow-green-500/20 ${T?"opacity-50 cursor-wait":"hover:opacity-90"}`,children:[T?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx("span",{className:"material-icons",children:k?"dashboard":"check_circle"}),e.jsx("span",{children:T?"Updating...":k?"Return to Dashboard":"Mark as Self-Deployed"})]}),e.jsxs("button",{onClick:()=>d("terraform_view"),className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[e.jsx("span",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{children:"Back to Terraform"})]})]})]})]})})]})]})};export{Ln as default};
