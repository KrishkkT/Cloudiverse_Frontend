import{u as j,j as e}from"./index-BuOhdsOc.js";import{u as y,r as n}from"./vendor-rtOnKvnR.js";import{O as i,U as N,d as v,Q as w,l as k,V as F}from"./ui-C4fUc28P.js";import"./utils-Demn4eoi.js";const z=()=>{const{user:s,logout:p,updateProfile:h}=j(),o=y(),[r,c]=n.useState({name:"",email:"",company:""}),[d,m]=n.useState(!1),[x,u]=n.useState(!1);n.useEffect(()=>{s&&c({name:s.name||"",email:s.email||"",company:s.company||""})},[s]);const l=t=>{c({...r,[t.target.name]:t.target.value})},b=async t=>{t.preventDefault(),m(!0);try{const a=await h(r);a.success?alert("Profile updated successfully!"):alert(a.error||"Failed to update profile")}catch(a){console.error("Error updating profile:",a),alert("Failed to update profile")}finally{m(!1)}},f=async()=>{if(window.confirm("Are you sure you want to delete your account? This action cannot be undone.")){u(!0);try{const t=localStorage.getItem("token"),a=await fetch("http://localhost:5000/api/auth/profile",{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});if(a.ok)p(),o("/"),alert("Account deleted successfully");else{const g=await a.json();alert(g.message||"Failed to delete account")}}catch(t){console.error("Error deleting account:",t),alert("Failed to delete account")}finally{u(!1)}}};return s?e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"Profile Settings"}),e.jsx("p",{className:"text-text-secondary",children:"Manage your account information"})]}),e.jsxs("button",{onClick:()=>o("/workspaces"),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-text-primary hover:bg-white/10 transition-colors font-medium flex items-center gap-2",children:[e.jsx("span",{className:"material-icons text-sm",children:"dashboard"}),e.jsx("span",{children:"Back to Workspaces"})]})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"bg-primary/10 p-3 rounded-full mr-4",children:e.jsx(N,{className:"text-primary",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:s.name||"User"}),e.jsx("p",{className:"text-text-secondary",children:s.email})]})]}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-text-primary mb-2",children:"Full Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:l,className:"w-full px-4 py-2.5 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-text-primary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-text-primary mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(v,{className:"h-5 w-5 text-text-subtle"})}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:l,className:"w-full pl-10 px-4 py-2.5 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-text-primary",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company",className:"block text-sm font-medium text-text-primary mb-2",children:"Company"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(w,{className:"h-5 w-5 text-text-subtle"})}),e.jsx("input",{type:"text",id:"company",name:"company",value:r.company,onChange:l,className:"w-full pl-10 px-4 py-2.5 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-text-primary"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:d,className:"btn btn-primary flex items-center px-6 py-2.5",children:d?e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"animate-spin mr-2",size:16}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"mr-2",size:16}),"Save Changes"]})})})]})]}),e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-500 mb-2",children:"Danger Zone"}),e.jsx("p",{className:"text-text-secondary mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),e.jsx("button",{onClick:f,disabled:x,className:"btn btn-danger flex items-center px-4 py-2.5",children:x?e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"animate-spin mr-2",size:16}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2",size:16}),"Delete Account"]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(i,{className:"animate-spin text-primary mx-auto mb-4",size:32}),e.jsx("p",{className:"text-text-secondary",children:"Loading profile..."})]})})};export{z as default};
