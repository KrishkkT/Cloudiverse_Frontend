import{j as r}from"./index-BJ2RQODn.js";import{r as F,g as Zl,c as it,f as Qe,e as ql,u as Kl}from"./vendor-Bj8RrwSB.js";import{a as Me}from"./utils-D7-Zsnno.js";import{c as ds,u as Yl,a as ir,s as Xl,z as Jl,P as Ql,b as La,i as ec,p as tc,g as sc,d as Va,e as rc,f as nc,H as di,h as ui,j as ic,k as ac,l as hi,R as oc,B as lc,C as cc,m as fi}from"./style-DBiQVXwa.js";import"./ui-27QXhGAK.js";let dc={data:""},uc=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||dc},hc=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,fc=/\/\*[^]*?\*\/|  +/g,mi=/\n+/g,mt=(e,t)=>{let s="",n="",a="";for(let o in e){let i=e[o];o[0]=="@"?o[1]=="i"?s=o+" "+i+";":n+=o[1]=="f"?mt(i,o):o+"{"+mt(i,o[1]=="k"?"":t)+"}":typeof i=="object"?n+=mt(i,t?t.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=mt.p?mt.p(o,i):o+":"+i+";")}return s+(t&&a?t+"{"+a+"}":a)+n},nt={},$a=e=>{if(typeof e=="object"){let t="";for(let s in e)t+=s+$a(e[s]);return t}return e},mc=(e,t,s,n,a)=>{let o=$a(e),i=nt[o]||(nt[o]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(o));if(!nt[i]){let c=o!==e?e:(u=>{let d,f,h=[{}];for(;d=hc.exec(u.replace(fc,""));)d[4]?h.shift():d[3]?(f=d[3].replace(mi," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][d[1]]=d[2].replace(mi," ").trim();return h[0]})(e);nt[i]=mt(a?{["@keyframes "+i]:c}:c,s?"":"."+i)}let l=s&&nt.g?nt.g:null;return s&&(nt.g=nt[i]),((c,u,d,f)=>{f?u.data=u.data.replace(f,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(nt[i],t,n,l),i},pc=(e,t,s)=>e.reduce((n,a,o)=>{let i=t[o];if(i&&i.call){let l=i(s),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=c?"."+c:l&&typeof l=="object"?l.props?"":mt(l,""):l===!1?"":l}return n+a+(i??"")},"");function Ps(e){let t=this||{},s=e.call?e(t.p):e;return mc(s.unshift?s.raw?pc(s,[].slice.call(arguments,1),t.p):s.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):s,uc(t.target),t.g,t.o,t.k)}let Ua,ar,or;Ps.bind({g:1});let ot=Ps.bind({k:1});function gc(e,t,s,n){mt.p=t,Ua=e,ar=s,or=n}function bt(e,t){let s=this||{};return function(){let n=arguments;function a(o,i){let l=Object.assign({},o),c=l.className||a.className;s.p=Object.assign({theme:ar&&ar()},l),s.o=/ *go\d+/.test(c),l.className=Ps.apply(s,n)+(c?" "+c:"");let u=e;return e[0]&&(u=l.as||e,delete l.as),or&&u[0]&&or(l),Ua(u,l)}return t?t(a):a}}var xc=e=>typeof e=="function",js=(e,t)=>xc(e)?e(t):e,yc=(()=>{let e=0;return()=>(++e).toString()})(),Wa=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),bc=20,Dr="default",Ga=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,s)};case 1:return{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:n}=t;return Ga(e,{type:e.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(i=>i.id===a||a===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+o}))}}},xs=[],Ha={toasts:[],pausedAt:void 0,settings:{toastLimit:bc}},et={},Za=(e,t=Dr)=>{et[t]=Ga(et[t]||Ha,e),xs.forEach(([s,n])=>{s===t&&n(et[t])})},qa=e=>Object.keys(et).forEach(t=>Za(e,t)),vc=e=>Object.keys(et).find(t=>et[t].toasts.some(s=>s.id===e)),Ds=(e=Dr)=>t=>{Za(t,e)},wc={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},jc=(e={},t=Dr)=>{let[s,n]=F.useState(et[t]||Ha),a=F.useRef(et[t]);F.useEffect(()=>(a.current!==et[t]&&n(et[t]),xs.push([t,n]),()=>{let i=xs.findIndex(([l])=>l===t);i>-1&&xs.splice(i,1)}),[t]);let o=s.toasts.map(i=>{var l,c,u;return{...e,...e[i.type],...i,removeDelay:i.removeDelay||((l=e[i.type])==null?void 0:l.removeDelay)||(e==null?void 0:e.removeDelay),duration:i.duration||((c=e[i.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||wc[i.type],style:{...e.style,...(u=e[i.type])==null?void 0:u.style,...i.style}}});return{...s,toasts:o}},_c=(e,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(s==null?void 0:s.id)||yc()}),Qt=e=>(t,s)=>{let n=_c(t,e,s);return Ds(n.toasterId||vc(n.id))({type:2,toast:n}),n.id},Pe=(e,t)=>Qt("blank")(e,t);Pe.error=Qt("error");Pe.success=Qt("success");Pe.loading=Qt("loading");Pe.custom=Qt("custom");Pe.dismiss=(e,t)=>{let s={type:3,toastId:e};t?Ds(t)(s):qa(s)};Pe.dismissAll=e=>Pe.dismiss(void 0,e);Pe.remove=(e,t)=>{let s={type:4,toastId:e};t?Ds(t)(s):qa(s)};Pe.removeAll=e=>Pe.remove(void 0,e);Pe.promise=(e,t,s)=>{let n=Pe.loading(t.loading,{...s,...s==null?void 0:s.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let o=t.success?js(t.success,a):void 0;return o?Pe.success(o,{id:n,...s,...s==null?void 0:s.success}):Pe.dismiss(n),a}).catch(a=>{let o=t.error?js(t.error,a):void 0;o?Pe.error(o,{id:n,...s,...s==null?void 0:s.error}):Pe.dismiss(n)}),e};var kc=1e3,Nc=(e,t="default")=>{let{toasts:s,pausedAt:n}=jc(e,t),a=F.useRef(new Map).current,o=F.useCallback((f,h=kc)=>{if(a.has(f))return;let m=setTimeout(()=>{a.delete(f),i({type:4,toastId:f})},h);a.set(f,m)},[]);F.useEffect(()=>{if(n)return;let f=Date.now(),h=s.map(m=>{if(m.duration===1/0)return;let v=(m.duration||0)+m.pauseDuration-(f-m.createdAt);if(v<0){m.visible&&Pe.dismiss(m.id);return}return setTimeout(()=>Pe.dismiss(m.id,t),v)});return()=>{h.forEach(m=>m&&clearTimeout(m))}},[s,n,t]);let i=F.useCallback(Ds(t),[t]),l=F.useCallback(()=>{i({type:5,time:Date.now()})},[i]),c=F.useCallback((f,h)=>{i({type:1,toast:{id:f,height:h}})},[i]),u=F.useCallback(()=>{n&&i({type:6,time:Date.now()})},[n,i]),d=F.useCallback((f,h)=>{let{reverseOrder:m=!1,gutter:v=8,defaultPosition:g}=h||{},x=s.filter(j=>(j.position||g)===(f.position||g)&&j.height),y=x.findIndex(j=>j.id===f.id),w=x.filter((j,_)=>_<y&&j.visible).length;return x.filter(j=>j.visible).slice(...m?[w+1]:[0,w]).reduce((j,_)=>j+(_.height||0)+v,0)},[s]);return F.useEffect(()=>{s.forEach(f=>{if(f.dismissed)o(f.id,f.removeDelay);else{let h=a.get(f.id);h&&(clearTimeout(h),a.delete(f.id))}})},[s,o]),{toasts:s,handlers:{updateHeight:c,startPause:l,endPause:u,calculateOffset:d}}},Sc=ot`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Cc=ot`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ac=ot`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Tc=bt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Sc} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Cc} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Ac} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ec=ot`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Rc=bt("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Ec} 1s linear infinite;
`,Pc=ot`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Dc=ot`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ic=bt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Pc} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Dc} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Fc=bt("div")`
  position: absolute;
`,Mc=bt("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,zc=ot`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Oc=bt("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${zc} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Bc=({toast:e})=>{let{icon:t,type:s,iconTheme:n}=e;return t!==void 0?typeof t=="string"?F.createElement(Oc,null,t):t:s==="blank"?null:F.createElement(Mc,null,F.createElement(Rc,{...n}),s!=="loading"&&F.createElement(Fc,null,s==="error"?F.createElement(Tc,{...n}):F.createElement(Ic,{...n})))},Lc=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Vc=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,$c="0%{opacity:0;} 100%{opacity:1;}",Uc="0%{opacity:1;} 100%{opacity:0;}",Wc=bt("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Gc=bt("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Hc=(e,t)=>{let s=e.includes("top")?1:-1,[n,a]=Wa()?[$c,Uc]:[Lc(s),Vc(s)];return{animation:t?`${ot(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ot(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Zc=F.memo(({toast:e,position:t,style:s,children:n})=>{let a=e.height?Hc(e.position||t||"top-center",e.visible):{opacity:0},o=F.createElement(Bc,{toast:e}),i=F.createElement(Gc,{...e.ariaProps},js(e.message,e));return F.createElement(Wc,{className:e.className,style:{...a,...s,...e.style}},typeof n=="function"?n({icon:o,message:i}):F.createElement(F.Fragment,null,o,i))});gc(F.createElement);var qc=({id:e,className:t,style:s,onHeightUpdate:n,children:a})=>{let o=F.useCallback(i=>{if(i){let l=()=>{let c=i.getBoundingClientRect().height;n(e,c)};l(),new MutationObserver(l).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return F.createElement("div",{ref:o,className:t,style:s},a)},Kc=(e,t)=>{let s=e.includes("top"),n=s?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Wa()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...n,...a}},Yc=Ps`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,us=16,Xc=({reverseOrder:e,position:t="top-center",toastOptions:s,gutter:n,children:a,toasterId:o,containerStyle:i,containerClassName:l})=>{let{toasts:c,handlers:u}=Nc(s,o);return F.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:us,left:us,right:us,bottom:us,pointerEvents:"none",...i},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(d=>{let f=d.position||t,h=u.calculateOffset(d,{reverseOrder:e,gutter:n,defaultPosition:t}),m=Kc(f,h);return F.createElement(qc,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?Yc:"",style:m},d.type==="custom"?js(d.message,d):a?a(d):F.createElement(Zc,{toast:d,position:f}))}))},pe=Pe;const Jc=new Set(["a","an","the","and","or","but","is","are","was","were","be","been","being","in","on","at","to","for","of","with","by","about","as","if","so","this","that"]),Qc=[/fuck/i,/f\*?u\*?c\*?k/i,/fucker/i,/motherfucker/i,/mf/i,/shit/i,/sh[i1]t/i,/bullshit/i,/bitch/i,/b[i1]tch/i,/asshole/i,/asshole/i,/a\*?s\*?s/i,/dick/i,/cock/i,/penis/i,/pussy/i,/cunt/i,/whore/i,/slut/i,/bastard/i,/retard/i,/kys/i,/kill\s*yourself/i,/rape/i,/rapist/i,/suicide/i,/idiot/i,/moron/i,/stupid/i,/dumb/i,/loser/i,/jerk/i,/trash/i,/garbage/i,/bhosd[i1]k?e?/i,/bhosdi/i,/bhosdina/i,/madarchod/i,/bhenchod/i,/behenchod/i,/chutiya/i,/chutya/i,/chutiye/i,/gandu/i,/gaandu/i,/lund/i,/loda/i,/lavda/i,/lavde/i,/lodu/i,/harami/i,/kamina/i,/kameena/i,/saala/i,/sala/i,/kutte/i,/kutti/i,/kutta/i,/chod/i,/chodu/i,/maa\s*ka\s*bhosda/i,/maa\s*ka\s*bhosdike/i,/maa\s*ki\s*chut/i,/behen\s*ki\s*chut/i,/teri\s*maa/i,/teri\s*behen/i,/madarchod/i,/bhenchod/i,/chutiyo/i,/chutiyu/i,/gandu/i,/gaandu/i,/lavdo/i,/lavda/i,/lodu/i,/harami/i,/kamino/i,/saalo/i,/salo/i,/kutto/i,/kutti/i,/bhosdi/i,/teri\s*maa\s*ka/i,/behen\s*chod/i,/maa\s*chod/i,/behen\s*chod/i,/baap\s*ko/i],ed=[/^test$/i,/^hello$/i,/^hi$/i,/^project$/i,/^asdf/i,/^qwerty/i,/^123/i],td=e=>e.toLowerCase().replace(/[^\w\s]/g,"").replace(/\s+/g," ").trim(),sd=e=>{if(!e||typeof e!="string")return{isValid:!1,error:"Input is empty."};const t=e.trim();if(t.length>2e3)return{isValid:!1,error:"Description is too long (max 2000 characters)."};if(t.length<10)return{isValid:!1,error:"Please describe your project in more detail."};for(const i of Qc)if(i.test(t))return{isValid:!1,error:"Input contains inappropriate language."};const s=td(t),a=s.split(" ").filter(i=>!Jc.has(i)&&isNaN(i)&&i.length>1);if(a.length<10)return{isValid:!1,error:"Description is too vague. Please allow at least 10 meaningful words describing functionality."};const o=new Set(a);return a.length>5&&o.size<a.length*.5?{isValid:!1,error:"Input appears repetitive. Please provide a clear description."}:ed.some(i=>i.test(s))?{isValid:!1,error:"Please enter a real project description."}:{isValid:!0,error:null}},Bs="http://localhost:5000/api",rd=({workspaceId:e,costEstimation:t,selectedProvider:s,onNext:n,onBack:a,costIntent:o,onFeedbackSubmitted:i,isDeployed:l})=>{const[c,u]=F.useState(null),[d,f]=F.useState(!1),h=async()=>{var m;if(!c&&!l){pe.error("Please select an option");return}if(l){n();return}f(!0);try{const v=(m=t.provider_details)==null?void 0:m[s],g=(v==null?void 0:v.cost_range)||{min:0,max:0};let x="cost_effective";if(t.cost_profile)x=t.cost_profile;else if(t.selected_profile)x=t.selected_profile;else if(t.scenarios){const w=v==null?void 0:v.total_monthly_cost;for(const[j,_]of Object.entries(t.scenarios)){const A=_[s];if(A&&w){const E=A.monthly_cost||A.estimated_cost;if(E&&Math.abs(w-E)<.01){x=j;break}}}}x==="costeffective"||x==="cost_effective"||x==="costEffective"?x="cost_effective":x==="highperformance"||x==="high_performance"||x==="highPerformance"?x="high_performance":x==="standard"||x==="Standard"?x="standard":x="cost_effective";const y=Bs.endsWith("/")?Bs.slice(0,-1):Bs;try{await Me.post(`${y}/feedback`,{workspace_id:e,cost_intent:(o==null?void 0:o.type)||"startup",estimated_min:g.min||0,estimated_max:g.max||0,selected_provider:s,selected_profile:x,user_feedback:c}),pe.success("Feedback recorded"),i&&i()}catch(w){console.warn("Feedback failed (non-blocking):",w),pe.success("Proceeding to code generation..."),i&&i()}n()}catch(v){console.error("Feedback submission error:",v),pe.error("Failed to submit feedback")}finally{f(!1)}};return r.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 animate-fade-in pb-20",children:[r.jsxs("div",{className:"text-center space-y-4 mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-white",children:"One Quick Question"}),r.jsx("p",{className:"text-gray-400",children:"Before we generate your Terraform code, help us calibrate our estimator."})]}),r.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-8",children:[r.jsx("h3",{className:"text-lg font-medium text-white mb-6 text-center",children:l?"Cost estimate feedback provided.":"Is this cost estimate within your expected budget?"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>!l&&u("within_budget"),className:`p-4 rounded-xl border flex items-center justify-between transition-all ${c==="within_budget"?"bg-green-500/10 border-green-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"} ${l?"cursor-not-allowed opacity-60":""}`,children:[r.jsx("span",{className:"font-medium",children:"Yes, it looks reasonable"}),c==="within_budget"&&r.jsx("span",{className:"material-icons text-green-500",children:"check_circle"})]}),r.jsxs("button",{onClick:()=>!l&&u("slightly_high"),className:`p-4 rounded-xl border flex items-center justify-between transition-all ${c==="slightly_high"?"bg-yellow-500/10 border-yellow-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"} ${l?"cursor-not-allowed opacity-60":""}`,children:[r.jsx("span",{className:"font-medium",children:"It's a bit higher than expected"}),c==="slightly_high"&&r.jsx("span",{className:"material-icons text-yellow-500",children:"check_circle"})]}),r.jsxs("button",{onClick:()=>!l&&u("too_high"),className:`p-4 rounded-xl border flex items-center justify-between transition-all ${c==="too_high"?"bg-red-500/10 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"} ${l?"cursor-not-allowed opacity-60":""}`,children:[r.jsx("span",{className:"font-medium",children:"No, it's significantly too high"}),c==="too_high"&&r.jsx("span",{className:"material-icons text-red-500",children:"check_circle"})]}),r.jsxs("button",{onClick:()=>!l&&u("unknown"),className:`p-4 rounded-xl border flex items-center justify-between transition-all ${c==="unknown"?"bg-blue-500/10 border-blue-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"} ${l?"cursor-not-allowed opacity-60":""}`,children:[r.jsx("span",{className:"font-medium",children:"I'm not sure / I have no baseline"}),c==="unknown"&&r.jsx("span",{className:"material-icons text-blue-500",children:"check_circle"})]})]})]}),!l&&r.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-white/5",children:[r.jsxs("button",{onClick:a,className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons",children:"arrow_back"}),r.jsx("span",{children:"Back to Estimate"})]}),r.jsx("button",{onClick:h,disabled:!c&&!l||d,className:"px-8 py-4 bg-gradient-to-r from-primary to-purple-500 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-primary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),r.jsx("span",{children:"Processing..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{children:l?"View Terraform":"Generate Terraform"}),r.jsx("span",{className:"material-icons",children:"code"})]})})]})]})};var Ka={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(s){e.exports=s()})(function(){return function s(n,a,o){function i(u,d){if(!a[u]){if(!n[u]){var f=typeof ds=="function"&&ds;if(!d&&f)return f(u,!0);if(l)return l(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var m=a[u]={exports:{}};n[u][0].call(m.exports,function(v){var g=n[u][1][v];return i(g||v)},m,m.exports,s,n,a,o)}return a[u].exports}for(var l=typeof ds=="function"&&ds,c=0;c<o.length;c++)i(o[c]);return i}({1:[function(s,n,a){var o=s("./utils"),i=s("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(c){for(var u,d,f,h,m,v,g,x=[],y=0,w=c.length,j=w,_=o.getTypeOf(c)!=="string";y<c.length;)j=w-y,f=_?(u=c[y++],d=y<w?c[y++]:0,y<w?c[y++]:0):(u=c.charCodeAt(y++),d=y<w?c.charCodeAt(y++):0,y<w?c.charCodeAt(y++):0),h=u>>2,m=(3&u)<<4|d>>4,v=1<j?(15&d)<<2|f>>6:64,g=2<j?63&f:64,x.push(l.charAt(h)+l.charAt(m)+l.charAt(v)+l.charAt(g));return x.join("")},a.decode=function(c){var u,d,f,h,m,v,g=0,x=0,y="data:";if(c.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var w,j=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&j--,c.charAt(c.length-2)===l.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=i.uint8array?new Uint8Array(0|j):new Array(0|j);g<c.length;)u=l.indexOf(c.charAt(g++))<<2|(h=l.indexOf(c.charAt(g++)))>>4,d=(15&h)<<4|(m=l.indexOf(c.charAt(g++)))>>2,f=(3&m)<<6|(v=l.indexOf(c.charAt(g++))),w[x++]=u,m!==64&&(w[x++]=d),v!==64&&(w[x++]=f);return w}},{"./support":30,"./utils":32}],2:[function(s,n,a){var o=s("./external"),i=s("./stream/DataWorker"),l=s("./stream/Crc32Probe"),c=s("./stream/DataLengthProbe");function u(d,f,h,m,v){this.compressedSize=d,this.uncompressedSize=f,this.crc32=h,this.compression=m,this.compressedContent=v}u.prototype={getContentWorker:function(){var d=new i(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),f=this;return d.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new i(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,f,h){return d.pipe(new l).pipe(new c("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new c("compressedSize")).withStreamInfo("compression",f)},n.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(s,n,a){var o=s("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},a.DEFLATE=s("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(s,n,a){var o=s("./utils"),i=function(){for(var l,c=[],u=0;u<256;u++){l=u;for(var d=0;d<8;d++)l=1&l?3988292384^l>>>1:l>>>1;c[u]=l}return c}();n.exports=function(l,c){return l!==void 0&&l.length?o.getTypeOf(l)!=="string"?function(u,d,f,h){var m=i,v=h+f;u^=-1;for(var g=h;g<v;g++)u=u>>>8^m[255&(u^d[g])];return-1^u}(0|c,l,l.length,0):function(u,d,f,h){var m=i,v=h+f;u^=-1;for(var g=h;g<v;g++)u=u>>>8^m[255&(u^d.charCodeAt(g))];return-1^u}(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(s,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(s,n,a){var o=null;o=typeof Promise<"u"?Promise:s("lie"),n.exports={Promise:o}},{lie:37}],7:[function(s,n,a){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=s("pako"),l=s("./utils"),c=s("./stream/GenericWorker"),u=o?"uint8array":"array";function d(f,h){c.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}a.magic="\b\0",l.inherits(d,c),d.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(u,f.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},a.compressWorker=function(f){return new d("Deflate",f)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(s,n,a){function o(m,v){var g,x="";for(g=0;g<v;g++)x+=String.fromCharCode(255&m),m>>>=8;return x}function i(m,v,g,x,y,w){var j,_,A=m.file,E=m.compression,D=w!==u.utf8encode,C=l.transformTo("string",w(A.name)),P=l.transformTo("string",u.utf8encode(A.name)),$=A.comment,te=l.transformTo("string",w($)),T=l.transformTo("string",u.utf8encode($)),V=P.length!==A.name.length,b=T.length!==$.length,U="",ae="",W="",ne=A.dir,H=A.date,ie={crc32:0,compressedSize:0,uncompressedSize:0};v&&!g||(ie.crc32=m.crc32,ie.compressedSize=m.compressedSize,ie.uncompressedSize=m.uncompressedSize);var O=0;v&&(O|=8),D||!V&&!b||(O|=2048);var S=0,J=0;ne&&(S|=16),y==="UNIX"?(J=798,S|=function(Z,ce){var ge=Z;return Z||(ge=ce?16893:33204),(65535&ge)<<16}(A.unixPermissions,ne)):(J=20,S|=function(Z){return 63&(Z||0)}(A.dosPermissions)),j=H.getUTCHours(),j<<=6,j|=H.getUTCMinutes(),j<<=5,j|=H.getUTCSeconds()/2,_=H.getUTCFullYear()-1980,_<<=4,_|=H.getUTCMonth()+1,_<<=5,_|=H.getUTCDate(),V&&(ae=o(1,1)+o(d(C),4)+P,U+="up"+o(ae.length,2)+ae),b&&(W=o(1,1)+o(d(te),4)+T,U+="uc"+o(W.length,2)+W);var Y="";return Y+=`
\0`,Y+=o(O,2),Y+=E.magic,Y+=o(j,2),Y+=o(_,2),Y+=o(ie.crc32,4),Y+=o(ie.compressedSize,4),Y+=o(ie.uncompressedSize,4),Y+=o(C.length,2),Y+=o(U.length,2),{fileRecord:f.LOCAL_FILE_HEADER+Y+C+U,dirRecord:f.CENTRAL_FILE_HEADER+o(J,2)+Y+o(te.length,2)+"\0\0\0\0"+o(S,4)+o(x,4)+C+U+te}}var l=s("../utils"),c=s("../stream/GenericWorker"),u=s("../utf8"),d=s("../crc32"),f=s("../signature");function h(m,v,g,x){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=g,this.encodeFileName=x,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(h,c),h.prototype.push=function(m){var v=m.meta.percent||0,g=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,c.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:g?(v+100*(g-x-1))/g:100}}))},h.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var v=this.streamFiles&&!m.file.dir;if(v){var g=i(m,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(m){this.accumulate=!1;var v=this.streamFiles&&!m.file.dir,g=i(m,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),v)this.push({data:function(x){return f.DATA_DESCRIPTOR+o(x.crc32,4)+o(x.compressedSize,4)+o(x.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var m=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var g=this.bytesWritten-m,x=function(y,w,j,_,A){var E=l.transformTo("string",A(_));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(y,2)+o(y,2)+o(w,4)+o(j,4)+o(E.length,2)+E}(this.dirRecords.length,g,m,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(m){this._sources.push(m);var v=this;return m.on("data",function(g){v.processChunk(g)}),m.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),m.on("error",function(g){v.error(g)}),this},h.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(m){var v=this._sources;if(!c.prototype.error.call(this,m))return!1;for(var g=0;g<v.length;g++)try{v[g].error(m)}catch{}return!0},h.prototype.lock=function(){c.prototype.lock.call(this);for(var m=this._sources,v=0;v<m.length;v++)m[v].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(s,n,a){var o=s("../compressions"),i=s("./ZipFileWorker");a.generateWorker=function(l,c,u){var d=new i(c.streamFiles,u,c.platform,c.encodeFileName),f=0;try{l.forEach(function(h,m){f++;var v=function(w,j){var _=w||j,A=o[_];if(!A)throw new Error(_+" is not a valid compression method !");return A}(m.options.compression,c.compression),g=m.options.compressionOptions||c.compressionOptions||{},x=m.dir,y=m.date;m._compressWorker(v,g).withStreamInfo("file",{name:h,dir:x,date:y,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(d)}),d.entriesCount=f}catch(h){d.error(h)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(s,n,a){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new o;for(var l in this)typeof this[l]!="function"&&(i[l]=this[l]);return i}}(o.prototype=s("./object")).loadAsync=s("./load"),o.support=s("./support"),o.defaults=s("./defaults"),o.version="3.10.1",o.loadAsync=function(i,l){return new o().loadAsync(i,l)},o.external=s("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(s,n,a){var o=s("./utils"),i=s("./external"),l=s("./utf8"),c=s("./zipEntries"),u=s("./stream/Crc32Probe"),d=s("./nodejsUtils");function f(h){return new i.Promise(function(m,v){var g=h.decompressed.getContentWorker().pipe(new u);g.on("error",function(x){v(x)}).on("end",function(){g.streamInfo.crc32!==h.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}n.exports=function(h,m){var v=this;return m=o.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),d.isNode&&d.isStream(h)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",h,!0,m.optimizedBinaryString,m.base64).then(function(g){var x=new c(m);return x.load(g),x}).then(function(g){var x=[i.Promise.resolve(g)],y=g.files;if(m.checkCRC32)for(var w=0;w<y.length;w++)x.push(f(y[w]));return i.Promise.all(x)}).then(function(g){for(var x=g.shift(),y=x.files,w=0;w<y.length;w++){var j=y[w],_=j.fileNameStr,A=o.resolve(j.fileNameStr);v.file(A,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:m.createFolders}),j.dir||(v.file(A).unsafeOriginalName=_)}return x.zipComment.length&&(v.comment=x.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(s,n,a){var o=s("../utils"),i=s("../stream/GenericWorker");function l(c,u){i.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}o.inherits(l,i),l.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},l.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(s,n,a){var o=s("readable-stream").Readable;function i(l,c,u){o.call(this,c),this._helper=l;var d=this;l.on("data",function(f,h){d.push(f)||d._helper.pause(),u&&u(h)}).on("error",function(f){d.emit("error",f)}).on("end",function(){d.push(null)})}s("../utils").inherits(i,o),i.prototype._read=function(){this._helper.resume()},n.exports=i},{"../utils":32,"readable-stream":16}],14:[function(s,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,i);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,i)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var i=new Buffer(o);return i.fill(0),i},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(s,n,a){function o(A,E,D){var C,P=l.getTypeOf(E),$=l.extend(D||{},d);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(A=y(A)),$.createFolders&&(C=x(A))&&w.call(this,C,!0);var te=P==="string"&&$.binary===!1&&$.base64===!1;D&&D.binary!==void 0||($.binary=!te),(E instanceof f&&E.uncompressedSize===0||$.dir||!E||E.length===0)&&($.base64=!1,$.binary=!0,E="",$.compression="STORE",P="string");var T=null;T=E instanceof f||E instanceof c?E:v.isNode&&v.isStream(E)?new g(A,E):l.prepareContent(A,E,$.binary,$.optimizedBinaryString,$.base64);var V=new h(A,T,$);this.files[A]=V}var i=s("./utf8"),l=s("./utils"),c=s("./stream/GenericWorker"),u=s("./stream/StreamHelper"),d=s("./defaults"),f=s("./compressedObject"),h=s("./zipObject"),m=s("./generate"),v=s("./nodejsUtils"),g=s("./nodejs/NodejsStreamInputAdapter"),x=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var E=A.lastIndexOf("/");return 0<E?A.substring(0,E):""},y=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},w=function(A,E){return E=E!==void 0?E:d.createFolders,A=y(A),this.files[A]||o.call(this,A,null,{dir:!0,createFolders:E}),this.files[A]};function j(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var E,D,C;for(E in this.files)C=this.files[E],(D=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&A(D,C)},filter:function(A){var E=[];return this.forEach(function(D,C){A(D,C)&&E.push(C)}),E},file:function(A,E,D){if(arguments.length!==1)return A=this.root+A,o.call(this,A,E,D),this;if(j(A)){var C=A;return this.filter(function($,te){return!te.dir&&C.test($)})}var P=this.files[this.root+A];return P&&!P.dir?P:null},folder:function(A){if(!A)return this;if(j(A))return this.filter(function(P,$){return $.dir&&A.test(P)});var E=this.root+A,D=w.call(this,E),C=this.clone();return C.root=D.name,C},remove:function(A){A=this.root+A;var E=this.files[A];if(E||(A.slice(-1)!=="/"&&(A+="/"),E=this.files[A]),E&&!E.dir)delete this.files[A];else for(var D=this.filter(function(P,$){return $.name.slice(0,A.length)===A}),C=0;C<D.length;C++)delete this.files[D[C].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var E,D={};try{if((D=l.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");l.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var C=D.comment||this.comment||"";E=m.generateWorker(this,D,C)}catch(P){(E=new c("error")).error(P)}return new u(E,D.type||"string",D.mimeType)},generateAsync:function(A,E){return this.generateInternalStream(A).accumulate(E)},generateNodeStream:function(A,E){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(E)}};n.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(s,n,a){n.exports=s("stream")},{stream:void 0}],17:[function(s,n,a){var o=s("./DataReader");function i(l){o.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}s("../utils").inherits(i,o),i.prototype.byteAt=function(l){return this.data[this.zero+l]},i.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),u=l.charCodeAt(1),d=l.charCodeAt(2),f=l.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===c&&this.data[h+1]===u&&this.data[h+2]===d&&this.data[h+3]===f)return h-this.zero;return-1},i.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),u=l.charCodeAt(1),d=l.charCodeAt(2),f=l.charCodeAt(3),h=this.readData(4);return c===h[0]&&u===h[1]&&d===h[2]&&f===h[3]},i.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=i},{"../utils":32,"./DataReader":18}],18:[function(s,n,a){var o=s("../utils");function i(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,u=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=l,u},readString:function(l){return o.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},n.exports=i},{"../utils":32}],19:[function(s,n,a){var o=s("./Uint8ArrayReader");function i(l){o.call(this,l)}s("../utils").inherits(i,o),i.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(s,n,a){var o=s("./DataReader");function i(l){o.call(this,l)}s("../utils").inherits(i,o),i.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},i.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},i.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},i.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=i},{"../utils":32,"./DataReader":18}],21:[function(s,n,a){var o=s("./ArrayReader");function i(l){o.call(this,l)}s("../utils").inherits(i,o),i.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},n.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(s,n,a){var o=s("../utils"),i=s("../support"),l=s("./ArrayReader"),c=s("./StringReader"),u=s("./NodeBufferReader"),d=s("./Uint8ArrayReader");n.exports=function(f){var h=o.getTypeOf(f);return o.checkSupport(h),h!=="string"||i.uint8array?h==="nodebuffer"?new u(f):i.uint8array?new d(o.transformTo("uint8array",f)):new l(o.transformTo("array",f)):new c(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(s,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(s,n,a){var o=s("./GenericWorker"),i=s("../utils");function l(c){o.call(this,"ConvertWorker to "+c),this.destType=c}i.inherits(l,o),l.prototype.processChunk=function(c){this.push({data:i.transformTo(this.destType,c.data),meta:c.meta})},n.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(s,n,a){var o=s("./GenericWorker"),i=s("../crc32");function l(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}s("../utils").inherits(l,o),l.prototype.processChunk=function(c){this.streamInfo.crc32=i(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(s,n,a){var o=s("../utils"),i=s("./GenericWorker");function l(c){i.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}o.inherits(l,i),l.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}i.prototype.processChunk.call(this,c)},n.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(s,n,a){var o=s("../utils"),i=s("./GenericWorker");function l(c){i.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=o.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}o.inherits(l,i),l.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(s,n,a){function o(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,l){return this._listeners[i].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,l){if(this._listeners[i])for(var c=0;c<this._listeners[i].length;c++)this._listeners[i][c].call(this,l)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var l=this;return i.on("data",function(c){l.processChunk(c)}),i.on("end",function(){l.end()}),i.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,l){return this.extraStreamInfo[i]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},n.exports=o},{}],29:[function(s,n,a){var o=s("../utils"),i=s("./ConvertWorker"),l=s("./GenericWorker"),c=s("../base64"),u=s("../support"),d=s("../external"),f=null;if(u.nodestream)try{f=s("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(v,g){return new d.Promise(function(x,y){var w=[],j=v._internalType,_=v._outputType,A=v._mimeType;v.on("data",function(E,D){w.push(E),g&&g(D)}).on("error",function(E){w=[],y(E)}).on("end",function(){try{var E=function(D,C,P){switch(D){case"blob":return o.newBlob(o.transformTo("arraybuffer",C),P);case"base64":return c.encode(C);default:return o.transformTo(D,C)}}(_,function(D,C){var P,$=0,te=null,T=0;for(P=0;P<C.length;P++)T+=C[P].length;switch(D){case"string":return C.join("");case"array":return Array.prototype.concat.apply([],C);case"uint8array":for(te=new Uint8Array(T),P=0;P<C.length;P++)te.set(C[P],$),$+=C[P].length;return te;case"nodebuffer":return Buffer.concat(C);default:throw new Error("concat : unsupported type '"+D+"'")}}(j,w),A);x(E)}catch(D){y(D)}w=[]}).resume()})}function m(v,g,x){var y=g;switch(g){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=g,this._mimeType=x,o.checkSupport(y),this._worker=v.pipe(new i(y)),v.lock()}catch(w){this._worker=new l("error"),this._worker.error(w)}}m.prototype={accumulate:function(v){return h(this,v)},on:function(v,g){var x=this;return v==="data"?this._worker.on(v,function(y){g.call(x,y.data,y.meta)}):this._worker.on(v,function(){o.delay(g,arguments,x)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},v)}},n.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(s,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var o=new ArrayBuffer(0);try{a.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(o),a.blob=i.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!s("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(s,n,a){for(var o=s("./utils"),i=s("./support"),l=s("./nodejsUtils"),c=s("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function f(){c.call(this,"utf-8 decode"),this.leftOver=null}function h(){c.call(this,"utf-8 encode")}a.utf8encode=function(m){return i.nodebuffer?l.newBufferFrom(m,"utf-8"):function(v){var g,x,y,w,j,_=v.length,A=0;for(w=0;w<_;w++)(64512&(x=v.charCodeAt(w)))==55296&&w+1<_&&(64512&(y=v.charCodeAt(w+1)))==56320&&(x=65536+(x-55296<<10)+(y-56320),w++),A+=x<128?1:x<2048?2:x<65536?3:4;for(g=i.uint8array?new Uint8Array(A):new Array(A),w=j=0;j<A;w++)(64512&(x=v.charCodeAt(w)))==55296&&w+1<_&&(64512&(y=v.charCodeAt(w+1)))==56320&&(x=65536+(x-55296<<10)+(y-56320),w++),x<128?g[j++]=x:(x<2048?g[j++]=192|x>>>6:(x<65536?g[j++]=224|x>>>12:(g[j++]=240|x>>>18,g[j++]=128|x>>>12&63),g[j++]=128|x>>>6&63),g[j++]=128|63&x);return g}(m)},a.utf8decode=function(m){return i.nodebuffer?o.transformTo("nodebuffer",m).toString("utf-8"):function(v){var g,x,y,w,j=v.length,_=new Array(2*j);for(g=x=0;g<j;)if((y=v[g++])<128)_[x++]=y;else if(4<(w=u[y]))_[x++]=65533,g+=w-1;else{for(y&=w===2?31:w===3?15:7;1<w&&g<j;)y=y<<6|63&v[g++],w--;1<w?_[x++]=65533:y<65536?_[x++]=y:(y-=65536,_[x++]=55296|y>>10&1023,_[x++]=56320|1023&y)}return _.length!==x&&(_.subarray?_=_.subarray(0,x):_.length=x),o.applyFromCharCode(_)}(m=o.transformTo(i.uint8array?"uint8array":"array",m))},o.inherits(f,c),f.prototype.processChunk=function(m){var v=o.transformTo(i.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var g=v;(v=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),v.set(g,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var x=function(w,j){var _;for((j=j||w.length)>w.length&&(j=w.length),_=j-1;0<=_&&(192&w[_])==128;)_--;return _<0||_===0?j:_+u[w[_]]>j?_:j}(v),y=v;x!==v.length&&(i.uint8array?(y=v.subarray(0,x),this.leftOver=v.subarray(x,v.length)):(y=v.slice(0,x),this.leftOver=v.slice(x,v.length))),this.push({data:a.utf8decode(y),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=f,o.inherits(h,c),h.prototype.processChunk=function(m){this.push({data:a.utf8encode(m.data),meta:m.meta})},a.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(s,n,a){var o=s("./support"),i=s("./base64"),l=s("./nodejsUtils"),c=s("./external");function u(g){return g}function d(g,x){for(var y=0;y<g.length;++y)x[y]=255&g.charCodeAt(y);return x}s("setimmediate"),a.newBlob=function(g,x){a.checkSupport("blob");try{return new Blob([g],{type:x})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(g),y.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(g,x,y){var w=[],j=0,_=g.length;if(_<=y)return String.fromCharCode.apply(null,g);for(;j<_;)x==="array"||x==="nodebuffer"?w.push(String.fromCharCode.apply(null,g.slice(j,Math.min(j+y,_)))):w.push(String.fromCharCode.apply(null,g.subarray(j,Math.min(j+y,_)))),j+=y;return w.join("")},stringifyByChar:function(g){for(var x="",y=0;y<g.length;y++)x+=String.fromCharCode(g[y]);return x},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function h(g){var x=65536,y=a.getTypeOf(g),w=!0;if(y==="uint8array"?w=f.applyCanBeUsed.uint8array:y==="nodebuffer"&&(w=f.applyCanBeUsed.nodebuffer),w)for(;1<x;)try{return f.stringifyByChunk(g,y,x)}catch{x=Math.floor(x/2)}return f.stringifyByChar(g)}function m(g,x){for(var y=0;y<g.length;y++)x[y]=g[y];return x}a.applyFromCharCode=h;var v={};v.string={string:u,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return v.string.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:function(g){return d(g,l.allocBuffer(g.length))}},v.array={string:h,array:u,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return l.newBufferFrom(g)}},v.arraybuffer={string:function(g){return h(new Uint8Array(g))},array:function(g){return m(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:u,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return l.newBufferFrom(new Uint8Array(g))}},v.uint8array={string:h,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:u,nodebuffer:function(g){return l.newBufferFrom(g)}},v.nodebuffer={string:h,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return v.nodebuffer.uint8array(g).buffer},uint8array:function(g){return m(g,new Uint8Array(g.length))},nodebuffer:u},a.transformTo=function(g,x){if(x=x||"",!g)return x;a.checkSupport(g);var y=a.getTypeOf(x);return v[y][g](x)},a.resolve=function(g){for(var x=g.split("/"),y=[],w=0;w<x.length;w++){var j=x[w];j==="."||j===""&&w!==0&&w!==x.length-1||(j===".."?y.pop():y.push(j))}return y.join("/")},a.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":o.nodebuffer&&l.isBuffer(g)?"nodebuffer":o.uint8array&&g instanceof Uint8Array?"uint8array":o.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(g){if(!o[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(g){var x,y,w="";for(y=0;y<(g||"").length;y++)w+="\\x"+((x=g.charCodeAt(y))<16?"0":"")+x.toString(16).toUpperCase();return w},a.delay=function(g,x,y){setImmediate(function(){g.apply(y||null,x||[])})},a.inherits=function(g,x){function y(){}y.prototype=x.prototype,g.prototype=new y},a.extend=function(){var g,x,y={};for(g=0;g<arguments.length;g++)for(x in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],x)&&y[x]===void 0&&(y[x]=arguments[g][x]);return y},a.prepareContent=function(g,x,y,w,j){return c.Promise.resolve(x).then(function(_){return o.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new c.Promise(function(A,E){var D=new FileReader;D.onload=function(C){A(C.target.result)},D.onerror=function(C){E(C.target.error)},D.readAsArrayBuffer(_)}):_}).then(function(_){var A=a.getTypeOf(_);return A?(A==="arraybuffer"?_=a.transformTo("uint8array",_):A==="string"&&(j?_=i.decode(_):y&&w!==!0&&(_=function(E){return d(E,o.uint8array?new Uint8Array(E.length):new Array(E.length))}(_))),_):c.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(s,n,a){var o=s("./reader/readerFor"),i=s("./utils"),l=s("./signature"),c=s("./zipEntry"),u=s("./support");function d(f){this.files=[],this.loadOptions=f}d.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(h)+", expected "+i.pretty(f)+")")}},isSignature:function(f,h){var m=this.reader.index;this.reader.setIndex(f);var v=this.reader.readString(4)===h;return this.reader.setIndex(m),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=u.uint8array?"uint8array":"array",m=i.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,h,m,v=this.zip64EndOfCentralSize-44;0<v;)f=this.reader.readInt(2),h=this.reader.readInt(4),m=this.reader.readData(h),this.zip64ExtensibleData[f]={id:f,length:h,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(f=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var h=f;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var v=h-m;if(0<v)this.isSignature(h,l.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(f){this.reader=o(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(s,n,a){var o=s("./reader/readerFor"),i=s("./utils"),l=s("./compressedObject"),c=s("./crc32"),u=s("./utf8"),d=s("./compressions"),f=s("./support");function h(m,v){this.options=m,this.loadOptions=v}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var v,g;if(m.skip(22),this.fileNameLength=m.readInt(2),g=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(x){for(var y in d)if(Object.prototype.hasOwnProperty.call(d,y)&&d[y].magic===x)return d[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,v,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var v=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(v),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=o(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var v,g,x,y=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<y;)v=m.readInt(2),g=m.readInt(2),x=m.readData(g),this.extraFields[v]={id:v,length:g,value:x};m.setIndex(y)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var g=i.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var y=i.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var v=o(m.value);return v.readInt(1)!==1||c(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var v=o(m.value);return v.readInt(1)!==1||c(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(m.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(s,n,a){function o(v,g,x){this.name=v,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=g,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var i=s("./stream/StreamHelper"),l=s("./stream/DataWorker"),c=s("./utf8"),u=s("./compressedObject"),d=s("./stream/GenericWorker");o.prototype={internalStream:function(v){var g=null,x="string";try{if(!v)throw new Error("No output type specified.");var y=(x=v.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),g=this._decompressWorker();var w=!this._dataBinary;w&&!y&&(g=g.pipe(new c.Utf8EncodeWorker)),!w&&y&&(g=g.pipe(new c.Utf8DecodeWorker))}catch(j){(g=new d("error")).error(j)}return new i(g,x,"")},async:function(v,g){return this.internalStream(v).accumulate(g)},nodeStream:function(v,g){return this.internalStream(v||"nodebuffer").toNodejsStream(g)},_compressWorker:function(v,g){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(x,v,g)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new l(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)o.prototype[f[m]]=h;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(s,n,a){(function(o){var i,l,c=o.MutationObserver||o.WebKitMutationObserver;if(c){var u=0,d=new c(v),f=o.document.createTextNode("");d.observe(f,{characterData:!0}),i=function(){f.data=u=++u%2}}else if(o.setImmediate||o.MessageChannel===void 0)i="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var g=o.document.createElement("script");g.onreadystatechange=function(){v(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},o.document.documentElement.appendChild(g)}:function(){setTimeout(v,0)};else{var h=new o.MessageChannel;h.port1.onmessage=v,i=function(){h.port2.postMessage(0)}}var m=[];function v(){var g,x;l=!0;for(var y=m.length;y;){for(x=m,m=[],g=-1;++g<y;)x[g]();y=m.length}l=!1}n.exports=function(g){m.push(g)!==1||l||i()}}).call(this,typeof it<"u"?it:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(s,n,a){var o=s("immediate");function i(){}var l={},c=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function f(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,y!==i&&g(this,y)}function h(y,w,j){this.promise=y,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function m(y,w,j){o(function(){var _;try{_=w(j)}catch(A){return l.reject(y,A)}_===y?l.reject(y,new TypeError("Cannot resolve promise with itself")):l.resolve(y,_)})}function v(y){var w=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof w=="function")return function(){w.apply(y,arguments)}}function g(y,w){var j=!1;function _(D){j||(j=!0,l.reject(y,D))}function A(D){j||(j=!0,l.resolve(y,D))}var E=x(function(){w(A,_)});E.status==="error"&&_(E.value)}function x(y,w){var j={};try{j.value=y(w),j.status="success"}catch(_){j.status="error",j.value=_}return j}(n.exports=f).prototype.finally=function(y){if(typeof y!="function")return this;var w=this.constructor;return this.then(function(j){return w.resolve(y()).then(function(){return j})},function(j){return w.resolve(y()).then(function(){throw j})})},f.prototype.catch=function(y){return this.then(null,y)},f.prototype.then=function(y,w){if(typeof y!="function"&&this.state===u||typeof w!="function"&&this.state===c)return this;var j=new this.constructor(i);return this.state!==d?m(j,this.state===u?y:w,this.outcome):this.queue.push(new h(j,y,w)),j},h.prototype.callFulfilled=function(y){l.resolve(this.promise,y)},h.prototype.otherCallFulfilled=function(y){m(this.promise,this.onFulfilled,y)},h.prototype.callRejected=function(y){l.reject(this.promise,y)},h.prototype.otherCallRejected=function(y){m(this.promise,this.onRejected,y)},l.resolve=function(y,w){var j=x(v,w);if(j.status==="error")return l.reject(y,j.value);var _=j.value;if(_)g(y,_);else{y.state=u,y.outcome=w;for(var A=-1,E=y.queue.length;++A<E;)y.queue[A].callFulfilled(w)}return y},l.reject=function(y,w){y.state=c,y.outcome=w;for(var j=-1,_=y.queue.length;++j<_;)y.queue[j].callRejected(w);return y},f.resolve=function(y){return y instanceof this?y:l.resolve(new this(i),y)},f.reject=function(y){var w=new this(i);return l.reject(w,y)},f.all=function(y){var w=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=y.length,_=!1;if(!j)return this.resolve([]);for(var A=new Array(j),E=0,D=-1,C=new this(i);++D<j;)P(y[D],D);return C;function P($,te){w.resolve($).then(function(T){A[te]=T,++E!==j||_||(_=!0,l.resolve(C,A))},function(T){_||(_=!0,l.reject(C,T))})}},f.race=function(y){var w=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=y.length,_=!1;if(!j)return this.resolve([]);for(var A=-1,E=new this(i);++A<j;)D=y[A],w.resolve(D).then(function(C){_||(_=!0,l.resolve(E,C))},function(C){_||(_=!0,l.reject(E,C))});var D;return E}},{immediate:36}],38:[function(s,n,a){var o={};(0,s("./lib/utils/common").assign)(o,s("./lib/deflate"),s("./lib/inflate"),s("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(s,n,a){var o=s("./zlib/deflate"),i=s("./utils/common"),l=s("./utils/strings"),c=s("./zlib/messages"),u=s("./zlib/zstream"),d=Object.prototype.toString,f=0,h=-1,m=0,v=8;function g(y){if(!(this instanceof g))return new g(y);this.options=i.assign({level:h,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},y||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var j=o.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(j!==f)throw new Error(c[j]);if(w.header&&o.deflateSetHeader(this.strm,w.header),w.dictionary){var _;if(_=typeof w.dictionary=="string"?l.string2buf(w.dictionary):d.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(j=o.deflateSetDictionary(this.strm,_))!==f)throw new Error(c[j]);this._dict_set=!0}}function x(y,w){var j=new g(w);if(j.push(y,!0),j.err)throw j.msg||c[j.err];return j.result}g.prototype.push=function(y,w){var j,_,A=this.strm,E=this.options.chunkSize;if(this.ended)return!1;_=w===~~w?w:w===!0?4:0,typeof y=="string"?A.input=l.string2buf(y):d.call(y)==="[object ArrayBuffer]"?A.input=new Uint8Array(y):A.input=y,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new i.Buf8(E),A.next_out=0,A.avail_out=E),(j=o.deflate(A,_))!==1&&j!==f)return this.onEnd(j),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(i.shrinkBuf(A.output,A.next_out))):this.onData(i.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&j!==1);return _===4?(j=o.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===f):_!==2||(this.onEnd(f),!(A.avail_out=0))},g.prototype.onData=function(y){this.chunks.push(y)},g.prototype.onEnd=function(y){y===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},a.Deflate=g,a.deflate=x,a.deflateRaw=function(y,w){return(w=w||{}).raw=!0,x(y,w)},a.gzip=function(y,w){return(w=w||{}).gzip=!0,x(y,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(s,n,a){var o=s("./zlib/inflate"),i=s("./utils/common"),l=s("./utils/strings"),c=s("./zlib/constants"),u=s("./zlib/messages"),d=s("./zlib/zstream"),f=s("./zlib/gzheader"),h=Object.prototype.toString;function m(g){if(!(this instanceof m))return new m(g);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},g||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||g&&g.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var y=o.inflateInit2(this.strm,x.windowBits);if(y!==c.Z_OK)throw new Error(u[y]);this.header=new f,o.inflateGetHeader(this.strm,this.header)}function v(g,x){var y=new m(x);if(y.push(g,!0),y.err)throw y.msg||u[y.err];return y.result}m.prototype.push=function(g,x){var y,w,j,_,A,E,D=this.strm,C=this.options.chunkSize,P=this.options.dictionary,$=!1;if(this.ended)return!1;w=x===~~x?x:x===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof g=="string"?D.input=l.binstring2buf(g):h.call(g)==="[object ArrayBuffer]"?D.input=new Uint8Array(g):D.input=g,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new i.Buf8(C),D.next_out=0,D.avail_out=C),(y=o.inflate(D,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&P&&(E=typeof P=="string"?l.string2buf(P):h.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,y=o.inflateSetDictionary(this.strm,E)),y===c.Z_BUF_ERROR&&$===!0&&(y=c.Z_OK,$=!1),y!==c.Z_STREAM_END&&y!==c.Z_OK)return this.onEnd(y),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&y!==c.Z_STREAM_END&&(D.avail_in!==0||w!==c.Z_FINISH&&w!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=l.utf8border(D.output,D.next_out),_=D.next_out-j,A=l.buf2string(D.output,j),D.next_out=_,D.avail_out=C-_,_&&i.arraySet(D.output,D.output,j,_,0),this.onData(A)):this.onData(i.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&($=!0)}while((0<D.avail_in||D.avail_out===0)&&y!==c.Z_STREAM_END);return y===c.Z_STREAM_END&&(w=c.Z_FINISH),w===c.Z_FINISH?(y=o.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===c.Z_OK):w!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(D.avail_out=0))},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},a.Inflate=m,a.inflate=v,a.inflateRaw=function(g,x){return(x=x||{}).raw=!0,v(g,x)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(s,n,a){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f])}}return c},a.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var i={arraySet:function(c,u,d,f,h){if(u.subarray&&c.subarray)c.set(u.subarray(d,d+f),h);else for(var m=0;m<f;m++)c[h+m]=u[d+m]},flattenChunks:function(c){var u,d,f,h,m,v;for(u=f=0,d=c.length;u<d;u++)f+=c[u].length;for(v=new Uint8Array(f),u=h=0,d=c.length;u<d;u++)m=c[u],v.set(m,h),h+=m.length;return v}},l={arraySet:function(c,u,d,f,h){for(var m=0;m<f;m++)c[h+m]=u[d+m]},flattenChunks:function(c){return[].concat.apply([],c)}};a.setTyped=function(c){c?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,i)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,l))},a.setTyped(o)},{}],42:[function(s,n,a){var o=s("./common"),i=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new o.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(f,h){if(h<65537&&(f.subarray&&l||!f.subarray&&i))return String.fromCharCode.apply(null,o.shrinkBuf(f,h));for(var m="",v=0;v<h;v++)m+=String.fromCharCode(f[v]);return m}c[254]=c[254]=1,a.string2buf=function(f){var h,m,v,g,x,y=f.length,w=0;for(g=0;g<y;g++)(64512&(m=f.charCodeAt(g)))==55296&&g+1<y&&(64512&(v=f.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),g++),w+=m<128?1:m<2048?2:m<65536?3:4;for(h=new o.Buf8(w),g=x=0;x<w;g++)(64512&(m=f.charCodeAt(g)))==55296&&g+1<y&&(64512&(v=f.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),g++),m<128?h[x++]=m:(m<2048?h[x++]=192|m>>>6:(m<65536?h[x++]=224|m>>>12:(h[x++]=240|m>>>18,h[x++]=128|m>>>12&63),h[x++]=128|m>>>6&63),h[x++]=128|63&m);return h},a.buf2binstring=function(f){return d(f,f.length)},a.binstring2buf=function(f){for(var h=new o.Buf8(f.length),m=0,v=h.length;m<v;m++)h[m]=f.charCodeAt(m);return h},a.buf2string=function(f,h){var m,v,g,x,y=h||f.length,w=new Array(2*y);for(m=v=0;m<y;)if((g=f[m++])<128)w[v++]=g;else if(4<(x=c[g]))w[v++]=65533,m+=x-1;else{for(g&=x===2?31:x===3?15:7;1<x&&m<y;)g=g<<6|63&f[m++],x--;1<x?w[v++]=65533:g<65536?w[v++]=g:(g-=65536,w[v++]=55296|g>>10&1023,w[v++]=56320|1023&g)}return d(w,v)},a.utf8border=function(f,h){var m;for((h=h||f.length)>f.length&&(h=f.length),m=h-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?h:m+c[f[m]]>h?m:h}},{"./common":41}],43:[function(s,n,a){n.exports=function(o,i,l,c){for(var u=65535&o|0,d=o>>>16&65535|0,f=0;l!==0;){for(l-=f=2e3<l?2e3:l;d=d+(u=u+i[c++]|0)|0,--f;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(s,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(s,n,a){var o=function(){for(var i,l=[],c=0;c<256;c++){i=c;for(var u=0;u<8;u++)i=1&i?3988292384^i>>>1:i>>>1;l[c]=i}return l}();n.exports=function(i,l,c,u){var d=o,f=u+c;i^=-1;for(var h=u;h<f;h++)i=i>>>8^d[255&(i^l[h])];return-1^i}},{}],46:[function(s,n,a){var o,i=s("../utils/common"),l=s("./trees"),c=s("./adler32"),u=s("./crc32"),d=s("./messages"),f=0,h=4,m=0,v=-2,g=-1,x=4,y=2,w=8,j=9,_=286,A=30,E=19,D=2*_+1,C=15,P=3,$=258,te=$+P+1,T=42,V=113,b=1,U=2,ae=3,W=4;function ne(p,L){return p.msg=d[L],L}function H(p){return(p<<1)-(4<p?9:0)}function ie(p){for(var L=p.length;0<=--L;)p[L]=0}function O(p){var L=p.state,z=L.pending;z>p.avail_out&&(z=p.avail_out),z!==0&&(i.arraySet(p.output,L.pending_buf,L.pending_out,z,p.next_out),p.next_out+=z,L.pending_out+=z,p.total_out+=z,p.avail_out-=z,L.pending-=z,L.pending===0&&(L.pending_out=0))}function S(p,L){l._tr_flush_block(p,0<=p.block_start?p.block_start:-1,p.strstart-p.block_start,L),p.block_start=p.strstart,O(p.strm)}function J(p,L){p.pending_buf[p.pending++]=L}function Y(p,L){p.pending_buf[p.pending++]=L>>>8&255,p.pending_buf[p.pending++]=255&L}function Z(p,L){var z,N,k=p.max_chain_length,R=p.strstart,G=p.prev_length,q=p.nice_match,M=p.strstart>p.w_size-te?p.strstart-(p.w_size-te):0,X=p.window,ee=p.w_mask,Q=p.prev,oe=p.strstart+$,je=X[R+G-1],he=X[R+G];p.prev_length>=p.good_match&&(k>>=2),q>p.lookahead&&(q=p.lookahead);do if(X[(z=L)+G]===he&&X[z+G-1]===je&&X[z]===X[R]&&X[++z]===X[R+1]){R+=2,z++;do;while(X[++R]===X[++z]&&X[++R]===X[++z]&&X[++R]===X[++z]&&X[++R]===X[++z]&&X[++R]===X[++z]&&X[++R]===X[++z]&&X[++R]===X[++z]&&X[++R]===X[++z]&&R<oe);if(N=$-(oe-R),R=oe-$,G<N){if(p.match_start=L,q<=(G=N))break;je=X[R+G-1],he=X[R+G]}}while((L=Q[L&ee])>M&&--k!=0);return G<=p.lookahead?G:p.lookahead}function ce(p){var L,z,N,k,R,G,q,M,X,ee,Q=p.w_size;do{if(k=p.window_size-p.lookahead-p.strstart,p.strstart>=Q+(Q-te)){for(i.arraySet(p.window,p.window,Q,Q,0),p.match_start-=Q,p.strstart-=Q,p.block_start-=Q,L=z=p.hash_size;N=p.head[--L],p.head[L]=Q<=N?N-Q:0,--z;);for(L=z=Q;N=p.prev[--L],p.prev[L]=Q<=N?N-Q:0,--z;);k+=Q}if(p.strm.avail_in===0)break;if(G=p.strm,q=p.window,M=p.strstart+p.lookahead,X=k,ee=void 0,ee=G.avail_in,X<ee&&(ee=X),z=ee===0?0:(G.avail_in-=ee,i.arraySet(q,G.input,G.next_in,ee,M),G.state.wrap===1?G.adler=c(G.adler,q,ee,M):G.state.wrap===2&&(G.adler=u(G.adler,q,ee,M)),G.next_in+=ee,G.total_in+=ee,ee),p.lookahead+=z,p.lookahead+p.insert>=P)for(R=p.strstart-p.insert,p.ins_h=p.window[R],p.ins_h=(p.ins_h<<p.hash_shift^p.window[R+1])&p.hash_mask;p.insert&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[R+P-1])&p.hash_mask,p.prev[R&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=R,R++,p.insert--,!(p.lookahead+p.insert<P)););}while(p.lookahead<te&&p.strm.avail_in!==0)}function ge(p,L){for(var z,N;;){if(p.lookahead<te){if(ce(p),p.lookahead<te&&L===f)return b;if(p.lookahead===0)break}if(z=0,p.lookahead>=P&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+P-1])&p.hash_mask,z=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),z!==0&&p.strstart-z<=p.w_size-te&&(p.match_length=Z(p,z)),p.match_length>=P)if(N=l._tr_tally(p,p.strstart-p.match_start,p.match_length-P),p.lookahead-=p.match_length,p.match_length<=p.max_lazy_match&&p.lookahead>=P){for(p.match_length--;p.strstart++,p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+P-1])&p.hash_mask,z=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart,--p.match_length!=0;);p.strstart++}else p.strstart+=p.match_length,p.match_length=0,p.ins_h=p.window[p.strstart],p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+1])&p.hash_mask;else N=l._tr_tally(p,0,p.window[p.strstart]),p.lookahead--,p.strstart++;if(N&&(S(p,!1),p.strm.avail_out===0))return b}return p.insert=p.strstart<P-1?p.strstart:P-1,L===h?(S(p,!0),p.strm.avail_out===0?ae:W):p.last_lit&&(S(p,!1),p.strm.avail_out===0)?b:U}function ue(p,L){for(var z,N,k;;){if(p.lookahead<te){if(ce(p),p.lookahead<te&&L===f)return b;if(p.lookahead===0)break}if(z=0,p.lookahead>=P&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+P-1])&p.hash_mask,z=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),p.prev_length=p.match_length,p.prev_match=p.match_start,p.match_length=P-1,z!==0&&p.prev_length<p.max_lazy_match&&p.strstart-z<=p.w_size-te&&(p.match_length=Z(p,z),p.match_length<=5&&(p.strategy===1||p.match_length===P&&4096<p.strstart-p.match_start)&&(p.match_length=P-1)),p.prev_length>=P&&p.match_length<=p.prev_length){for(k=p.strstart+p.lookahead-P,N=l._tr_tally(p,p.strstart-1-p.prev_match,p.prev_length-P),p.lookahead-=p.prev_length-1,p.prev_length-=2;++p.strstart<=k&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+P-1])&p.hash_mask,z=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),--p.prev_length!=0;);if(p.match_available=0,p.match_length=P-1,p.strstart++,N&&(S(p,!1),p.strm.avail_out===0))return b}else if(p.match_available){if((N=l._tr_tally(p,0,p.window[p.strstart-1]))&&S(p,!1),p.strstart++,p.lookahead--,p.strm.avail_out===0)return b}else p.match_available=1,p.strstart++,p.lookahead--}return p.match_available&&(N=l._tr_tally(p,0,p.window[p.strstart-1]),p.match_available=0),p.insert=p.strstart<P-1?p.strstart:P-1,L===h?(S(p,!0),p.strm.avail_out===0?ae:W):p.last_lit&&(S(p,!1),p.strm.avail_out===0)?b:U}function le(p,L,z,N,k){this.good_length=p,this.max_lazy=L,this.nice_length=z,this.max_chain=N,this.func=k}function be(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*D),this.dyn_dtree=new i.Buf16(2*(2*A+1)),this.bl_tree=new i.Buf16(2*(2*E+1)),ie(this.dyn_ltree),ie(this.dyn_dtree),ie(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(C+1),this.heap=new i.Buf16(2*_+1),ie(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*_+1),ie(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fe(p){var L;return p&&p.state?(p.total_in=p.total_out=0,p.data_type=y,(L=p.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?T:V,p.adler=L.wrap===2?0:1,L.last_flush=f,l._tr_init(L),m):ne(p,v)}function we(p){var L=fe(p);return L===m&&function(z){z.window_size=2*z.w_size,ie(z.head),z.max_lazy_match=o[z.level].max_lazy,z.good_match=o[z.level].good_length,z.nice_match=o[z.level].nice_length,z.max_chain_length=o[z.level].max_chain,z.strstart=0,z.block_start=0,z.lookahead=0,z.insert=0,z.match_length=z.prev_length=P-1,z.match_available=0,z.ins_h=0}(p.state),L}function Se(p,L,z,N,k,R){if(!p)return v;var G=1;if(L===g&&(L=6),N<0?(G=0,N=-N):15<N&&(G=2,N-=16),k<1||j<k||z!==w||N<8||15<N||L<0||9<L||R<0||x<R)return ne(p,v);N===8&&(N=9);var q=new be;return(p.state=q).strm=p,q.wrap=G,q.gzhead=null,q.w_bits=N,q.w_size=1<<q.w_bits,q.w_mask=q.w_size-1,q.hash_bits=k+7,q.hash_size=1<<q.hash_bits,q.hash_mask=q.hash_size-1,q.hash_shift=~~((q.hash_bits+P-1)/P),q.window=new i.Buf8(2*q.w_size),q.head=new i.Buf16(q.hash_size),q.prev=new i.Buf16(q.w_size),q.lit_bufsize=1<<k+6,q.pending_buf_size=4*q.lit_bufsize,q.pending_buf=new i.Buf8(q.pending_buf_size),q.d_buf=1*q.lit_bufsize,q.l_buf=3*q.lit_bufsize,q.level=L,q.strategy=R,q.method=z,we(p)}o=[new le(0,0,0,0,function(p,L){var z=65535;for(z>p.pending_buf_size-5&&(z=p.pending_buf_size-5);;){if(p.lookahead<=1){if(ce(p),p.lookahead===0&&L===f)return b;if(p.lookahead===0)break}p.strstart+=p.lookahead,p.lookahead=0;var N=p.block_start+z;if((p.strstart===0||p.strstart>=N)&&(p.lookahead=p.strstart-N,p.strstart=N,S(p,!1),p.strm.avail_out===0)||p.strstart-p.block_start>=p.w_size-te&&(S(p,!1),p.strm.avail_out===0))return b}return p.insert=0,L===h?(S(p,!0),p.strm.avail_out===0?ae:W):(p.strstart>p.block_start&&(S(p,!1),p.strm.avail_out),b)}),new le(4,4,8,4,ge),new le(4,5,16,8,ge),new le(4,6,32,32,ge),new le(4,4,16,16,ue),new le(8,16,32,32,ue),new le(8,16,128,128,ue),new le(8,32,128,256,ue),new le(32,128,258,1024,ue),new le(32,258,258,4096,ue)],a.deflateInit=function(p,L){return Se(p,L,w,15,8,0)},a.deflateInit2=Se,a.deflateReset=we,a.deflateResetKeep=fe,a.deflateSetHeader=function(p,L){return p&&p.state?p.state.wrap!==2?v:(p.state.gzhead=L,m):v},a.deflate=function(p,L){var z,N,k,R;if(!p||!p.state||5<L||L<0)return p?ne(p,v):v;if(N=p.state,!p.output||!p.input&&p.avail_in!==0||N.status===666&&L!==h)return ne(p,p.avail_out===0?-5:v);if(N.strm=p,z=N.last_flush,N.last_flush=L,N.status===T)if(N.wrap===2)p.adler=0,J(N,31),J(N,139),J(N,8),N.gzhead?(J(N,(N.gzhead.text?1:0)+(N.gzhead.hcrc?2:0)+(N.gzhead.extra?4:0)+(N.gzhead.name?8:0)+(N.gzhead.comment?16:0)),J(N,255&N.gzhead.time),J(N,N.gzhead.time>>8&255),J(N,N.gzhead.time>>16&255),J(N,N.gzhead.time>>24&255),J(N,N.level===9?2:2<=N.strategy||N.level<2?4:0),J(N,255&N.gzhead.os),N.gzhead.extra&&N.gzhead.extra.length&&(J(N,255&N.gzhead.extra.length),J(N,N.gzhead.extra.length>>8&255)),N.gzhead.hcrc&&(p.adler=u(p.adler,N.pending_buf,N.pending,0)),N.gzindex=0,N.status=69):(J(N,0),J(N,0),J(N,0),J(N,0),J(N,0),J(N,N.level===9?2:2<=N.strategy||N.level<2?4:0),J(N,3),N.status=V);else{var G=w+(N.w_bits-8<<4)<<8;G|=(2<=N.strategy||N.level<2?0:N.level<6?1:N.level===6?2:3)<<6,N.strstart!==0&&(G|=32),G+=31-G%31,N.status=V,Y(N,G),N.strstart!==0&&(Y(N,p.adler>>>16),Y(N,65535&p.adler)),p.adler=1}if(N.status===69)if(N.gzhead.extra){for(k=N.pending;N.gzindex<(65535&N.gzhead.extra.length)&&(N.pending!==N.pending_buf_size||(N.gzhead.hcrc&&N.pending>k&&(p.adler=u(p.adler,N.pending_buf,N.pending-k,k)),O(p),k=N.pending,N.pending!==N.pending_buf_size));)J(N,255&N.gzhead.extra[N.gzindex]),N.gzindex++;N.gzhead.hcrc&&N.pending>k&&(p.adler=u(p.adler,N.pending_buf,N.pending-k,k)),N.gzindex===N.gzhead.extra.length&&(N.gzindex=0,N.status=73)}else N.status=73;if(N.status===73)if(N.gzhead.name){k=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>k&&(p.adler=u(p.adler,N.pending_buf,N.pending-k,k)),O(p),k=N.pending,N.pending===N.pending_buf_size)){R=1;break}R=N.gzindex<N.gzhead.name.length?255&N.gzhead.name.charCodeAt(N.gzindex++):0,J(N,R)}while(R!==0);N.gzhead.hcrc&&N.pending>k&&(p.adler=u(p.adler,N.pending_buf,N.pending-k,k)),R===0&&(N.gzindex=0,N.status=91)}else N.status=91;if(N.status===91)if(N.gzhead.comment){k=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>k&&(p.adler=u(p.adler,N.pending_buf,N.pending-k,k)),O(p),k=N.pending,N.pending===N.pending_buf_size)){R=1;break}R=N.gzindex<N.gzhead.comment.length?255&N.gzhead.comment.charCodeAt(N.gzindex++):0,J(N,R)}while(R!==0);N.gzhead.hcrc&&N.pending>k&&(p.adler=u(p.adler,N.pending_buf,N.pending-k,k)),R===0&&(N.status=103)}else N.status=103;if(N.status===103&&(N.gzhead.hcrc?(N.pending+2>N.pending_buf_size&&O(p),N.pending+2<=N.pending_buf_size&&(J(N,255&p.adler),J(N,p.adler>>8&255),p.adler=0,N.status=V)):N.status=V),N.pending!==0){if(O(p),p.avail_out===0)return N.last_flush=-1,m}else if(p.avail_in===0&&H(L)<=H(z)&&L!==h)return ne(p,-5);if(N.status===666&&p.avail_in!==0)return ne(p,-5);if(p.avail_in!==0||N.lookahead!==0||L!==f&&N.status!==666){var q=N.strategy===2?function(M,X){for(var ee;;){if(M.lookahead===0&&(ce(M),M.lookahead===0)){if(X===f)return b;break}if(M.match_length=0,ee=l._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,ee&&(S(M,!1),M.strm.avail_out===0))return b}return M.insert=0,X===h?(S(M,!0),M.strm.avail_out===0?ae:W):M.last_lit&&(S(M,!1),M.strm.avail_out===0)?b:U}(N,L):N.strategy===3?function(M,X){for(var ee,Q,oe,je,he=M.window;;){if(M.lookahead<=$){if(ce(M),M.lookahead<=$&&X===f)return b;if(M.lookahead===0)break}if(M.match_length=0,M.lookahead>=P&&0<M.strstart&&(Q=he[oe=M.strstart-1])===he[++oe]&&Q===he[++oe]&&Q===he[++oe]){je=M.strstart+$;do;while(Q===he[++oe]&&Q===he[++oe]&&Q===he[++oe]&&Q===he[++oe]&&Q===he[++oe]&&Q===he[++oe]&&Q===he[++oe]&&Q===he[++oe]&&oe<je);M.match_length=$-(je-oe),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=P?(ee=l._tr_tally(M,1,M.match_length-P),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):(ee=l._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),ee&&(S(M,!1),M.strm.avail_out===0))return b}return M.insert=0,X===h?(S(M,!0),M.strm.avail_out===0?ae:W):M.last_lit&&(S(M,!1),M.strm.avail_out===0)?b:U}(N,L):o[N.level].func(N,L);if(q!==ae&&q!==W||(N.status=666),q===b||q===ae)return p.avail_out===0&&(N.last_flush=-1),m;if(q===U&&(L===1?l._tr_align(N):L!==5&&(l._tr_stored_block(N,0,0,!1),L===3&&(ie(N.head),N.lookahead===0&&(N.strstart=0,N.block_start=0,N.insert=0))),O(p),p.avail_out===0))return N.last_flush=-1,m}return L!==h?m:N.wrap<=0?1:(N.wrap===2?(J(N,255&p.adler),J(N,p.adler>>8&255),J(N,p.adler>>16&255),J(N,p.adler>>24&255),J(N,255&p.total_in),J(N,p.total_in>>8&255),J(N,p.total_in>>16&255),J(N,p.total_in>>24&255)):(Y(N,p.adler>>>16),Y(N,65535&p.adler)),O(p),0<N.wrap&&(N.wrap=-N.wrap),N.pending!==0?m:1)},a.deflateEnd=function(p){var L;return p&&p.state?(L=p.state.status)!==T&&L!==69&&L!==73&&L!==91&&L!==103&&L!==V&&L!==666?ne(p,v):(p.state=null,L===V?ne(p,-3):m):v},a.deflateSetDictionary=function(p,L){var z,N,k,R,G,q,M,X,ee=L.length;if(!p||!p.state||(R=(z=p.state).wrap)===2||R===1&&z.status!==T||z.lookahead)return v;for(R===1&&(p.adler=c(p.adler,L,ee,0)),z.wrap=0,ee>=z.w_size&&(R===0&&(ie(z.head),z.strstart=0,z.block_start=0,z.insert=0),X=new i.Buf8(z.w_size),i.arraySet(X,L,ee-z.w_size,z.w_size,0),L=X,ee=z.w_size),G=p.avail_in,q=p.next_in,M=p.input,p.avail_in=ee,p.next_in=0,p.input=L,ce(z);z.lookahead>=P;){for(N=z.strstart,k=z.lookahead-(P-1);z.ins_h=(z.ins_h<<z.hash_shift^z.window[N+P-1])&z.hash_mask,z.prev[N&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=N,N++,--k;);z.strstart=N,z.lookahead=P-1,ce(z)}return z.strstart+=z.lookahead,z.block_start=z.strstart,z.insert=z.lookahead,z.lookahead=0,z.match_length=z.prev_length=P-1,z.match_available=0,p.next_in=q,p.input=M,p.avail_in=G,z.wrap=R,m},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(s,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(s,n,a){n.exports=function(o,i){var l,c,u,d,f,h,m,v,g,x,y,w,j,_,A,E,D,C,P,$,te,T,V,b,U;l=o.state,c=o.next_in,b=o.input,u=c+(o.avail_in-5),d=o.next_out,U=o.output,f=d-(i-o.avail_out),h=d+(o.avail_out-257),m=l.dmax,v=l.wsize,g=l.whave,x=l.wnext,y=l.window,w=l.hold,j=l.bits,_=l.lencode,A=l.distcode,E=(1<<l.lenbits)-1,D=(1<<l.distbits)-1;e:do{j<15&&(w+=b[c++]<<j,j+=8,w+=b[c++]<<j,j+=8),C=_[w&E];t:for(;;){if(w>>>=P=C>>>24,j-=P,(P=C>>>16&255)===0)U[d++]=65535&C;else{if(!(16&P)){if(!(64&P)){C=_[(65535&C)+(w&(1<<P)-1)];continue t}if(32&P){l.mode=12;break e}o.msg="invalid literal/length code",l.mode=30;break e}$=65535&C,(P&=15)&&(j<P&&(w+=b[c++]<<j,j+=8),$+=w&(1<<P)-1,w>>>=P,j-=P),j<15&&(w+=b[c++]<<j,j+=8,w+=b[c++]<<j,j+=8),C=A[w&D];s:for(;;){if(w>>>=P=C>>>24,j-=P,!(16&(P=C>>>16&255))){if(!(64&P)){C=A[(65535&C)+(w&(1<<P)-1)];continue s}o.msg="invalid distance code",l.mode=30;break e}if(te=65535&C,j<(P&=15)&&(w+=b[c++]<<j,(j+=8)<P&&(w+=b[c++]<<j,j+=8)),m<(te+=w&(1<<P)-1)){o.msg="invalid distance too far back",l.mode=30;break e}if(w>>>=P,j-=P,(P=d-f)<te){if(g<(P=te-P)&&l.sane){o.msg="invalid distance too far back",l.mode=30;break e}if(V=y,(T=0)===x){if(T+=v-P,P<$){for($-=P;U[d++]=y[T++],--P;);T=d-te,V=U}}else if(x<P){if(T+=v+x-P,(P-=x)<$){for($-=P;U[d++]=y[T++],--P;);if(T=0,x<$){for($-=P=x;U[d++]=y[T++],--P;);T=d-te,V=U}}}else if(T+=x-P,P<$){for($-=P;U[d++]=y[T++],--P;);T=d-te,V=U}for(;2<$;)U[d++]=V[T++],U[d++]=V[T++],U[d++]=V[T++],$-=3;$&&(U[d++]=V[T++],1<$&&(U[d++]=V[T++]))}else{for(T=d-te;U[d++]=U[T++],U[d++]=U[T++],U[d++]=U[T++],2<($-=3););$&&(U[d++]=U[T++],1<$&&(U[d++]=U[T++]))}break}}break}}while(c<u&&d<h);c-=$=j>>3,w&=(1<<(j-=$<<3))-1,o.next_in=c,o.next_out=d,o.avail_in=c<u?u-c+5:5-(c-u),o.avail_out=d<h?h-d+257:257-(d-h),l.hold=w,l.bits=j}},{}],49:[function(s,n,a){var o=s("../utils/common"),i=s("./adler32"),l=s("./crc32"),c=s("./inffast"),u=s("./inftrees"),d=1,f=2,h=0,m=-2,v=1,g=852,x=592;function y(T){return(T>>>24&255)+(T>>>8&65280)+((65280&T)<<8)+((255&T)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(T){var V;return T&&T.state?(V=T.state,T.total_in=T.total_out=V.total=0,T.msg="",V.wrap&&(T.adler=1&V.wrap),V.mode=v,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new o.Buf32(g),V.distcode=V.distdyn=new o.Buf32(x),V.sane=1,V.back=-1,h):m}function _(T){var V;return T&&T.state?((V=T.state).wsize=0,V.whave=0,V.wnext=0,j(T)):m}function A(T,V){var b,U;return T&&T.state?(U=T.state,V<0?(b=0,V=-V):(b=1+(V>>4),V<48&&(V&=15)),V&&(V<8||15<V)?m:(U.window!==null&&U.wbits!==V&&(U.window=null),U.wrap=b,U.wbits=V,_(T))):m}function E(T,V){var b,U;return T?(U=new w,(T.state=U).window=null,(b=A(T,V))!==h&&(T.state=null),b):m}var D,C,P=!0;function $(T){if(P){var V;for(D=new o.Buf32(512),C=new o.Buf32(32),V=0;V<144;)T.lens[V++]=8;for(;V<256;)T.lens[V++]=9;for(;V<280;)T.lens[V++]=7;for(;V<288;)T.lens[V++]=8;for(u(d,T.lens,0,288,D,0,T.work,{bits:9}),V=0;V<32;)T.lens[V++]=5;u(f,T.lens,0,32,C,0,T.work,{bits:5}),P=!1}T.lencode=D,T.lenbits=9,T.distcode=C,T.distbits=5}function te(T,V,b,U){var ae,W=T.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new o.Buf8(W.wsize)),U>=W.wsize?(o.arraySet(W.window,V,b-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(U<(ae=W.wsize-W.wnext)&&(ae=U),o.arraySet(W.window,V,b-U,ae,W.wnext),(U-=ae)?(o.arraySet(W.window,V,b-U,U,0),W.wnext=U,W.whave=W.wsize):(W.wnext+=ae,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=ae))),0}a.inflateReset=_,a.inflateReset2=A,a.inflateResetKeep=j,a.inflateInit=function(T){return E(T,15)},a.inflateInit2=E,a.inflate=function(T,V){var b,U,ae,W,ne,H,ie,O,S,J,Y,Z,ce,ge,ue,le,be,fe,we,Se,p,L,z,N,k=0,R=new o.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!T||!T.state||!T.output||!T.input&&T.avail_in!==0)return m;(b=T.state).mode===12&&(b.mode=13),ne=T.next_out,ae=T.output,ie=T.avail_out,W=T.next_in,U=T.input,H=T.avail_in,O=b.hold,S=b.bits,J=H,Y=ie,L=h;e:for(;;)switch(b.mode){case v:if(b.wrap===0){b.mode=13;break}for(;S<16;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}if(2&b.wrap&&O===35615){R[b.check=0]=255&O,R[1]=O>>>8&255,b.check=l(b.check,R,2,0),S=O=0,b.mode=2;break}if(b.flags=0,b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&O)<<8)+(O>>8))%31){T.msg="incorrect header check",b.mode=30;break}if((15&O)!=8){T.msg="unknown compression method",b.mode=30;break}if(S-=4,p=8+(15&(O>>>=4)),b.wbits===0)b.wbits=p;else if(p>b.wbits){T.msg="invalid window size",b.mode=30;break}b.dmax=1<<p,T.adler=b.check=1,b.mode=512&O?10:12,S=O=0;break;case 2:for(;S<16;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}if(b.flags=O,(255&b.flags)!=8){T.msg="unknown compression method",b.mode=30;break}if(57344&b.flags){T.msg="unknown header flags set",b.mode=30;break}b.head&&(b.head.text=O>>8&1),512&b.flags&&(R[0]=255&O,R[1]=O>>>8&255,b.check=l(b.check,R,2,0)),S=O=0,b.mode=3;case 3:for(;S<32;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}b.head&&(b.head.time=O),512&b.flags&&(R[0]=255&O,R[1]=O>>>8&255,R[2]=O>>>16&255,R[3]=O>>>24&255,b.check=l(b.check,R,4,0)),S=O=0,b.mode=4;case 4:for(;S<16;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}b.head&&(b.head.xflags=255&O,b.head.os=O>>8),512&b.flags&&(R[0]=255&O,R[1]=O>>>8&255,b.check=l(b.check,R,2,0)),S=O=0,b.mode=5;case 5:if(1024&b.flags){for(;S<16;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}b.length=O,b.head&&(b.head.extra_len=O),512&b.flags&&(R[0]=255&O,R[1]=O>>>8&255,b.check=l(b.check,R,2,0)),S=O=0}else b.head&&(b.head.extra=null);b.mode=6;case 6:if(1024&b.flags&&(H<(Z=b.length)&&(Z=H),Z&&(b.head&&(p=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Array(b.head.extra_len)),o.arraySet(b.head.extra,U,W,Z,p)),512&b.flags&&(b.check=l(b.check,U,Z,W)),H-=Z,W+=Z,b.length-=Z),b.length))break e;b.length=0,b.mode=7;case 7:if(2048&b.flags){if(H===0)break e;for(Z=0;p=U[W+Z++],b.head&&p&&b.length<65536&&(b.head.name+=String.fromCharCode(p)),p&&Z<H;);if(512&b.flags&&(b.check=l(b.check,U,Z,W)),H-=Z,W+=Z,p)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=8;case 8:if(4096&b.flags){if(H===0)break e;for(Z=0;p=U[W+Z++],b.head&&p&&b.length<65536&&(b.head.comment+=String.fromCharCode(p)),p&&Z<H;);if(512&b.flags&&(b.check=l(b.check,U,Z,W)),H-=Z,W+=Z,p)break e}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(512&b.flags){for(;S<16;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}if(O!==(65535&b.check)){T.msg="header crc mismatch",b.mode=30;break}S=O=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),T.adler=b.check=0,b.mode=12;break;case 10:for(;S<32;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}T.adler=b.check=y(O),S=O=0,b.mode=11;case 11:if(b.havedict===0)return T.next_out=ne,T.avail_out=ie,T.next_in=W,T.avail_in=H,b.hold=O,b.bits=S,2;T.adler=b.check=1,b.mode=12;case 12:if(V===5||V===6)break e;case 13:if(b.last){O>>>=7&S,S-=7&S,b.mode=27;break}for(;S<3;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}switch(b.last=1&O,S-=1,3&(O>>>=1)){case 0:b.mode=14;break;case 1:if($(b),b.mode=20,V!==6)break;O>>>=2,S-=2;break e;case 2:b.mode=17;break;case 3:T.msg="invalid block type",b.mode=30}O>>>=2,S-=2;break;case 14:for(O>>>=7&S,S-=7&S;S<32;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}if((65535&O)!=(O>>>16^65535)){T.msg="invalid stored block lengths",b.mode=30;break}if(b.length=65535&O,S=O=0,b.mode=15,V===6)break e;case 15:b.mode=16;case 16:if(Z=b.length){if(H<Z&&(Z=H),ie<Z&&(Z=ie),Z===0)break e;o.arraySet(ae,U,W,Z,ne),H-=Z,W+=Z,ie-=Z,ne+=Z,b.length-=Z;break}b.mode=12;break;case 17:for(;S<14;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}if(b.nlen=257+(31&O),O>>>=5,S-=5,b.ndist=1+(31&O),O>>>=5,S-=5,b.ncode=4+(15&O),O>>>=4,S-=4,286<b.nlen||30<b.ndist){T.msg="too many length or distance symbols",b.mode=30;break}b.have=0,b.mode=18;case 18:for(;b.have<b.ncode;){for(;S<3;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}b.lens[G[b.have++]]=7&O,O>>>=3,S-=3}for(;b.have<19;)b.lens[G[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,z={bits:b.lenbits},L=u(0,b.lens,0,19,b.lencode,0,b.work,z),b.lenbits=z.bits,L){T.msg="invalid code lengths set",b.mode=30;break}b.have=0,b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;le=(k=b.lencode[O&(1<<b.lenbits)-1])>>>16&255,be=65535&k,!((ue=k>>>24)<=S);){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}if(be<16)O>>>=ue,S-=ue,b.lens[b.have++]=be;else{if(be===16){for(N=ue+2;S<N;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}if(O>>>=ue,S-=ue,b.have===0){T.msg="invalid bit length repeat",b.mode=30;break}p=b.lens[b.have-1],Z=3+(3&O),O>>>=2,S-=2}else if(be===17){for(N=ue+3;S<N;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}S-=ue,p=0,Z=3+(7&(O>>>=ue)),O>>>=3,S-=3}else{for(N=ue+7;S<N;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}S-=ue,p=0,Z=11+(127&(O>>>=ue)),O>>>=7,S-=7}if(b.have+Z>b.nlen+b.ndist){T.msg="invalid bit length repeat",b.mode=30;break}for(;Z--;)b.lens[b.have++]=p}}if(b.mode===30)break;if(b.lens[256]===0){T.msg="invalid code -- missing end-of-block",b.mode=30;break}if(b.lenbits=9,z={bits:b.lenbits},L=u(d,b.lens,0,b.nlen,b.lencode,0,b.work,z),b.lenbits=z.bits,L){T.msg="invalid literal/lengths set",b.mode=30;break}if(b.distbits=6,b.distcode=b.distdyn,z={bits:b.distbits},L=u(f,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,z),b.distbits=z.bits,L){T.msg="invalid distances set",b.mode=30;break}if(b.mode=20,V===6)break e;case 20:b.mode=21;case 21:if(6<=H&&258<=ie){T.next_out=ne,T.avail_out=ie,T.next_in=W,T.avail_in=H,b.hold=O,b.bits=S,c(T,Y),ne=T.next_out,ae=T.output,ie=T.avail_out,W=T.next_in,U=T.input,H=T.avail_in,O=b.hold,S=b.bits,b.mode===12&&(b.back=-1);break}for(b.back=0;le=(k=b.lencode[O&(1<<b.lenbits)-1])>>>16&255,be=65535&k,!((ue=k>>>24)<=S);){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}if(le&&!(240&le)){for(fe=ue,we=le,Se=be;le=(k=b.lencode[Se+((O&(1<<fe+we)-1)>>fe)])>>>16&255,be=65535&k,!(fe+(ue=k>>>24)<=S);){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}O>>>=fe,S-=fe,b.back+=fe}if(O>>>=ue,S-=ue,b.back+=ue,b.length=be,le===0){b.mode=26;break}if(32&le){b.back=-1,b.mode=12;break}if(64&le){T.msg="invalid literal/length code",b.mode=30;break}b.extra=15&le,b.mode=22;case 22:if(b.extra){for(N=b.extra;S<N;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}b.length+=O&(1<<b.extra)-1,O>>>=b.extra,S-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=23;case 23:for(;le=(k=b.distcode[O&(1<<b.distbits)-1])>>>16&255,be=65535&k,!((ue=k>>>24)<=S);){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}if(!(240&le)){for(fe=ue,we=le,Se=be;le=(k=b.distcode[Se+((O&(1<<fe+we)-1)>>fe)])>>>16&255,be=65535&k,!(fe+(ue=k>>>24)<=S);){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}O>>>=fe,S-=fe,b.back+=fe}if(O>>>=ue,S-=ue,b.back+=ue,64&le){T.msg="invalid distance code",b.mode=30;break}b.offset=be,b.extra=15&le,b.mode=24;case 24:if(b.extra){for(N=b.extra;S<N;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}b.offset+=O&(1<<b.extra)-1,O>>>=b.extra,S-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){T.msg="invalid distance too far back",b.mode=30;break}b.mode=25;case 25:if(ie===0)break e;if(Z=Y-ie,b.offset>Z){if((Z=b.offset-Z)>b.whave&&b.sane){T.msg="invalid distance too far back",b.mode=30;break}ce=Z>b.wnext?(Z-=b.wnext,b.wsize-Z):b.wnext-Z,Z>b.length&&(Z=b.length),ge=b.window}else ge=ae,ce=ne-b.offset,Z=b.length;for(ie<Z&&(Z=ie),ie-=Z,b.length-=Z;ae[ne++]=ge[ce++],--Z;);b.length===0&&(b.mode=21);break;case 26:if(ie===0)break e;ae[ne++]=b.length,ie--,b.mode=21;break;case 27:if(b.wrap){for(;S<32;){if(H===0)break e;H--,O|=U[W++]<<S,S+=8}if(Y-=ie,T.total_out+=Y,b.total+=Y,Y&&(T.adler=b.check=b.flags?l(b.check,ae,Y,ne-Y):i(b.check,ae,Y,ne-Y)),Y=ie,(b.flags?O:y(O))!==b.check){T.msg="incorrect data check",b.mode=30;break}S=O=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;S<32;){if(H===0)break e;H--,O+=U[W++]<<S,S+=8}if(O!==(4294967295&b.total)){T.msg="incorrect length check",b.mode=30;break}S=O=0}b.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;case 32:default:return m}return T.next_out=ne,T.avail_out=ie,T.next_in=W,T.avail_in=H,b.hold=O,b.bits=S,(b.wsize||Y!==T.avail_out&&b.mode<30&&(b.mode<27||V!==4))&&te(T,T.output,T.next_out,Y-T.avail_out)?(b.mode=31,-4):(J-=T.avail_in,Y-=T.avail_out,T.total_in+=J,T.total_out+=Y,b.total+=Y,b.wrap&&Y&&(T.adler=b.check=b.flags?l(b.check,ae,Y,T.next_out-Y):i(b.check,ae,Y,T.next_out-Y)),T.data_type=b.bits+(b.last?64:0)+(b.mode===12?128:0)+(b.mode===20||b.mode===15?256:0),(J==0&&Y===0||V===4)&&L===h&&(L=-5),L)},a.inflateEnd=function(T){if(!T||!T.state)return m;var V=T.state;return V.window&&(V.window=null),T.state=null,h},a.inflateGetHeader=function(T,V){var b;return T&&T.state&&2&(b=T.state).wrap?((b.head=V).done=!1,h):m},a.inflateSetDictionary=function(T,V){var b,U=V.length;return T&&T.state?(b=T.state).wrap!==0&&b.mode!==11?m:b.mode===11&&i(1,V,U,0)!==b.check?-3:te(T,V,U,U)?(b.mode=31,-4):(b.havedict=1,h):m},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(s,n,a){var o=s("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(d,f,h,m,v,g,x,y){var w,j,_,A,E,D,C,P,$,te=y.bits,T=0,V=0,b=0,U=0,ae=0,W=0,ne=0,H=0,ie=0,O=0,S=null,J=0,Y=new o.Buf16(16),Z=new o.Buf16(16),ce=null,ge=0;for(T=0;T<=15;T++)Y[T]=0;for(V=0;V<m;V++)Y[f[h+V]]++;for(ae=te,U=15;1<=U&&Y[U]===0;U--);if(U<ae&&(ae=U),U===0)return v[g++]=20971520,v[g++]=20971520,y.bits=1,0;for(b=1;b<U&&Y[b]===0;b++);for(ae<b&&(ae=b),T=H=1;T<=15;T++)if(H<<=1,(H-=Y[T])<0)return-1;if(0<H&&(d===0||U!==1))return-1;for(Z[1]=0,T=1;T<15;T++)Z[T+1]=Z[T]+Y[T];for(V=0;V<m;V++)f[h+V]!==0&&(x[Z[f[h+V]]++]=V);if(D=d===0?(S=ce=x,19):d===1?(S=i,J-=257,ce=l,ge-=257,256):(S=c,ce=u,-1),T=b,E=g,ne=V=O=0,_=-1,A=(ie=1<<(W=ae))-1,d===1&&852<ie||d===2&&592<ie)return 1;for(;;){for(C=T-ne,$=x[V]<D?(P=0,x[V]):x[V]>D?(P=ce[ge+x[V]],S[J+x[V]]):(P=96,0),w=1<<T-ne,b=j=1<<W;v[E+(O>>ne)+(j-=w)]=C<<24|P<<16|$|0,j!==0;);for(w=1<<T-1;O&w;)w>>=1;if(w!==0?(O&=w-1,O+=w):O=0,V++,--Y[T]==0){if(T===U)break;T=f[h+x[V]]}if(ae<T&&(O&A)!==_){for(ne===0&&(ne=ae),E+=b,H=1<<(W=T-ne);W+ne<U&&!((H-=Y[W+ne])<=0);)W++,H<<=1;if(ie+=1<<W,d===1&&852<ie||d===2&&592<ie)return 1;v[_=O&A]=ae<<24|W<<16|E-g|0}}return O!==0&&(v[E+O]=T-ne<<24|64<<16|0),y.bits=ae,0}},{"../utils/common":41}],51:[function(s,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(s,n,a){var o=s("../utils/common"),i=0,l=1;function c(k){for(var R=k.length;0<=--R;)k[R]=0}var u=0,d=29,f=256,h=f+1+d,m=30,v=19,g=2*h+1,x=15,y=16,w=7,j=256,_=16,A=17,E=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=new Array(2*(h+2));c(te);var T=new Array(2*m);c(T);var V=new Array(512);c(V);var b=new Array(256);c(b);var U=new Array(d);c(U);var ae,W,ne,H=new Array(m);function ie(k,R,G,q,M){this.static_tree=k,this.extra_bits=R,this.extra_base=G,this.elems=q,this.max_length=M,this.has_stree=k&&k.length}function O(k,R){this.dyn_tree=k,this.max_code=0,this.stat_desc=R}function S(k){return k<256?V[k]:V[256+(k>>>7)]}function J(k,R){k.pending_buf[k.pending++]=255&R,k.pending_buf[k.pending++]=R>>>8&255}function Y(k,R,G){k.bi_valid>y-G?(k.bi_buf|=R<<k.bi_valid&65535,J(k,k.bi_buf),k.bi_buf=R>>y-k.bi_valid,k.bi_valid+=G-y):(k.bi_buf|=R<<k.bi_valid&65535,k.bi_valid+=G)}function Z(k,R,G){Y(k,G[2*R],G[2*R+1])}function ce(k,R){for(var G=0;G|=1&k,k>>>=1,G<<=1,0<--R;);return G>>>1}function ge(k,R,G){var q,M,X=new Array(x+1),ee=0;for(q=1;q<=x;q++)X[q]=ee=ee+G[q-1]<<1;for(M=0;M<=R;M++){var Q=k[2*M+1];Q!==0&&(k[2*M]=ce(X[Q]++,Q))}}function ue(k){var R;for(R=0;R<h;R++)k.dyn_ltree[2*R]=0;for(R=0;R<m;R++)k.dyn_dtree[2*R]=0;for(R=0;R<v;R++)k.bl_tree[2*R]=0;k.dyn_ltree[2*j]=1,k.opt_len=k.static_len=0,k.last_lit=k.matches=0}function le(k){8<k.bi_valid?J(k,k.bi_buf):0<k.bi_valid&&(k.pending_buf[k.pending++]=k.bi_buf),k.bi_buf=0,k.bi_valid=0}function be(k,R,G,q){var M=2*R,X=2*G;return k[M]<k[X]||k[M]===k[X]&&q[R]<=q[G]}function fe(k,R,G){for(var q=k.heap[G],M=G<<1;M<=k.heap_len&&(M<k.heap_len&&be(R,k.heap[M+1],k.heap[M],k.depth)&&M++,!be(R,q,k.heap[M],k.depth));)k.heap[G]=k.heap[M],G=M,M<<=1;k.heap[G]=q}function we(k,R,G){var q,M,X,ee,Q=0;if(k.last_lit!==0)for(;q=k.pending_buf[k.d_buf+2*Q]<<8|k.pending_buf[k.d_buf+2*Q+1],M=k.pending_buf[k.l_buf+Q],Q++,q===0?Z(k,M,R):(Z(k,(X=b[M])+f+1,R),(ee=D[X])!==0&&Y(k,M-=U[X],ee),Z(k,X=S(--q),G),(ee=C[X])!==0&&Y(k,q-=H[X],ee)),Q<k.last_lit;);Z(k,j,R)}function Se(k,R){var G,q,M,X=R.dyn_tree,ee=R.stat_desc.static_tree,Q=R.stat_desc.has_stree,oe=R.stat_desc.elems,je=-1;for(k.heap_len=0,k.heap_max=g,G=0;G<oe;G++)X[2*G]!==0?(k.heap[++k.heap_len]=je=G,k.depth[G]=0):X[2*G+1]=0;for(;k.heap_len<2;)X[2*(M=k.heap[++k.heap_len]=je<2?++je:0)]=1,k.depth[M]=0,k.opt_len--,Q&&(k.static_len-=ee[2*M+1]);for(R.max_code=je,G=k.heap_len>>1;1<=G;G--)fe(k,X,G);for(M=oe;G=k.heap[1],k.heap[1]=k.heap[k.heap_len--],fe(k,X,1),q=k.heap[1],k.heap[--k.heap_max]=G,k.heap[--k.heap_max]=q,X[2*M]=X[2*G]+X[2*q],k.depth[M]=(k.depth[G]>=k.depth[q]?k.depth[G]:k.depth[q])+1,X[2*G+1]=X[2*q+1]=M,k.heap[1]=M++,fe(k,X,1),2<=k.heap_len;);k.heap[--k.heap_max]=k.heap[1],function(he,Le){var xe,We,ct,ke,Ct,dt,Ye=Le.dyn_tree,ns=Le.max_code,is=Le.stat_desc.static_tree,as=Le.stat_desc.has_stree,os=Le.stat_desc.extra_bits,Lt=Le.stat_desc.extra_base,ut=Le.stat_desc.max_length,wt=0;for(ke=0;ke<=x;ke++)he.bl_count[ke]=0;for(Ye[2*he.heap[he.heap_max]+1]=0,xe=he.heap_max+1;xe<g;xe++)ut<(ke=Ye[2*Ye[2*(We=he.heap[xe])+1]+1]+1)&&(ke=ut,wt++),Ye[2*We+1]=ke,ns<We||(he.bl_count[ke]++,Ct=0,Lt<=We&&(Ct=os[We-Lt]),dt=Ye[2*We],he.opt_len+=dt*(ke+Ct),as&&(he.static_len+=dt*(is[2*We+1]+Ct)));if(wt!==0){do{for(ke=ut-1;he.bl_count[ke]===0;)ke--;he.bl_count[ke]--,he.bl_count[ke+1]+=2,he.bl_count[ut]--,wt-=2}while(0<wt);for(ke=ut;ke!==0;ke--)for(We=he.bl_count[ke];We!==0;)ns<(ct=he.heap[--xe])||(Ye[2*ct+1]!==ke&&(he.opt_len+=(ke-Ye[2*ct+1])*Ye[2*ct],Ye[2*ct+1]=ke),We--)}}(k,R),ge(X,je,k.bl_count)}function p(k,R,G){var q,M,X=-1,ee=R[1],Q=0,oe=7,je=4;for(ee===0&&(oe=138,je=3),R[2*(G+1)+1]=65535,q=0;q<=G;q++)M=ee,ee=R[2*(q+1)+1],++Q<oe&&M===ee||(Q<je?k.bl_tree[2*M]+=Q:M!==0?(M!==X&&k.bl_tree[2*M]++,k.bl_tree[2*_]++):Q<=10?k.bl_tree[2*A]++:k.bl_tree[2*E]++,X=M,je=(Q=0)===ee?(oe=138,3):M===ee?(oe=6,3):(oe=7,4))}function L(k,R,G){var q,M,X=-1,ee=R[1],Q=0,oe=7,je=4;for(ee===0&&(oe=138,je=3),q=0;q<=G;q++)if(M=ee,ee=R[2*(q+1)+1],!(++Q<oe&&M===ee)){if(Q<je)for(;Z(k,M,k.bl_tree),--Q!=0;);else M!==0?(M!==X&&(Z(k,M,k.bl_tree),Q--),Z(k,_,k.bl_tree),Y(k,Q-3,2)):Q<=10?(Z(k,A,k.bl_tree),Y(k,Q-3,3)):(Z(k,E,k.bl_tree),Y(k,Q-11,7));X=M,je=(Q=0)===ee?(oe=138,3):M===ee?(oe=6,3):(oe=7,4)}}c(H);var z=!1;function N(k,R,G,q){Y(k,(u<<1)+(q?1:0),3),function(M,X,ee,Q){le(M),J(M,ee),J(M,~ee),o.arraySet(M.pending_buf,M.window,X,ee,M.pending),M.pending+=ee}(k,R,G)}a._tr_init=function(k){z||(function(){var R,G,q,M,X,ee=new Array(x+1);for(M=q=0;M<d-1;M++)for(U[M]=q,R=0;R<1<<D[M];R++)b[q++]=M;for(b[q-1]=M,M=X=0;M<16;M++)for(H[M]=X,R=0;R<1<<C[M];R++)V[X++]=M;for(X>>=7;M<m;M++)for(H[M]=X<<7,R=0;R<1<<C[M]-7;R++)V[256+X++]=M;for(G=0;G<=x;G++)ee[G]=0;for(R=0;R<=143;)te[2*R+1]=8,R++,ee[8]++;for(;R<=255;)te[2*R+1]=9,R++,ee[9]++;for(;R<=279;)te[2*R+1]=7,R++,ee[7]++;for(;R<=287;)te[2*R+1]=8,R++,ee[8]++;for(ge(te,h+1,ee),R=0;R<m;R++)T[2*R+1]=5,T[2*R]=ce(R,5);ae=new ie(te,D,f+1,h,x),W=new ie(T,C,0,m,x),ne=new ie(new Array(0),P,0,v,w)}(),z=!0),k.l_desc=new O(k.dyn_ltree,ae),k.d_desc=new O(k.dyn_dtree,W),k.bl_desc=new O(k.bl_tree,ne),k.bi_buf=0,k.bi_valid=0,ue(k)},a._tr_stored_block=N,a._tr_flush_block=function(k,R,G,q){var M,X,ee=0;0<k.level?(k.strm.data_type===2&&(k.strm.data_type=function(Q){var oe,je=4093624447;for(oe=0;oe<=31;oe++,je>>>=1)if(1&je&&Q.dyn_ltree[2*oe]!==0)return i;if(Q.dyn_ltree[18]!==0||Q.dyn_ltree[20]!==0||Q.dyn_ltree[26]!==0)return l;for(oe=32;oe<f;oe++)if(Q.dyn_ltree[2*oe]!==0)return l;return i}(k)),Se(k,k.l_desc),Se(k,k.d_desc),ee=function(Q){var oe;for(p(Q,Q.dyn_ltree,Q.l_desc.max_code),p(Q,Q.dyn_dtree,Q.d_desc.max_code),Se(Q,Q.bl_desc),oe=v-1;3<=oe&&Q.bl_tree[2*$[oe]+1]===0;oe--);return Q.opt_len+=3*(oe+1)+5+5+4,oe}(k),M=k.opt_len+3+7>>>3,(X=k.static_len+3+7>>>3)<=M&&(M=X)):M=X=G+5,G+4<=M&&R!==-1?N(k,R,G,q):k.strategy===4||X===M?(Y(k,2+(q?1:0),3),we(k,te,T)):(Y(k,4+(q?1:0),3),function(Q,oe,je,he){var Le;for(Y(Q,oe-257,5),Y(Q,je-1,5),Y(Q,he-4,4),Le=0;Le<he;Le++)Y(Q,Q.bl_tree[2*$[Le]+1],3);L(Q,Q.dyn_ltree,oe-1),L(Q,Q.dyn_dtree,je-1)}(k,k.l_desc.max_code+1,k.d_desc.max_code+1,ee+1),we(k,k.dyn_ltree,k.dyn_dtree)),ue(k),q&&le(k)},a._tr_tally=function(k,R,G){return k.pending_buf[k.d_buf+2*k.last_lit]=R>>>8&255,k.pending_buf[k.d_buf+2*k.last_lit+1]=255&R,k.pending_buf[k.l_buf+k.last_lit]=255&G,k.last_lit++,R===0?k.dyn_ltree[2*G]++:(k.matches++,R--,k.dyn_ltree[2*(b[G]+f+1)]++,k.dyn_dtree[2*S(R)]++),k.last_lit===k.lit_bufsize-1},a._tr_align=function(k){Y(k,2,3),Z(k,j,te),function(R){R.bi_valid===16?(J(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):8<=R.bi_valid&&(R.pending_buf[R.pending++]=255&R.bi_buf,R.bi_buf>>=8,R.bi_valid-=8)}(k)}},{"../utils/common":41}],53:[function(s,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(s,n,a){(function(o){(function(i,l){if(!i.setImmediate){var c,u,d,f,h=1,m={},v=!1,g=i.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(i);x=x&&x.setTimeout?x:i,c={}.toString.call(i.process)==="[object process]"?function(_){process.nextTick(function(){w(_)})}:function(){if(i.postMessage&&!i.importScripts){var _=!0,A=i.onmessage;return i.onmessage=function(){_=!1},i.postMessage("","*"),i.onmessage=A,_}}()?(f="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",j,!1):i.attachEvent("onmessage",j),function(_){i.postMessage(f+_,"*")}):i.MessageChannel?((d=new MessageChannel).port1.onmessage=function(_){w(_.data)},function(_){d.port2.postMessage(_)}):g&&"onreadystatechange"in g.createElement("script")?(u=g.documentElement,function(_){var A=g.createElement("script");A.onreadystatechange=function(){w(_),A.onreadystatechange=null,u.removeChild(A),A=null},u.appendChild(A)}):function(_){setTimeout(w,0,_)},x.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var A=new Array(arguments.length-1),E=0;E<A.length;E++)A[E]=arguments[E+1];var D={callback:_,args:A};return m[h]=D,c(h),h++},x.clearImmediate=y}function y(_){delete m[_]}function w(_){if(v)setTimeout(w,0,_);else{var A=m[_];if(A){v=!0;try{(function(E){var D=E.callback,C=E.args;switch(C.length){case 0:D();break;case 1:D(C[0]);break;case 2:D(C[0],C[1]);break;case 3:D(C[0],C[1],C[2]);break;default:D.apply(l,C)}})(A)}finally{y(_),v=!1}}}}function j(_){_.source===i&&typeof _.data=="string"&&_.data.indexOf(f)===0&&w(+_.data.slice(f.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof it<"u"?it:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ka);var nd=Ka.exports;const id=Zl(nd);var Ya={exports:{}};(function(e,t){(function(s,n){n()})(it,function(){function s(u,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function n(u,d,f){var h=new XMLHttpRequest;h.open("GET",u),h.responseType="blob",h.onload=function(){c(h.response,d,f)},h.onerror=function(){console.error("could not download file")},h.send()}function a(u){var d=new XMLHttpRequest;d.open("HEAD",u,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function o(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(d)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof it=="object"&&it.global===it?it:void 0,l=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(u,d,f){var h=i.URL||i.webkitURL,m=document.createElement("a");d=d||u.name||"download",m.download=d,m.rel="noopener",typeof u=="string"?(m.href=u,m.origin===location.origin?o(m):a(m.href)?n(u,d,f):o(m,m.target="_blank")):(m.href=h.createObjectURL(u),setTimeout(function(){h.revokeObjectURL(m.href)},4e4),setTimeout(function(){o(m)},0))}:"msSaveOrOpenBlob"in navigator?function(u,d,f){if(d=d||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(s(u,f),d);else if(a(u))n(u,d,f);else{var h=document.createElement("a");h.href=u,h.target="_blank",setTimeout(function(){o(h)})}}:function(u,d,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof u=="string")return n(u,d,f);var m=u.type==="application/octet-stream",v=/constructor/i.test(i.HTMLElement)||i.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||m&&v||l)&&typeof FileReader<"u"){var x=new FileReader;x.onloadend=function(){var j=x.result;j=g?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=j:location=j,h=null},x.readAsDataURL(u)}else{var y=i.URL||i.webkitURL,w=y.createObjectURL(u);h?h.location=w:location.href=w,h=null,setTimeout(function(){y.revokeObjectURL(w)},4e4)}});i.saveAs=c.saveAs=c,e.exports=c})})(Ya);var pi=Ya.exports;const ad=({provider:e,region:t,projectName:s,onMarkDeployed:n,isMarkingDeployed:a})=>{const[o,i]=F.useState(!1),[l,c]=F.useState(0),[u,d]=F.useState(new Set),f=w=>{c(l===w?-1:w)},h=(w,j)=>{w.stopPropagation();const _=new Set(u);_.has(j)?_.delete(j):(_.add(j),l===j&&j<y.length-1&&c(j+1)),d(_)},m=(w,j)=>{navigator.clipboard.writeText(w),pe.success(`Copied ${j}`)},v=(e==null?void 0:e.toLowerCase().replace(/\s+/g,""))||"aws",g=v==="aws"||v.includes("amazon"),x=v==="azure"||v.includes("microsoft");v==="gcp"||v.includes("google");const y=[{title:g?"Create AWS Account":x?"Create Azure Account":"Create GCP Account",duration:"5 min",description:"Ensure you have a valid cloud provider account with billing enabled.",links:[{label:g?"AWS Free Tier":x?"Azure Free Account":"GCP Free Tier",url:g?"https://aws.amazon.com/free":x?"https://azure.microsoft.com/free":"https://cloud.google.com/free"}],commands:null},{title:"Install CLI & Terraform",duration:"3 min",description:"Install the necessary command-line tools to interact with your cloud provider and deploy infrastructure.",links:[{label:"Terraform Download",url:"https://www.terraform.io/downloads"},{label:g?"AWS CLI Guide":x?"Azure CLI Guide":"GCloud CLI Guide",url:g?"https://aws.amazon.com/cli/":x?"https://learn.microsoft.com/cli/azure/install-azure-cli":"https://cloud.google.com/sdk/docs/install"}],commands:[{cmd:g?`aws --version
terraform --version`:x?`az --version
terraform --version`:`gcloud --version
terraform --version`,label:"Check Versions"}]},{title:"Login & Select Region",duration:"2 min",description:"Authenticate your CLI sessions and target the correct region.",links:null,commands:[{cmd:g?`aws configure
# Enter Access Key & Secret Key
aws configure set region ${t||"ap-south-1"}`:x?`az login
az account show`:`gcloud auth application-default login
gcloud config set project [YOUR_PROJECT_ID]`,label:"Login Commands"}]},{title:"Initialize Terraform",duration:"2 min",description:"Prepare your working directory for the new configuration.",links:null,commands:[{cmd:`unzip ${s||"project"}-terraform.zip
cd ${v}/
terraform init`,label:"Init Commands"}]},{title:"Deploy Infrastructure",duration:"3 min",description:"Preview and apply the changes to your cloud environment.",links:null,commands:[{cmd:`terraform plan
terraform apply`,label:"Deploy Commands"}]},{title:"Verify Services",duration:"2 min",description:"Confirm that all resources are up and running as expected.",links:null,checklist:["Infrastructure created successfully (no errors)","Application endpoint is reachable (if applicable)","Database connection verified","Resources appear in Cloud Console"],isVerification:!0}];return r.jsxs("div",{className:"bg-[#1e1e1e] rounded-xl border border-white/5 shadow-xl overflow-hidden animate-fade-in font-sans",children:[r.jsxs("div",{onClick:()=>i(!o),className:"bg-[#252525] px-6 py-5 border-b border-white/10 flex items-center justify-between cursor-pointer hover:bg-[#2a2a2a] transition-colors select-none",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-white tracking-wide",children:"Deployment Guide"}),r.jsxs("p",{className:"text-xs text-gray-400",children:[o?"Follow these steps to deploy on ":"Click to expand deployment steps for ",r.jsx("span",{className:"text-primary font-semibold",children:g?"AWS":x?"Azure":"GCP"})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider ${g?"bg-[#FF9900]/10 text-[#FF9900] border border-[#FF9900]/20":x?"bg-[#0078D4]/10 text-[#0078D4] border border-[#0078D4]/20":"bg-[#4285F4]/10 text-[#4285F4] border border-[#4285F4]/20"}`,children:g?"Amazon Web Services":x?"Microsoft Azure":"Google Cloud"}),r.jsxs("a",{href:"https://cloudiverse.app/docs",target:"_blank",rel:"noreferrer",onClick:w=>w.stopPropagation(),className:"text-gray-400 hover:text-white text-xs flex items-center space-x-1 transition-colors",children:[r.jsx("span",{children:"Docs"}),r.jsx("span",{className:"material-icons text-[10px]",children:"open_in_new"})]}),r.jsx("span",{className:`material-icons text-gray-400 transition-transform duration-300 ${o?"rotate-180":""}`,children:"expand_more"})]})]}),o&&r.jsxs("div",{className:"animate-fade-in",children:[r.jsx("div",{className:"p-6 space-y-3 bg-[#1e1e1e]",children:y.map((w,j)=>{const _=l===j,A=u.has(j);return r.jsxs("div",{className:`rounded-lg border transition-all duration-300 overflow-hidden ${_?"bg-[#2a2a2a] border-primary/30 shadow-lg scale-[1.01]":"bg-[#252525] border-white/5 hover:bg-[#2d2d2d] cursor-pointer"}`,children:[r.jsxs("div",{onClick:()=>f(j),className:"px-5 py-4 flex items-center justify-between select-none",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:`w-6 h-6 rounded-md flex items-center justify-center text-xs font-bold font-mono ${_?"bg-primary text-white":"bg-white/10 text-gray-400"}`,children:j+1}),r.jsx("span",{className:`font-medium transition-colors ${_?"text-white":"text-gray-300"}`,children:w.title})]}),r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsx("span",{className:"text-xs text-gray-500 font-mono",children:w.duration}),r.jsx("div",{onClick:E=>h(E,j),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all cursor-pointer hover:scale-110 ${A?"bg-green-500 border-green-500 text-black":"border-gray-600 hover:border-gray-400"}`,children:A&&r.jsx("span",{className:"material-icons text-sm font-bold",children:"check"})})]})]}),_&&r.jsx("div",{className:"px-5 pb-5 pt-0 animate-fade-in-down",children:r.jsxs("div",{className:"pl-10 space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-400 leading-relaxed border-l-2 border-white/10 pl-3",children:w.description}),w.links&&r.jsx("div",{className:"flex flex-wrap gap-2",children:w.links.map((E,D)=>r.jsxs("a",{href:E.url,target:"_blank",rel:"noreferrer",className:"px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-full text-xs text-primary transition-colors flex items-center space-x-1 border border-transparent hover:border-primary/20",children:[r.jsx("span",{children:E.label}),r.jsx("span",{className:"material-icons text-[10px]",children:"launch"})]},D))}),w.commands&&w.commands.map((E,D)=>r.jsxs("div",{className:"group relative rounded-lg overflow-hidden border border-black/50 bg-[#151515]",children:[r.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx("button",{onClick:()=>m(E.cmd,"command"),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded text-gray-300 hover:text-white transition-colors",children:r.jsx("span",{className:"material-icons text-xs",children:"content_copy"})})}),r.jsx("pre",{className:"p-4 font-mono text-sm text-gray-300 overflow-x-auto whitespace-pre-wrap",children:E.cmd})]},D)),w.isVerification&&w.checklist&&r.jsxs("div",{className:"bg-green-500/5 rounded-lg border border-green-500/10 p-4 space-y-2",children:[w.checklist.map((E,D)=>r.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[r.jsx("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-green-500 rounded border-gray-600 bg-black/20 focus:ring-0 focus:ring-offset-0 transition-colors"}),r.jsx("span",{className:"text-sm text-gray-300 group-hover:text-white transition-colors",children:E})]},D)),r.jsx("div",{className:"pt-2 mt-2",children:r.jsxs("button",{onClick:()=>window.open(g?"https://console.aws.amazon.com":x?"https://portal.azure.com":"https://console.cloud.google.com","_blank"),className:"text-xs text-green-400 hover:text-green-300 underline underline-offset-2 flex items-center space-x-1",children:[r.jsx("span",{children:"Open Console"}),r.jsx("span",{className:"material-icons text-[10px]",children:"open_in_new"})]})})]}),j<y.length-1&&r.jsx("div",{className:"pt-2",children:r.jsxs("button",{onClick:()=>c(j+1),className:"text-xs font-medium text-gray-500 hover:text-white transition-colors flex items-center space-x-1",children:[r.jsx("span",{children:"Continue to next step"}),r.jsx("span",{className:"material-icons text-xs",children:"arrow_downward"})]})})]})})]},j)})}),u.size===y.length&&r.jsxs("div",{className:"bg-green-500/10 border-t border-green-500/20 px-6 py-4 flex flex-col items-center justify-center text-center space-y-3",children:[r.jsxs("span",{className:"text-green-400 text-sm font-bold flex items-center justify-center space-x-2",children:[r.jsx("span",{className:"material-icons text-lg",children:"celebration"}),r.jsx("span",{children:"All Steps Completed!"})]}),r.jsxs("button",{onClick:n,disabled:a,className:"px-6 py-2 bg-green-500 hover:bg-green-600 text-black font-bold rounded-lg transition-all flex items-center space-x-2 transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:[a?r.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-black/30 border-t-black animate-spin"}):r.jsx("span",{className:"material-icons text-sm",children:"check_circle"}),r.jsx("span",{children:a?"Marking...":"Mark as Self Deployed"})]})]})]})]})},hs="http://localhost:5000/api",od=({workspaceId:e,infraSpec:t,selectedProvider:s,costEstimation:n,onComplete:a,onBack:o,isDeployed:i,onTerraformLoaded:l})=>{var ne,H,ie,O;const[c,u]=F.useState(!0),[d,f]=F.useState(null),[h,m]=F.useState("main.tf"),[v,g]=F.useState([]),[x,y]=F.useState(null),[w,j]=F.useState(!1),[_,A]=F.useState(!1),[E,D]=F.useState(!1),C=async()=>{var S,J,Y,Z,ce,ge,ue,le,be;try{if(!(t!=null&&t.sizing)){console.warn("[TERRAFORM] Skipping generation - Step 3 not completed (missing sizing)"),y("Cost analysis must be completed before generating Terraform. Please go back and complete Step 3."),u(!1);return}const fe=((S=t==null?void 0:t.region)==null?void 0:S.resolved_region)||((s==null?void 0:s.toUpperCase())==="AWS"?"ap-south-1":(s==null?void 0:s.toUpperCase())==="GCP"?"asia-south1":(s==null?void 0:s.toUpperCase())==="AZURE"?"Central India":null);if(!fe){console.warn("[TERRAFORM] Skipping generation - Step 2 region resolution not completed"),y("Region resolution must be completed before generating Terraform. Please go back and ensure Step 2 is completed."),u(!1);return}const we={...t};we.region||(we.region={}),we.region.resolved_region||(we.region.resolved_region=fe);const Se=(J=n.provider_details)==null?void 0:J[s],p=((Y=Object.entries(n.scenarios||{}).find(([L,z])=>{var N;return((N=z[s])==null?void 0:N.monthly_cost)===(Se==null?void 0:Se.total_monthly_cost)}))==null?void 0:Y[0])||"standard";try{const L=await Me.post(`${hs}/workflow/terraform`,{workspace_id:e,infraSpec:we,provider:s,profile:p,project_name:t.project_name||"cloudiverse-project",requirements:{}});if(L.data.success){const z=N=>{const k={};for(const[R,G]of Object.entries(N)){const q=R.split("/");let M=k;for(let X=0;X<q.length-1;X++){const ee=q[X];M[ee]||(M[ee]={}),M=M[ee]}M[q[q.length-1]]=G}return k};L.data.terraform.structure==="modular"?(f(z(L.data.terraform.project)),console.log("[TERRAFORM] Hash:",((Z=L.data.terraform_hash)==null?void 0:Z.substring(0,16))+"..."),console.log("[TERRAFORM] Manifest:",L.data.deployment_manifest)):f({"main.tf":L.data.terraform.code}),g(L.data.services||[]),l&&l()}}catch(L){console.warn("Terraform generation failed (non-blocking):",L),console.error("[TERRAFORM ERROR] Full error:",(ce=L.response)==null?void 0:ce.data);const z=((ue=(ge=L.response)==null?void 0:ge.data)==null?void 0:ue.message)||L.message||"",N=((be=(le=L.response)==null?void 0:le.data)==null?void 0:be.details)||"";if(console.error("[TERRAFORM ERROR] Message:",z),console.error("[TERRAFORM ERROR] Details:",N),z.includes("No template for pattern")||z.includes("not available")||z.includes("under construction"))j(!0),console.log("[TERRAFORM UX] Pattern template not available - showing coming soon message");else{const k=`Failed to generate Terraform code: ${z}${N?`
`+N:""}`;y(k)}throw L}}catch(fe){console.error("Terraform generation failed:",fe),y("Failed to generate Terraform code. Please try again.")}finally{u(!1)}};F.useEffect(()=>{C()},[e,t,s,n]);const P=()=>{if(!d)return"";const S=h.split("/");let J=d;for(const Y of S)if(typeof J=="object"&&J[Y])J=J[Y];else return"";return typeof J=="string"?J:""},$=(S,J="")=>{let Y=[];for(const[Z,ce]of Object.entries(S)){const ge=J?`${J}/${Z}`:Z;typeof ce=="string"?Y.push(ge):typeof ce=="object"&&(Y=Y.concat($(ce,ge)))}return Y},te=(S,J="")=>{const Y=[];for(const[Z,ce]of Object.entries(S)){const ge=J?`${J}/${Z}`:Z;typeof ce=="string"?Y.push({path:ge,name:Z,type:"file",depth:ge.split("/").length-1}):typeof ce=="object"&&(Y.push({path:ge,name:Z,type:"folder",depth:ge.split("/").length-1}),Y.push(...te(ce,ge)))}return Y},T=()=>{const S=P();navigator.clipboard.writeText(S),pe.success(`Copied ${h} to clipboard`)},V=async()=>{if(d){A(!0);try{const S=pe.loading("Preparing deployment package..."),J=await Me.get(`${hs}/workflow/export-terraform?provider=${s}&workspaceId=${e}`,{responseType:"blob"}),Z=`${t.project_name||"cloudiverse-project"}-terraform.zip`;pi.saveAs(J.data,Z),pe.success("Downloaded Terraform project with Deployment Guide",{id:S}),setTimeout(async()=>{try{const ce=localStorage.getItem("token"),ge=ce?{Authorization:`Bearer ${ce}`}:{};await Me.put(`${hs}/workspaces/${e}/deploy`,{deployment_method:"self",provider:s},{headers:ge}),console.log("Backend marked as deployed (self).")}catch(ce){console.error("Failed to mark as deployed in backend:",ce)}D(!0),pe.success("Project marked as Self-Deployed")},1e3)}catch(S){console.error("Export failed:",S),pe.error("Failed to download export package",{id:"dl_zip"}),console.warn("Falling back to client-side zip generation...");const J=new id,Y=t.project_name||"cloudiverse-project",Z=(ge,ue)=>{for(const[le,be]of Object.entries(ge))if(typeof be=="string")ue.file(le,be);else if(typeof be=="object"){const fe=ue.folder(le);Z(be,fe)}};Z(d,J),J.file("README.txt",`Generated by Cloudiverse (Client-side Fallback).
Please refer to online documentation for deployment instructions.`);const ce=await J.generateAsync({type:"blob"});pi.saveAs(ce,`${Y}-terraform-fallback.zip`),pe.dismiss(),pe.success("Downloaded backup zip (client-side generated)"),D(!0)}finally{A(!1)}}};if(c)return r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-primary/20"}),r.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full border-4 border-transparent border-t-primary animate-spin"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xl font-semibold text-white",children:"Generating Infrastructure Code"}),r.jsxs("p",{className:"text-gray-400 mt-2",children:["Creating Terraform configuration for ",s,"..."]})]})]});if(w){const S=(t==null?void 0:t.architecture_pattern)||((ne=t==null?void 0:t.service_classes)==null?void 0:ne.pattern_name)||"this pattern";return r.jsx("div",{className:"max-w-4xl mx-auto space-y-6 animate-fade-in pb-20",children:r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-6",children:[r.jsx("div",{className:"text-amber-500 text-6xl material-icons",children:"construction"}),r.jsxs("div",{className:"text-center max-w-2xl",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Terraform Generation Coming Soon"}),r.jsxs("p",{className:"text-gray-300 text-lg mb-2",children:["Terraform generation for ",r.jsx("span",{className:"text-primary font-semibold",children:S})," is not available yet."]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Your architecture and cost estimates are saved and validated. You can continue with manual infrastructure setup or check back later for automated Terraform generation."})]}),r.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6 w-full max-w-2xl",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Your Architecture Summary"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-300",children:"Pattern"}),r.jsx("span",{className:"text-white font-semibold",children:S})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-300",children:"Provider"}),r.jsx("span",{className:"text-white font-semibold",children:s.toUpperCase()})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-300",children:"Services"}),r.jsx("span",{className:"text-white font-semibold",children:((ie=(H=t==null?void 0:t.service_classes)==null?void 0:H.required_services)==null?void 0:ie.length)||0})]})]})]}),r.jsxs("button",{onClick:a,className:"mt-6 px-8 py-3 bg-primary hover:bg-primary/90 rounded-xl text-white font-semibold transition-colors flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons",children:"check_circle"}),r.jsx("span",{children:"Continue to Dashboard"})]})]})})}if(x)return r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-6 animate-fade-in",children:[r.jsx("div",{className:"text-red-500 text-6xl material-icons",children:"error_outline"}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xl font-semibold text-white",children:"Generation Failed"}),r.jsx("p",{className:"text-red-400 mt-2",children:x}),r.jsx("button",{onClick:o,className:"mt-6 px-6 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-colors",children:"Go Back"})]})]});d&&$(d);const b=d?te(d):[],U=P();(S=>{const J=S==null?void 0:S.toLowerCase();return J==="aws"?[{cmd:"terraform init",desc:"Initialize Terraform working directory"},{cmd:"terraform plan",desc:"Generate and show an execution plan"},{cmd:"terraform apply",desc:"Builds or changes infrastructure"}]:J==="azure"?[{cmd:"az login",desc:"Log in to Azure CLI"},{cmd:"terraform init",desc:"Initialize Terraform"},{cmd:"terraform apply",desc:"Deploy infrastructure"}]:J==="gcp"?[{cmd:"gcloud auth application-default login",desc:"Acquire new user credentials"},{cmd:"terraform init",desc:"Initialize Terraform"},{cmd:"terraform apply",desc:"Deploy infrastructure"}]:[]})(s),s==null||s.toLowerCase().replace(/\s+/g,"");const W=v.length>0?v:b.filter(S=>!S.name.endsWith(".tf")&&!S.name.endsWith(".md")&&!S.type==="folder").map(S=>S.name.replace(".tf",""));return W.length>0||d&&typeof d=="object"&&Object.keys(d).filter(S=>S.endsWith(".tf")&&S!=="main.tf"&&S!=="variables.tf"&&S!=="outputs.tf").map(S=>S.replace(".tf","")),r.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 animate-fade-in pb-20",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Infrastructure Code"}),r.jsxs("p",{className:"text-sm text-gray-400",children:["Modular Terraform project for ",s]})]}),r.jsx("div",{className:"flex space-x-3 items-center",children:r.jsxs("div",{className:"flex space-x-3 items-center",children:[E&&r.jsxs("div",{className:"flex items-center space-x-2 bg-green-900/30 border border-green-500/50 px-3 py-1.5 rounded-lg animate-fade-in mr-2",children:[r.jsxs("div",{className:"relative inline-block w-10 mr-1 align-middle select-none transition duration-200 ease-in",children:[r.jsx("input",{type:"checkbox",name:"toggle",id:"toggle",checked:!0,readOnly:!0,className:"toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer translate-x-5 transition-transform duration-200 ease-in bg-green-500 border-green-500"}),r.jsx("label",{htmlFor:"toggle",className:"toggle-label block overflow-hidden h-5 rounded-full bg-green-300 cursor-pointer"})]}),r.jsx("span",{className:"text-xs font-bold text-green-400 uppercase tracking-wider",children:"Self Deployed"})]}),r.jsxs("button",{onClick:T,className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-gray-300 hover:text-white hover:bg-white/10 transition-colors flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons text-sm",children:"content_copy"}),r.jsx("span",{className:"text-sm",children:"Copy File"})]}),r.jsxs("button",{onClick:V,disabled:_,className:"px-4 py-2 bg-primary/10 border border-primary/20 rounded-lg text-primary hover:bg-primary/20 transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[_?r.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-primary/30 border-t-primary animate-spin mr-1"}):r.jsx("span",{className:"material-icons text-sm",children:"download"}),r.jsx("span",{className:"text-sm",children:_?"Downloading...":"Download ZIP"})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{className:"col-span-1 bg-surface border border-border rounded-xl p-4 max-h-[600px] overflow-y-auto",children:[r.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Project Files"}),r.jsx("div",{className:"space-y-1",children:b.map(S=>{const J=S.type==="folder",Y=S.path===h,Z=S.depth*16;return r.jsxs("button",{onClick:()=>!J&&m(S.path),disabled:J,className:`w-full text-left px-2 py-1.5 rounded text-xs font-mono transition-colors flex items-center space-x-2 ${J?"text-amber-400 font-semibold cursor-default":Y?"bg-primary/20 text-primary border border-primary/30":"text-gray-400 hover:text-white hover:bg-white/5"}`,style:{paddingLeft:`${8+Z}px`},children:[r.jsx("span",{className:"material-icons text-xs",children:J?"folder":S.name.endsWith(".tf")?"description":S.name.endsWith(".md")?"article":"insert_drive_file"}),r.jsx("span",{className:"truncate",children:S.name})]},S.path)})})]}),r.jsxs("div",{className:"col-span-3 bg-[#1e1e1e] rounded-xl border border-white/10 overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"flex items-center px-4 py-2 bg-white/5 border-b border-white/5",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500/50"}),r.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500/50"}),r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500/50"})]}),r.jsx("span",{className:"ml-4 text-xs font-mono text-gray-400",children:h})]}),r.jsx("div",{className:"p-4 overflow-x-auto max-h-[550px] overflow-y-auto",children:r.jsx("pre",{className:"font-mono text-sm text-gray-300 leading-relaxed",children:U||"// Select a file to view"})})]})]}),r.jsx("div",{className:"mt-8",children:r.jsx(ad,{provider:s,region:(O=t.region)==null?void 0:O.resolved_region,projectName:t.project_name,onMarkDeployed:async()=>{if(!E)try{const S=pe.loading("Marking as deployed..."),J=localStorage.getItem("token"),Y=J?{Authorization:`Bearer ${J}`}:{};await Me.put(`${hs}/workspaces/${e}/deploy`,{deployment_method:"self",provider:s},{headers:Y}),pe.success("Project marked as Self-Deployed",{id:S}),D(!0),a&&a()}catch(S){console.error(S),pe.error("Failed to mark deployment.")}},isMarkingDeployed:_||E})}),r.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-white/5 mt-8",children:[r.jsxs("button",{onClick:o,className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons",children:"arrow_back"}),r.jsx("span",{children:"Back to Diagram"})]}),r.jsxs("button",{onClick:a,className:"px-8 py-4 bg-primary hover:bg-primary/90 border border-primary/20 rounded-xl text-black font-bold transition-all flex items-center space-x-3",children:[r.jsx("span",{className:"material-icons",children:"summarize"}),r.jsx("span",{children:"View Summary"})]})]})]})},ld=({workspaceId:e,infraSpec:t,costEstimation:s,onNext:n,onBack:a,onRequirementsCaptured:o,isDeployed:i})=>{const[l,c]=F.useState({nfr:{availability:"99.5",latency:"medium",compliance:[],data_residency:"",cost_ceiling_usd:null,security_level:"standard"},region:{primary_region:"india",secondary_region:"",multi_region:!1},data_classes:{},data_retention:{},deployment_strategy:"rolling",downtime_allowed:!0,observability:{logs:!0,metrics:!0,alerts:!1}}),[u,d]=F.useState("region"),f=(x,y)=>{c(w=>({...w,region:{...w.region,[x]:y}}))},h=x=>{c(y=>({...y,deployment_strategy:x}))},m=(x,y)=>{c(w=>({...w,observability:{...w.observability,[x]:y}}))},v=()=>{try{if(!l||Object.keys(l).length===0){console.error("Requirements data is empty");return}o&&o(l),n()}catch(x){console.error("Error in handleSubmit:",x)}},g=[{id:"region",label:"Region",icon:"public"},{id:"data",label:"Data",icon:"database"},{id:"deployment",label:"Deployment",icon:"build"},{id:"observability",label:"Monitoring",icon:"monitoring"}];return r.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in pb-20",children:[r.jsxs("div",{className:"text-center space-y-4 mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-white",children:"System Requirements"}),r.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Configure region, data, deployment, and monitoring settings for your infrastructure."})]}),r.jsx("div",{className:"flex flex-wrap gap-2 border-b border-white/10 pb-4",children:g.map(x=>r.jsxs("button",{onClick:()=>d(x.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center space-x-2 ${u===x.id?"bg-primary/20 text-white border border-primary/30":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[r.jsx("span",{className:"material-icons text-sm",children:x.icon}),r.jsx("span",{children:x.label})]},x.id))}),r.jsxs("fieldset",{disabled:i,className:"bg-surface border border-border rounded-2xl p-6 transition-opacity duration-300 disabled:opacity-60",children:[u==="region"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Region Configuration"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Primary Region"}),r.jsxs("select",{value:l.region.primary_region,onChange:x=>f("primary_region",x.target.value),className:"w-full bg-surface border border-border rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary",children:[r.jsx("option",{value:"us-east-1",children:"US East (N. Virginia)"}),r.jsx("option",{value:"us-west-2",children:"US West (Oregon)"}),r.jsx("option",{value:"eu-west-1",children:"EU (Ireland)"}),r.jsx("option",{value:"eu-central-1",children:"EU (Frankfurt)"}),r.jsx("option",{value:"ap-southeast-1",children:"Asia Pacific (Singapore)"}),r.jsx("option",{value:"ap-northeast-1",children:"Asia Pacific (Tokyo)"}),r.jsx("option",{value:"ca-central-1",children:"Canada (Central)"}),r.jsx("option",{value:"sa-east-1",children:"South America (So Paulo)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Secondary Region (Optional)"}),r.jsxs("select",{value:l.region.secondary_region,onChange:x=>f("secondary_region",x.target.value),className:"w-full bg-surface border border-border rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary",children:[r.jsx("option",{value:"",children:"None"}),r.jsx("option",{value:"us-east-1",children:"US East (N. Virginia)"}),r.jsx("option",{value:"us-west-2",children:"US West (Oregon)"}),r.jsx("option",{value:"eu-west-1",children:"EU (Ireland)"}),r.jsx("option",{value:"eu-central-1",children:"EU (Frankfurt)"}),r.jsx("option",{value:"ap-southeast-1",children:"Asia Pacific (Singapore)"}),r.jsx("option",{value:"ap-northeast-1",children:"Asia Pacific (Tokyo)"}),r.jsx("option",{value:"ca-central-1",children:"Canada (Central)"}),r.jsx("option",{value:"sa-east-1",children:"South America (So Paulo)"})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-surface/50 rounded-xl border border-border",children:[r.jsx("input",{type:"checkbox",id:"multi-region",checked:l.region.multi_region,onChange:x=>f("multi_region",x.target.checked),className:"w-5 h-5 text-primary bg-surface border-border rounded focus:ring-primary"}),r.jsx("label",{htmlFor:"multi-region",className:"text-white",children:"Enable multi-region deployment for high availability"})]}),l.nfr.compliance.includes("GDPR")&&r.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"material-icons text-amber-400 text-sm mt-0.5",children:"info"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-amber-200 mb-1",children:"Data Residency Notice"}),r.jsx("p",{className:"text-sm text-amber-200/80",children:"GDPR compliance requires data to be stored within EU regions. Primary region must be EU-based."})]})]})})]}),u==="data"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Data Classification & Retention"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-white mb-4",children:"Data Classification"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Classify your data types to apply appropriate security measures"}),r.jsx("div",{className:"space-y-4",children:[{type:"user_profiles",label:"User Profiles",desc:"Names, emails, personal preferences, account details"},{type:"payment_data",label:"Payment Data",desc:"Credit cards, billing info, transaction history"},{type:"documents",label:"Documents",desc:"User-uploaded files, images, videos, PDFs"},{type:"logs",label:"System Logs",desc:"Application logs, access logs, error traces"},{type:"analytics",label:"Analytics",desc:"Usage metrics, user behavior, performance data"},{type:"backup",label:"Backup Data",desc:"Backup copies, snapshots, archived data"}].map(x=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface/30 rounded-xl border border-border",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-white",children:x.label}),r.jsx("div",{className:"text-sm text-gray-400",children:x.desc})]}),r.jsxs("select",{value:l.data_classes[x.type]||"",onChange:y=>c(w=>({...w,data_classes:{...w.data_classes,[x.type]:y.target.value}})),className:"bg-surface border border-border rounded-lg px-3 py-2 text-white focus:outline-none focus:border-primary",children:[r.jsx("option",{value:"",children:"Unclassified"}),r.jsx("option",{value:"public",children:"Public"}),r.jsx("option",{value:"internal",children:"Internal"}),r.jsx("option",{value:"confidential",children:"Confidential"}),r.jsx("option",{value:"restricted",children:"Restricted"})]})]},x.type))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-white mb-4",children:"Data Retention"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Define how long different data types should be retained"}),r.jsx("div",{className:"space-y-4",children:[{type:"user_profiles",label:"User Profiles"},{type:"payment_data",label:"Payment Data"},{type:"logs",label:"System Logs"},{type:"analytics",label:"Analytics Data"}].map(x=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface/30 rounded-xl border border-border",children:[r.jsx("div",{children:r.jsx("div",{className:"font-medium text-white",children:x.label})}),r.jsx("input",{type:"text",placeholder:"e.g., 7 years, 90 days",value:l.data_retention[x.type]||"",onChange:y=>c(w=>({...w,data_retention:{...w.data_retention,[x.type]:y.target.value}})),className:"bg-surface border border-border rounded-lg px-3 py-2 text-white focus:outline-none focus:border-primary w-40"})]},x.type))})]})]})]}),u==="deployment"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Deployment Strategy"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-white mb-4",children:"Deployment Strategy"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[{value:"rolling",label:"Rolling",desc:"Instances updated gradually, minimal risk"},{value:"blue-green",label:"Blue/Green",desc:"Zero downtime with instant rollback capability"},{value:"canary",label:"Canary",desc:"Test with small traffic before full rollout"},{value:"batch",label:"Batch",desc:"All instances updated at once, fastest but risky"}].map(x=>r.jsxs("div",{onClick:()=>!i&&h(x.value),className:`p-4 rounded-xl border transition-all ${i?"cursor-not-allowed opacity-60":"cursor-pointer"} ${l.deployment_strategy===x.value?"border-primary bg-primary/10 text-white":"border-white/10 text-gray-400 hover:border-white/20 hover:bg-white/5"}`,children:[r.jsx("div",{className:"font-medium",children:x.label}),r.jsx("div",{className:"text-xs opacity-70 mt-1",children:x.desc})]},x.value))})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-surface/50 rounded-xl border border-border",children:[r.jsx("input",{type:"checkbox",id:"downtime-allowed",checked:l.downtime_allowed,onChange:x=>c(y=>({...y,downtime_allowed:x.target.checked})),className:"w-5 h-5 text-primary bg-surface border-border rounded focus:ring-primary"}),r.jsx("label",{htmlFor:"downtime-allowed",className:"text-white",children:"Downtime is allowed during deployment"})]}),r.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"material-icons text-blue-400 text-sm mt-0.5",children:"info"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-blue-200 mb-1",children:"Strategy Recommendations"}),r.jsxs("p",{className:"text-sm text-blue-200/80",children:[" High availability systems: Blue/Green or Canary",r.jsx("br",{})," Development systems: Rolling",r.jsx("br",{})," Batch: Only for non-critical systems"]})]})]})})]})]}),u==="observability"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Observability & Monitoring"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface/30 rounded-xl border border-border",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-white",children:"Application Logging"}),r.jsx("div",{className:"text-sm text-gray-400",children:"Capture application and system logs"})]}),r.jsxs("div",{className:"relative inline-block w-12 h-6",children:[r.jsx("input",{type:"checkbox",checked:l.observability.logs,onChange:x=>m("logs",x.target.checked),className:"sr-only",id:"logs-toggle"}),r.jsx("label",{htmlFor:"logs-toggle",className:`block w-12 h-6 rounded-full cursor-pointer transition-colors ${l.observability.logs?"bg-primary":"bg-gray-600"}`,children:r.jsx("span",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${l.observability.logs?"transform translate-x-6":""}`})})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface/30 rounded-xl border border-border",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-white",children:"Infrastructure Metrics"}),r.jsx("div",{className:"text-sm text-gray-400",children:"Monitor CPU, memory, disk, and network"})]}),r.jsxs("div",{className:"relative inline-block w-12 h-6",children:[r.jsx("input",{type:"checkbox",checked:l.observability.metrics,onChange:x=>m("metrics",x.target.checked),className:"sr-only",id:"metrics-toggle"}),r.jsx("label",{htmlFor:"metrics-toggle",className:`block w-12 h-6 rounded-full cursor-pointer transition-colors ${l.observability.metrics?"bg-primary":"bg-gray-600"}`,children:r.jsx("span",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${l.observability.metrics?"transform translate-x-6":""}`})})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface/30 rounded-xl border border-border",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-white",children:"Alerting System"}),r.jsx("div",{className:"text-sm text-gray-400",children:"Get notified of issues and anomalies"})]}),r.jsxs("div",{className:"relative inline-block w-12 h-6",children:[r.jsx("input",{type:"checkbox",checked:l.observability.alerts,onChange:x=>m("alerts",x.target.checked),className:"sr-only",id:"alerts-toggle"}),r.jsx("label",{htmlFor:"alerts-toggle",className:`block w-12 h-6 rounded-full cursor-pointer transition-colors ${l.observability.alerts?"bg-primary":"bg-gray-600"}`,children:r.jsx("span",{className:`absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${l.observability.alerts?"transform translate-x-6":""}`})})]})]})]}),r.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/20 rounded-xl",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"material-icons text-green-400 text-sm mt-0.5",children:"info"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-green-200 mb-1",children:"Observability Benefits"}),r.jsx("p",{className:"text-sm text-green-200/80",children:"Monitoring and logging are essential for production systems. They help identify issues before they impact users."})]})]})})]})]}),!i&&r.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-white/5",children:[r.jsxs("button",{onClick:a,className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons",children:"arrow_back"}),r.jsx("span",{children:"Back"})]}),r.jsxs("button",{onClick:v,className:"px-8 py-4 bg-gradient-to-r from-primary to-purple-500 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-primary/20",children:[r.jsx("span",{children:"Continue to Architecture"}),r.jsx("span",{className:"material-icons",children:"arrow_forward"})]})]})]})},Ir=F.createContext({});function Fr(e){const t=F.useRef(null);return t.current===null&&(t.current=e()),t.current}const Xa=typeof window<"u",Ja=Xa?F.useLayoutEffect:F.useEffect,Is=F.createContext(null);function Mr(e,t){e.indexOf(t)===-1&&e.push(t)}function zr(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}const st=(e,t,s)=>s>t?t:s<e?e:s;let Or=()=>{};const lt={},Qa=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function eo(e){return typeof e=="object"&&e!==null}const to=e=>/^0[^.\s]+$/u.test(e);function Br(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ke=e=>e,cd=(e,t)=>s=>t(e(s)),es=(...e)=>e.reduce(cd),qt=(e,t,s)=>{const n=t-e;return n===0?1:(s-e)/n};class Lr{constructor(){this.subscriptions=[]}add(t){return Mr(this.subscriptions,t),()=>zr(this.subscriptions,t)}notify(t,s,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,s,n);else for(let o=0;o<a;o++){const i=this.subscriptions[o];i&&i(t,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const at=e=>e*1e3,qe=e=>e/1e3;function so(e,t){return t?e*(1e3/t):0}const ro=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,dd=1e-7,ud=12;function hd(e,t,s,n,a){let o,i,l=0;do i=t+(s-t)/2,o=ro(i,n,a)-e,o>0?s=i:t=i;while(Math.abs(o)>dd&&++l<ud);return i}function ts(e,t,s,n){if(e===t&&s===n)return Ke;const a=o=>hd(o,0,1,e,s);return o=>o===0||o===1?o:ro(a(o),t,n)}const no=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,io=e=>t=>1-e(1-t),ao=ts(.33,1.53,.69,.99),Vr=io(ao),oo=no(Vr),lo=e=>(e*=2)<1?.5*Vr(e):.5*(2-Math.pow(2,-10*(e-1))),$r=e=>1-Math.sin(Math.acos(e)),co=io($r),uo=no($r),fd=ts(.42,0,1,1),md=ts(0,0,.58,1),ho=ts(.42,0,.58,1),pd=e=>Array.isArray(e)&&typeof e[0]!="number",fo=e=>Array.isArray(e)&&typeof e[0]=="number",gd={linear:Ke,easeIn:fd,easeInOut:ho,easeOut:md,circIn:$r,circInOut:uo,circOut:co,backIn:Vr,backInOut:oo,backOut:ao,anticipate:lo},xd=e=>typeof e=="string",gi=e=>{if(fo(e)){Or(e.length===4);const[t,s,n,a]=e;return ts(t,s,n,a)}else if(xd(e))return gd[e];return e},fs=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function yd(e,t){let s=new Set,n=new Set,a=!1,o=!1;const i=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){i.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,f=!1,h=!1)=>{const v=h&&a?s:n;return f&&i.add(d),v.has(d)||v.add(d),d},cancel:d=>{n.delete(d),i.delete(d)},process:d=>{if(l=d,a){o=!0;return}a=!0,[s,n]=[n,s],s.forEach(c),s.clear(),a=!1,o&&(o=!1,u.process(d))}};return u}const bd=40;function mo(e,t){let s=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>s=!0,i=fs.reduce((j,_)=>(j[_]=yd(o),j),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:f,preRender:h,render:m,postRender:v}=i,g=()=>{const j=lt.useManualTiming?a.timestamp:performance.now();s=!1,lt.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(j-a.timestamp,bd),1)),a.timestamp=j,a.isProcessing=!0,l.process(a),c.process(a),u.process(a),d.process(a),f.process(a),h.process(a),m.process(a),v.process(a),a.isProcessing=!1,s&&t&&(n=!1,e(g))},x=()=>{s=!0,n=!0,a.isProcessing||e(g)};return{schedule:fs.reduce((j,_)=>{const A=i[_];return j[_]=(E,D=!1,C=!1)=>(s||x(),A.schedule(E,D,C)),j},{}),cancel:j=>{for(let _=0;_<fs.length;_++)i[fs[_]].cancel(j)},state:a,steps:i}}const{schedule:_e,cancel:xt,state:Ie,steps:Ls}=mo(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ke,!0);let ys;function vd(){ys=void 0}const Oe={now:()=>(ys===void 0&&Oe.set(Ie.isProcessing||lt.useManualTiming?Ie.timestamp:performance.now()),ys),set:e=>{ys=e,queueMicrotask(vd)}},po=e=>t=>typeof t=="string"&&t.startsWith(e),go=po("--"),wd=po("var(--"),Ur=e=>wd(e)?jd.test(e.split("/*")[0].trim()):!1,jd=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function xi(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const zt={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Kt={...zt,transform:e=>st(0,1,e)},ms={...zt,default:1},Wt=e=>Math.round(e*1e5)/1e5,Wr=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _d(e){return e==null}const kd=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Gr=(e,t)=>s=>!!(typeof s=="string"&&kd.test(s)&&s.startsWith(e)||t&&!_d(s)&&Object.prototype.hasOwnProperty.call(s,t)),xo=(e,t,s)=>n=>{if(typeof n!="string")return n;const[a,o,i,l]=n.match(Wr);return{[e]:parseFloat(a),[t]:parseFloat(o),[s]:parseFloat(i),alpha:l!==void 0?parseFloat(l):1}},Nd=e=>st(0,255,e),Vs={...zt,transform:e=>Math.round(Nd(e))},kt={test:Gr("rgb","red"),parse:xo("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:n=1})=>"rgba("+Vs.transform(e)+", "+Vs.transform(t)+", "+Vs.transform(s)+", "+Wt(Kt.transform(n))+")"};function Sd(e){let t="",s="",n="",a="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,s+=s,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const lr={test:Gr("#"),parse:Sd,transform:kt.transform},ss=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ft=ss("deg"),tt=ss("%"),se=ss("px"),Cd=ss("vh"),Ad=ss("vw"),yi={...tt,parse:e=>tt.parse(e)/100,transform:e=>tt.transform(e*100)},Rt={test:Gr("hsl","hue"),parse:xo("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:n=1})=>"hsla("+Math.round(e)+", "+tt.transform(Wt(t))+", "+tt.transform(Wt(s))+", "+Wt(Kt.transform(n))+")"},Te={test:e=>kt.test(e)||lr.test(e)||Rt.test(e),parse:e=>kt.test(e)?kt.parse(e):Rt.test(e)?Rt.parse(e):lr.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?kt.transform(e):Rt.transform(e),getAnimatableNone:e=>{const t=Te.parse(e);return t.alpha=0,Te.transform(t)}},Td=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ed(e){var t,s;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Wr))==null?void 0:t.length)||0)+(((s=e.match(Td))==null?void 0:s.length)||0)>0}const yo="number",bo="color",Rd="var",Pd="var(",bi="${}",Dd=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Yt(e){const t=e.toString(),s=[],n={color:[],number:[],var:[]},a=[];let o=0;const l=t.replace(Dd,c=>(Te.test(c)?(n.color.push(o),a.push(bo),s.push(Te.parse(c))):c.startsWith(Pd)?(n.var.push(o),a.push(Rd),s.push(c)):(n.number.push(o),a.push(yo),s.push(parseFloat(c))),++o,bi)).split(bi);return{values:s,split:l,indexes:n,types:a}}function vo(e){return Yt(e).values}function wo(e){const{split:t,types:s}=Yt(e),n=t.length;return a=>{let o="";for(let i=0;i<n;i++)if(o+=t[i],a[i]!==void 0){const l=s[i];l===yo?o+=Wt(a[i]):l===bo?o+=Te.transform(a[i]):o+=a[i]}return o}}const Id=e=>typeof e=="number"?0:Te.test(e)?Te.getAnimatableNone(e):e;function Fd(e){const t=vo(e);return wo(e)(t.map(Id))}const yt={test:Ed,parse:vo,createTransformer:wo,getAnimatableNone:Fd};function $s(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function Md({hue:e,saturation:t,lightness:s,alpha:n}){e/=360,t/=100,s/=100;let a=0,o=0,i=0;if(!t)a=o=i=s;else{const l=s<.5?s*(1+t):s+t-s*t,c=2*s-l;a=$s(c,l,e+1/3),o=$s(c,l,e),i=$s(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:n}}function _s(e,t){return s=>s>0?t:e}const Ne=(e,t,s)=>e+(t-e)*s,Us=(e,t,s)=>{const n=e*e,a=s*(t*t-n)+n;return a<0?0:Math.sqrt(a)},zd=[lr,kt,Rt],Od=e=>zd.find(t=>t.test(e));function vi(e){const t=Od(e);if(!t)return!1;let s=t.parse(e);return t===Rt&&(s=Md(s)),s}const wi=(e,t)=>{const s=vi(e),n=vi(t);if(!s||!n)return _s(e,t);const a={...s};return o=>(a.red=Us(s.red,n.red,o),a.green=Us(s.green,n.green,o),a.blue=Us(s.blue,n.blue,o),a.alpha=Ne(s.alpha,n.alpha,o),kt.transform(a))},cr=new Set(["none","hidden"]);function Bd(e,t){return cr.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function Ld(e,t){return s=>Ne(e,t,s)}function Hr(e){return typeof e=="number"?Ld:typeof e=="string"?Ur(e)?_s:Te.test(e)?wi:Ud:Array.isArray(e)?jo:typeof e=="object"?Te.test(e)?wi:Vd:_s}function jo(e,t){const s=[...e],n=s.length,a=e.map((o,i)=>Hr(o)(o,t[i]));return o=>{for(let i=0;i<n;i++)s[i]=a[i](o);return s}}function Vd(e,t){const s={...e,...t},n={};for(const a in s)e[a]!==void 0&&t[a]!==void 0&&(n[a]=Hr(e[a])(e[a],t[a]));return a=>{for(const o in n)s[o]=n[o](a);return s}}function $d(e,t){const s=[],n={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const o=t.types[a],i=e.indexes[o][n[o]],l=e.values[i]??0;s[a]=l,n[o]++}return s}const Ud=(e,t)=>{const s=yt.createTransformer(t),n=Yt(e),a=Yt(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?cr.has(e)&&!a.values.length||cr.has(t)&&!n.values.length?Bd(e,t):es(jo($d(n,a),a.values),s):_s(e,t)};function _o(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?Ne(e,t,s):Hr(e)(e,t)}const Wd=e=>{const t=({timestamp:s})=>e(s);return{start:(s=!0)=>_e.update(t,s),stop:()=>xt(t),now:()=>Ie.isProcessing?Ie.timestamp:Oe.now()}},ko=(e,t,s=10)=>{let n="";const a=Math.max(Math.round(t/s),2);for(let o=0;o<a;o++)n+=Math.round(e(o/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},ks=2e4;function Zr(e){let t=0;const s=50;let n=e.next(t);for(;!n.done&&t<ks;)t+=s,n=e.next(t);return t>=ks?1/0:t}function Gd(e,t=100,s){const n=s({...e,keyframes:[0,t]}),a=Math.min(Zr(n),ks);return{type:"keyframes",ease:o=>n.next(a*o).value/t,duration:qe(a)}}const Hd=5;function No(e,t,s){const n=Math.max(t-Hd,0);return so(s-e(n),t-n)}const Ce={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ws=.001;function Zd({duration:e=Ce.duration,bounce:t=Ce.bounce,velocity:s=Ce.velocity,mass:n=Ce.mass}){let a,o,i=1-t;i=st(Ce.minDamping,Ce.maxDamping,i),e=st(Ce.minDuration,Ce.maxDuration,qe(e)),i<1?(a=u=>{const d=u*i,f=d*e,h=d-s,m=dr(u,i),v=Math.exp(-f);return Ws-h/m*v},o=u=>{const f=u*i*e,h=f*s+s,m=Math.pow(i,2)*Math.pow(u,2)*e,v=Math.exp(-f),g=dr(Math.pow(u,2),i);return(-a(u)+Ws>0?-1:1)*((h-m)*v)/g}):(a=u=>{const d=Math.exp(-u*e),f=(u-s)*e+1;return-Ws+d*f},o=u=>{const d=Math.exp(-u*e),f=(s-u)*(e*e);return d*f});const l=5/e,c=Kd(a,o,l);if(e=at(e),isNaN(c))return{stiffness:Ce.stiffness,damping:Ce.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:i*2*Math.sqrt(n*u),duration:e}}}const qd=12;function Kd(e,t,s){let n=s;for(let a=1;a<qd;a++)n=n-e(n)/t(n);return n}function dr(e,t){return e*Math.sqrt(1-t*t)}const Yd=["duration","bounce"],Xd=["stiffness","damping","mass"];function ji(e,t){return t.some(s=>e[s]!==void 0)}function Jd(e){let t={velocity:Ce.velocity,stiffness:Ce.stiffness,damping:Ce.damping,mass:Ce.mass,isResolvedFromDuration:!1,...e};if(!ji(e,Xd)&&ji(e,Yd))if(e.visualDuration){const s=e.visualDuration,n=2*Math.PI/(s*1.2),a=n*n,o=2*st(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Ce.mass,stiffness:a,damping:o}}else{const s=Zd(e);t={...t,...s,mass:Ce.mass},t.isResolvedFromDuration=!0}return t}function Ns(e=Ce.visualDuration,t=Ce.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:a}=s;const o=s.keyframes[0],i=s.keyframes[s.keyframes.length-1],l={done:!1,value:o},{stiffness:c,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:m}=Jd({...s,velocity:-qe(s.velocity||0)}),v=h||0,g=u/(2*Math.sqrt(c*d)),x=i-o,y=qe(Math.sqrt(c/d)),w=Math.abs(x)<5;n||(n=w?Ce.restSpeed.granular:Ce.restSpeed.default),a||(a=w?Ce.restDelta.granular:Ce.restDelta.default);let j;if(g<1){const A=dr(y,g);j=E=>{const D=Math.exp(-g*y*E);return i-D*((v+g*y*x)/A*Math.sin(A*E)+x*Math.cos(A*E))}}else if(g===1)j=A=>i-Math.exp(-y*A)*(x+(v+y*x)*A);else{const A=y*Math.sqrt(g*g-1);j=E=>{const D=Math.exp(-g*y*E),C=Math.min(A*E,300);return i-D*((v+g*y*x)*Math.sinh(C)+A*x*Math.cosh(C))/A}}const _={calculatedDuration:m&&f||null,next:A=>{const E=j(A);if(m)l.done=A>=f;else{let D=A===0?v:0;g<1&&(D=A===0?at(v):No(j,A,E));const C=Math.abs(D)<=n,P=Math.abs(i-E)<=a;l.done=C&&P}return l.value=l.done?i:E,l},toString:()=>{const A=Math.min(Zr(_),ks),E=ko(D=>_.next(A*D).value,A,30);return A+"ms "+E},toTransition:()=>{}};return _}Ns.applyToOptions=e=>{const t=Gd(e,100,Ns);return e.ease=t.ease,e.duration=at(t.duration),e.type="keyframes",e};function ur({keyframes:e,velocity:t=0,power:s=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:i,min:l,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},m=C=>l!==void 0&&C<l||c!==void 0&&C>c,v=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let g=s*t;const x=f+g,y=i===void 0?x:i(x);y!==x&&(g=y-f);const w=C=>-g*Math.exp(-C/n),j=C=>y+w(C),_=C=>{const P=w(C),$=j(C);h.done=Math.abs(P)<=u,h.value=h.done?y:$};let A,E;const D=C=>{m(h.value)&&(A=C,E=Ns({keyframes:[h.value,v(h.value)],velocity:No(j,C,h.value),damping:a,stiffness:o,restDelta:u,restSpeed:d}))};return D(0),{calculatedDuration:null,next:C=>{let P=!1;return!E&&A===void 0&&(P=!0,_(C),D(C)),A!==void 0&&C>=A?E.next(C-A):(!P&&_(C),h)}}}function Qd(e,t,s){const n=[],a=s||lt.mix||_o,o=e.length-1;for(let i=0;i<o;i++){let l=a(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||Ke:t;l=es(c,l)}n.push(l)}return n}function eu(e,t,{clamp:s=!0,ease:n,mixer:a}={}){const o=e.length;if(Or(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=Qd(t,n,a),c=l.length,u=d=>{if(i&&d<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const h=qt(e[f],e[f+1],d);return l[f](h)};return s?d=>u(st(e[0],e[o-1],d)):u}function tu(e,t){const s=e[e.length-1];for(let n=1;n<=t;n++){const a=qt(0,t,n);e.push(Ne(s,1,a))}}function su(e){const t=[0];return tu(t,e.length-1),t}function ru(e,t){return e.map(s=>s*t)}function nu(e,t){return e.map(()=>t||ho).splice(0,e.length-1)}function Gt({duration:e=300,keyframes:t,times:s,ease:n="easeInOut"}){const a=pd(n)?n.map(gi):gi(n),o={done:!1,value:t[0]},i=ru(s&&s.length===t.length?s:su(t),e),l=eu(i,t,{ease:Array.isArray(a)?a:nu(t,a)});return{calculatedDuration:e,next:c=>(o.value=l(c),o.done=c>=e,o)}}const iu=e=>e!==null;function qr(e,{repeat:t,repeatType:s="loop"},n,a=1){const o=e.filter(iu),l=a<0||t&&s!=="loop"&&t%2===1?0:o.length-1;return!l||n===void 0?o[l]:n}const au={decay:ur,inertia:ur,tween:Gt,keyframes:Gt,spring:Ns};function So(e){typeof e.type=="string"&&(e.type=au[e.type])}class Kr{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const ou=e=>e/100;class Yr extends Kr{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,a;const{motionValue:s}=this.options;s&&s.updatedAt!==Oe.now()&&this.tick(Oe.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(n=this.options).onStop)==null||a.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;So(t);const{type:s=Gt,repeat:n=0,repeatDelay:a=0,repeatType:o,velocity:i=0}=t;let{keyframes:l}=t;const c=s||Gt;c!==Gt&&typeof l[0]!="number"&&(this.mixKeyframes=es(ou,_o(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});o==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=Zr(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=u}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:n,totalDuration:a,mixKeyframes:o,mirroredGenerator:i,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:h,repeatDelay:m,type:v,onUpdate:g,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?y<0:y>a;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let j=this.currentTime,_=n;if(f){const C=Math.min(this.currentTime,a)/l;let P=Math.floor(C),$=C%1;!$&&C>=1&&($=1),$===1&&P--,P=Math.min(P,f+1),!!(P%2)&&(h==="reverse"?($=1-$,m&&($-=m/l)):h==="mirror"&&(_=i)),j=st(0,1,$)*l}const A=w?{done:!1,value:d[0]}:_.next(j);o&&(A.value=o(A.value));let{done:E}=A;!w&&c!==null&&(E=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return D&&v!==ur&&(A.value=qr(d,this.options,x,this.speed)),g&&g(A.value),D&&this.finish(),A}then(t,s){return this.finished.then(t,s)}get duration(){return qe(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+qe(t)}get time(){return qe(this.currentTime)}set time(t){var s;t=at(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Oe.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=qe(this.currentTime))}play(){var a,o;if(this.isStopped)return;const{driver:t=Wd,startTime:s}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),(o=(a=this.options).onPlay)==null||o.call(a);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=s??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Oe.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(t=this.options).onComplete)==null||s.call(t)}cancel(){var t,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(t=this.options).onCancel)==null||s.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),t.observe(this)}}function lu(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Nt=e=>e*180/Math.PI,hr=e=>{const t=Nt(Math.atan2(e[1],e[0]));return fr(t)},cu={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:hr,rotateZ:hr,skewX:e=>Nt(Math.atan(e[1])),skewY:e=>Nt(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},fr=e=>(e=e%360,e<0&&(e+=360),e),_i=hr,ki=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Ni=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),du={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ki,scaleY:Ni,scale:e=>(ki(e)+Ni(e))/2,rotateX:e=>fr(Nt(Math.atan2(e[6],e[5]))),rotateY:e=>fr(Nt(Math.atan2(-e[2],e[0]))),rotateZ:_i,rotate:_i,skewX:e=>Nt(Math.atan(e[4])),skewY:e=>Nt(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function mr(e){return e.includes("scale")?1:0}function pr(e,t){if(!e||e==="none")return mr(t);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(s)n=du,a=s;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=cu,a=l}if(!a)return mr(t);const o=n[t],i=a[1].split(",").map(hu);return typeof o=="function"?o(i):i[o]}const uu=(e,t)=>{const{transform:s="none"}=getComputedStyle(e);return pr(s,t)};function hu(e){return parseFloat(e.trim())}const Ot=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bt=new Set(Ot),Si=e=>e===zt||e===se,fu=new Set(["x","y","z"]),mu=Ot.filter(e=>!fu.has(e));function pu(e){const t=[];return mu.forEach(s=>{const n=e.getValue(s);n!==void 0&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t}const pt={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>pr(t,"x"),y:(e,{transform:t})=>pr(t,"y")};pt.translateX=pt.x;pt.translateY=pt.y;const St=new Set;let gr=!1,xr=!1,yr=!1;function Co(){if(xr){const e=Array.from(St).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),s=new Map;t.forEach(n=>{const a=pu(n);a.length&&(s.set(n,a),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=s.get(n);a&&a.forEach(([o,i])=>{var l;(l=n.getValue(o))==null||l.set(i)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}xr=!1,gr=!1,St.forEach(e=>e.complete(yr)),St.clear()}function Ao(){St.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(xr=!0)})}function gu(){yr=!0,Ao(),Co(),yr=!1}class Xr{constructor(t,s,n,a,o,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=n,this.motionValue=a,this.element=o,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(St.add(this),gr||(gr=!0,_e.read(Ao),_e.resolveKeyframes(Co))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:n,motionValue:a}=this;if(t[0]===null){const o=a==null?void 0:a.get(),i=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&s){const l=n.readValue(s,i);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=i),a&&o===void 0&&a.set(t[0])}lu(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),St.delete(this)}cancel(){this.state==="scheduled"&&(St.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const xu=e=>e.startsWith("--");function yu(e,t,s){xu(t)?e.style.setProperty(t,s):e.style[t]=s}const bu=Br(()=>window.ScrollTimeline!==void 0),vu={};function wu(e,t){const s=Br(e);return()=>vu[t]??s()}const To=wu(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$t=([e,t,s,n])=>`cubic-bezier(${e}, ${t}, ${s}, ${n})`,Ci={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$t([0,.65,.55,1]),circOut:$t([.55,0,1,.45]),backIn:$t([.31,.01,.66,-.59]),backOut:$t([.33,1.53,.69,.99])};function Eo(e,t){if(e)return typeof e=="function"?To()?ko(e,t):"ease-out":fo(e)?$t(e):Array.isArray(e)?e.map(s=>Eo(s,t)||Ci.easeOut):Ci[e]}function ju(e,t,s,{delay:n=0,duration:a=300,repeat:o=0,repeatType:i="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:s};c&&(d.offset=c);const f=Eo(l,a);Array.isArray(f)&&(d.easing=f);const h={delay:n,duration:a,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:i==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(d,h)}function Ro(e){return typeof e=="function"&&"applyToOptions"in e}function _u({type:e,...t}){return Ro(e)&&To()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class ku extends Kr{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:s,name:n,keyframes:a,pseudoElement:o,allowFlatten:i=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!o,this.allowFlatten=i,this.options=t,Or(typeof t.type!="string");const u=_u(t);this.animation=ju(s,n,a,u,o),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const d=qr(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):yu(s,n,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,s;(s=(t=this.animation).finish)==null||s.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,s;this.isPseudoElement||(s=(t=this.animation).commitStyles)==null||s.call(t)}get duration(){var s,n;const t=((n=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:n.call(s).duration)||0;return qe(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+qe(t)}get time(){return qe(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=at(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&bu()?(this.animation.timeline=t,Ke):s(this)}}const Po={anticipate:lo,backInOut:oo,circInOut:uo};function Nu(e){return e in Po}function Su(e){typeof e.ease=="string"&&Nu(e.ease)&&(e.ease=Po[e.ease])}const Gs=10;class Cu extends ku{constructor(t){Su(t),So(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:n,onComplete:a,element:o,...i}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const l=new Yr({...i,autoplay:!1}),c=Math.max(Gs,Oe.now()-this.startTime),u=st(0,Gs,c-Gs);s.setWithVelocity(l.sample(Math.max(0,c-u)).value,l.sample(c).value,u),l.stop()}}const Ai=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(yt.test(e)||e==="0")&&!e.startsWith("url("));function Au(e){const t=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}function Tu(e,t,s,n){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],i=Ai(a,t),l=Ai(o,t);return!i||!l?!1:Au(e)||(s==="spring"||Ro(s))&&n}function br(e){e.duration=0,e.type="keyframes"}const Eu=new Set(["opacity","clipPath","filter","transform"]),Ru=Br(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Pu(e){var d;const{motionValue:t,name:s,repeatDelay:n,repeatType:a,damping:o,type:i}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return Ru()&&s&&Eu.has(s)&&(s!=="transform"||!u)&&!c&&!n&&a!=="mirror"&&o!==0&&i!=="inertia"}const Du=40;class Iu extends Kr{constructor({autoplay:t=!0,delay:s=0,type:n="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:i="loop",keyframes:l,name:c,motionValue:u,element:d,...f}){var v;super(),this.stop=()=>{var g,x;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Oe.now();const h={autoplay:t,delay:s,type:n,repeat:a,repeatDelay:o,repeatType:i,name:c,motionValue:u,element:d,...f},m=(d==null?void 0:d.KeyframeResolver)||Xr;this.keyframeResolver=new m(l,(g,x,y)=>this.onKeyframesResolved(g,x,h,!y),c,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,s,n,a){var x,y;this.keyframeResolver=void 0;const{name:o,type:i,velocity:l,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=Oe.now(),Tu(t,o,i,l)||((lt.instantAnimations||!c)&&(d==null||d(qr(t,n,s))),t[0]=t[t.length-1],br(n),n.repeat=0);const h={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>Du?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...n,keyframes:t},m=!u&&Pu(h),v=(y=(x=h.motionValue)==null?void 0:x.owner)==null?void 0:y.current,g=m?new Cu({...h,element:v}):new Yr(h);g.finished.then(()=>{this.notifyFinished()}).catch(Ke),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),gu()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}function Do(e,t,s,n=0,a=1){const o=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),i=e.size,l=(i-1)*n;return typeof s=="function"?s(o,i):a===1?o*n:l-o*n}const Fu=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Mu(e){const t=Fu.exec(e);if(!t)return[,];const[,s,n,a]=t;return[`--${s??n}`,a]}function Io(e,t,s=1){const[n,a]=Mu(e);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const i=o.trim();return Qa(i)?parseFloat(i):i}return Ur(a)?Io(a,t,s+1):a}const zu={type:"spring",stiffness:500,damping:25,restSpeed:10},Ou=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Bu={type:"keyframes",duration:.8},Lu={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Vu=(e,{keyframes:t})=>t.length>2?Bu:Bt.has(e)?e.startsWith("scale")?Ou(t[1]):zu:Lu,$u=e=>e!==null;function Uu(e,{repeat:t,repeatType:s="loop"},n){const a=e.filter($u),o=t&&s!=="loop"&&t%2===1?0:a.length-1;return a[o]}function Jr(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}function Wu({when:e,delay:t,delayChildren:s,staggerChildren:n,staggerDirection:a,repeat:o,repeatType:i,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Qr=(e,t,s,n={},a,o)=>i=>{const l=Jr(n,e)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-at(c);const d={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:h=>{t.set(h),l.onUpdate&&l.onUpdate(h)},onComplete:()=>{i(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:o?void 0:a};Wu(l)||Object.assign(d,Vu(e,d)),d.duration&&(d.duration=at(d.duration)),d.repeatDelay&&(d.repeatDelay=at(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(br(d),d.delay===0&&(f=!0)),(lt.instantAnimations||lt.skipAnimations)&&(f=!0,br(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,f&&!o&&t.get()!==void 0){const h=Uu(d.keyframes,l);if(h!==void 0){_e.update(()=>{d.onUpdate(h),d.onComplete()});return}}return l.isSync?new Yr(d):new Iu(d)};function Ti(e){const t=[{},{}];return e==null||e.values.forEach((s,n)=>{t[0][n]=s.get(),t[1][n]=s.getVelocity()}),t}function en(e,t,s,n){if(typeof t=="function"){const[a,o]=Ti(n);t=t(s!==void 0?s:e.custom,a,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,o]=Ti(n);t=t(s!==void 0?s:e.custom,a,o)}return t}function Ft(e,t,s){const n=e.getProps();return en(n,t,s!==void 0?s:n.custom,e)}const Fo=new Set(["width","height","top","left","right","bottom",...Ot]),Ei=30,Gu=e=>!isNaN(parseFloat(e));class Hu{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var o;const a=Oe.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=Oe.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Gu(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new Lr);const n=this.events[t].add(s);return t==="change"?()=>{n(),_e.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Oe.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Ei)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Ei);return so(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,s;(t=this.dependents)==null||t.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mt(e,t){return new Hu(e,t)}const vr=e=>Array.isArray(e);function Zu(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,Mt(s))}function qu(e){return vr(e)?e[e.length-1]||0:e}function Ku(e,t){const s=Ft(e,t);let{transitionEnd:n={},transition:a={},...o}=s||{};o={...o,...n};for(const i in o){const l=qu(o[i]);Zu(e,i,l)}}const ze=e=>!!(e&&e.getVelocity);function Yu(e){return!!(ze(e)&&e.add)}function wr(e,t){const s=e.getValue("willChange");if(Yu(s))return s.add(t);if(!s&&lt.WillChange){const n=new lt.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function tn(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const Xu="framerAppearId",Mo="data-"+tn(Xu);function zo(e){return e.props[Mo]}function Ju({protectedKeys:e,needsAnimating:t},s){const n=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,n}function Oo(e,t,{delay:s=0,transitionOverride:n,type:a}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:i,...l}=t;n&&(o=n);const c=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const d in l){const f=e.getValue(d,e.latestValues[d]??null),h=l[d];if(h===void 0||u&&Ju(u,d))continue;const m={delay:s,...Jr(o||{},d)},v=f.get();if(v!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===v&&!m.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const y=zo(e);if(y){const w=window.MotionHandoffAnimation(y,d,_e);w!==null&&(m.startTime=w,g=!0)}}wr(e,d),f.start(Qr(d,f,h,e.shouldReduceMotion&&Fo.has(d)?{type:!1}:m,e,g));const x=f.animation;x&&c.push(x)}return i&&Promise.all(c).then(()=>{_e.update(()=>{i&&Ku(e,i)})}),c}function jr(e,t,s={}){var c;const n=Ft(e,t,s.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(a=s.transitionOverride);const o=n?()=>Promise.all(Oo(e,n,s)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:h}=a;return Qu(e,t,u,d,f,h,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,d]=l==="beforeChildren"?[o,i]:[i,o];return u().then(()=>d())}else return Promise.all([o(),i(s.delay)])}function Qu(e,t,s=0,n=0,a=0,o=1,i){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(jr(c,t,{...i,delay:s+(typeof n=="function"?0:n)+Do(e.variantChildren,c,n,a,o)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function eh(e,t,s={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(o=>jr(e,o,s));n=Promise.all(a)}else if(typeof t=="string")n=jr(e,t,s);else{const a=typeof t=="function"?Ft(e,t,s.custom):t;n=Promise.all(Oo(e,a,s))}return n.then(()=>{e.notify("AnimationComplete",t)})}const th={test:e=>e==="auto",parse:e=>e},Bo=e=>t=>t.test(e),Lo=[zt,se,tt,ft,Ad,Cd,th],Ri=e=>Lo.find(Bo(e));function sh(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||to(e):!0}const rh=new Set(["brightness","contrast","saturate","opacity"]);function nh(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=s.match(Wr)||[];if(!n)return e;const a=s.replace(n,"");let o=rh.has(t)?1:0;return n!==s&&(o*=100),t+"("+o+a+")"}const ih=/\b([a-z-]*)\(.*?\)/gu,_r={...yt,getAnimatableNone:e=>{const t=e.match(ih);return t?t.map(nh).join(" "):e}},Pi={...zt,transform:Math.round},ah={rotate:ft,rotateX:ft,rotateY:ft,rotateZ:ft,scale:ms,scaleX:ms,scaleY:ms,scaleZ:ms,skew:ft,skewX:ft,skewY:ft,distance:se,translateX:se,translateY:se,translateZ:se,x:se,y:se,z:se,perspective:se,transformPerspective:se,opacity:Kt,originX:yi,originY:yi,originZ:se},sn={borderWidth:se,borderTopWidth:se,borderRightWidth:se,borderBottomWidth:se,borderLeftWidth:se,borderRadius:se,borderTopLeftRadius:se,borderTopRightRadius:se,borderBottomRightRadius:se,borderBottomLeftRadius:se,width:se,maxWidth:se,height:se,maxHeight:se,top:se,right:se,bottom:se,left:se,inset:se,insetBlock:se,insetBlockStart:se,insetBlockEnd:se,insetInline:se,insetInlineStart:se,insetInlineEnd:se,padding:se,paddingTop:se,paddingRight:se,paddingBottom:se,paddingLeft:se,paddingBlock:se,paddingBlockStart:se,paddingBlockEnd:se,paddingInline:se,paddingInlineStart:se,paddingInlineEnd:se,margin:se,marginTop:se,marginRight:se,marginBottom:se,marginLeft:se,marginBlock:se,marginBlockStart:se,marginBlockEnd:se,marginInline:se,marginInlineStart:se,marginInlineEnd:se,fontSize:se,backgroundPositionX:se,backgroundPositionY:se,...ah,zIndex:Pi,fillOpacity:Kt,strokeOpacity:Kt,numOctaves:Pi},oh={...sn,color:Te,backgroundColor:Te,outlineColor:Te,fill:Te,stroke:Te,borderColor:Te,borderTopColor:Te,borderRightColor:Te,borderBottomColor:Te,borderLeftColor:Te,filter:_r,WebkitFilter:_r},Vo=e=>oh[e];function $o(e,t){let s=Vo(e);return s!==_r&&(s=yt),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const lh=new Set(["auto","none","0"]);function ch(e,t,s){let n=0,a;for(;n<e.length&&!a;){const o=e[n];typeof o=="string"&&!lh.has(o)&&Yt(o).values.length&&(a=e[n]),n++}if(a&&s)for(const o of t)e[o]=$o(s,a)}class dh extends Xr{constructor(t,s,n,a,o){super(t,s,n,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let f=t[d];if(typeof f=="string"&&(f=f.trim(),Ur(f))){const h=Io(f,s.current);h!==void 0&&(t[d]=h),d===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Fo.has(n)||t.length!==2)return;const[a,o]=t,i=Ri(a),l=Ri(o),c=xi(a),u=xi(o);if(c!==u&&pt[n]){this.needsMeasurement=!0;return}if(i!==l)if(Si(i)&&Si(l))for(let d=0;d<t.length;d++){const f=t[d];typeof f=="string"&&(t[d]=parseFloat(f))}else pt[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,n=[];for(let a=0;a<t.length;a++)(t[a]===null||sh(t[a]))&&n.push(a);n.length&&ch(t,n,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pt[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){var l;const{element:t,name:s,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const a=t.getValue(s);a&&a.jump(this.measuredOrigin,!1);const o=n.length-1,i=n[o];n[o]=pt[s](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function uh(e,t,s){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const a=(s==null?void 0:s[e])??n.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e).filter(n=>n!=null)}const Uo=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function kr(e){return eo(e)&&"offsetHeight"in e}const{schedule:rn}=mo(queueMicrotask,!1),Je={x:!1,y:!1};function Wo(){return Je.x||Je.y}function hh(e){return e==="x"||e==="y"?Je[e]?null:(Je[e]=!0,()=>{Je[e]=!1}):Je.x||Je.y?null:(Je.x=Je.y=!0,()=>{Je.x=Je.y=!1})}function Go(e,t){const s=uh(e),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[s,a,()=>n.abort()]}function Di(e){return!(e.pointerType==="touch"||Wo())}function fh(e,t,s={}){const[n,a,o]=Go(e,s),i=l=>{if(!Di(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=f=>{Di(f)&&(u(f),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,a)};return n.forEach(l=>{l.addEventListener("pointerenter",i,a)}),o}const Ho=(e,t)=>t?e===t?!0:Ho(e,t.parentElement):!1,nn=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,mh=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Zo(e){return mh.has(e.tagName)||e.isContentEditable===!0}const bs=new WeakSet;function Ii(e){return t=>{t.key==="Enter"&&e(t)}}function Hs(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const ph=(e,t)=>{const s=e.currentTarget;if(!s)return;const n=Ii(()=>{if(bs.has(s))return;Hs(s,"down");const a=Ii(()=>{Hs(s,"up")}),o=()=>Hs(s,"cancel");s.addEventListener("keyup",a,t),s.addEventListener("blur",o,t)});s.addEventListener("keydown",n,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),t)};function Fi(e){return nn(e)&&!Wo()}function gh(e,t,s={}){const[n,a,o]=Go(e,s),i=l=>{const c=l.currentTarget;if(!Fi(l))return;bs.add(c);const u=t(c,l),d=(m,v)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),bs.has(c)&&bs.delete(c),Fi(m)&&typeof u=="function"&&u(m,{success:v})},f=m=>{d(m,c===window||c===document||s.useGlobalTarget||Ho(c,m.target))},h=m=>{d(m,!1)};window.addEventListener("pointerup",f,a),window.addEventListener("pointercancel",h,a)};return n.forEach(l=>{(s.useGlobalTarget?window:l).addEventListener("pointerdown",i,a),kr(l)&&(l.addEventListener("focus",u=>ph(u,a)),!Zo(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),o}function qo(e){return eo(e)&&"ownerSVGElement"in e}function xh(e){return qo(e)&&e.tagName==="svg"}const yh=[...Lo,Te,yt],bh=e=>yh.find(Bo(e)),Mi=()=>({translate:0,scale:1,origin:0,originPoint:0}),Pt=()=>({x:Mi(),y:Mi()}),zi=()=>({min:0,max:0}),Re=()=>({x:zi(),y:zi()}),Nr={current:null},Ko={current:!1},vh=typeof window<"u";function wh(){if(Ko.current=!0,!!vh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Nr.current=e.matches;e.addEventListener("change",t),t()}else Nr.current=!1}const jh=new WeakMap;function Fs(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Xt(e){return typeof e=="string"||Array.isArray(e)}const an=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],on=["initial",...an];function Ms(e){return Fs(e.animate)||on.some(t=>Xt(e[t]))}function Yo(e){return!!(Ms(e)||e.variants)}function _h(e,t,s){for(const n in t){const a=t[n],o=s[n];if(ze(a))e.addValue(n,a);else if(ze(o))e.addValue(n,Mt(a,{owner:e}));else if(o!==a)if(e.hasValue(n)){const i=e.getValue(n);i.liveStyle===!0?i.jump(a):i.hasAnimated||i.set(a)}else{const i=e.getStaticValue(n);e.addValue(n,Mt(i!==void 0?i:a,{owner:e}))}}for(const n in s)t[n]===void 0&&e.removeValue(n);return t}const Oi=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Ss={};function Xo(e){Ss=e}function kh(){return Ss}class Nh{scrapeMotionValuesFromProps(t,s,n){return{}}constructor({parent:t,props:s,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:o,visualState:i},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xr,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Oe.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,_e.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=i;this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=s,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=Ms(s),this.isVariantNode=Yo(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(s,{},this);for(const h in f){const m=f[h];c[h]!==void 0&&ze(m)&&m.set(c[h])}}mount(t){var s;this.current=t,jh.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,a)=>this.bindToMotionValue(a,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Ko.current||wh(),this.shouldReduceMotion=Nr.current),(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),xt(this.notifyUpdate),xt(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const n=this.features[s];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Bt.has(t);n&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&_e.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{a(),o&&o(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ss){const s=Ss[t];if(!s)continue;const{isEnabled:n,Feature:a}=s;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Re()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<Oi.length;n++){const a=Oi[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,i=t[o];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=_h(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const n=this.values.get(t);s!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&s!==void 0&&(n=Mt(s===null?void 0:s,{owner:this}),this.addValue(t,n)),n}readValue(t,s){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(Qa(n)||to(n))?n=parseFloat(n):!bh(n)&&yt.test(s)&&(n=$o(t,s)),this.setBaseTarget(t,ze(n)?n.get():n)),ze(n)?n.get():n}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var o;const{initial:s}=this.props;let n;if(typeof s=="string"||typeof s=="object"){const i=en(this.props,s,(o=this.presenceContext)==null?void 0:o.custom);i&&(n=i[t])}if(s&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!ze(a)?a:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Lr),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}scheduleRenderMicrotask(){rn.render(this.render)}}class Jo extends Nh{constructor(){super(...arguments),this.KeyframeResolver=dh}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){const n=t.style;return n?n[s]:void 0}removeValueFromRenderState(t,{vars:s,style:n}){delete s[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ze(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}class vt{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Qo({top:e,left:t,right:s,bottom:n}){return{x:{min:t,max:s},y:{min:e,max:n}}}function Sh({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Ch(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function Zs(e){return e===void 0||e===1}function Sr({scale:e,scaleX:t,scaleY:s}){return!Zs(e)||!Zs(t)||!Zs(s)}function _t(e){return Sr(e)||el(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function el(e){return Bi(e.x)||Bi(e.y)}function Bi(e){return e&&e!=="0%"}function Cs(e,t,s){const n=e-s,a=t*n;return s+a}function Li(e,t,s,n,a){return a!==void 0&&(e=Cs(e,a,n)),Cs(e,s,n)+t}function Cr(e,t=0,s=1,n,a){e.min=Li(e.min,t,s,n,a),e.max=Li(e.max,t,s,n,a)}function tl(e,{x:t,y:s}){Cr(e.x,t.translate,t.scale,t.originPoint),Cr(e.y,s.translate,s.scale,s.originPoint)}const Vi=.999999999999,$i=1.0000000000001;function Ah(e,t,s,n=!1){const a=s.length;if(!a)return;t.x=t.y=1;let o,i;for(let l=0;l<a;l++){o=s[l],i=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&It(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,tl(e,i)),n&&_t(o.latestValues)&&It(e,o.latestValues))}t.x<$i&&t.x>Vi&&(t.x=1),t.y<$i&&t.y>Vi&&(t.y=1)}function Dt(e,t){e.min=e.min+t,e.max=e.max+t}function Ui(e,t,s,n,a=.5){const o=Ne(e.min,e.max,a);Cr(e,t,s,o,n)}function It(e,t){Ui(e.x,t.x,t.scaleX,t.scale,t.originX),Ui(e.y,t.y,t.scaleY,t.scale,t.originY)}function sl(e,t){return Qo(Ch(e.getBoundingClientRect(),t))}function Th(e,t,s){const n=sl(e,s),{scroll:a}=t;return a&&(Dt(n.x,a.offset.x),Dt(n.y,a.offset.y)),n}const Eh={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Rh=Ot.length;function Ph(e,t,s){let n="",a=!0;for(let o=0;o<Rh;o++){const i=Ot[o],l=e[i];if(l===void 0)continue;let c=!0;if(typeof l=="number")c=l===(i.startsWith("scale")?1:0);else{const u=parseFloat(l);c=i.startsWith("scale")?u===1:u===0}if(!c||s){const u=Uo(l,sn[i]);if(!c){a=!1;const d=Eh[i]||i;n+=`${d}(${u}) `}s&&(t[i]=u)}}return n=n.trim(),s?n=s(t,a?"":n):a&&(n="none"),n}function ln(e,t,s){const{style:n,vars:a,transformOrigin:o}=e;let i=!1,l=!1;for(const c in t){const u=t[c];if(Bt.has(c)){i=!0;continue}else if(go(c)){a[c]=u;continue}else{const d=Uo(u,sn[c]);c.startsWith("origin")?(l=!0,o[c]=d):n[c]=d}}if(t.transform||(i||s?n.transform=Ph(t,e.transform,s):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=o;n.transformOrigin=`${c} ${u} ${d}`}}function rl(e,{style:t,vars:s},n,a){const o=e.style;let i;for(i in t)o[i]=t[i];a==null||a.applyProjectionStyles(o,n);for(i in s)o.setProperty(i,s[i])}function Wi(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Vt={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(se.test(e))e=parseFloat(e);else return e;const s=Wi(e,t.target.x),n=Wi(e,t.target.y);return`${s}% ${n}%`}},Dh={correct:(e,{treeScale:t,projectionDelta:s})=>{const n=e,a=yt.parse(e);if(a.length>5)return n;const o=yt.createTransformer(e),i=typeof a[0]!="number"?1:0,l=s.x.scale*t.x,c=s.y.scale*t.y;a[0+i]/=l,a[1+i]/=c;const u=Ne(l,c,.5);return typeof a[2+i]=="number"&&(a[2+i]/=u),typeof a[3+i]=="number"&&(a[3+i]/=u),o(a)}},Ar={borderRadius:{...Vt,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vt,borderTopRightRadius:Vt,borderBottomLeftRadius:Vt,borderBottomRightRadius:Vt,boxShadow:Dh};function nl(e,{layout:t,layoutId:s}){return Bt.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!Ar[e]||e==="opacity")}function cn(e,t,s){var i;const n=e.style,a=t==null?void 0:t.style,o={};if(!n)return o;for(const l in n)(ze(n[l])||a&&ze(a[l])||nl(l,e)||((i=s==null?void 0:s.getValue(l))==null?void 0:i.liveStyle)!==void 0)&&(o[l]=n[l]);return o}function Ih(e){return window.getComputedStyle(e)}class Fh extends Jo{constructor(){super(...arguments),this.type="html",this.renderInstance=rl}readValueFromInstance(t,s){var n;if(Bt.has(s))return(n=this.projection)!=null&&n.isProjecting?mr(s):uu(t,s);{const a=Ih(t),o=(go(s)?a.getPropertyValue(s):a[s])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:s}){return sl(t,s)}build(t,s,n){ln(t,s,n.transformTemplate)}scrapeMotionValuesFromProps(t,s,n){return cn(t,s,n)}}const Mh={offset:"stroke-dashoffset",array:"stroke-dasharray"},zh={offset:"strokeDashoffset",array:"strokeDasharray"};function Oh(e,t,s=1,n=0,a=!0){e.pathLength=1;const o=a?Mh:zh;e[o.offset]=`${-n}`,e[o.array]=`${t} ${s}`}const Bh=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function il(e,{attrX:t,attrY:s,attrScale:n,pathLength:a,pathSpacing:o=1,pathOffset:i=0,...l},c,u,d){if(ln(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h}=e;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete f.transformBox);for(const m of Bh)f[m]!==void 0&&(h[m]=f[m],delete f[m]);t!==void 0&&(f.x=t),s!==void 0&&(f.y=s),n!==void 0&&(f.scale=n),a!==void 0&&Oh(f,a,o,i,!1)}const al=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),ol=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Lh(e,t,s,n){rl(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(al.has(a)?a:tn(a),t.attrs[a])}function ll(e,t,s){const n=cn(e,t,s);for(const a in e)if(ze(e[a])||ze(t[a])){const o=Ot.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[o]=e[a]}return n}class Vh extends Jo{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Re}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Bt.has(s)){const n=Vo(s);return n&&n.default||0}return s=al.has(s)?s:tn(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,n){return ll(t,s,n)}build(t,s,n){il(t,s,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,s,n,a){Lh(t,s,n,a)}mount(t){this.isSVGTag=ol(t.tagName),super.mount(t)}}const $h=on.length;function cl(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?cl(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<$h;s++){const n=on[s],a=e.props[n];(Xt(a)||a===!1)&&(t[n]=a)}return t}function dl(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(t[n]!==e[n])return!1;return!0}const Uh=[...an].reverse(),Wh=an.length;function Gh(e){return t=>Promise.all(t.map(({animation:s,options:n})=>eh(e,s,n)))}function Hh(e){let t=Gh(e),s=Gi(),n=!0;const a=c=>(u,d)=>{var h;const f=Ft(e,d,c==="exit"?(h=e.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:m,transitionEnd:v,...g}=f;u={...u,...g,...v}}return u};function o(c){t=c(e)}function i(c){const{props:u}=e,d=cl(e.parent)||{},f=[],h=new Set;let m={},v=1/0;for(let x=0;x<Wh;x++){const y=Uh[x],w=s[y],j=u[y]!==void 0?u[y]:d[y],_=Xt(j),A=y===c?w.isActive:null;A===!1&&(v=x);let E=j===d[y]&&j!==u[y]&&_;if(E&&n&&e.manuallyAnimateOnMount&&(E=!1),w.protectedKeys={...m},!w.isActive&&A===null||!j&&!w.prevProp||Fs(j)||typeof j=="boolean")continue;const D=Zh(w.prevProp,j);let C=D||y===c&&w.isActive&&!E&&_||x>v&&_,P=!1;const $=Array.isArray(j)?j:[j];let te=$.reduce(a(y),{});A===!1&&(te={});const{prevResolvedValues:T={}}=w,V={...T,...te},b=W=>{C=!0,h.has(W)&&(P=!0,h.delete(W)),w.needsAnimating[W]=!0;const ne=e.getValue(W);ne&&(ne.liveStyle=!1)};for(const W in V){const ne=te[W],H=T[W];if(m.hasOwnProperty(W))continue;let ie=!1;vr(ne)&&vr(H)?ie=!dl(ne,H):ie=ne!==H,ie?ne!=null?b(W):h.add(W):ne!==void 0&&h.has(W)?b(W):w.protectedKeys[W]=!0}w.prevProp=j,w.prevResolvedValues=te,w.isActive&&(m={...m,...te}),n&&e.blockInitialAnimation&&(C=!1);const U=E&&D;C&&(!U||P)&&f.push(...$.map(W=>{const ne={type:y};if(typeof W=="string"&&n&&!U&&e.manuallyAnimateOnMount&&e.parent){const{parent:H}=e,ie=Ft(H,W);if(H.enteringChildren&&ie){const{delayChildren:O}=ie.transition||{};ne.delay=Do(H.enteringChildren,e,O)}}return{animation:W,options:ne}}))}if(h.size){const x={};if(typeof u.initial!="boolean"){const y=Ft(e,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(x.transition=y.transition)}h.forEach(y=>{const w=e.getBaseTarget(y),j=e.getValue(y);j&&(j.liveStyle=!0),x[y]=w??null}),f.push({animation:x})}let g=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(g=!1),n=!1,g?t(f):Promise.resolve()}function l(c,u){var f;if(s[c].isActive===u)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(h=>{var m;return(m=h.animationState)==null?void 0:m.setActive(c,u)}),s[c].isActive=u;const d=i(c);for(const h in s)s[h].protectedKeys={};return d}return{animateChanges:i,setActive:l,setAnimateFunction:o,getState:()=>s,reset:()=>{s=Gi()}}}function Zh(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!dl(t,e):!1}function jt(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Gi(){return{animate:jt(!0),whileInView:jt(),whileHover:jt(),whileTap:jt(),whileDrag:jt(),whileFocus:jt(),exit:jt()}}function Hi(e,t){e.min=t.min,e.max=t.max}function Xe(e,t){Hi(e.x,t.x),Hi(e.y,t.y)}function Zi(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}const ul=1e-4,qh=1-ul,Kh=1+ul,hl=.01,Yh=0-hl,Xh=0+hl;function Be(e){return e.max-e.min}function Jh(e,t,s){return Math.abs(e-t)<=s}function qi(e,t,s,n=.5){e.origin=n,e.originPoint=Ne(t.min,t.max,e.origin),e.scale=Be(s)/Be(t),e.translate=Ne(s.min,s.max,e.origin)-e.originPoint,(e.scale>=qh&&e.scale<=Kh||isNaN(e.scale))&&(e.scale=1),(e.translate>=Yh&&e.translate<=Xh||isNaN(e.translate))&&(e.translate=0)}function Ht(e,t,s,n){qi(e.x,t.x,s.x,n?n.originX:void 0),qi(e.y,t.y,s.y,n?n.originY:void 0)}function Ki(e,t,s){e.min=s.min+t.min,e.max=e.min+Be(t)}function Qh(e,t,s){Ki(e.x,t.x,s.x),Ki(e.y,t.y,s.y)}function Yi(e,t,s){e.min=t.min-s.min,e.max=e.min+Be(t)}function As(e,t,s){Yi(e.x,t.x,s.x),Yi(e.y,t.y,s.y)}function Xi(e,t,s,n,a){return e-=t,e=Cs(e,1/s,n),a!==void 0&&(e=Cs(e,1/a,n)),e}function ef(e,t=0,s=1,n=.5,a,o=e,i=e){if(tt.test(t)&&(t=parseFloat(t),t=Ne(i.min,i.max,t/100)-i.min),typeof t!="number")return;let l=Ne(o.min,o.max,n);e===o&&(l-=t),e.min=Xi(e.min,t,s,l,a),e.max=Xi(e.max,t,s,l,a)}function Ji(e,t,[s,n,a],o,i){ef(e,t[s],t[n],t[a],t.scale,o,i)}const tf=["x","scaleX","originX"],sf=["y","scaleY","originY"];function Qi(e,t,s,n){Ji(e.x,t,tf,s?s.x:void 0,n?n.x:void 0),Ji(e.y,t,sf,s?s.y:void 0,n?n.y:void 0)}function ea(e){return e.translate===0&&e.scale===1}function fl(e){return ea(e.x)&&ea(e.y)}function ta(e,t){return e.min===t.min&&e.max===t.max}function rf(e,t){return ta(e.x,t.x)&&ta(e.y,t.y)}function sa(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function ml(e,t){return sa(e.x,t.x)&&sa(e.y,t.y)}function ra(e){return Be(e.x)/Be(e.y)}function na(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function Ze(e){return[e("x"),e("y")]}function nf(e,t,s){let n="";const a=e.x.translate/t.x,o=e.y.translate/t.y,i=(s==null?void 0:s.z)||0;if((a||o||i)&&(n=`translate3d(${a}px, ${o}px, ${i}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:m,skewY:v}=s;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),h&&(n+=`rotateY(${h}deg) `),m&&(n+=`skewX(${m}deg) `),v&&(n+=`skewY(${v}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const pl=["TopLeft","TopRight","BottomLeft","BottomRight"],af=pl.length,ia=e=>typeof e=="string"?parseFloat(e):e,aa=e=>typeof e=="number"||se.test(e);function of(e,t,s,n,a,o){a?(e.opacity=Ne(0,s.opacity??1,lf(n)),e.opacityExit=Ne(t.opacity??1,0,cf(n))):o&&(e.opacity=Ne(t.opacity??1,s.opacity??1,n));for(let i=0;i<af;i++){const l=`border${pl[i]}Radius`;let c=oa(t,l),u=oa(s,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||aa(c)===aa(u)?(e[l]=Math.max(Ne(ia(c),ia(u),n),0),(tt.test(u)||tt.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||s.rotate)&&(e.rotate=Ne(t.rotate||0,s.rotate||0,n))}function oa(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const lf=gl(0,.5,co),cf=gl(.5,.95,Ke);function gl(e,t,s){return n=>n<e?0:n>t?1:s(qt(e,t,n))}function df(e,t,s){const n=ze(e)?e:Mt(e);return n.start(Qr("",n,t,s)),n.animation}function Jt(e,t,s,n={passive:!0}){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s)}const uf=(e,t)=>e.depth-t.depth;class hf{constructor(){this.children=[],this.isDirty=!1}add(t){Mr(this.children,t),this.isDirty=!0}remove(t){zr(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(uf),this.isDirty=!1,this.children.forEach(t)}}function ff(e,t){const s=Oe.now(),n=({timestamp:a})=>{const o=a-s;o>=t&&(xt(n),e(o-t))};return _e.setup(n,!0),()=>xt(n)}function vs(e){return ze(e)?e.get():e}class mf{constructor(){this.members=[]}add(t){Mr(this.members,t),t.scheduleRender()}remove(t){if(zr(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(a=>t===a);if(s===0)return!1;let n;for(let a=s;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,s){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender();const a=n.options.layoutDependency,o=t.options.layoutDependency;a!==void 0&&o!==void 0&&a===o||(t.resumeFrom=n,s&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0));const{crossfade:l}=t.options;l===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:n}=t;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const ws={hasAnimatedSinceResize:!0,hasEverUpdated:!1},qs=["","X","Y","Z"],pf=1e3;let gf=0;function Ks(e,t,s,n){const{latestValues:a}=t;a[e]&&(s[e]=a[e],t.setStaticValue(e,0),n&&(n[e]=0))}function xl(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=zo(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",_e,!(a||o))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&xl(n)}function yl({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(i={},l=t==null?void 0:t()){this.id=gf++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bf),this.nodes.forEach(_f),this.nodes.forEach(kf),this.nodes.forEach(vf)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new hf)}addEventListener(i,l){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new Lr),this.eventHandlers.get(i).add(l)}notifyListeners(i,...l){const c=this.eventHandlers.get(i);c&&c.notify(...l)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=qo(i)&&!xh(i),this.instance=i;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,f=0;const h=()=>this.root.updateBlockedByResize=!1;_e.read(()=>{f=window.innerWidth}),e(i,()=>{const m=window.innerWidth;m!==f&&(f=m,this.root.updateBlockedByResize=!0,d&&d(),d=ff(h,250),ws.hasAnimatedSinceResize&&(ws.hasAnimatedSinceResize=!1,this.nodes.forEach(da)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||Tf,{onLayoutAnimationStart:g,onLayoutAnimationComplete:x}=u.getProps(),y=!this.targetLayout||!ml(this.targetLayout,m),w=!f&&h;if(this.options.layoutRoot||this.resumeFrom||w||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...Jr(v,"layout"),onPlay:g,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(d,w)}else f||da(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),xt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Nf),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xl(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(la);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ca);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(jf),this.nodes.forEach(xf),this.nodes.forEach(yf)):this.nodes.forEach(ca),this.clearAllSnapshots();const l=Oe.now();Ie.delta=st(0,1e3/60,l-Ie.timestamp),Ie.timestamp=l,Ie.isProcessing=!0,Ls.update.process(Ie),Ls.preRender.process(Ie),Ls.render.process(Ie),Ie.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rn.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(wf),this.sharedNodes.forEach(Sf)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Be(this.snapshot.measuredBox.x)&&!Be(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Re(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!fl(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(l||_t(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return i&&(c=this.removeTransform(c)),Ef(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:i}=this.options;if(!i)return Re();const l=i.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(Rf))){const{scroll:d}=this.root;d&&(Dt(l.x,d.offset.x),Dt(l.y,d.offset.y))}return l}removeElementScroll(i){var c;const l=Re();if(Xe(l,i),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:h}=d;d!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Xe(l,i),Dt(l.x,f.offset.x),Dt(l.y,f.offset.y))}return l}applyTransform(i,l=!1){const c=Re();Xe(c,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&It(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),_t(d.latestValues)&&It(c,d.latestValues)}return _t(this.latestValues)&&It(c,this.latestValues),c}removeTransform(i){const l=Re();Xe(l,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!_t(u.latestValues))continue;Sr(u.latestValues)&&u.updateSnapshot();const d=Re(),f=u.measurePageBox();Xe(d,f),Qi(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return _t(this.latestValues)&&Qi(l,this.latestValues),l}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ie.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!this.layout||!(d||f))return;this.resolvedRelativeTargetAt=Ie.timestamp;const h=this.getClosestProjectingParent();h&&this.linkedParentVersion!==h.layoutVersion&&!h.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(h&&h.layout?this.createRelativeTarget(h,this.layout.layoutBox,h.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Re(),this.targetWithTransforms=Re()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qh(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xe(this.target,this.layout.layoutBox),tl(this.target,this.targetDelta)):Xe(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?this.createRelativeTarget(h,this.target,h.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Sr(this.parent.latestValues)||el(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(i,l,c){this.relativeParent=i,this.linkedParentVersion=i.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Re(),this.relativeTargetOrigin=Re(),As(this.relativeTargetOrigin,l,c),Xe(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var v;const i=this.getLead(),l=!!this.resumingFrom||this!==i;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ie.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Xe(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;Ah(this.layoutCorrected,this.treeScale,this.path,l),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=Re());const{target:m}=i;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Zi(this.prevProjectionDelta.x,this.projectionDelta.x),Zi(this.prevProjectionDelta.y,this.projectionDelta.y)),Ht(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!na(this.projectionDelta.x,this.prevProjectionDelta.x)||!na(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),i){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Pt(),this.projectionDelta=Pt(),this.projectionDeltaWithTransform=Pt()}setAnimationOrigin(i,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Pt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=Re(),m=c?c.source:void 0,v=this.layout?this.layout.source:void 0,g=m!==v,x=this.getStack(),y=!x||x.members.length<=1,w=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(Af));this.animationProgress=0;let j;this.mixTargetDelta=_=>{const A=_/1e3;ua(f.x,i.x,A),ua(f.y,i.y,A),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(As(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Cf(this.relativeTarget,this.relativeTargetOrigin,h,A),j&&rf(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Re()),Xe(j,this.relativeTarget)),g&&(this.animationValues=d,of(d,u,this.latestValues,A,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(xt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_e.update(()=>{ws.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Mt(0)),this.currentAnimation=df(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),i.onUpdate&&i.onUpdate(d)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pf),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=i;if(!(!l||!c||!u)){if(this!==i&&this.layout&&u&&bl(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Re();const f=Be(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+f;const h=Be(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+h}Xe(l,c),It(l,d),Ht(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(i,l){this.sharedNodes.has(i)||this.sharedNodes.set(i,new mf),this.sharedNodes.get(i).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var l;const{layoutId:i}=this.options;return i?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:i}=this.options;return i?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let l=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Ks("z",i,u,this.animationValues);for(let d=0;d<qs.length;d++)Ks(`rotate${qs[d]}`,i,u,this.animationValues),Ks(`skew${qs[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=vs(l==null?void 0:l.pointerEvents)||"",i.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=vs(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!_t(this.latestValues)&&(i.transform=c?c({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=nf(this.projectionDeltaWithTransform,this.treeScale,d);c&&(f=c(d,f)),i.transform=f;const{x:h,y:m}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const v in Ar){if(d[v]===void 0)continue;const{correct:g,applyTo:x,isCSSVariable:y}=Ar[v],w=f==="none"?d[v]:g(d[v],u);if(x){const j=x.length;for(let _=0;_<j;_++)i[x[_]]=w}else y?this.options.visualElement.renderState.vars[v]=w:i[v]=w}this.options.layoutId&&(i.pointerEvents=u===this?vs(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var l;return(l=i.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(la),this.root.sharedNodes.clear()}}}function xf(e){e.updateLayout()}function yf(e){var s;const t=((s=e.resumeFrom)==null?void 0:s.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:o}=e.options,i=t.source!==e.layout.source;o==="size"?Ze(f=>{const h=i?t.measuredBox[f]:t.layoutBox[f],m=Be(h);h.min=n[f].min,h.max=h.min+m}):bl(o,t.layoutBox,n)&&Ze(f=>{const h=i?t.measuredBox[f]:t.layoutBox[f],m=Be(n[f]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const l=Pt();Ht(l,n,t.layoutBox);const c=Pt();i?Ht(c,e.applyTransform(a,!0),t.measuredBox):Ht(c,n,t.layoutBox);const u=!fl(l);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:m}=f;if(h&&m){const v=Re();As(v,t.layoutBox,h.layoutBox);const g=Re();As(g,n,m.layoutBox),ml(v,g)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=v,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function bf(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function vf(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function wf(e){e.clearSnapshot()}function la(e){e.clearMeasurements()}function ca(e){e.isLayoutDirty=!1}function jf(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function da(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function _f(e){e.resolveTargetDelta()}function kf(e){e.calcProjection()}function Nf(e){e.resetSkewAndRotation()}function Sf(e){e.removeLeadSnapshot()}function ua(e,t,s){e.translate=Ne(t.translate,0,s),e.scale=Ne(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function ha(e,t,s,n){e.min=Ne(t.min,s.min,n),e.max=Ne(t.max,s.max,n)}function Cf(e,t,s,n){ha(e.x,t.x,s.x,n),ha(e.y,t.y,s.y,n)}function Af(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Tf={duration:.45,ease:[.4,0,.1,1]},fa=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ma=fa("applewebkit/")&&!fa("chrome/")?Math.round:Ke;function pa(e){e.min=ma(e.min),e.max=ma(e.max)}function Ef(e){pa(e.x),pa(e.y)}function bl(e,t,s){return e==="position"||e==="preserve-aspect"&&!Jh(ra(t),ra(s),.2)}function Rf(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const Pf=yl({attachResizeListener:(e,t)=>Jt(e,"resize",t),measureScroll:()=>{var e,t;return{x:document.documentElement.scrollLeft||((e=document.body)==null?void 0:e.scrollLeft)||0,y:document.documentElement.scrollTop||((t=document.body)==null?void 0:t.scrollTop)||0}},checkIsScrollRoot:()=>!0}),Ys={current:void 0},vl=yl({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ys.current){const e=new Pf({});e.mount(window),e.setOptions({layoutScroll:!0}),Ys.current=e}return Ys.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),dn=F.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function ga(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Df(...e){return t=>{let s=!1;const n=e.map(a=>{const o=ga(a,t);return!s&&typeof o=="function"&&(s=!0),o});if(s)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():ga(e[a],null)}}}}function If(...e){return F.useCallback(Df(...e),e)}class Ff extends F.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const n=s.offsetParent,a=kr(n)&&n.offsetWidth||0,o=kr(n)&&n.offsetHeight||0,i=this.props.sizeRef.current;i.height=s.offsetHeight||0,i.width=s.offsetWidth||0,i.top=s.offsetTop,i.left=s.offsetLeft,i.right=a-i.width-i.left,i.bottom=o-i.height-i.top}return null}componentDidUpdate(){}render(){return this.props.children}}function Mf({children:e,isPresent:t,anchorX:s,anchorY:n,root:a}){var f;const o=F.useId(),i=F.useRef(null),l=F.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:c}=F.useContext(dn),u=((f=e.props)==null?void 0:f.ref)??(e==null?void 0:e.ref),d=If(i,u);return F.useInsertionEffect(()=>{const{width:h,height:m,top:v,left:g,right:x,bottom:y}=l.current;if(t||!i.current||!h||!m)return;const w=s==="left"?`left: ${g}`:`right: ${x}`,j=n==="bottom"?`bottom: ${y}`:`top: ${v}`;i.current.dataset.motionPopId=o;const _=document.createElement("style");c&&(_.nonce=c);const A=a??document.head;return A.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${m}px !important;
            ${w}px !important;
            ${j}px !important;
          }
        `),()=>{A.contains(_)&&A.removeChild(_)}},[t]),r.jsx(Ff,{isPresent:t,childRef:i,sizeRef:l,children:F.cloneElement(e,{ref:d})})}const zf=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:a,presenceAffectsLayout:o,mode:i,anchorX:l,anchorY:c,root:u})=>{const d=Fr(Of),f=F.useId();let h=!0,m=F.useMemo(()=>(h=!1,{id:f,initial:t,isPresent:s,custom:a,onExitComplete:v=>{d.set(v,!0);for(const g of d.values())if(!g)return;n&&n()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[s,d,n]);return o&&h&&(m={...m}),F.useMemo(()=>{d.forEach((v,g)=>d.set(g,!1))},[s]),F.useEffect(()=>{!s&&!d.size&&n&&n()},[s]),i==="popLayout"&&(e=r.jsx(Mf,{isPresent:s,anchorX:l,anchorY:c,root:u,children:e})),r.jsx(Is.Provider,{value:m,children:e})};function Of(){return new Map}function wl(e=!0){const t=F.useContext(Is);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:a}=t,o=F.useId();F.useEffect(()=>{if(e)return a(o)},[e]);const i=F.useCallback(()=>e&&n&&n(o),[o,n,e]);return!s&&n?[!1,i]:[!0]}const ps=e=>e.key||"";function xa(e){const t=[];return F.Children.forEach(e,s=>{F.isValidElement(s)&&t.push(s)}),t}const jl=({children:e,custom:t,initial:s=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:o="sync",propagate:i=!1,anchorX:l="left",anchorY:c="top",root:u})=>{const[d,f]=wl(i),h=F.useMemo(()=>xa(e),[e]),m=i&&!d?[]:h.map(ps),v=F.useRef(!0),g=F.useRef(h),x=Fr(()=>new Map),y=F.useRef(new Set),[w,j]=F.useState(h),[_,A]=F.useState(h);Ja(()=>{v.current=!1,g.current=h;for(let C=0;C<_.length;C++){const P=ps(_[C]);m.includes(P)?(x.delete(P),y.current.delete(P)):x.get(P)!==!0&&x.set(P,!1)}},[_,m.length,m.join("-")]);const E=[];if(h!==w){let C=[...h];for(let P=0;P<_.length;P++){const $=_[P],te=ps($);m.includes(te)||(C.splice(P,0,$),E.push($))}return o==="wait"&&E.length&&(C=E),A(xa(C)),j(h),null}const{forceRender:D}=F.useContext(Ir);return r.jsx(r.Fragment,{children:_.map(C=>{const P=ps(C),$=i&&!d?!1:h===_||m.includes(P),te=()=>{if(y.current.has(P))return;if(y.current.add(P),x.has(P))x.set(P,!0);else return;let T=!0;x.forEach(V=>{V||(T=!1)}),T&&(D==null||D(),A(g.current),i&&(f==null||f()),n&&n())};return r.jsx(zf,{isPresent:$,initial:!v.current||s?void 0:!1,custom:t,presenceAffectsLayout:a,mode:o,root:u,onExitComplete:$?void 0:te,anchorX:l,anchorY:c,children:C},P)})})},_l=F.createContext({strict:!1}),ya={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let ba=!1;function Bf(){if(ba)return;const e={};for(const t in ya)e[t]={isEnabled:s=>ya[t].some(n=>!!s[n])};Xo(e),ba=!0}function kl(){return Bf(),kh()}function Lf(e){const t=kl();for(const s in e)t[s]={...t[s],...e[s]};Xo(t)}const Vf=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ts(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Vf.has(e)}let Nl=e=>!Ts(e);function $f(e){typeof e=="function"&&(Nl=t=>t.startsWith("on")?!Ts(t):e(t))}try{$f(require("@emotion/is-prop-valid").default)}catch{}function Uf(e,t,s){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(Nl(a)||s===!0&&Ts(a)||!t&&!Ts(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}const zs=F.createContext({});function Wf(e,t){if(Ms(e)){const{initial:s,animate:n}=e;return{initial:s===!1||Xt(s)?s:void 0,animate:Xt(n)?n:void 0}}return e.inherit!==!1?t:{}}function Gf(e){const{initial:t,animate:s}=Wf(e,F.useContext(zs));return F.useMemo(()=>({initial:t,animate:s}),[va(t),va(s)])}function va(e){return Array.isArray(e)?e.join(" "):e}const un=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Sl(e,t,s){for(const n in t)!ze(t[n])&&!nl(n,s)&&(e[n]=t[n])}function Hf({transformTemplate:e},t){return F.useMemo(()=>{const s=un();return ln(s,t,e),Object.assign({},s.vars,s.style)},[t])}function Zf(e,t){const s=e.style||{},n={};return Sl(n,s,e),Object.assign(n,Hf(e,t)),n}function qf(e,t){const s={},n=Zf(e,t);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=n,s}const Cl=()=>({...un(),attrs:{}});function Kf(e,t,s,n){const a=F.useMemo(()=>{const o=Cl();return il(o,t,ol(n),e.transformTemplate,e.style),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};Sl(o,e.style,e),a.style={...o,...a.style}}return a}const Yf=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hn(e){return typeof e!="string"||e.includes("-")?!1:!!(Yf.indexOf(e)>-1||/[A-Z]/u.test(e))}function Xf(e,t,s,{latestValues:n},a,o=!1,i){const c=(i??hn(e)?Kf:qf)(t,n,a,e),u=Uf(t,typeof e=="string",o),d=e!==F.Fragment?{...u,...c,ref:s}:{},{children:f}=t,h=F.useMemo(()=>ze(f)?f.get():f,[f]);return F.createElement(e,{...d,children:h})}function Jf({scrapeMotionValuesFromProps:e,createRenderState:t},s,n,a){return{latestValues:Qf(s,n,a,e),renderState:t()}}function Qf(e,t,s,n){const a={},o=n(e,{});for(const h in o)a[h]=vs(o[h]);let{initial:i,animate:l}=e;const c=Ms(e),u=Yo(e);t&&u&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),l===void 0&&(l=t.animate));let d=s?s.initial===!1:!1;d=d||i===!1;const f=d?l:i;if(f&&typeof f!="boolean"&&!Fs(f)){const h=Array.isArray(f)?f:[f];for(let m=0;m<h.length;m++){const v=en(e,h[m]);if(v){const{transitionEnd:g,transition:x,...y}=v;for(const w in y){let j=y[w];if(Array.isArray(j)){const _=d?j.length-1:0;j=j[_]}j!==null&&(a[w]=j)}for(const w in g)a[w]=g[w]}}}return a}const Al=e=>(t,s)=>{const n=F.useContext(zs),a=F.useContext(Is),o=()=>Jf(e,t,n,a);return s?o():Fr(o)},em=Al({scrapeMotionValuesFromProps:cn,createRenderState:un}),tm=Al({scrapeMotionValuesFromProps:ll,createRenderState:Cl}),sm=Symbol.for("motionComponentSymbol");function rm(e,t,s){const n=F.useRef(s);F.useInsertionEffect(()=>{n.current=s});const a=F.useRef(null);return F.useCallback(o=>{var l;o&&((l=e.onMount)==null||l.call(e,o)),t&&(o?t.mount(o):t.unmount());const i=n.current;if(typeof i=="function")if(o){const c=i(o);typeof c=="function"&&(a.current=c)}else a.current?(a.current(),a.current=null):i(o);else i&&(i.current=o)},[t])}const Tl=F.createContext({});function Ut(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function nm(e,t,s,n,a,o){var y,w;const{visualElement:i}=F.useContext(zs),l=F.useContext(_l),c=F.useContext(Is),u=F.useContext(dn).reducedMotion,d=F.useRef(null),f=F.useRef(!1);n=n||l.renderer,!d.current&&n&&(d.current=n(e,{visualState:t,parent:i,props:s,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u,isSVG:o}),f.current&&d.current&&(d.current.manuallyAnimateOnMount=!0));const h=d.current,m=F.useContext(Tl);h&&!h.projection&&a&&(h.type==="html"||h.type==="svg")&&im(d.current,s,a,m);const v=F.useRef(!1);F.useInsertionEffect(()=>{h&&v.current&&h.update(s,c)});const g=s[Mo],x=F.useRef(!!g&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,g))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,g)));return Ja(()=>{f.current=!0,h&&(v.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),x.current&&h.animationState&&h.animationState.animateChanges())}),F.useEffect(()=>{h&&(!x.current&&h.animationState&&h.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)==null||j.call(window,g)}),x.current=!1),h.enteringChildren=void 0)}),h}function im(e,t,s,n){const{layoutId:a,layout:o,drag:i,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:El(e.parent)),e.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!i||l&&Ut(l),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function El(e){if(e)return e.options.allowProjection!==!1?e.projection:El(e.parent)}function Xs(e,{forwardMotionProps:t=!1,type:s}={},n,a){n&&Lf(n);const o=s?s==="svg":hn(e),i=o?tm:em;function l(u,d){let f;const h={...F.useContext(dn),...u,layoutId:am(u)},{isStatic:m}=h,v=Gf(u),g=i(u,m);if(!m&&Xa){om();const x=lm(h);f=x.MeasureLayout,v.visualElement=nm(e,g,h,a,x.ProjectionNode,o)}return r.jsxs(zs.Provider,{value:v,children:[f&&v.visualElement?r.jsx(f,{visualElement:v.visualElement,...h}):null,Xf(e,u,rm(g,v.visualElement,d),g,m,t,o)]})}l.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const c=F.forwardRef(l);return c[sm]=e,c}function am({layoutId:e}){const t=F.useContext(Ir).id;return t&&e!==void 0?t+"-"+e:e}function om(e,t){F.useContext(_l).strict}function lm(e){const t=kl(),{drag:s,layout:n}=t;if(!s&&!n)return{};const a={...s,...n};return{MeasureLayout:s!=null&&s.isEnabled(e)||n!=null&&n.isEnabled(e)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function cm(e,t){if(typeof Proxy>"u")return Xs;const s=new Map,n=(o,i)=>Xs(o,i,e,t),a=(o,i)=>n(o,i);return new Proxy(a,{get:(o,i)=>i==="create"?n:(s.has(i)||s.set(i,Xs(i,void 0,e,t)),s.get(i))})}const dm=(e,t)=>t.isSVG??hn(e)?new Vh(t):new Fh(t,{allowProjection:e!==F.Fragment});class um extends vt{constructor(t){super(t),t.animationState||(t.animationState=Hh(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Fs(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let hm=0;class fm extends vt{constructor(){super(...arguments),this.id=hm++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);s&&!t&&a.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const mm={animation:{Feature:um},exit:{Feature:fm}};function rs(e){return{point:{x:e.pageX,y:e.pageY}}}const pm=e=>t=>nn(t)&&e(t,rs(t));function Zt(e,t,s,n){return Jt(e,t,pm(s),n)}const Rl=({current:e})=>e?e.ownerDocument.defaultView:null,wa=(e,t)=>Math.abs(e-t);function gm(e,t){const s=wa(e.x,t.x),n=wa(e.y,t.y);return Math.sqrt(s**2+n**2)}const ja=new Set(["auto","scroll"]);class Pl{constructor(t,s,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:o=!1,distanceThreshold:i=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=m=>{this.handleScroll(m.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Qs(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,g=gm(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!g)return;const{point:x}=m,{timestamp:y}=Ie;this.history.push({...x,timestamp:y});const{onStart:w,onMove:j}=this.handlers;v||(w&&w(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Js(v,this.transformPagePoint),_e.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:y}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Qs(m.type==="pointercancel"?this.lastMoveEventInfo:Js(v,this.transformPagePoint),this.history);this.startEvent&&g&&g(m,w),x&&x(m,w)},!nn(t))return;this.dragSnapToOrigin=o,this.handlers=s,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=a||window;const c=rs(t),u=Js(c,this.transformPagePoint),{point:d}=u,{timestamp:f}=Ie;this.history=[{...d,timestamp:f}];const{onSessionStart:h}=s;h&&h(t,Qs(u,this.history)),this.removeListeners=es(Zt(this.contextWindow,"pointermove",this.handlePointerMove),Zt(this.contextWindow,"pointerup",this.handlePointerUp),Zt(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(t){let s=t.parentElement;for(;s;){const n=getComputedStyle(s);(ja.has(n.overflowX)||ja.has(n.overflowY))&&this.scrollPositions.set(s,{x:s.scrollLeft,y:s.scrollTop}),s=s.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const s=this.scrollPositions.get(t);if(!s)return;const n=t===window,a=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},o={x:a.x-s.x,y:a.y-s.y};o.x===0&&o.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(t,a),_e.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),xt(this.updatePoint)}}function Js(e,t){return t?{point:t(e.point)}:e}function _a(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Qs({point:e},t){return{point:e,delta:_a(e,Dl(t)),offset:_a(e,xm(t)),velocity:ym(t,.1)}}function xm(e){return e[0]}function Dl(e){return e[e.length-1]}function ym(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const a=Dl(e);for(;s>=0&&(n=e[s],!(a.timestamp-n.timestamp>at(t)));)s--;if(!n)return{x:0,y:0};const o=qe(a.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const i={x:(a.x-n.x)/o,y:(a.y-n.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function bm(e,{min:t,max:s},n){return t!==void 0&&e<t?e=n?Ne(t,e,n.min):Math.max(e,t):s!==void 0&&e>s&&(e=n?Ne(s,e,n.max):Math.min(e,s)),e}function ka(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function vm(e,{top:t,left:s,bottom:n,right:a}){return{x:ka(e.x,s,a),y:ka(e.y,t,n)}}function Na(e,t){let s=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}function wm(e,t){return{x:Na(e.x,t.x),y:Na(e.y,t.y)}}function jm(e,t){let s=.5;const n=Be(e),a=Be(t);return a>n?s=qt(t.min,t.max-n,e.min):n>a&&(s=qt(e.min,e.max-a,t.min)),st(0,1,s)}function _m(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const Tr=.35;function km(e=Tr){return e===!1?e=0:e===!0&&(e=Tr),{x:Sa(e,"left","right"),y:Sa(e,"top","bottom")}}function Sa(e,t,s){return{min:Ca(e,t),max:Ca(e,s)}}function Ca(e,t){return typeof e=="number"?e:e[t]||0}const Nm=new WeakMap;class Sm{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Re(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:s=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const o=f=>{s?(this.stopAnimation(),this.snapToCursor(rs(f).point)):this.pauseAnimation()},i=(f,h)=>{this.stopAnimation();const{drag:m,dragPropagation:v,onDragStart:g}=this.getProps();if(m&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=hh(m),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ze(y=>{let w=this.getAxisMotionValue(y).get()||0;if(tt.test(w)){const{projection:j}=this.visualElement;if(j&&j.layout){const _=j.layout.layoutBox[y];_&&(w=Be(_)*(parseFloat(w)/100))}}this.originPoint[y]=w}),g&&_e.postRender(()=>g(f,h)),wr(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},l=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:m,dragDirectionLock:v,onDirectionLock:g,onDrag:x}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:y}=h;if(v&&this.currentDirection===null){this.currentDirection=Cm(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),x&&x(f,h)},c=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ze(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)==null?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Pl(t,{onSessionStart:o,onStart:i,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:Rl(this.visualElement),element:this.visualElement.current})}stop(t,s){const n=t||this.latestPointerEvent,a=s||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!a||!n)return;const{velocity:i}=a;this.startAnimation(i);const{onDragEnd:l}=this.getProps();l&&_e.postRender(()=>l(n,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,s,n){const{drag:a}=this.getProps();if(!n||!gs(t,a,this.currentDirection))return;const o=this.getAxisMotionValue(t);let i=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(i=bm(i,this.constraints[t],this.elastic[t])),o.set(i)}resolveConstraints(){var o;const{dragConstraints:t,dragElastic:s}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,a=this.constraints;t&&Ut(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=vm(n.layoutBox,t):this.constraints=!1,this.elastic=km(s),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ze(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=_m(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Ut(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=Th(n,a.root,this.visualElement.getTransformPagePoint());let i=wm(a.layout.layoutBox,o);if(s){const l=s(Sh(i));this.hasMutatedConstraints=!!l,l&&(i=Qo(l))}return i}startAnimation(t){const{drag:s,dragMomentum:n,dragElastic:a,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Ze(d=>{if(!gs(d,s,this.currentDirection))return;let f=c&&c[d]||{};i&&(f={min:0,max:0});const h=a?200:1e6,m=a?40:1e7,v={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(l)}startAxisValueAnimation(t,s){const n=this.getAxisMotionValue(t);return wr(this.visualElement,t),n.start(Qr(t,n,0,s,this.visualElement,!1))}stopAnimation(){Ze(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ze(t=>{var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[s];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ze(s=>{const{drag:n}=this.getProps();if(!gs(s,n,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(s);if(a&&a.layout){const{min:i,max:l}=a.layout.layoutBox[s],c=o.get()||0;o.set(t[s]-Ne(i,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Ut(s)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Ze(i=>{const l=this.getAxisMotionValue(i);if(l&&this.constraints!==!1){const c=l.get();a[i]=jm({min:c,max:c},this.constraints[i])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ze(i=>{if(!gs(i,t,null))return;const l=this.getAxisMotionValue(i),{min:c,max:u}=this.constraints[i];l.set(Ne(c,u,a[i]))})}addListeners(){if(!this.visualElement.current)return;Nm.set(this.visualElement,this);const t=this.visualElement.current,s=Zt(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps(),f=c.target,h=f!==t&&Zo(f);u&&d&&!h&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Ut(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),_e.read(n);const i=Jt(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ze(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{i(),s(),o(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:i=Tr,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:n,dragPropagation:a,dragConstraints:o,dragElastic:i,dragMomentum:l}}}function gs(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function Cm(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class Am extends vt{constructor(t){super(t),this.removeGroupControls=Ke,this.removeListeners=Ke,this.controls=new Sm(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ke}update(){const{dragControls:t}=this.node.getProps(),{dragControls:s}=this.node.prevProps||{};t!==s&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Aa=e=>(t,s)=>{e&&_e.postRender(()=>e(t,s))};class Tm extends vt{constructor(){super(...arguments),this.removePointerDownListener=Ke}onPointerDown(t){this.session=new Pl(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Rl(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:Aa(t),onStart:Aa(s),onMove:n,onEnd:(o,i)=>{delete this.session,a&&_e.postRender(()=>a(o,i))}}}mount(){this.removePointerDownListener=Zt(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let er=!1;class Em extends F.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n,layoutId:a}=this.props,{projection:o}=t;o&&(s.group&&s.group.add(o),n&&n.register&&a&&n.register(o),er&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),ws.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:n,drag:a,isPresent:o}=this.props,{projection:i}=n;return i&&(i.isPresent=o,t.layoutDependency!==s&&i.setOptions({...i.options,layoutDependency:s}),er=!0,a||t.layoutDependency!==s||s===void 0||t.isPresent!==o?i.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?i.promote():i.relegate()||_e.postRender(()=>{const l=i.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),rn.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:a}=t;er=!0,a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Il(e){const[t,s]=wl(),n=F.useContext(Ir);return r.jsx(Em,{...e,layoutGroup:n,switchLayoutGroup:F.useContext(Tl),isPresent:t,safeToRemove:s})}const Rm={pan:{Feature:Tm},drag:{Feature:Am,ProjectionNode:vl,MeasureLayout:Il}};function Ta(e,t,s){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,o=n[a];o&&_e.postRender(()=>o(t,rs(t)))}class Pm extends vt{mount(){const{current:t}=this.node;t&&(this.unmount=fh(t,(s,n)=>(Ta(this.node,n,"Start"),a=>Ta(this.node,a,"End"))))}unmount(){}}class Dm extends vt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=es(Jt(this.node.current,"focus",()=>this.onFocus()),Jt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ea(e,t,s){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),o=n[a];o&&_e.postRender(()=>o(t,rs(t)))}class Im extends vt{mount(){const{current:t}=this.node;t&&(this.unmount=gh(t,(s,n)=>(Ea(this.node,n,"Start"),(a,{success:o})=>Ea(this.node,a,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Er=new WeakMap,tr=new WeakMap,Fm=e=>{const t=Er.get(e.target);t&&t(e)},Mm=e=>{e.forEach(Fm)};function zm({root:e,...t}){const s=e||document;tr.has(s)||tr.set(s,{});const n=tr.get(s),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(Mm,{root:e,...t})),n[a]}function Om(e,t,s){const n=zm(t);return Er.set(e,s),n.observe(e),()=>{Er.delete(e),n.unobserve(e)}}const Bm={some:0,all:1};class Lm extends vt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:n,amount:a="some",once:o}=t,i={root:s?s.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:Bm[a]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return Om(this.node.current,i,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(Vm(t,s))&&this.startObserver()}unmount(){}}function Vm({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const $m={inView:{Feature:Lm},tap:{Feature:Im},focus:{Feature:Dm},hover:{Feature:Pm}},Um={layout:{ProjectionNode:vl,MeasureLayout:Il}},Wm={...mm,...$m,...Rm,...Um},Rr=cm(Wm,dm),Fl=({id:e,x:t,y:s,width:n,height:a,style:o,color:i,strokeColor:l,strokeWidth:c,className:u,borderRadius:d,shapeRendering:f,onClick:h,selected:m})=>{const{background:v,backgroundColor:g}=o||{},x=i||v||g;return Qe.createElement("rect",{className:La(["react-flow__minimap-node",{selected:m},u]),x:t,y:s,rx:d,ry:d,width:n,height:a,fill:x,stroke:l,strokeWidth:c,shapeRendering:f,onClick:h?y=>h(y,e):void 0})};Fl.displayName="MiniMapNode";var Gm=F.memo(Fl);const Hm=e=>e.nodeOrigin,Zm=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),sr=e=>e instanceof Function?e:()=>e;function qm({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:s="",nodeBorderRadius:n=5,nodeStrokeWidth:a=2,nodeComponent:o=Gm,onClick:i}){const l=ir(Zm,Va),c=ir(Hm),u=sr(t),d=sr(e),f=sr(s),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return Qe.createElement(Qe.Fragment,null,l.map(m=>{const{x:v,y:g}=sc(m,c).positionAbsolute;return Qe.createElement(o,{key:m.id,x:v,y:g,width:m.width,height:m.height,style:m.style,selected:m.selected,className:f(m),color:u(m),borderRadius:n,strokeColor:d(m),strokeWidth:a,shapeRendering:h,onClick:i,id:m.id})}))}var Km=F.memo(qm);const Ym=200,Xm=150,Jm=e=>{const t=e.getNodes(),s={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:s,boundingRect:t.length>0?rc(nc(t,e.nodeOrigin),s):s,rfId:e.rfId}},Qm="react-flow__minimap-desc";function Ml({style:e,className:t,nodeStrokeColor:s="transparent",nodeColor:n="#e2e2e2",nodeClassName:a="",nodeBorderRadius:o=5,nodeStrokeWidth:i=2,nodeComponent:l,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:d=1,position:f="bottom-right",onClick:h,onNodeClick:m,pannable:v=!1,zoomable:g=!1,ariaLabel:x="React Flow mini map",inversePan:y=!1,zoomStep:w=10,offsetScale:j=5}){const _=Yl(),A=F.useRef(null),{boundingRect:E,viewBB:D,rfId:C}=ir(Jm,Va),P=(e==null?void 0:e.width)??Ym,$=(e==null?void 0:e.height)??Xm,te=E.width/P,T=E.height/$,V=Math.max(te,T),b=V*P,U=V*$,ae=j*V,W=E.x-(b-E.width)/2-ae,ne=E.y-(U-E.height)/2-ae,H=b+ae*2,ie=U+ae*2,O=`${Qm}-${C}`,S=F.useRef(0);S.current=V,F.useEffect(()=>{if(A.current){const Z=Xl(A.current),ce=le=>{const{transform:be,d3Selection:fe,d3Zoom:we}=_.getState();if(le.sourceEvent.type!=="wheel"||!fe||!we)return;const Se=-le.sourceEvent.deltaY*(le.sourceEvent.deltaMode===1?.05:le.sourceEvent.deltaMode?1:.002)*w,p=be[2]*Math.pow(2,Se);we.scaleTo(fe,p)},ge=le=>{const{transform:be,d3Selection:fe,d3Zoom:we,translateExtent:Se,width:p,height:L}=_.getState();if(le.sourceEvent.type!=="mousemove"||!fe||!we)return;const z=S.current*Math.max(1,be[2])*(y?-1:1),N={x:be[0]-le.sourceEvent.movementX*z,y:be[1]-le.sourceEvent.movementY*z},k=[[0,0],[p,L]],R=ec.translate(N.x,N.y).scale(be[2]),G=we.constrain()(R,k,Se);we.transform(fe,G)},ue=Jl().on("zoom",v?ge:null).on("zoom.wheel",g?ce:null);return Z.call(ue),()=>{Z.on("zoom",null)}}},[v,g,y,w]);const J=h?Z=>{const ce=tc(Z);h(Z,{x:ce[0],y:ce[1]})}:void 0,Y=m?(Z,ce)=>{const ge=_.getState().nodeInternals.get(ce);m(Z,ge)}:void 0;return Qe.createElement(Ql,{position:f,style:e,className:La(["react-flow__minimap",t]),"data-testid":"rf__minimap"},Qe.createElement("svg",{width:P,height:$,viewBox:`${W} ${ne} ${H} ${ie}`,role:"img","aria-labelledby":O,ref:A,onClick:J},x&&Qe.createElement("title",{id:O},x),Qe.createElement(Km,{onClick:Y,nodeColor:n,nodeStrokeColor:s,nodeBorderRadius:o,nodeClassName:a,nodeStrokeWidth:i,nodeComponent:l}),Qe.createElement("path",{className:"react-flow__minimap-mask",d:`M${W-ae},${ne-ae}h${H+ae*2}v${ie+ae*2}h${-H-ae*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fill:c,fillRule:"evenodd",stroke:u,strokeWidth:d,pointerEvents:"none"})))}Ml.displayName="MiniMap";var ep=F.memo(Ml);function tp(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const s=document.implementation.createHTMLDocument(),n=s.createElement("base"),a=s.createElement("a");return s.head.appendChild(n),s.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const sp=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function gt(e){const t=[];for(let s=0,n=e.length;s<n;s++)t.push(e[s]);return t}let Tt=null;function zl(e={}){return Tt||(e.includeStyleProperties?(Tt=e.includeStyleProperties,Tt):(Tt=gt(window.getComputedStyle(document.documentElement)),Tt))}function Es(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function rp(e){const t=Es(e,"border-left-width"),s=Es(e,"border-right-width");return e.clientWidth+t+s}function np(e){const t=Es(e,"border-top-width"),s=Es(e,"border-bottom-width");return e.clientHeight+t+s}function Ol(e,t={}){const s=t.width||rp(e),n=t.height||np(e);return{width:s,height:n}}function ip(){let e,t;try{t=process}catch{}const s=t&&t.env?t.env.devicePixelRatio:null;return s&&(e=parseInt(s,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Ge=16384;function ap(e){(e.width>Ge||e.height>Ge)&&(e.width>Ge&&e.height>Ge?e.width>e.height?(e.height*=Ge/e.width,e.width=Ge):(e.width*=Ge/e.height,e.height=Ge):e.width>Ge?(e.height*=Ge/e.width,e.width=Ge):(e.width*=Ge/e.height,e.height=Ge))}function Rs(e){return new Promise((t,s)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=s,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function op(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function lp(e,t,s){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),o=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${s}`),a.setAttribute("viewBox",`0 0 ${t} ${s}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),a.appendChild(o),o.appendChild(e),op(a)}const Ue=(e,t)=>{if(e instanceof t)return!0;const s=Object.getPrototypeOf(e);return s===null?!1:s.constructor.name===t.name||Ue(s,t)};function cp(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function dp(e,t){return zl(t).map(s=>{const n=e.getPropertyValue(s),a=e.getPropertyPriority(s);return`${s}: ${n}${a?" !important":""};`}).join(" ")}function up(e,t,s,n){const a=`.${e}:${t}`,o=s.cssText?cp(s):dp(s,n);return document.createTextNode(`${a}{${o}}`)}function Ra(e,t,s,n){const a=window.getComputedStyle(e,s),o=a.getPropertyValue("content");if(o===""||o==="none")return;const i=sp();try{t.className=`${t.className} ${i}`}catch{return}const l=document.createElement("style");l.appendChild(up(i,s,a,n)),t.appendChild(l)}function hp(e,t,s){Ra(e,t,":before",s),Ra(e,t,":after",s)}const Pa="application/font-woff",Da="image/jpeg",fp={woff:Pa,woff2:Pa,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Da,jpeg:Da,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function mp(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function fn(e){const t=mp(e).toLowerCase();return fp[t]||""}function pp(e){return e.split(/,/)[1]}function Pr(e){return e.search(/^(data:)/)!==-1}function gp(e,t){return`data:${t};base64,${e}`}async function Bl(e,t,s){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((o,i)=>{const l=new FileReader;l.onerror=i,l.onloadend=()=>{try{o(s({res:n,result:l.result}))}catch(c){i(c)}},l.readAsDataURL(a)})}const rr={};function xp(e,t,s){let n=e.replace(/\?.*/,"");return s&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function mn(e,t,s){const n=xp(e,t,s.includeQueryParams);if(rr[n]!=null)return rr[n];s.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const o=await Bl(e,s.fetchRequestInit,({res:i,result:l})=>(t||(t=i.headers.get("Content-Type")||""),pp(l)));a=gp(o,t)}catch(o){a=s.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;o&&(i=typeof o=="string"?o:o.message),i&&console.warn(i)}return rr[n]=a,a}async function yp(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):Rs(t)}async function bp(e,t){if(e.currentSrc){const o=document.createElement("canvas"),i=o.getContext("2d");o.width=e.clientWidth,o.height=e.clientHeight,i==null||i.drawImage(e,0,0,o.width,o.height);const l=o.toDataURL();return Rs(l)}const s=e.poster,n=fn(s),a=await mn(s,n,t);return Rs(a)}async function vp(e,t){var s;try{if(!((s=e==null?void 0:e.contentDocument)===null||s===void 0)&&s.body)return await Os(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function wp(e,t){return Ue(e,HTMLCanvasElement)?yp(e):Ue(e,HTMLVideoElement)?bp(e,t):Ue(e,HTMLIFrameElement)?vp(e,t):e.cloneNode(Ll(e))}const jp=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Ll=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function _p(e,t,s){var n,a;if(Ll(t))return t;let o=[];return jp(e)&&e.assignedNodes?o=gt(e.assignedNodes()):Ue(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?o=gt(e.contentDocument.body.childNodes):o=gt(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),o.length===0||Ue(e,HTMLVideoElement)||await o.reduce((i,l)=>i.then(()=>Os(l,s)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function kp(e,t,s){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):zl(s).forEach(o=>{let i=a.getPropertyValue(o);o==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Ue(e,HTMLIFrameElement)&&o==="display"&&i==="inline"&&(i="block"),o==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(o,i,a.getPropertyPriority(o))})}function Np(e,t){Ue(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Ue(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Sp(e,t){if(Ue(e,HTMLSelectElement)){const s=t,n=Array.from(s.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function Cp(e,t,s){return Ue(t,Element)&&(kp(e,t,s),hp(e,t,s),Np(e,t),Sp(e,t)),t}async function Ap(e,t){const s=e.querySelectorAll?e.querySelectorAll("use"):[];if(s.length===0)return e;const n={};for(let o=0;o<s.length;o++){const l=s[o].getAttribute("xlink:href");if(l){const c=e.querySelector(l),u=document.querySelector(l);!c&&u&&!n[l]&&(n[l]=await Os(u,t,!0))}}const a=Object.values(n);if(a.length){const o="http://www.w3.org/1999/xhtml",i=document.createElementNS(o,"svg");i.setAttribute("xmlns",o),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const l=document.createElementNS(o,"defs");i.appendChild(l);for(let c=0;c<a.length;c++)l.appendChild(a[c]);e.appendChild(i)}return e}async function Os(e,t,s){return!s&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>wp(n,t)).then(n=>_p(e,n,t)).then(n=>Cp(e,n,t)).then(n=>Ap(n,t))}const Vl=/url\((['"]?)([^'"]+?)\1\)/g,Tp=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ep=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Rp(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Pp(e){const t=[];return e.replace(Vl,(s,n,a)=>(t.push(a),s)),t.filter(s=>!Pr(s))}async function Dp(e,t,s,n,a){try{const o=s?tp(t,s):t,i=fn(t);let l;return a||(l=await mn(o,i,n)),e.replace(Rp(t),`$1${l}$3`)}catch{}return e}function Ip(e,{preferredFontFormat:t}){return t?e.replace(Ep,s=>{for(;;){const[n,,a]=Tp.exec(s)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function $l(e){return e.search(Vl)!==-1}async function Ul(e,t,s){if(!$l(e))return e;const n=Ip(e,s);return Pp(n).reduce((o,i)=>o.then(l=>Dp(l,i,t,s)),Promise.resolve(n))}async function Et(e,t,s){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const o=await Ul(a,null,s);return t.style.setProperty(e,o,t.style.getPropertyPriority(e)),!0}return!1}async function Fp(e,t){await Et("background",e,t)||await Et("background-image",e,t),await Et("mask",e,t)||await Et("-webkit-mask",e,t)||await Et("mask-image",e,t)||await Et("-webkit-mask-image",e,t)}async function Mp(e,t){const s=Ue(e,HTMLImageElement);if(!(s&&!Pr(e.src))&&!(Ue(e,SVGImageElement)&&!Pr(e.href.baseVal)))return;const n=s?e.src:e.href.baseVal,a=await mn(n,fn(n),t);await new Promise((o,i)=>{e.onload=o,e.onerror=t.onImageErrorHandler?(...c)=>{try{o(t.onImageErrorHandler(...c))}catch(u){i(u)}}:i;const l=e;l.decode&&(l.decode=o),l.loading==="lazy"&&(l.loading="eager"),s?(e.srcset="",e.src=a):e.href.baseVal=a})}async function zp(e,t){const n=gt(e.childNodes).map(a=>Wl(a,t));await Promise.all(n).then(()=>e)}async function Wl(e,t){Ue(e,Element)&&(await Fp(e,t),await Mp(e,t),await zp(e,t))}function Op(e,t){const{style:s}=e;t.backgroundColor&&(s.backgroundColor=t.backgroundColor),t.width&&(s.width=`${t.width}px`),t.height&&(s.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{s[a]=n[a]}),e}const Ia={};async function Fa(e){let t=Ia[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},Ia[e]=t,t}async function Ma(e,t){let s=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,o=(s.match(/url\([^)]+\)/g)||[]).map(async i=>{let l=i.replace(n,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),Bl(l,t.fetchRequestInit,({result:c})=>(s=s.replace(i,`url(${c})`),[i,c]))});return Promise.all(o).then(()=>s)}function za(e){if(e==null)return[];const t=[],s=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(s,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(i,"gi");for(;;){let c=o.exec(n);if(c===null){if(c=l.exec(n),c===null)break;o.lastIndex=l.lastIndex}else l.lastIndex=o.lastIndex;t.push(c[0])}return t}async function Bp(e,t){const s=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{gt(a.cssRules||[]).forEach((o,i)=>{if(o.type===CSSRule.IMPORT_RULE){let l=i+1;const c=o.href,u=Fa(c).then(d=>Ma(d,t)).then(d=>za(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?l+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(o){const i=e.find(l=>l.href==null)||document.styleSheets[0];a.href!=null&&n.push(Fa(a.href).then(l=>Ma(l,t)).then(l=>za(l).forEach(c=>{i.insertRule(c,i.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",o)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{gt(a.cssRules||[]).forEach(o=>{s.push(o)})}catch(o){console.error(`Error while reading CSS rules from ${a.href}`,o)}}),s))}function Lp(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>$l(t.style.getPropertyValue("src")))}async function Vp(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const s=gt(e.ownerDocument.styleSheets),n=await Bp(s,t);return Lp(n)}function Gl(e){return e.trim().replace(/["']/g,"")}function $p(e){const t=new Set;function s(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(o=>{t.add(Gl(o))}),Array.from(n.children).forEach(o=>{o instanceof HTMLElement&&s(o)})}return s(e),t}async function Up(e,t){const s=await Vp(e,t),n=$p(e);return(await Promise.all(s.filter(o=>n.has(Gl(o.style.fontFamily))).map(o=>{const i=o.parentStyleSheet?o.parentStyleSheet.href:null;return Ul(o.cssText,i,t)}))).join(`
`)}async function Wp(e,t){const s=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Up(e,t);if(s){const n=document.createElement("style"),a=document.createTextNode(s);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function Gp(e,t={}){const{width:s,height:n}=Ol(e,t),a=await Os(e,t,!0);return await Wp(a,t),await Wl(a,t),Op(a,t),await lp(a,s,n)}async function Hp(e,t={}){const{width:s,height:n}=Ol(e,t),a=await Gp(e,t),o=await Rs(a),i=document.createElement("canvas"),l=i.getContext("2d"),c=t.pixelRatio||ip(),u=t.canvasWidth||s,d=t.canvasHeight||n;return i.width=u*c,i.height=d*c,t.skipAutoScale||ap(i),i.style.width=`${u}`,i.style.height=`${d}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,i.width,i.height)),l.drawImage(o,0,0,i.width,i.height),i}async function Oa(e,t={}){return(await Hp(e,t)).toDataURL()}const De={computeserverless:{desc:"Run code without provisioning or managing servers.",howItWorks:"Upload your code and the cloud provider handles the infrastructure. Autoscales from 0 to thousands of instances.",pros:["No server management required","Pay only for compute time used","Automatic scaling"],cons:["Cold start latency","Execution time limits","Limited runtime environment control"],bestFor:["Event-driven applications","Sporadic workloads","Microservices"],links:{aws:"https://aws.amazon.com/lambda/",gcp:"https://cloud.google.com/functions",azure:"https://azure.microsoft.com/en-us/products/functions/"}},computecontainer:{desc:"Deploy and manage containerized applications easily.",howItWorks:"Orchestrates Docker containers, managing scale and health automatically.",pros:["Consistent environment (Dev vs Prod)","Portable across clouds","Efficient resource utilization"],cons:["Higher complexity than serverless","Container orchestration overhead","Security management responsibility"],bestFor:["Microservices architectures","Long-running processes","Migrating legacy apps"],links:{aws:"https://aws.amazon.com/fargate/",gcp:"https://cloud.google.com/run",azure:"https://azure.microsoft.com/en-us/products/container-apps/"}},computevm:{desc:"Virtual Machines for full control over the OS.",howItWorks:"Provides a virtualized server instance where you manage the OS, software, and configuration.",pros:["Full control over OS and software","Legacy application support","Flexible instance types"],cons:["Manual OS patching and maintenance","Slower scaling than containers/serverless","Pay for idle time"],bestFor:["Legacy monoliths","Specific OS requirements","High-performance computing"],links:{aws:"https://aws.amazon.com/ec2/",gcp:"https://cloud.google.com/compute",azure:"https://azure.microsoft.com/en-us/products/virtual-machines/"}},relationaldatabase:{desc:"Managed relational database engine (SQL).",howItWorks:"Provides a traditional SQL interface with automated backups, patching, and scaling.",pros:["ACID compliance (Data integrity)","Complex query support (Joins)","Mature ecosystem"],cons:["Vertical scaling limits","Higher cost at scale","Rigid schema"],bestFor:["Financial systems","E-commerce transactional data","Structured data requiring integrity"],links:{aws:"https://aws.amazon.com/rds/",gcp:"https://cloud.google.com/sql",azure:"https://azure.microsoft.com/en-us/products/azure-sql/database/"}},nosqldatabase:{desc:"High-performance non-relational database.",howItWorks:"Stores data in documents or key-value pairs for flexible schemas and high speed.",pros:["Horizontal scalability","Flexible schema","High performance for simple queries"],cons:["Eventual consistency (usually)","Limited query capabilities (User app side joins)","Data duplication"],bestFor:["Real-time big data","Content management","Gaming leaderboards"],links:{aws:"https://aws.amazon.com/dynamodb/",gcp:"https://cloud.google.com/firestore",azure:"https://azure.microsoft.com/en-us/products/cosmos-db/"}},cache:{desc:"In-memory data store for sub-millisecond latency.",howItWorks:"Caches frequently accessed data in RAM to reduce database load.",pros:["Extremely fast read/write","Reduces database load","Simple key-value structure"],cons:["Volatile data (loss on restart without persistence)","More expensive per GB than disk","Limited query capabilities"],bestFor:["Session management","Leaderboards","Caching API responses"],links:{aws:"https://aws.amazon.com/elasticache/",gcp:"https://cloud.google.com/memorystore",azure:"https://azure.microsoft.com/en-us/products/cache/"}},objectstorage:{desc:"Scalable storage for files and blobs.",howItWorks:"Stores unstructured data like images and videos in buckets with high durability.",pros:["Infinite scalability","High durability (99.999999999%)","Low cost for static assets"],cons:["Not suitable for databases","Latency higher than block storage","Eventual consistency models"],bestFor:["Media storage","Backups and archives","Static website hosting"],links:{aws:"https://aws.amazon.com/s3/",gcp:"https://cloud.google.com/storage",azure:"https://azure.microsoft.com/en-us/products/storage/blobs/"}},blockstorage:{desc:"High-performance storage volumes for VMs/Containers.",howItWorks:"Attaches to instances like a hard drive for persistent data storage.",pros:["Low latency","Consistent performance","Bootable volumes"],cons:["Attached to single instance (usually)","More expensive than object storage","Manual sizing required"],bestFor:["Database storage","OS boot drives","High-performance file systems"],links:{aws:"https://aws.amazon.com/ebs/",gcp:"https://cloud.google.com/persistent-disk",azure:"https://azure.microsoft.com/en-us/products/storage/disk/"}},loadbalancer:{desc:"Distributes network traffic across multiple servers.",howItWorks:"Routes incoming requests to healthy instances to ensure availability and performance.",pros:["High availability","Health checking","SSL termination"],cons:["Additional cost","Potential single point of failure (if misconfigured)","Complexity"],bestFor:["Distributing web traffic","High availability apps","Microservices communication"],links:{aws:"https://aws.amazon.com/elasticloadbalancing/",gcp:"https://cloud.google.com/load-balancing",azure:"https://azure.microsoft.com/en-us/products/load-balancer/"}},cdn:{desc:"Content Delivery Network for fast global access.",howItWorks:"Caches content at edge locations close to users to reduce latency.",pros:["Reduced latency for global users","Reduced origin server load","DDoS protection"],cons:["Cache invalidation complexity","Cost for high bandwidth","Stale content potential"],bestFor:["Serving static assets (images, CSS, JS)","Video streaming","Global websites"],links:{aws:"https://aws.amazon.com/cloudfront/",gcp:"https://cloud.google.com/cdn",azure:"https://azure.microsoft.com/en-us/products/cdn/"}},apigateway:{desc:"Manage and secure API endpoints.",howItWorks:"Acts as a front door for applications to access data, business logic, or functionality.",pros:["Centralized authentication","Rate limiting and throttling","API versioning"],cons:["Added latency","Vendor lock-in","Cost at high scale"],bestFor:["Microservices entry point","Public API exposure","Backend for Frontend"],links:{aws:"https://aws.amazon.com/api-gateway/",gcp:"https://cloud.google.com/api-gateway",azure:"https://azure.microsoft.com/en-us/products/api-management/"}},networking:{desc:"Virtual Network infrastructure.",howItWorks:"Logically isolated section of the cloud where you can launch resources in a virtual network.",pros:["Network isolation","Security control","Custom topology"],cons:["Complexity to manage","CIDR block planning","Connectivity costs"],bestFor:["Isolating resources","Hybrid cloud connectivity","Secure internal communication"],links:{aws:"https://aws.amazon.com/vpc/",gcp:"https://cloud.google.com/vpc",azure:"https://azure.microsoft.com/en-us/products/virtual-network/"}},auth:{desc:"User sign-up, sign-in, and access control.",howItWorks:"Manages user identities and federated login flows securely.",pros:["Offloads security maintenance","Social login integration","MFA support"],cons:["Limited UI customization","Vendor lock-in","Per-user pricing"],bestFor:["User authentication","B2C applications","Single Sign-On (SSO)"],links:{aws:"https://aws.amazon.com/cognito/",gcp:"https://firebase.google.com/docs/auth",azure:"https://azure.microsoft.com/en-us/products/active-directory-b2c/"}},identityauth:{desc:"User sign-up, sign-in, and access control.",howItWorks:"Manages user identities and federated login flows securely.",pros:["Offloads security maintenance","Social login integration","MFA support"],cons:["Limited UI customization","Vendor lock-in","Per-user pricing"],bestFor:["User authentication","B2C applications","Single Sign-On (SSO)"],links:{aws:"https://aws.amazon.com/cognito/",gcp:"https://firebase.google.com/docs/auth",azure:"https://azure.microsoft.com/en-us/products/active-directory-b2c/"}},messagequeue:{desc:"Decouple microservices and distributed systems.",howItWorks:"Stores messages until the consuming application can process them.",pros:["Decouples components","Buffering/Load leveling","Reliable delivery"],cons:["Eventual consistency","Complexity in message ordering","Operational overhead"],bestFor:["Asynchronous processing","Task queues","Microservices communication"],links:{aws:"https://aws.amazon.com/sqs/",gcp:"https://cloud.google.com/pubsub",azure:"https://azure.microsoft.com/en-us/products/service-bus/"}},eventstreaming:{desc:"Real-time data streaming and processing.",howItWorks:"Ingests and processes large streams of data records in real-time.",pros:["Real-time analytics","High throughput","Replayability"],cons:["High complexity","Costly at scale","Retention limits"],bestFor:["Log aggregation","Real-time analytics","Event sourcing"],links:{aws:"https://aws.amazon.com/kinesis/",gcp:"https://cloud.google.com/pubsub",azure:"https://azure.microsoft.com/en-us/products/event-hubs/"}},monitoring:{desc:"Collect and visualize metrics and logs.",howItWorks:"Aggregates data from your applications and infrastructure to provide insights.",pros:["Visibility into health","Automated alerting","Performance tuning"],cons:["Data ingestion costs","Configuration complexity","Noise/False alarms"],bestFor:["Application health tracking","Infrastructure monitoring","Debugging"],links:{aws:"https://aws.amazon.com/cloudwatch/",gcp:"https://cloud.google.com/monitoring",azure:"https://azure.microsoft.com/en-us/products/monitor/"}},"aws lambda":{ref:"computeserverless"},lambda:{ref:"computeserverless"},"aws fargate":{ref:"computecontainer"},fargate:{ref:"computecontainer"},"amazon ec2":{ref:"computevm"},ec2:{ref:"computevm"},"amazon rds":{ref:"relationaldatabase"},rds:{ref:"relationaldatabase"},"amazon dynamodb":{ref:"nosqldatabase"},dynamodb:{ref:"nosqldatabase"},"amazon s3":{ref:"objectstorage"},s3:{ref:"objectstorage"},"amazon ebs":{ref:"blockstorage"},ebs:{ref:"blockstorage"},"elastic load balancing":{ref:"loadbalancer"},elb:{ref:"loadbalancer"},"amazon cloudfront":{ref:"cdn"},cloudfront:{ref:"cdn"},"amazon api gateway":{ref:"apigateway"},"api gateway":{ref:"apigateway"},"amazon vpc":{ref:"networking"},vpc:{ref:"networking"},"amazon cognito":{ref:"auth"},cognito:{ref:"auth"},"amazon sqs":{ref:"messagequeue"},sqs:{ref:"messagequeue"},"amazon kinesis":{ref:"eventstreaming"},kinesis:{ref:"eventstreaming"},"amazon cloudwatch":{ref:"monitoring"},cloudwatch:{ref:"monitoring"},"google cloud functions":{ref:"computeserverless"},"cloud functions":{ref:"computeserverless"},"cloud run":{ref:"computecontainer"},"compute engine":{ref:"computevm"},"cloud sql":{ref:"relationaldatabase"},firestore:{ref:"nosqldatabase"},"cloud storage":{ref:"objectstorage"},"persistent disk":{ref:"blockstorage"},"cloud load balancing":{ref:"loadbalancer"},"cloud cdn":{ref:"cdn"},"api gateway":{ref:"apigateway"},"vpc network":{ref:"networking"},"firebase auth":{ref:"auth"},"cloud pub/sub":{ref:"messagequeue"},"pub/sub":{ref:"messagequeue"},"cloud monitoring":{ref:"monitoring"},stackdriver:{ref:"monitoring"},"azure functions":{ref:"computeserverless"},"azure container apps":{ref:"computecontainer"},"virtual machines":{ref:"computevm"},"azure sql database":{ref:"relationaldatabase"},"cosmos db":{ref:"nosqldatabase"},"blob storage":{ref:"objectstorage"},"disk storage":{ref:"blockstorage"},"load balancer":{ref:"loadbalancer"},"azure cdn":{ref:"cdn"},"api management":{ref:"apigateway"},"virtual network":{ref:"networking"},"azure ad b2c":{ref:"auth"},"service bus":{ref:"messagequeue"},"event hubs":{ref:"eventstreaming"},"azure monitor":{ref:"monitoring"}},Hl=(e,t)=>{var i;if(!e)return{desc:"Unknown Service",howItWorks:"No description available.",links:{}};const s=e.toLowerCase().trim();let n=De[s];if(!n){const l=s.replace(/[^a-z0-9]/g,"");n=De[l]}n&&n.ref&&(n=De[n.ref]),n||(s.includes("function")||s.includes("lambda")?n=De.computeserverless:s.includes("container")||s.includes("fargate")||s.includes("kubernetes")||s.includes("eks")||s.includes("gke")||s.includes("aks")?n=De.computecontainer:s.includes("vm")||s.includes("ec2")||s.includes("compute engine")?n=De.computevm:s.includes("sql")||s.includes("rds")?n=De.relationaldatabase:s.includes("dynamo")||s.includes("cosmos")||s.includes("mongo")||s.includes("firestore")?n=De.nosqldatabase:s.includes("cache")||s.includes("redis")?n=De.cache:s.includes("bucket")||s.includes("s3")||s.includes("blob")||s.includes("storage")?n=De.objectstorage:s.includes("load balanc")||s.includes("elb")?n=De.loadbalancer:s.includes("cdn")||s.includes("cloudfront")?n=De.cdn:s.includes("api")||s.includes("gateway")?n=De.apigateway:s.includes("vpc")||s.includes("network")||s.includes("subnet")?n=De.networking:s.includes("auth")||s.includes("cognito")||s.includes("security")?n=De.auth:s.includes("queue")||s.includes("sqs")||s.includes("pub sub")||s.includes("message")?n=De.messagequeue:(s.includes("monitor")||s.includes("watch")||s.includes("insight")||s.includes("observability"))&&(n=De.monitoring));const a=n||{desc:`${e} Service`,howItWorks:"Essential cloud infrastructure component.",links:{}},o=((i=a.links)==null?void 0:i[t==null?void 0:t.toLowerCase()])||`https://www.google.com/search?q=${t}+${e}+documentation`;return{...a,link:o,name:e}},Zp=({data:e,id:t})=>{var l,c,u,d,f,h;const[s,n]=F.useState(!1),a=e.serviceId||((h=(f=(d=(u=(c=(l=e.label)==null?void 0:l.props)==null?void 0:c.children)==null?void 0:u[1])==null?void 0:d.props)==null?void 0:f.children)==null?void 0:h.toLowerCase().replace(/\s+/g,"")),o=e.provider||"aws",i=Hl(a,o);return r.jsxs("div",{className:"relative",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[r.jsx(di,{type:"target",position:ui.Left,className:"!bg-gray-400 !w-2 !h-2"}),r.jsx("div",{className:"relative z-10",children:e.label}),r.jsx(di,{type:"source",position:ui.Right,className:"!bg-gray-400 !w-2 !h-2"}),r.jsx(jl,{children:s&&r.jsxs(Rr.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute left-1/2 transform -translate-x-1/2 bottom-full mb-3 w-64 bg-gray-900 border border-gray-700 rounded-xl shadow-2xl p-4 z-50 pointer-events-none",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2 pb-2 border-b border-gray-700",children:[r.jsx("span",{className:"text-xl",children:""}),r.jsx("h4",{className:"font-bold text-white text-sm",children:i.name||a})]}),r.jsx("p",{className:"text-xs text-gray-300 mb-2 leading-relaxed",children:i.desc}),r.jsxs("div",{className:"bg-black/30 rounded p-2 mb-2",children:[r.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold mb-1",children:"How it works"}),r.jsx("p",{className:"text-xs text-gray-300",children:i.howItWorks})]}),i.link&&r.jsx("div",{className:"text-right",children:r.jsx("span",{className:"text-[10px] text-primary",children:"View Docs "})}),r.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 top-full w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-t-[6px] border-t-gray-700"})]})})]})},qp=F.memo(Zp),Kp={service:qp},Ba={client:{bg:"#4B5563",border:"#9CA3AF",text:"#F9FAFB"},network:{bg:"#1E40AF",border:"#3B82F6",text:"#DBEAFE"},compute:{bg:"#7C3AED",border:"#A78BFA",text:"#EDE9FE"},database:{bg:"#059669",border:"#10B981",text:"#D1FAE5"},storage:{bg:"#DC2626",border:"#EF4444",text:"#FEE2E2"},security:{bg:"#EA580C",border:"#F97316",text:"#FFEDD5"},messaging:{bg:"#DB2777",border:"#EC4899",text:"#FCE7F3"},observability:{bg:"#0891B2",border:"#06B6D4",text:"#CFFAFE"},integration:{bg:"#65A30D",border:"#84CC16",text:"#ECFCCB"},other:{bg:"#6B7280",border:"#9CA3AF",text:"#F3F4F6"}},Yp={client:"",cdn:"",loadbalancer:"",apigateway:"",websocketgateway:"",appcompute:"",computeserverless:"",computecontainer:"",computevm:"",batchcompute:"",mlinferenceservice:"",relationaldatabase:"",nosqldatabase:"",analyticaldatabase:"",cache:"",objectstorage:"",blockstorage:"",auth:"",identityauth:"",messagequeue:"",eventstreaming:"",eventbus:"",etlorchestration:"",datawarehouse:"",logging:"",monitoring:"",paymentgateway:"",pushnotificationservice:"",secretsmanagement:"",waf:"",networking:""};function Xp(e,t,s="LR"){const n=new fi.graphlib.Graph;return n.setDefaultEdgeLabel(()=>({})),n.setGraph({rankdir:s,nodesep:150,ranksep:300,marginx:50,marginy:50}),e.forEach(o=>{n.setNode(o.id,{width:200,height:80})}),t.forEach(o=>{n.setEdge(o.source,o.target)}),fi.layout(n),{nodes:e.map(o=>{const i=n.node(o.id);return{...o,position:{x:i.x-100,y:i.y-40}}}),edges:t}}function Jp(e){if(!(e!=null&&e.architecture))return{nodes:[],edges:[]};const{nodes:t=[],edges:s=[]}=e.architecture,n=t.map(o=>{const i=o.category||"other",l=Ba[i]||Ba.other,c=Yp[o.type]||"";return{id:o.id,type:"default",data:{label:r.jsxs("div",{className:"flex flex-col items-center justify-center space-y-1 p-3",children:[r.jsx("div",{className:"text-2xl",children:c}),r.jsx("div",{className:"text-xs font-bold text-center leading-tight",style:{color:l.text},children:o.label}),o.role&&r.jsx("div",{className:"text-[9px] opacity-70 italic",style:{color:l.text},children:o.role.replace(/_/g," ")})]})},position:{x:0,y:0},style:{background:l.bg,border:`2px solid ${l.border}`,borderRadius:"12px",padding:"8px",width:200,height:80,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 12px ${l.border}40`},draggable:!1}}),a=s.map((o,i)=>({id:`edge-${i}`,source:o.from,target:o.to,label:o.label||"",type:"smoothstep",animated:!0,labelShowBg:!0,labelBgPadding:[8,4],labelBgBorderRadius:6,pathOptions:{borderRadius:20},style:{stroke:"#4B5563",strokeWidth:2},labelStyle:{fill:"#E5E7EB",fontSize:10,fontWeight:500,letterSpacing:"0.05em"},labelBgStyle:{fill:"#111827",stroke:"#374151",strokeWidth:1,fillOpacity:.95}}));return{nodes:n,edges:a}}const Qp=Qe.forwardRef(({services:e,edges:t,provider:s,pattern:n},a)=>{const{nodes:o,edges:i}=F.useMemo(()=>Jp({architecture:{nodes:e,edges:t}}),[e,t,s]),{nodes:l,edges:c}=F.useMemo(()=>Xp(o,i),[o,i]),[u,d,f]=ic(l),[h,m,v]=ac(c);Qe.useEffect(()=>{d(l),m(c)},[l,c,d,m]);const g=F.useCallback(()=>{const x=hi(u);if(x.width===0||x.height===0)return;const y=50,w=x.width+y*2,j=x.height+y*2,_=-x.x+y,A=-x.y+y,E=`translate(${_}px, ${A}px) scale(1)`,D=document.querySelector(".react-flow__viewport");if(!D){console.error("Viewport element not found");return}Oa(D,{backgroundColor:"#0F172A",width:w,height:j,style:{width:`${w}px`,height:`${j}px`,transform:E},pixelRatio:3}).then(P=>{const $=document.createElement("a");$.download=`architecture-${s}-${n}-${Date.now()}.png`,$.href=P,$.click()}).catch(P=>{console.error("Failed to export diagram:",P),alert("Failed to export diagram: "+P.message)})},[u,s,n]);return F.useImperativeHandle(a,()=>({captureScreenshot:async()=>{const x=hi(u);if(x.width===0)return null;const y=50,w=x.width+y*2,j=x.height+y*2,_=-x.x+y,A=-x.y+y,E=`translate(${_}px, ${A}px) scale(1)`,D=document.querySelector(".react-flow__viewport");if(!D)throw new Error("Viewport not found");return Oa(D,{backgroundColor:"#0F172A",width:w,height:j,style:{width:`${w}px`,height:`${j}px`,transform:E},pixelRatio:3})}})),u.length===0?r.jsx("div",{className:"bg-black/20 rounded-xl p-12 min-h-[500px] flex items-center justify-center",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("span",{className:"material-icons text-gray-500 text-6xl",children:"cloud_off"}),r.jsx("p",{className:"text-gray-400 text-lg",children:"No architecture data available"})]})}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:g,className:"px-4 py-2 bg-primary/20 border border-primary/40 text-primary rounded-lg hover:bg-primary/30 transition-colors flex items-center space-x-2 text-sm font-semibold",children:[r.jsx("span",{className:"material-icons text-lg",children:"download"}),r.jsx("span",{children:"Download PNG (Full)"})]})}),r.jsx("div",{className:"relative bg-[#0F172A] rounded-xl border border-white/10 overflow-hidden",style:{height:"600px"},children:r.jsxs(oc,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:v,fitView:!0,fitViewOptions:{padding:.2},minZoom:.5,maxZoom:2,nodesDraggable:!1,nodesConnectable:!1,elementsSelectable:!1,panOnDrag:!0,zoomOnScroll:!0,preventScrolling:!0,nodeTypes:Kp,children:[r.jsx(lc,{color:"#1E293B",gap:20,size:1}),r.jsx(cc,{showInteractive:!1,style:{background:"#1F2937",border:"1px solid #374151",borderRadius:"8px"}}),r.jsx(ep,{nodeColor:x=>(x.style||{}).background||"#6B7280",maskColor:"#0F172A99",style:{background:"#1F2937"}})]})})]})}),eg=({serviceId:e,provider:t,serviceName:s})=>{const[n,a]=F.useState(!1),o=Hl(e,t),i=s||o.name||e;return r.jsxs("div",{className:"relative inline-block ml-2",children:[r.jsx("button",{onClick:()=>a(!0),className:"w-5 h-5 rounded-full bg-gray-700 text-gray-300 hover:bg-primary hover:text-white flex items-center justify-center text-xs transition-colors focus:outline-none","aria-label":"Service Information",children:r.jsx("span",{className:"font-serif italic font-bold",children:"i"})}),r.jsx(jl,{children:n&&r.jsxs(r.Fragment,{children:[r.jsx(Rr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[999]",onClick:()=>a(!1)}),r.jsxs(Rr.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.2},className:"fixed left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[90vw] max-w-md bg-surface border border-border rounded-xl shadow-2xl p-6 z-[1000] overflow-hidden",role:"dialog","aria-modal":"true",children:[r.jsx("button",{onClick:()=>a(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:r.jsx("span",{className:"material-icons",children:"close"})}),r.jsxs("div",{className:"flex items-center space-x-3 mb-4 pb-4 border-b border-white/5",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center text-xl",children:""}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white text-lg",children:i}),r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wide",children:t||"Cloud Service"})]})]}),r.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2 custom-scrollbar",children:[r.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:o.desc}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold mb-1",children:"How it works"}),r.jsx("p",{className:"text-sm text-gray-300",children:o.howItWorks})]}),(o.pros||o.cons)&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.pros&&r.jsxs("div",{children:[r.jsxs("h5",{className:"flex items-center text-green-400 text-xs font-bold uppercase mb-2",children:[r.jsx("span",{className:"material-icons text-sm mr-1",children:"check_circle"})," Pros"]}),r.jsx("ul",{className:"space-y-1",children:o.pros.map((l,c)=>r.jsxs("li",{className:"text-xs text-gray-300 flex items-start",children:[r.jsx("span",{className:"mr-1.5 mt-0.5 text-green-500/50",children:""}),l]},c))})]}),o.cons&&r.jsxs("div",{children:[r.jsxs("h5",{className:"flex items-center text-red-400 text-xs font-bold uppercase mb-2",children:[r.jsx("span",{className:"material-icons text-sm mr-1",children:"cancel"})," Cons"]}),r.jsx("ul",{className:"space-y-1",children:o.cons.map((l,c)=>r.jsxs("li",{className:"text-xs text-gray-300 flex items-start",children:[r.jsx("span",{className:"mr-1.5 mt-0.5 text-red-500/50",children:""}),l]},c))})]})]}),o.bestFor&&r.jsxs("div",{children:[r.jsxs("h5",{className:"flex items-center text-amber-400 text-xs font-bold uppercase mb-2",children:[r.jsx("span",{className:"material-icons text-sm mr-1",children:"lightbulb"})," Best For"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:o.bestFor.map((l,c)=>r.jsx("span",{className:"px-2 py-1 bg-amber-400/10 border border-amber-400/20 text-amber-200 text-xs rounded-md",children:l},c))})]}),o.link&&r.jsx("div",{className:"pt-4 mt-2 border-t border-white/5 text-right",children:r.jsxs("a",{href:o.link,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:text-primary-light flex items-center justify-end font-medium transition-colors",children:["View Official Documentation",r.jsx("span",{className:"material-icons text-sm ml-1",children:"open_in_new"})]})})]})]})]})})]})},nr="http://localhost:5000/api",tg=({workspaceId:e,infraSpec:t,costEstimation:s,selectedProvider:n,selectedProfile:a,usageProfile:o,requirementsData:i,architectureData:l,onArchitectureDataLoaded:c,onInfraSpecUpdate:u,onDiagramImageSave:d,onNext:f,onBack:h,isDeployed:m})=>{var j,_,A;const[v,g]=F.useState(!0),[x,y]=F.useState(null),w=F.useRef(null);return F.useEffect(()=>{(async()=>{if(!(!t||!n||!a))try{const D=localStorage.getItem("token"),C=D?{Authorization:`Bearer ${D}`}:{},P=await Me.post(`${nr}/workflow/architecture`,{workspace_id:e,infraSpec:t,provider:n,profile:a,usage_profile:(o==null?void 0:o.usage_profile)||{},intent:(t==null?void 0:t.locked_intent)||{},requirements:i||{}},{headers:C});if(!P.data||!P.data.data)throw new Error("Invalid response structure from architecture endpoint");c&&c(P.data.data),y(null)}catch(D){console.error("Architecture loading error:",D),y("Failed to load architecture diagram. Using fallback view."),pe.error("Failed to load architecture diagram")}finally{g(!1)}})()},[e,t,n,a,o,i,c]),x?r.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in pb-20",children:[r.jsxs("div",{className:"text-center space-y-4 mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-white",children:"Architecture Design"}),r.jsx("p",{className:"text-gray-400",children:"Architecture diagram could not be loaded, but you can continue to Terraform generation."})]}),r.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-2xl p-6",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"material-icons text-amber-400 text-sm mt-0.5",children:"warning"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-amber-200 mb-1",children:"Architecture Not Available"}),r.jsx("p",{className:"text-sm text-amber-200/80",children:"The architecture diagram could not be generated, but your infrastructure specification is ready for Terraform generation."})]})]})}),r.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-white/5",children:[r.jsxs("button",{onClick:h,className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons",children:"arrow_back"}),r.jsx("span",{children:"Back to Cost"})]}),r.jsxs("button",{onClick:f,className:"px-8 py-4 bg-gradient-to-r from-primary to-purple-500 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-primary/20",children:[r.jsx("span",{children:"Continue to Feedback"}),r.jsx("span",{className:"material-icons",children:"arrow_forward"})]})]})]}):v&&!l?r.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 animate-fade-in pb-20",children:[r.jsxs("div",{className:"text-center space-y-4 mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-white",children:"Architecture Design Confirmation"}),r.jsx("p",{className:"text-gray-400",children:"Generating your cloud architecture diagram..."})]}),r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-primary/20"}),r.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full border-4 border-transparent border-t-primary animate-spin"})]}),r.jsx("p",{className:"text-xl font-semibold text-white",children:"Generating Architecture"}),r.jsx("p",{className:"text-gray-400",children:"Creating your provider-specific diagram..."})]})]}):r.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-fade-in pb-20",children:[r.jsxs("div",{className:"text-center space-y-4 mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-white",children:"Architecture Design Confirmation"}),r.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"This architecture reflects the recommended setup based on your requirements and usage."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[r.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Provider"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold
                            ${n==="AWS"?"bg-[#FF9900]/20 text-[#FF9900]":n==="GCP"?"bg-[#4285F4]/20 text-[#4285F4]":"bg-[#0078D4]/20 text-[#0078D4]"}`,children:n==="AWS"?"AWS":n==="GCP"?"GCP":"AZ"}),r.jsx("div",{children:r.jsx("div",{className:"font-bold text-white text-lg",children:n==="AZURE"?"Azure":n})})]})]}),r.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[r.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Scenario"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/20 flex items-center justify-center",children:r.jsx("span",{className:"material-icons text-primary",children:"tune"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-white text-lg capitalize",children:a==null?void 0:a.replace("_"," ")}),r.jsx("div",{className:"text-xs text-gray-400",children:"Cost optimization profile"})]})]})]})]}),r.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center",children:[r.jsx("span",{className:"material-icons mr-2",children:"design_services"}),"Architecture Diagram"]}),r.jsx(Qp,{ref:w,services:((j=l==null?void 0:l.architecture)==null?void 0:j.nodes)||[],edges:((_=l==null?void 0:l.architecture)==null?void 0:_.edges)||[],provider:n,pattern:(t==null?void 0:t.architecture_pattern)||"SERVERLESS_WEB_APP"}),r.jsx("div",{className:"text-xs text-gray-500 mt-4 text-center italic",children:'Interactive architecture diagram. Use mouse wheel to zoom, drag to pan. Click "Download PNG" to export.'})]}),r.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center",children:[r.jsx("span",{className:"material-icons mr-2",children:"inventory"}),"Services Used (",n==="AZURE"?"Azure":n,")"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(A=l==null?void 0:l.services)==null?void 0:A.map((E,D)=>{const C=E.state==="USER_DISABLED";return C&&!m||C?null:r.jsx("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10 hover:bg-white/10 transition-colors group relative",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h4",{className:"font-bold text-white text-lg",children:E.name||E.pretty_name||E.canonical_type}),r.jsx(eg,{serviceId:E.canonical_type||E.name,provider:n,serviceName:E.name||E.pretty_name})]}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:E.description}),r.jsx("div",{className:"text-xs text-gray-500 mt-2 capitalize font-mono",children:E.category})]})})},D)})})]}),(l==null?void 0:l.notes)&&r.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center",children:[r.jsx("span",{className:"material-icons mr-2",children:"sticky_note_2"}),"Architecture Notes"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.notes.slice(0,4).map((E,D)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"material-icons text-primary text-sm mt-0.5",children:"info"}),r.jsx("p",{className:"text-sm text-gray-300",children:E})]},D))})]}),r.jsxs("div",{className:"flex flex-col space-y-6 pt-8 border-t border-white/5",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Choose Your Deployment Method"}),r.jsx("p",{className:"text-sm text-gray-400",children:"How would you like to deploy this infrastructure?"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m?r.jsxs("div",{className:"p-6 bg-surface border border-border rounded-2xl opacity-60 cursor-not-allowed",children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center",children:r.jsx("span",{className:"material-icons text-blue-400 text-2xl",children:"visibility"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white",children:"View Configuration"}),r.jsx("p",{className:"text-xs text-gray-400",children:"View Terraform & Setup"})]})]}),r.jsx("p",{className:"text-sm text-gray-400",children:"Review the generated Terraform code and deployment details."})]}):r.jsxs("button",{onClick:async()=>{var E,D;if(w.current){const C="snapshot-save";try{if(!e){console.error("Missing workspaceId for snapshot save"),f("self");return}pe.loading("Saving architecture snapshot...",{id:C});const P=await w.current.captureScreenshot(),$=localStorage.getItem("token"),te=$?{Authorization:`Bearer ${$}`}:{},T=await Me.get(`${nr}/workspaces/${e}`,{headers:te}),b={...typeof T.data.state_json=="string"?JSON.parse(T.data.state_json):T.data.state_json||{},diagramImage:P};await Me.post(`${nr}/workspaces/save`,{workspaceId:e,step:T.data.step,state:b,name:T.data.name,projectId:T.data.project_id},{headers:te}),d&&d(P),pe.success("Snapshot saved",{id:C})}catch(P){console.error("Failed to save diagram snapshot:",P);const $=((D=(E=P.response)==null?void 0:E.data)==null?void 0:D.msg)||"Could not save diagram snapshot";pe.error($,{id:C})}}f("self")},className:"p-6 bg-surface border border-border rounded-2xl hover:border-primary/50 transition-all group text-left",children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center",children:r.jsx("span",{className:"material-icons text-blue-400 text-2xl group-hover:text-primary transition-colors",children:"download_done"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white group-hover:text-primary transition-colors",children:"Self Deployment"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Download & deploy manually"})]})]}),r.jsx("p",{className:"text-sm text-gray-400",children:"Get the Terraform code and deploy it yourself using your own credentials and workflow."})]}),m?r.jsxs("div",{className:"p-6 bg-surface border border-border rounded-2xl opacity-40 cursor-not-allowed text-left relative",children:[r.jsx("div",{className:"absolute top-3 right-3 px-2 py-1 bg-gradient-to-r from-gray-600 to-gray-700 text-white text-[10px] font-bold rounded-full",children:"DISABLED"}),r.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-500/20 flex items-center justify-center",children:r.jsx("span",{className:"material-icons text-green-400 text-2xl",children:"rocket_launch"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white",children:"One-Click Deploy"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Automated cloud deployment"})]})]}),r.jsx("p",{className:"text-sm text-gray-400",children:"We handle the deployment for you. Just connect your cloud account and we'll do the rest."}),r.jsxs("div",{className:"mt-4 flex items-center text-xs text-gray-500",children:[r.jsx("span",{className:"material-icons text-sm mr-1",children:"check"}),"Zero DevOps required"]})]}):r.jsxs("button",{onClick:()=>!m&&f("oneclick"),disabled:m,className:"p-6 bg-surface border border-border rounded-2xl transition-all group text-left relative hover:border-green-500/50",children:[r.jsx("div",{className:"absolute top-3 right-3 px-2 py-1 bg-gradient-to-r from-green-400 to-emerald-500 text-black text-[10px] font-bold rounded-full",children:"COMING SOON"}),r.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-500/20 flex items-center justify-center",children:r.jsx("span",{className:"material-icons text-green-400 text-2xl",children:"rocket_launch"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white group-hover:text-green-400 transition-colors",children:"One-Click Deploy"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Automated cloud deployment"})]})]}),r.jsx("p",{className:"text-sm text-gray-400",children:"We handle the deployment for you. Just connect your cloud account and we'll do the rest."}),r.jsxs("div",{className:"mt-4 flex items-center text-xs text-gray-500",children:[r.jsx("span",{className:"material-icons text-sm mr-1",children:"check"}),"Zero DevOps required"]})]})]}),!m&&r.jsxs("button",{onClick:h,className:"mx-auto px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons",children:"arrow_back"}),r.jsx("span",{children:"Back to Cost Estimation"})]})]})]})},ht="http://localhost:5000",lg=()=>{var is,as,os,Lt,ut,wt,pn,gn,xn,yn,bn,vn,wn,jn,_n,kn,Nn,Sn,Cn,An,Tn,En,Rn,Pn,Dn,In,Fn,Mn,zn,On,Bn,Ln,Vn,$n,Un,Wn,Gn,Hn,Zn,qn,Kn,Yn,Xn,Jn,Qn,ei,ti,si,ri,ni,ii,ai,oi,li,ci;const{id:e}=ql(),t=Kl(),[s,n]=F.useState("input"),[a,o]=F.useState(""),[i,l]=F.useState([]),[c,u]=F.useState(null),[d,f]=F.useState(null),[h,m]=F.useState(null),[v,g]=F.useState(!1),[x,y]=F.useState(null),[w,j]=F.useState(!1),[_,A]=F.useState(null),[E,D]=F.useState(null),[C,P]=F.useState(null),[$,te]=F.useState("cost_effective"),[T,V]=F.useState(e==="new"?null:e),[b,U]=F.useState(null),[ae,W]=F.useState(null),[ne,H]=F.useState(!1),[ie,O]=F.useState(null),[S,J]=F.useState(!1),[Y,Z]=F.useState(null),[ce,ge]=F.useState(!1),[ue,le]=F.useState(!1),[be,fe]=F.useState(!1),[we,Se]=F.useState(""),[p,L]=F.useState(null),[z,N]=F.useState(!1),[k,R]=F.useState([]),[G,q]=F.useState("medium"),[M,X]=F.useState(!1),[ee,Q]=F.useState([]),[oe,je]=F.useState(null);F.useEffect(()=>{C&&we&&a!==we?le(!0):C&&we&&a===we&&le(!1)},[a,we,C]);const he=(I,K="An error occurred")=>{var re,de,ye,me,Ae,Ve;console.error("[API ERROR]",I),g(!1);let B=K;return((re=I.response)==null?void 0:re.status)===401?(B="Your session has expired. Please login again.",pe.error(B),setTimeout(()=>t("/login"),1500)):((de=I.response)==null?void 0:de.status)===500?(B="Server error occurred. Our team has been notified.",L(B)):I.response?(B=((me=(ye=I.response)==null?void 0:ye.data)==null?void 0:me.msg)||((Ve=(Ae=I.response)==null?void 0:Ae.data)==null?void 0:Ve.error)||B,pe.error(B)):(B="Cannot connect to server. Please ensure the backend is running.",L(B)),B},Le=async()=>{if(S){n("usage_review");return}if(_){console.log("Usage profile already exists, skipping redundant AI call."),n("usage_review");return}g(!0),n("processing_usage");try{const I=localStorage.getItem("token"),K=I?{Authorization:`Bearer ${I}`}:{},B=await Me.post(`${ht}/api/workflow/predict-usage`,{intent:E,infraSpec:d},{headers:K});setTimeout(()=>{A(B.data.data),n("usage_review"),g(!1),pe.success("Usage estimates generated!")},1e3)}catch(I){he(I,"Failed to estimate usage."),n("review_spec")}},xe=I=>{g(!0),setTimeout(()=>{n(I),g(!1)},800)},We=async()=>{if(S){xe("cost_estimation");return}if(!d||!E){pe.error("Missing infrastructure data. Please restart.");return}g(!0),n("processing_cost"),pe.loading("Analyzing costs across providers...",{id:"cost-analysis"});try{const I=localStorage.getItem("token"),K=I?{Authorization:`Bearer ${I}`}:{},B={infraSpec:d,intent:E,cost_profile:$,usage_profile:{..._==null?void 0:_.usage_profile,source:be?"user_provided":"ai_inferred"}};le(!1),Se(a);const re=await Me.post(`${ht}/api/workflow/cost-analysis`,B,{headers:K});if(pe.dismiss("cost-analysis"),re.data.step==="cost_estimation")setTimeout(()=>{var me;const de=re.data.data;P(de),de.sizing&&f(Ae=>({...Ae,sizing:de.sizing}));const ye=((me=de.recommended)==null?void 0:me.provider)||de.recommended_provider;U(ye?ye.toUpperCase():null),xe("cost_estimation"),pe.success("Cost analysis complete!")},100);else throw new Error("Unexpected response from cost analysis")}catch(I){pe.dismiss("cost-analysis"),he(I,"Failed to analyze costs."),xe("usage_review")}finally{g(!1)}};F.useEffect(()=>{(async()=>{var K,B,re,de,ye;if(e)try{const me=localStorage.getItem("token"),Ae=me?{Authorization:`Bearer ${me}`}:{},Fe=(await Me.get(`${ht}/api/workspaces/${e}`,{headers:Ae})).data;if(((((B=(K=Fe.state_json)==null?void 0:K.deployment)==null?void 0:B.status)||Fe.step)==="active"||Fe.step==="active_deployment")&&(J(!0),console.log("[WORKSPACE] Deployed workspace - editing disabled")),V(Fe.id),m({id:Fe.project_id,name:Fe.name}),Fe.state_json){const ve=Fe.state_json;let Ee=ve.step||Fe.step||"input";Ee==="confirm_intent"&&(Ee="input"),n(Ee),o(ve.description||""),l(ve.history||[]),u(ve.currentQuestion||null),f(ve.infraSpec||null),ve.aiSnapshot&&D(ve.aiSnapshot),ve.costEstimation&&P(ve.costEstimation),ve.costProfile&&te(ve.costProfile),ve.selectedProvider?U(ve.selectedProvider):(de=(re=ve.costEstimation)==null?void 0:re.recommended)!=null&&de.provider&&U(ve.costEstimation.recommended.provider.toUpperCase()),ve.is_live!==void 0&&ge(ve.is_live),ve.is_deployed&&J(ve.is_deployed),ve.projectData&&m($e=>({...$e,...ve.projectData})),ve.usageProfile&&A(ve.usageProfile),ve.removedServices&&Q(ve.removedServices),ve.diagramImage&&je(ve.diagramImage)}Se(a),console.log("Workspace loaded:",Fe.name)}catch(me){he(me,"Failed to load workspace."),((ye=me.response)==null?void 0:ye.status)===404&&t("/workspaces")}})()},[e,t]);const ct=async()=>{if(S||S)return;const I=sd(a);if(!I.isValid){pe.error(I.error);return}g(!0),n("processing");try{const K=localStorage.getItem("token"),B=K?{Authorization:`Bearer ${K}`}:{},re={description:a,domains:k,toggles:{traffic:G,scaling:"auto"},exclusions:{database:M}},de=await Me.post(`${ht}/api/workflow/v2/analyze`,re,{headers:B});setTimeout(()=>{const{step:ye,data:me}=de.data;g(!1),ye==="infra_spec_generated"&&(f(me),m({name:me.project_name}),D(me.intent),xe("review_spec"),pe.success("V2 Architecture Generated Successfully!")),console.warn("Unknown Step:",ye),!ye&&!me&&(pe.error("Server returned empty response."),xe("input"))},1200)}catch(K){he(K,"Failed to analyze your request."),xe("input")}},ke=async I=>{var K,B,re,de,ye,me,Ae,Ve,Fe,At,ve;if(!S){g(!0),n("processing");try{const Ee=localStorage.getItem("token"),$e=Ee?{Authorization:`Bearer ${Ee}`}:{},ls=a||(h==null?void 0:h.name)||"User confirmed intent",cs=await Me.post(`${ht}/api/workflow/analyze`,{userInput:ls,conversationHistory:i,input_type:"CONFIRMATION",approvedIntent:I},{headers:$e});setTimeout(()=>{const{step:He,data:rt}=cs.data;g(!1),He==="refine_requirements"?(u(rt),xe("question")):He==="infra_spec_generated"&&(f(rt),m({name:rt.project_name}),xe("review_spec"),pe.success("Architecture Generated Successfully!"))},1e3)}catch(Ee){console.error("[CONFIRMATION ERROR]",Ee),g(!1),n("confirm_intent");let $e="Failed to confirm and generate architecture.";((K=Ee.response)==null?void 0:K.status)===400?$e=((re=(B=Ee.response)==null?void 0:B.data)==null?void 0:re.msg)||((ye=(de=Ee.response)==null?void 0:de.data)==null?void 0:ye.error)||"Invalid confirmation data. Please try again.":((me=Ee.response)==null?void 0:me.status)===401?($e="Session expired. Please login again.",setTimeout(()=>t("/"),1500)):((Ae=Ee.response)==null?void 0:Ae.status)===500?$e="Server error during architecture generation. Please try again.":Ee.response?$e=((Fe=(Ve=Ee.response)==null?void 0:Ve.data)==null?void 0:Fe.msg)||((ve=(At=Ee.response)==null?void 0:At.data)==null?void 0:ve.error)||$e:$e="Network error. Please check your connection.",pe.error($e,{duration:5e3})}}},Ct=async I=>{S||(y(I),setTimeout(async()=>{const K=[...i,{role:"user",content:a},{role:"assistant",content:c.clarifying_question},{role:"user",content:I}];l(K),u(null),y(null),g(!0),n("processing_spec");try{const B=localStorage.getItem("token"),re=B?{Authorization:`Bearer ${B}`}:{},de=await Me.post(`${ht}/api/workflow/analyze`,{userInput:a,conversationHistory:K,input_type:"AXIS_ANSWER",ai_snapshot:E||(c==null?void 0:c.full_analysis)},{headers:re});setTimeout(()=>{const{step:ye,data:me}=de.data;g(!1),me!=null&&me.full_analysis&&D(me.full_analysis),ye==="refine_requirements"?(u(me),xe("question")):ye==="confirm_intent"?(u(me),xe("confirm_intent")):ye==="infra_spec_generated"&&(f(me),m({name:me.project_name}),xe("review_spec"),pe.success("Architecture Refined & Generated!"))},1200)}catch(B){he(B,"Failed to process your answer."),xe("question")}},600))},dt=async(I=!1)=>{if(S){console.log("Draft save skipped: Project is deployed (read-only)");return}try{const K=localStorage.getItem("token"),B={workspaceId:T,projectId:h==null?void 0:h.id,name:(h==null?void 0:h.name)||`Draft ${new Date().toLocaleTimeString()}`,step:s,state:{history:i,description:a,currentQuestion:c,infraSpec:d,projectData:h,aiSnapshot:E,costEstimation:C,costProfile:$,usageProfile:_,removedServices:ee,diagramImage:oe,step:s}},re=K?{Authorization:`Bearer ${K}`}:{},de=await Me.post(`${ht}/api/workspaces/save`,B,{headers:re});V(de.data.workspaceId),de.data.projectId&&m(ye=>({...ye,id:de.data.projectId})),I||pe.success(`Draft ${T?"Updated":"Saved"} Successfully!`)}catch(K){I?console.error("Silent Save Error:",K):he(K,"Failed to save draft.")}};F.useEffect(()=>{if(s&&T&&s!=="input"&&s!=="processing"&&!S){const I=setTimeout(()=>{dt(!0),console.log(`[Auto-save] Step: ${s}`)},1500);return()=>clearTimeout(I)}},[s,d,C,S]);const Ye=async I=>{if(S)return;const K=d.modules.find(de=>(de.service_name||de.type)===I);if(!K)return;const re=["compute","database","storage"].includes(K.category)?` WARNING: You are removing a CRITICAL component (${I}).

This may make your architecture non-functional or cause data loss logic gaps.

Are you sure you want to move this to the Removed Bin?`:`Are you sure you want to remove ${I}? It will be moved to the Removed Bin and excluded from costs.`;if(window.confirm(re))try{console.log(`[SPEC] Removing module: ${I}`),f(de=>{const ye=de.modules.filter(me=>(me.service_name||me.type)!==I);return{...de,modules:ye}}),Q(de=>[...de,K]),pe.success(`${I} moved to Removed Services.`),setTimeout(()=>dt(!0),100)}catch(de){console.error("[REMOVE ERROR]",de),pe.error("Failed to remove module.")}},ns=I=>{if(S)return;const K=ee.find(B=>(B.service_name||B.type)===I);K&&(f(B=>({...B,modules:[...B.modules||[],K]})),Q(B=>B.filter(re=>(re.service_name||re.type)!==I)),pe.success(`${I} restored to architecture.`),setTimeout(()=>dt(!0),100))};return r.jsxs("div",{className:"flex h-screen bg-background text-white font-inter relative selection:bg-primary/30 transition-all duration-500",children:[r.jsx(Xc,{position:"top-right",toastOptions:{style:{background:"var(--color-surface, #171E2B)",color:"#fff",border:"1px solid var(--color-border, #2E3645)"}}}),p&&r.jsxs("div",{className:"fixed top-0 left-0 right-0 z-[1000] bg-red-600/95 backdrop-blur-md text-white p-4 shadow-2xl flex items-center justify-center gap-6 animate-slide-down border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"material-icons text-white animate-pulse",children:"report_problem"}),r.jsx("span",{className:"font-bold text-lg tracking-wide",children:p})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>{L(null),window.location.reload()},className:"px-6 py-2 bg-white text-red-600 rounded-xl text-sm font-black hover:bg-gray-100 transition-all transform hover:scale-105 active:scale-95 shadow-lg",children:"RECONNECT NOW"}),r.jsx("button",{onClick:()=>L(null),className:"p-2 hover:bg-white/10 rounded-full transition-colors",title:"Dismiss",children:r.jsx("span",{className:"material-icons text-xl",children:"close"})})]})]}),r.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0",children:[r.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-primary/5 rounded-full blur-[120px]"}),r.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[30%] h-[30%] bg-blue-500/5 rounded-full blur-[100px]"})]}),r.jsx("div",{className:"w-64 bg-surface/80 backdrop-blur-xl border-r border-border flex flex-col justify-between p-6 hidden md:flex z-10",children:r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"flex items-center space-x-3 text-primary font-bold text-xl tracking-tight",children:r.jsx("div",{className:"flex items-center",children:r.jsx("a",{href:"/",children:r.jsx("img",{src:"/cloudiverse.png",alt:"Cloudiverse Architect",className:"h-12 w-auto"})})})}),r.jsxs("nav",{className:"space-y-3",children:[r.jsxs("div",{className:`px-4 py-3 rounded-xl font-medium flex items-center space-x-3 transition-all cursor-pointer 
                            ${s==="input"||s==="question"||s==="processing"?"bg-primary/10 border border-primary/20 text-primary shadow-lg shadow-primary/5":"text-gray-400 hover:bg-white/5"}`,onClick:()=>xe("input"),children:[r.jsx("span",{className:"material-icons text-sm",children:"edit_note"}),r.jsx("span",{children:"Requirements"}),d&&s!=="input"&&s!=="question"&&s!=="processing"&&r.jsx("span",{className:"material-icons text-xs text-green-500 ml-auto",children:"check_circle"})]}),r.jsxs("div",{className:`px-4 py-3 rounded-xl font-medium flex items-center space-x-3 transition-all 
                            ${s==="review_spec"?"bg-primary/10 border border-primary/20 text-primary shadow-lg shadow-primary/5":!d&&!S?"opacity-50 cursor-not-allowed text-gray-500":"text-gray-400 hover:bg-white/5 cursor-pointer"}`,onClick:()=>(d||S)&&xe("review_spec"),children:[r.jsx("span",{className:"material-icons text-sm",children:"schema"}),r.jsx("span",{children:"Specification"}),(d||S)&&s!=="review_spec"&&r.jsx("span",{className:"material-icons text-xs text-green-500 ml-auto",children:"check_circle"})]}),r.jsxs("div",{className:`px-4 py-3 rounded-xl font-medium flex items-center space-x-3 transition-all 
                            ${s==="cost_estimation"||s==="processing_cost"?"bg-primary/10 border border-primary/20 text-primary shadow-lg shadow-primary/5":!d&&!S?"opacity-50 cursor-not-allowed text-gray-500":"text-gray-400 hover:bg-white/5 cursor-pointer"}`,onClick:()=>(C||S)&&xe("cost_estimation"),children:[r.jsx("span",{className:"material-icons text-sm",children:"savings"}),r.jsx("span",{children:"Cost Estimator"}),(C||S)&&s!=="cost_estimation"&&s!=="processing_cost"&&r.jsx("span",{className:"material-icons text-xs text-green-500 ml-auto",children:"check_circle"})]}),r.jsxs("div",{className:`px-4 py-3 rounded-xl font-medium flex items-center space-x-3 transition-all 
                            ${s==="architecture"?"bg-primary/10 border border-primary/20 text-primary shadow-lg shadow-primary/5":!C&&!S?"opacity-50 cursor-not-allowed text-gray-500":"text-gray-400 hover:bg-white/5 cursor-pointer"}`,onClick:()=>(C||S)&&xe("architecture"),children:[r.jsx("span",{className:"material-icons text-sm",children:"account_tree"}),r.jsx("span",{children:"Diagram"}),(ae||S)&&s!=="architecture"&&r.jsx("span",{className:"material-icons text-xs text-green-500 ml-auto",children:"check_circle"})]}),(Y==="self"||S)&&r.jsxs("div",{className:`px-4 py-3 rounded-xl font-medium flex items-center space-x-3 transition-all 
                                ${s==="terraform_view"||s==="deployment_ready"?"bg-primary/10 border border-primary/20 text-primary shadow-lg shadow-primary/5":!ne&&!S?"opacity-50 cursor-not-allowed text-gray-500":"text-gray-400 hover:bg-white/5 cursor-pointer"}`,onClick:()=>(ne||S)&&xe("terraform_view"),children:[r.jsx("span",{className:"material-icons text-sm",children:"code"}),r.jsx("span",{children:"Terraform"}),(ne||S)&&s!=="terraform_view"&&s!=="deployment_ready"&&r.jsx("span",{className:"material-icons text-xs text-green-500 ml-auto",children:"check_circle"})]}),r.jsxs("div",{className:"px-4 py-3 rounded-xl font-medium flex items-center space-x-3 transition-all cursor-pointer text-gray-400 hover:bg-white/5",onClick:()=>t(`/workspace/${T}/settings`),children:[r.jsx("span",{className:"material-icons text-sm",children:"settings"}),r.jsx("span",{children:"Settings"})]})]})]})}),r.jsxs("div",{className:`flex-1 flex flex-col relative overflow-y-auto z-10 backdrop-blur-sm ${v||s.startsWith("processing")?"is-thinking":""}`,children:[r.jsxs("header",{className:"min-h-[72px] py-4 border-b border-white/5 flex items-center justify-between px-8 bg-black/30 backdrop-blur-md sticky top-0 z-20 flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{className:"text-lg font-medium text-gray-200 tracking-wide",children:(h==null?void 0:h.name)||"Untitled Project"}),r.jsx("div",{className:"flex items-center space-x-2",children:S?r.jsxs("span",{className:"px-3 py-1 rounded-full bg-green-500/10 border border-green-500/20 text-[10px] font-bold text-green-400 tracking-wider uppercase flex items-center space-x-1",children:[r.jsx("span",{className:"material-icons text-[10px]",children:"check_circle"}),r.jsx("span",{children:"Self-Deployed"})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"px-3 py-1 rounded-full bg-white/5 border border-white/10 text-[10px] font-bold text-gray-400 tracking-wider uppercase",children:"Draft Mode"}),r.jsxs("button",{onClick:()=>dt(!1),className:"px-3 py-1 rounded-full bg-primary/10 border border-primary/20 text-[10px] font-bold text-primary hover:bg-primary/20 transition-colors uppercase tracking-wider flex items-center space-x-1",children:[r.jsx("span",{className:"material-icons text-[10px]",children:"save"}),r.jsx("span",{children:T?"Update Draft":"Save Draft"})]})]})})]}),r.jsxs("button",{onClick:()=>t("/workspaces"),className:"px-4 py-2 rounded-xl bg-white/5 border border-white/10 text-sm font-medium text-gray-400 hover:bg-white/10 hover:text-white transition-colors flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons text-sm",children:"dashboard"}),r.jsx("span",{children:"Workspace Dashboard"})]})]}),r.jsx("div",{className:"flex-1 flex siri-border-active overflow-hidden relative",children:r.jsx("div",{className:"w-full overflow-y-auto p-6 pt-4",children:r.jsxs("div",{className:"max-w-5xl space-y-8 mx-auto",children:[S&&r.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"material-icons text-green-400",children:"verified"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-green-400 font-bold",children:"Deployed Project"}),r.jsx("span",{className:"text-gray-400 ml-2 text-sm",children:" View-only mode. Navigate using the sidebar to review all details."})]})]}),r.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-300 text-xs font-bold rounded-full",children:"READ-ONLY"})]}),!S&&ue&&r.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4 flex items-center justify-between animate-shake",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"material-icons text-yellow-500",children:"warning"}),r.jsxs("div",{className:"text-sm text-yellow-200",children:[r.jsx("b",{children:"Assumption Drift:"})," The project description has changed. Previous cost estimates may no longer be valid."]})]}),r.jsx("button",{onClick:()=>ct(),className:"px-4 py-2 bg-yellow-500 text-black font-bold text-xs rounded-lg hover:bg-yellow-400 transition-colors",children:"Re-Analyze"})]}),(s==="processing"||s==="processing_spec")&&r.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] space-y-8 animate-fade-in",children:[r.jsxs("div",{className:"relative w-24 h-24",children:[r.jsx("div",{className:"absolute inset-0 border-4 border-white/10 rounded-full"}),r.jsx("div",{className:"absolute inset-0 border-4 border-primary rounded-full border-t-transparent animate-spin"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("span",{className:"material-icons text-4xl text-white animate-pulse",children:"grain"})})]}),r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:s==="processing"?"Analyzing Intent...":"Generating Blueprint..."}),r.jsx("p",{className:"text-gray-400 animate-pulse",children:"Architecting your production-grade infrastructure"})]})]}),s==="input"&&r.jsxs("div",{className:"space-y-8 animate-fade-in-up mt-6",children:[r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("h1",{className:"text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-white via-gray-200 to-gray-500 tracking-tight",children:S?"Deployed Architecture":"Architect Your Vision"}),r.jsx("p",{className:"text-lg text-gray-400 max-w-2xl mx-auto leading-relaxed",children:S?"Review your deployed infrastructure configuration below.":"Describe your application in plain English. Our AI Discovery Engine will analyze your intent and generate a production-grade infrastructure specification."})]}),r.jsx("div",{className:"mb-6 animate-fade-in-up",style:{animationDelay:"0.1s"},children:r.jsxs("div",{className:"bg-surface border border-border rounded-xl p-6 hover:border-blue-500/30 transition-colors group/card",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"p-3 bg-blue-500/10 rounded-xl text-blue-400 group-hover/card:bg-blue-500/20 transition-colors",children:r.jsx("span",{className:"material-icons text-xl",children:"category"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-base font-bold text-white",children:"Industry Domains"}),r.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Domains add contextual bias (compliance, data patterns).",r.jsx("br",{}),"They do not restrict architecture. You can select multiple."]})]})]}),r.jsxs("select",{onChange:I=>{const K=I.target.value;K&&!k.includes(K)&&R([...k,K])},className:"bg-black/40 text-gray-200 text-sm font-medium rounded-lg px-4 py-2 border border-white/10 focus:outline-none focus:border-blue-500/50 transition-colors cursor-pointer min-w-[160px]",disabled:S,value:"",children:[r.jsx("option",{value:"",disabled:!0,className:"bg-surface text-gray-500",children:"+ Add Tag"}),r.jsx("option",{value:"commerce",className:"bg-surface text-gray-200",children:"E-Commerce"}),r.jsx("option",{value:"saas",className:"bg-surface text-gray-200",children:"SaaS"}),r.jsx("option",{value:"fintech",className:"bg-surface text-gray-200",children:"Fintech"}),r.jsx("option",{value:"healthcare",className:"bg-surface text-gray-200",children:"Healthcare"}),r.jsx("option",{value:"media",className:"bg-surface text-gray-200",children:"Media"}),r.jsx("option",{value:"analytics",className:"bg-surface text-gray-200",children:"Analytics"}),r.jsx("option",{value:"gaming",className:"bg-surface text-gray-200",children:"Gaming"}),r.jsx("option",{value:"iot",className:"bg-surface text-gray-200",children:"IoT"}),r.jsx("option",{value:"other",className:"bg-surface text-gray-200",children:"Other"})]})]}),r.jsx("div",{className:"flex flex-wrap gap-2 pl-[60px]",children:k.map((I,K)=>r.jsxs("span",{className:"px-3 py-1 bg-blue-500/10 border border-blue-500/30 rounded-lg text-xs font-bold text-blue-400 flex items-center space-x-2 animate-fade-in transition-all hover:bg-blue-500/20",children:[r.jsx("span",{className:"capitalize",children:I}),r.jsx("button",{onClick:()=>R(k.filter(B=>B!==I)),className:"hover:text-white transition-colors flex items-center",children:r.jsx("span",{className:"material-icons text-[14px]",children:"close"})})]},K))})]})}),r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary to-blue-600 rounded-2xl blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200"}),r.jsxs("div",{className:"relative bg-surface border border-border rounded-2xl p-2 shadow-2xl",children:[r.jsx("textarea",{className:"w-full h-48 bg-transparent text-xl p-8 focus:outline-none resize-none placeholder-gray-600 text-gray-200 font-light leading-relaxed disabled:opacity-60 disabled:cursor-not-allowed",placeholder:"e.g., I need a highly scalable e-commerce backend with microservices, handling 50k concurrent users, and strict PCI compliance...",value:a,onChange:I=>o(I.target.value),disabled:S,readOnly:S}),r.jsxs("div",{className:"flex justify-between items-center px-8 py-5 bg-white/5 rounded-b-xl border-t border-white/5",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 disabled:opacity-40 disabled:cursor-not-allowed",disabled:S,children:r.jsx("span",{className:"material-icons text-xl",children:"mic"})}),r.jsx("button",{className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 disabled:opacity-40 disabled:cursor-not-allowed",disabled:S,children:r.jsx("span",{className:"material-icons text-xl",children:"attach_file"})})]}),!S&&r.jsxs("button",{onClick:ct,className:"flex items-center space-x-3 px-8 py-3 bg-primary hover:bg-primary-hover text-black font-bold rounded-xl transition-all transform hover:scale-[1.02] shadow-lg shadow-primary/20",children:[r.jsx("span",{children:"Generate Architecture"}),r.jsx("span",{className:"material-icons text-lg",children:"auto_awesome"})]})]})]})]})]}),s==="question"&&c&&r.jsxs("div",{className:"space-y-8 animate-fade-in-up max-w-4xl mx-auto mt-12 pb-20",children:[r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("span",{className:"material-icons text-primary text-3xl",children:"psychology"})}),r.jsx("h2",{className:"text-3xl font-bold text-white",children:"Clarifying Requirements"}),r.jsx("p",{className:"text-gray-400",children:c.clarifying_question})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:(is=c.suggested_options)==null?void 0:is.map((I,K)=>r.jsxs("button",{onClick:()=>Ct(typeof I=="object"?I.value||I.label:I),className:`p-6 bg-surface border rounded-2xl text-left transition-all group relative overflow-hidden
                                                ${x===(typeof I=="object"?I.value||I.label:I)?"border-primary ring-1 ring-primary":"border-border hover:border-white/20"}`,children:[r.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-lg font-bold text-white mb-1",children:typeof I=="object"?I.label:I}),I.description&&r.jsx("div",{className:"text-sm text-gray-400 line-clamp-2",children:I.description})]}),r.jsx("span",{className:"material-icons text-gray-600 group-hover:text-primary transition-colors",children:"arrow_forward"})]}),x===(typeof I=="object"?I.value||I.label:I)&&r.jsx("div",{className:"absolute inset-0 bg-primary/5 animate-pulse"})]},K))})]}),s==="confirm_intent"&&c&&r.jsxs("div",{className:"space-y-8 animate-fade-in-up max-w-3xl mx-auto mt-12 pb-20",children:[r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("h2",{className:"text-3xl font-bold text-white",children:"Confirm Project Scope"}),r.jsx("p",{className:"text-gray-400",children:"We've analyzed your requirements. Please confirm this summary before we generate the infrastructure."})]}),r.jsxs("div",{className:"bg-surface border border-border rounded-3xl p-8 shadow-2xl relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-[100px] -mr-32 -mt-32"}),r.jsxs("div",{className:"space-y-8 relative z-10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"px-3 py-1 bg-primary/10 border border-primary/20 text-primary rounded-full text-[10px] font-bold uppercase tracking-widest",children:"AI Intent Snapshot"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),r.jsx("span",{className:"text-[10px] text-gray-500 uppercase",children:"Confirmed"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),r.jsx("span",{className:"text-[10px] text-gray-500 uppercase",children:"Excluded"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Goal"}),r.jsx("p",{className:"text-white font-medium capitalize prose prose-invert",children:((os=(as=c.intent)==null?void 0:as.primary_domain)==null?void 0:os.replace(/_/g," "))||"Building an application"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-1",children:"Workload Pattern"}),r.jsx("p",{className:"text-white/80 text-sm italic",children:((ut=(Lt=c.intent)==null?void 0:Lt.workload_type)==null?void 0:ut.replace(/_/g," "))||"Standard Workload"})]}),c.exclusions&&c.exclusions.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-xs font-bold text-red-500/70 uppercase tracking-widest mb-2 flex items-center",children:[r.jsx("span",{className:"material-icons text-xs mr-1",children:"block"}),"Explicit Exclusions"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:c.exclusions.map((I,K)=>r.jsx("span",{className:"px-2 py-0.5 bg-red-500/10 text-red-400 border border-red-500/20 rounded text-[10px] font-bold uppercase tracking-wider line-through decoration-red-500/50",children:I.replace(/_/g," ")},K))})]})]}),r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white/5 rounded-2xl p-5 border border-white/5",children:[r.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-4",children:"Feature Resolution"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-[10px] text-green-500 font-bold uppercase",children:"Confirmed Present"}),r.jsxs("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[Object.entries(c.features||{}).filter(([I,K])=>K===!0).map(([I,K],B)=>r.jsxs("li",{className:"flex items-center text-xs text-gray-200 bg-green-500/5 px-2 py-1 rounded",children:[r.jsx("span",{className:"material-icons text-[12px] text-green-500 mr-2",children:"check_circle"}),r.jsx("span",{className:"capitalize",children:I.replace(/_/g," ")})]},B)),Object.values(c.features||{}).filter(I=>I===!0).length===0&&r.jsx("li",{className:"text-xs text-gray-500 italic",children:"None detected."})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-[10px] text-gray-500 font-bold uppercase",children:"What we did NOT assume"}),r.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 opacity-60",children:Object.entries(c.features||{}).filter(([I,K])=>K==="unknown"||K===!1).map(([I,K],B)=>r.jsxs("li",{className:"flex items-center text-xs text-gray-400",children:[r.jsx("span",{className:"material-icons text-[12px] text-gray-600 mr-2",children:K===!1?"block":"help_outline"}),r.jsx("span",{className:"capitalize",children:I.replace(/_/g," ")})]},B))})]})]})]})})]}),r.jsxs("div",{className:"pt-6 border-t border-white/5 flex flex-col space-y-4",children:[r.jsxs("p",{className:"text-xs text-gray-400 text-center",children:[r.jsx("span",{className:"material-icons text-[10px] align-middle mr-1",children:"lock"}),"Confirming locks this intent as the ",r.jsx("b",{children:"Single Source of Truth"}),"."]}),r.jsxs("button",{onClick:()=>ke(c.full_analysis),className:"w-full py-4 bg-primary hover:bg-primary-hover text-black font-extrabold rounded-2xl transition-all transform hover:scale-[1.01] shadow-xl shadow-primary/20 flex items-center justify-center space-x-3",children:[r.jsx("span",{children:"Confirm & Generate Blueprint"}),r.jsx("span",{className:"material-icons",children:"rocket_launch"})]})]})]})]})]}),s==="review_spec"&&d&&r.jsxs("div",{className:"space-y-8 animate-fade-in",children:[r.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 shadow-lg relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full blur-[60px] -mr-10 -mt-10"}),r.jsx("button",{onClick:()=>t(`/workspace/${T}/settings`),className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors rounded-lg p-2 hover:bg-white/5",children:r.jsx("span",{className:"material-icons text-sm",children:"settings"})}),r.jsx("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-4",children:"Project Snapshot"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 relative z-10",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Project Name"}),r.jsx("div",{className:"text-xl font-bold text-white tracking-tight flex items-center space-x-2 group",children:r.jsx("span",{children:(h==null?void 0:h.name)||d.project_name||"My Cloud Project"})}),r.jsxs("div",{className:"mt-2 group",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Description"}),r.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",title:h==null?void 0:h.description,children:(h==null?void 0:h.description)||d.project_summary||a||"No description provided."})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Project Type"}),r.jsxs("div",{className:"inline-flex items-center space-x-2 px-3 py-1 bg-white/5 rounded-full text-sm text-gray-300 border border-white/5",children:[r.jsx("span",{className:"material-icons text-xs",children:"category"}),r.jsx("span",{className:"capitalize",children:((wt=d.architecture_pattern)==null?void 0:wt.replace(/_/g," "))||"Web App"})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Client Type"}),r.jsxs("div",{className:"inline-flex items-center space-x-2 px-3 py-1 bg-white/5 rounded-full text-sm text-gray-300 border border-white/5",children:[r.jsx("span",{className:"material-icons text-xs",children:"devices"}),r.jsx("span",{className:"capitalize",children:((pn=E==null?void 0:E.intent)==null?void 0:pn.client_type)||"Web"})]})]})]}),r.jsx("div",{className:"mt-6 pt-4 border-t border-white/5",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:(E==null?void 0:E.features)&&Object.entries(E.features).map(([I,K])=>K===!0?r.jsx("span",{className:"px-2 py-1 bg-blue-500/10 text-blue-400 border border-blue-500/20 rounded text-[10px] font-bold uppercase tracking-wider",children:I.replace(/_/g," ")},I):K===!1?r.jsxs("span",{className:"px-2 py-1 bg-red-500/10 text-red-400 border border-red-500/20 rounded text-[10px] font-bold uppercase tracking-wider flex items-center gap-1",children:[r.jsx("span",{className:"material-icons text-[10px]",children:"block"}),"NO ",I.replace(/_/g," ")]},I):null)})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"w-6 h-6 rounded-full bg-green-500/20 flex items-center justify-center text-green-400 text-xs font-bold",children:""}),r.jsx("h3",{className:"text-lg font-bold text-white",children:"How we understood your project"})]}),r.jsxs("div",{className:"bg-surface/50 border border-border rounded-2xl p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(gn=d.explanations)==null?void 0:gn.slice(0,4).map((I,K)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"material-icons text-gray-500 text-sm mt-0.5",children:"check"}),r.jsx("span",{className:"text-sm text-gray-300 leading-relaxed",children:I})]},K)),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"material-icons text-gray-500 text-sm mt-0.5",children:"check"}),r.jsxs("span",{className:"text-sm text-gray-300 leading-relaxed",children:["Traffic scale assumption: ",r.jsx("span",{className:"text-white font-medium",children:((xn=d.assumptions)==null?void 0:xn.traffic_tier)||"Medium"})]})]})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-4 italic",children:"Based on your description and selected options."})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons text-primary",children:"schema"}),r.jsx("h3",{className:"text-lg font-bold text-white",children:"Architecture Overview"})]}),r.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 relative overflow-hidden hover:border-primary/30 transition-all duration-500",children:[r.jsxs("p",{className:"text-white font-medium text-lg leading-relaxed border-b border-white/5 pb-4 mb-6",children:['"',d.project_summary||"Optimized cloud infrastructure.",'"']}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Included Services & Infrastructure"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:(yn=d.modules)==null?void 0:yn.map((I,K)=>r.jsxs("div",{className:"flex items-center p-3 bg-white/5 rounded-xl border border-white/5 hover:border-primary/20 transition-colors group relative",children:[!S&&r.jsx("button",{onClick:B=>{B.stopPropagation(),Ye(I.service_name||I.type)},className:"absolute top-2 right-2 p-1.5 bg-red-500/10 text-red-400 rounded-lg opacity-0 group-hover:opacity-100 hover:bg-red-500/20 transition-all z-10",title:"Remove from Specification",children:r.jsx("span",{className:"material-icons text-xs",children:"delete"})}),r.jsx("span",{className:"material-icons text-gray-500 text-sm mr-3",children:I.category==="compute"?"memory":I.category==="storage"?"storage":I.category==="database"?"database":"cloud"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-bold text-white pr-6",children:I.service_name||I.type}),r.jsx("div",{className:"text-xs text-primary/80 uppercase font-bold tracking-wider",children:I.category})]})]},K))})]}),ee.length>0&&r.jsxs("div",{className:"mt-8 pt-6 border-t border-white/5 animate-fade-in-up mb-8",children:[r.jsxs("h4",{className:"text-xs font-bold text-red-400/70 uppercase tracking-widest mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"material-icons text-sm",children:"delete_outline"}),"Removed Services"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 opacity-70 hover:opacity-100 transition-opacity",children:ee.map((I,K)=>r.jsxs("div",{className:"flex items-center p-3 bg-red-500/5 rounded-xl border border-red-500/10 hover:border-red-500/30 transition-all group relative dashed-border animate-drop-in",style:{animationDelay:`${K*100}ms`},children:[!S&&r.jsx("button",{onClick:B=>{B.stopPropagation(),ns(I.service_name||I.type)},className:"absolute top-2 right-2 p-1.5 bg-green-500/10 text-green-400 rounded-lg opacity-0 group-hover:opacity-100 hover:bg-green-500/20 transition-all z-10",title:"Restore to Specification",children:r.jsx("span",{className:"material-icons text-xs",children:"restore"})}),r.jsx("span",{className:"material-icons text-gray-600 text-sm mr-3 grayscale",children:I.category==="compute"?"memory":I.category==="storage"?"storage":I.category==="database"?"database":"cloud"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-bold text-gray-400 line-through decoration-red-500/30",children:I.service_name||I.type}),r.jsx("div",{className:"text-xs text-gray-600 uppercase font-bold tracking-wider",children:I.category})]})]},K))})]}),r.jsxs("div",{className:"flex items-start space-x-2 bg-blue-500/5 p-4 rounded-xl border border-blue-500/10",children:[r.jsx("span",{className:"material-icons text-blue-400 text-sm mt-0.5",children:"info"}),r.jsxs("p",{className:"text-xs text-gray-400",children:["This architecture is designed for ",r.jsx("strong",{children:(bn=d.assumptions)==null?void 0:bn.traffic_tier})," traffic. Proceed to usage estimation to see detailed costs."]})]})]})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsxs("button",{onClick:Le,disabled:v||S,className:"px-8 py-4 bg-gradient-to-r from-primary to-purple-500 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-primary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("span",{children:"Estimate Usage & Costs"}),r.jsx("span",{className:"material-icons",children:"analytics"})]})})]}),s==="processing_usage"&&r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-primary/20"}),r.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full border-4 border-transparent border-t-primary animate-spin"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xl font-semibold text-white",children:"Analyzing Usage Patterns"}),r.jsx("p",{className:"text-gray-400 mt-2",children:"AI is predicting realistic user traffic, storage, and bandwidth..."})]})]}),s==="usage_review"&&_&&r.jsxs("div",{className:"space-y-8 animate-fade-in pb-20 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"text-center space-y-4 mb-8",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("h2",{className:"text-3xl font-bold text-white",children:"Estimated Usage Profile"}),r.jsxs("div",{className:"relative group",children:[r.jsx("span",{className:"material-icons text-gray-400 cursor-help hover:text-primary transition-colors",children:"info"}),r.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-4 py-3 bg-gray-800 text-white text-xs rounded-xl shadow-lg w-72 opacity-0 group-hover:opacity-100 transition-opacity z-50 pointer-events-none",children:[r.jsx("strong",{className:"text-primary",children:"Infracost Integration"}),r.jsx("p",{className:"mt-1 text-gray-300 leading-relaxed",children:"These values are used to generate Infracost usage inputs for accurate, usage-based cloud pricing. Adjust to match your expected workload."}),r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-800"})]})]})]}),r.jsxs("p",{className:"text-gray-400 max-w-2xl mx-auto",children:['Based on your project description ("',h==null?void 0:h.name,`"), we've inferred the following usage patterns to generate accurate costs.`]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 flex flex-col hover:border-primary/50 transition-all group relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 p-3",children:r.jsx("span",{className:"material-icons text-primary/20 group-hover:text-primary/40 transition-colors text-4xl",children:"group"})}),r.jsx("h3",{className:"text-gray-400 text-xs uppercase font-bold tracking-widest mb-4",children:"Scale: Monthly Users"}),r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold mb-1",children:"Min"}),r.jsx("input",{type:"number",disabled:S,className:`w-24 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white font-bold focus:border-primary outline-none transition-colors ${S?"opacity-50 cursor-not-allowed":""}`,value:((wn=(vn=_==null?void 0:_.usage_profile)==null?void 0:vn.monthly_users)==null?void 0:wn.min)||0,onChange:I=>{const K=parseInt(I.target.value)||0;A(B=>{var re;return{...B,usage_profile:{...(B==null?void 0:B.usage_profile)||{},monthly_users:{...((re=B==null?void 0:B.usage_profile)==null?void 0:re.monthly_users)||{},min:K}}}}),fe(!0)}})]}),r.jsx("span",{className:"text-gray-600 self-end mb-2",children:"to"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold mb-1",children:"Max"}),r.jsx("input",{type:"number",disabled:S,className:`w-24 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white font-bold focus:border-primary outline-none transition-colors ${S?"opacity-50 cursor-not-allowed":""}`,value:((_n=(jn=_==null?void 0:_.usage_profile)==null?void 0:jn.monthly_users)==null?void 0:_n.max)||0,onChange:I=>{const K=parseInt(I.target.value)||0;A(B=>{var re;return{...B,usage_profile:{...(B==null?void 0:B.usage_profile)||{},monthly_users:{...((re=B==null?void 0:B.usage_profile)==null?void 0:re.monthly_users)||{},max:K}}}}),fe(!0)}})]})]}),r.jsxs("div",{className:"space-y-2 mt-auto",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),r.jsx("span",{className:"text-[10px] text-green-400 font-bold uppercase tracking-wider",children:"Expected Traffic"})]}),r.jsxs("p",{className:"text-[11px] text-gray-400 italic leading-relaxed",children:['"',((kn=_.rationale)==null?void 0:kn.monthly_users)||"Based on typical growth for this workload type.",'"']})]})]}),r.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 flex flex-col hover:border-blue-500/50 transition-all group relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 p-3",children:r.jsx("span",{className:"material-icons text-blue-500/20 group-hover:text-blue-500/40 transition-colors text-4xl",children:"swap_horiz"})}),r.jsx("h3",{className:"text-gray-400 text-xs uppercase font-bold tracking-widest mb-4",children:"Network: Data Transfer (GB)"}),r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold mb-1",children:"Min"}),r.jsx("input",{type:"number",disabled:S,className:`w-24 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white font-bold focus:border-blue-500 outline-none transition-colors ${S?"opacity-50 cursor-not-allowed":""}`,value:((Sn=(Nn=_==null?void 0:_.usage_profile)==null?void 0:Nn.data_transfer_gb)==null?void 0:Sn.min)||0,onChange:I=>{const K=parseInt(I.target.value)||0;A(B=>{var re;return{...B,usage_profile:{...(B==null?void 0:B.usage_profile)||{},data_transfer_gb:{...((re=B==null?void 0:B.usage_profile)==null?void 0:re.data_transfer_gb)||{},min:K}}}}),fe(!0)}})]}),r.jsx("span",{className:"text-gray-600 self-end mb-2",children:"to"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold mb-1",children:"Max"}),r.jsx("input",{type:"number",disabled:S,className:`w-24 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white font-bold focus:border-blue-500 outline-none transition-colors ${S?"opacity-50 cursor-not-allowed":""}`,value:((An=(Cn=_==null?void 0:_.usage_profile)==null?void 0:Cn.data_transfer_gb)==null?void 0:An.max)||0,onChange:I=>{const K=parseInt(I.target.value)||0;A(B=>{var re;return{...B,usage_profile:{...(B==null?void 0:B.usage_profile)||{},data_transfer_gb:{...((re=B==null?void 0:B.usage_profile)==null?void 0:re.data_transfer_gb)||{},max:K}}}}),fe(!0)}})]})]}),r.jsxs("div",{className:"space-y-2 mt-auto",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),r.jsx("span",{className:"text-[10px] text-blue-400 font-bold uppercase tracking-wider",children:"Egress/Bandwidth"})]}),r.jsxs("p",{className:"text-[11px] text-gray-400 italic leading-relaxed",children:['"',((Tn=_.rationale)==null?void 0:Tn.data_transfer_gb)||"Simulates content delivery and API interactions.",'"']})]})]}),r.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 flex flex-col hover:border-purple-500/50 transition-all group relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 p-3",children:r.jsx("span",{className:"material-icons text-purple-500/20 group-hover:text-purple-500/40 transition-colors text-4xl",children:"storage"})}),r.jsx("h3",{className:"text-gray-400 text-xs uppercase font-bold tracking-widest mb-4",children:"Capacity: Storage (GB)"}),r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold mb-1",children:"Min"}),r.jsx("input",{type:"number",disabled:S,className:`w-24 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white font-bold focus:border-purple-500 outline-none transition-colors ${S?"opacity-50 cursor-not-allowed":""}`,value:((Rn=(En=_==null?void 0:_.usage_profile)==null?void 0:En.data_storage_gb)==null?void 0:Rn.min)||0,onChange:I=>{const K=parseInt(I.target.value)||0;A(B=>{var re;return{...B,usage_profile:{...(B==null?void 0:B.usage_profile)||{},data_storage_gb:{...((re=B==null?void 0:B.usage_profile)==null?void 0:re.data_storage_gb)||{},min:K}}}}),fe(!0)}})]}),r.jsx("span",{className:"text-gray-600 self-end mb-2",children:"to"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[10px] text-gray-500 uppercase font-bold mb-1",children:"Max"}),r.jsx("input",{type:"number",disabled:S,className:`w-24 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white font-bold focus:border-purple-500 outline-none transition-colors ${S?"opacity-50 cursor-not-allowed":""}`,value:((Dn=(Pn=_==null?void 0:_.usage_profile)==null?void 0:Pn.data_storage_gb)==null?void 0:Dn.max)||0,onChange:I=>{const K=parseInt(I.target.value)||0;A(B=>{var re;return{...B,usage_profile:{...(B==null?void 0:B.usage_profile)||{},data_storage_gb:{...((re=B==null?void 0:B.usage_profile)==null?void 0:re.data_storage_gb)||{},max:K}}}}),fe(!0)}})]})]}),r.jsxs("div",{className:"space-y-2 mt-auto",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500"}),r.jsx("span",{className:"text-[10px] text-purple-400 font-bold uppercase tracking-wider",children:"Data Footprint"})]}),r.jsxs("p",{className:"text-[11px] text-gray-400 italic leading-relaxed",children:['"',((In=_.rationale)==null?void 0:In.data_storage_gb)||((Fn=_.rationale)==null?void 0:Fn.storage_gb)||"Accounts for both database and file assets.",'"']})]})]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-white/5",children:[r.jsxs("button",{onClick:()=>xe("review_spec"),disabled:S,className:`px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium transition-colors flex items-center space-x-2 ${S?"opacity-50 cursor-not-allowed":"hover:bg-white/10"}`,children:[r.jsx("span",{className:"material-icons",children:"arrow_back"}),r.jsx("span",{children:"Back to Architecture"})]}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsxs("button",{onClick:()=>{te("cost_effective"),We()},disabled:v||S,className:"px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-green-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("span",{children:"Cost Effective"}),r.jsx("span",{className:"material-icons",children:"trending_down"})]}),r.jsxs("button",{onClick:()=>{te("high_performance"),We()},disabled:v||S,className:"px-8 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-blue-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("span",{children:"High Performance"}),r.jsx("span",{className:"material-icons",children:"speed"})]})]})]})]}),s==="cost_estimation"&&C&&r.jsxs("div",{className:"space-y-8 animate-fade-in pb-20 max-w-5xl mx-auto",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons text-primary",children:"cloud"}),r.jsx("h3",{className:"text-lg font-bold text-white",children:"Cloud Provider Comparison"})]}),r.jsx("div",{className:"text-xs text-gray-500 italic",children:"Select a provider to see specific details"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:(C.rankings||[]).map(I=>{var B,re,de,ye;const K=b===I.provider;return r.jsxs("div",{onClick:()=>U(I.provider.toUpperCase()),className:`cursor-pointer rounded-2xl p-5 border transition-all relative overflow-hidden flex flex-col justify-between
                                                        ${K?"bg-primary/10 border-primary shadow-lg shadow-primary/20 scale-[1.02]":"bg-surface border-border hover:border-white/20"}`,children:[I.recommended&&r.jsx("div",{className:"absolute top-0 right-0 px-3 py-1 bg-gradient-to-r from-yellow-400 to-amber-500 text-[10px] font-bold text-black uppercase tracking-tighter rounded-bl-xl shadow-lg",children:"Recommended"}),r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-white font-bold
                                                            ${I.provider==="AWS"?"bg-[#FF9900]/20 text-[#FF9900]":I.provider==="GCP"?"bg-[#4285F4]/20 text-[#4285F4]":"bg-[#0078D4]/20 text-[#0078D4]"}`,children:I.provider==="AWS"?"AWS":I.provider==="GCP"?"GCP":"AZ"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-white",children:I.provider==="AZURE"?"Azure":I.provider}),r.jsxs("div",{className:"text-[10px] text-gray-400 uppercase tracking-widest",children:[I.score,"% Score"]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"text-xl font-bold text-white leading-tight",children:[((B=I.cost_range)==null?void 0:B.formatted)||I.formatted_cost,I.monthly_cost&&I.monthly_cost<1&&r.jsx("div",{className:"text-[10px] text-amber-400",children:I.cost_intent==="hobby"?"Hobby-scale lower bound":"Estimated minimum"})]}),r.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:I.recommended?"Recommended configuration (Cost-Effective)":"Estimated Monthly Cost"}),(()=>{let me="standard";if(C.scenarios){for(const[Ae,Ve]of Object.entries(C.scenarios))if(Ve[I.provider]){me=Ae;break}}return r.jsxs("div",{className:"text-[10px] text-gray-400",children:[me.replace("_"," ").replace(/\b\w/g,Ae=>Ae.toUpperCase())," profile"]})})(),I.recommended&&((ye=(de=(re=C==null?void 0:C.recommendation_facts)==null?void 0:re.facts)==null?void 0:de.dominant_drivers)==null?void 0:ye[0])&&r.jsx("div",{className:"text-[10px] text-amber-400 italic mt-1",children:`${C.recommendation_facts.facts.dominant_drivers[0].name} is a key cost driver at your usage level.`})]}),K&&r.jsxs("div",{className:"mt-4 pt-3 border-t border-primary/20 flex items-center justify-between text-[10px] text-primary font-bold uppercase tracking-wider",children:[r.jsx("span",{children:"Selected"}),r.jsx("span",{className:"material-icons text-[12px]",children:"check_circle"})]})]},I.provider)})})]}),(()=>{var Fe,At,ve,Ee,$e,ls,cs;const I=(C.rankings||[]).find(He=>He.recommended),B=(C.rankings||[]).find(He=>He.provider===b)||I;if(!B)return null;const re={AWS:{strengths:["Largest service catalog","Most mature ML/AI services","Best-in-class serverless (Lambda)","Global infrastructure"],bestFor:["Enterprise workloads","ML/AI applications","Scalable architectures","Multi-region deployments"]},GCP:{strengths:["Cost-effective compute","Superior Kubernetes (GKE)","Advanced analytics","Strong ML tooling"],bestFor:["Data analytics","Machine learning","Container workloads","Startups & scale-ups"]},AZURE:{strengths:["Enterprise integration","Hybrid cloud leader","Microsoft ecosystem","Strong compliance"],bestFor:["Enterprise IT","Hybrid deployments","Microsoft stack users","Regulated industries"]}},ye=[...C.rankings||[]].sort((He,rt)=>(He.monthly_cost||0)-(rt.monthly_cost||0))[0],me=B.provider===(ye==null?void 0:ye.provider),Ae=B.provider==="AZURE"?"Azure":B.provider,Ve={strengths:((Fe=B.pros)==null?void 0:Fe.length)>0?B.pros:((At=re[B.provider])==null?void 0:At.strengths)||[],bestFor:((ve=B.best_for)==null?void 0:ve.length)>0?B.best_for:((Ee=re[B.provider])==null?void 0:Ee.bestFor)||[]};return r.jsxs("details",{className:"group bg-gradient-to-br from-surface/80 to-surface/40 border border-border rounded-2xl transition-all hover:border-primary/30",children:[r.jsxs("summary",{className:"px-6 py-4 cursor-pointer flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-bold
                                                        ${B.provider==="AWS"?"bg-[#FF9900]/20 text-[#FF9900]":B.provider==="GCP"?"bg-[#4285F4]/20 text-[#4285F4]":"bg-[#0078D4]/20 text-[#0078D4]"}`,children:B.provider==="AWS"?"AWS":B.provider==="GCP"?"GCP":"AZ"}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-bold text-white",children:["Why ",Ae,"?"]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Click to see why this provider is recommended"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[B.recommended&&r.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-yellow-400 to-amber-500 text-black text-xs font-bold rounded-full",children:" Best Match"}),r.jsx("span",{className:"material-icons text-gray-400 group-open:rotate-180 transition-transform",children:"expand_more"})]})]}),r.jsxs("div",{className:"px-6 pb-6 space-y-4 animate-fade-in",children:[r.jsxs("p",{className:"text-sm text-gray-200 leading-relaxed",children:["Based on your ",r.jsx("span",{className:"text-primary font-semibold",children:$.replace("_"," ")})," profile and project requirements, ",r.jsx("span",{className:"text-white font-semibold",children:Ae})," is",me?` the most cost-effective option at ${B.formatted_cost||`$${($e=B.monthly_cost)==null?void 0:$e.toFixed(2)}/mo`}`:` your best choice at ${B.formatted_cost||`$${(ls=B.monthly_cost)==null?void 0:ls.toFixed(2)}/mo`}`,"."]}),(Ve.strengths||[]).length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"text-xs text-gray-400 uppercase tracking-wider font-bold",children:["Why ",Ae," Works For You"]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ve.strengths.slice(0,4).map((He,rt)=>r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[r.jsx("span",{className:"material-icons text-green-400 text-sm",children:"check_circle"}),He]},rt))})]}),Array.isArray(Ve.bestFor)&&Ve.bestFor.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:Ve.bestFor.slice(0,4).map((He,rt)=>r.jsx("span",{className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] rounded-full border border-white/10",children:He},rt))}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border/50",children:[r.jsxs("div",{className:"flex items-center gap-6 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Overall Score"}),r.jsxs("div",{className:"text-lg font-bold text-primary",children:[B.score||B.final_score,"%"]})]}),B.cost_score&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Cost"}),r.jsx("div",{className:"text-lg font-bold text-green-400",children:B.cost_score})]}),B.performance_score&&r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400",children:"Performance"}),r.jsx("div",{className:"text-lg font-bold text-blue-400",children:B.performance_score})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Estimated Monthly"}),r.jsx("div",{className:"text-xl font-bold text-white",children:B.formatted_cost||`$${(cs=B.monthly_cost)==null?void 0:cs.toFixed(2)}`})]})]})]})]})})(),r.jsxs("details",{className:"group bg-surface/50 border border-border rounded-2xl transition-all hover:border-primary/30",children:[r.jsxs("summary",{className:"px-6 py-4 cursor-pointer flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"material-icons text-green-400 text-lg",children:"verified"}),r.jsx("span",{className:"font-bold text-white",children:"Confidence Details"}),r.jsxs("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 rounded text-[10px] font-bold",children:[C.confidence_percentage||Math.round((C.confidence||0)*100),"%"]})]}),r.jsx("span",{className:"material-icons text-gray-400 group-open:rotate-180 transition-transform",children:"expand_more"})]}),r.jsxs("div",{className:"px-6 pb-6 space-y-4 animate-fade-in",children:[r.jsxs("p",{className:"text-sm text-gray-400 leading-relaxed",children:["Confidence is based on the ",r.jsx("strong",{className:"text-white",children:'"weakest link"'})," principle  the overall score is capped by the lowest individual factor."]}),r.jsx("div",{className:"space-y-3",children:r.jsx("div",{className:"space-y-3",children:(()=>{var K,B,re,de,ye,me,Ae;const I=C.confidence_breakdown||(C.breakdown?{usage_completeness:{label:"Based on input density",score:Math.round((C.breakdown.usage_confidence||.5)*100)},pricing_method:{label:"Based on provider API coverage",score:Math.round((C.breakdown.estimate_type_score||.8)*100)},architecture_completeness:{label:"Based on service definitions",score:Math.round((C.breakdown.architecture_score||.7)*100)}}:null);return I?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"material-icons text-blue-400 text-lg",children:"data_usage"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-white",children:"Usage Data Completeness"}),r.jsx("div",{className:"text-xs text-gray-400",children:((K=I.usage_completeness)==null?void 0:K.label)||"Inferred from description"})]})]}),r.jsxs("div",{className:"text-lg font-bold text-blue-400",children:[((B=I.usage_completeness)==null?void 0:B.score)||0,"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"material-icons text-green-400 text-lg",children:"calculate"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-white",children:"Pricing Method Reliability"}),r.jsx("div",{className:"text-xs text-gray-400",children:((re=I.pricing_method)==null?void 0:re.label)||"Heuristic Estimation"})]})]}),r.jsxs("div",{className:"text-lg font-bold text-green-400",children:[((de=I.pricing_method)==null?void 0:de.score)||0,"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"material-icons text-purple-400 text-lg",children:"architecture"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-white",children:"Architecture Completeness"}),r.jsx("div",{className:"text-xs text-gray-400",children:((ye=I.architecture_completeness)==null?void 0:ye.label)||"Pattern-based Standard"})]})]}),r.jsxs("div",{className:"text-lg font-bold text-purple-400",children:[((me=I.architecture_completeness)==null?void 0:me.score)||0,"%"]})]})]}):r.jsx("div",{className:"text-sm text-gray-500 italic",children:((Ae=C.confidence_explanation)==null?void 0:Ae[0])||"Detailed breakdown not generated, but overall confidence is calculated."})})()})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons text-green-400",children:"paid"}),r.jsx("h3",{className:"text-lg font-bold text-white",children:"Cost Details & Confidence"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 flex flex-col justify-center items-center text-center",children:[r.jsxs("div",{className:"relative w-24 h-24 mb-3",children:[r.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 36 36",children:[r.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#2E3645",strokeWidth:"4"}),r.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:typeof C.confidence=="number"&&C.confidence>.8?"#22c55e":typeof C.confidence=="number"&&C.confidence>.5?"#eab308":"#ef4444",strokeWidth:"4",strokeDasharray:`${(C.confidence||0)*100}, 100`})]}),r.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:r.jsxs("span",{className:"text-xl font-bold text-white",children:[typeof C.confidence=="number"?(C.confidence*100).toFixed(0):"0","%"]})})]}),r.jsxs("div",{className:"text-sm font-bold text-white uppercase tracking-wider flex items-center space-x-2",children:[r.jsx("span",{children:"Confidence"}),r.jsxs("div",{className:"relative group",children:[r.jsx("span",{className:"material-icons text-xs text-gray-400 cursor-help",children:"info"}),r.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg shadow-lg w-64 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[((Mn=C.confidence_explanation)==null?void 0:Mn.join(". "))||"Confidence based on service resolution, data quality, and estimate type.",r.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-800"})]})]})]}),r.jsx("p",{className:"text-xs text-gray-400 mt-2 line-clamp-2",children:((zn=C.confidence_explanation)==null?void 0:zn[0])||"Based on architecture completeness and data quality."}),(((On=C.recommended)==null?void 0:On.estimate_type)||((Ln=(Bn=C.providers)==null?void 0:Bn[b])==null?void 0:Ln.estimate_type))&&r.jsx("div",{className:"mt-3 w-full",children:r.jsx("div",{className:`px-3 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wider ${((Vn=C.recommended)==null?void 0:Vn.estimate_type)==="exact"||((Un=($n=C.providers)==null?void 0:$n[b])==null?void 0:Un.estimate_type)==="exact"?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-amber-500/20 text-amber-400 border border-amber-500/30"}`,children:((Wn=C.recommended)==null?void 0:Wn.estimate_type)==="exact"||((Hn=(Gn=C.providers)==null?void 0:Gn[b])==null?void 0:Hn.estimate_type)==="exact"?" Exact (Terraform-based)":" Estimated (Heuristic)"})})]}),r.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 flex flex-col justify-center items-center text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-white mb-3",children:(()=>{var K,B;const I=(K=C.rankings)==null?void 0:K.find(re=>re.provider===b);if(!(I!=null&&I.score)){const re=C.scenarios?Object.values(C.scenarios).map(de=>de[b]).find(de=>de):null;return(re==null?void 0:re.score)||((B=C.recommended)==null?void 0:B.score)||"N/A"}return I.score})()}),r.jsx("div",{className:"text-sm font-bold text-white uppercase tracking-wider",children:"% Score"}),r.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[b||"Provider"," competitiveness"]})]}),r.jsxs("div",{className:"col-span-1 md:col-span-2 bg-surface border border-border rounded-2xl p-6",children:[r.jsx("h4",{className:"text-xs text-gray-500 uppercase font-bold mb-4",children:"Estimate Based On"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:(Zn=_==null?void 0:_.usage_profile)!=null&&Zn.monthly_users?typeof _.usage_profile.monthly_users=="object"?`${(_.usage_profile.monthly_users.min||0).toLocaleString()} - ${(_.usage_profile.monthly_users.max||0).toLocaleString()}`:_.usage_profile.monthly_users.toLocaleString():(Yn=(Kn=(qn=C==null?void 0:C.recommendation_facts)==null?void 0:qn.facts)==null?void 0:Kn.usage)!=null&&Yn.monthly_users?typeof C.recommendation_facts.facts.usage.monthly_users=="object"?`${(C.recommendation_facts.facts.usage.monthly_users.min||0).toLocaleString()} - ${(C.recommendation_facts.facts.usage.monthly_users.max||0).toLocaleString()}`:C.recommendation_facts.facts.usage.monthly_users.toLocaleString():"5,000"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Monthly Users"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:(Xn=_==null?void 0:_.usage_profile)!=null&&Xn.data_transfer_gb?typeof _.usage_profile.data_transfer_gb=="object"?`${_.usage_profile.data_transfer_gb.min||0} - ${_.usage_profile.data_transfer_gb.max||0} GB`:`${_.usage_profile.data_transfer_gb} GB`:(ei=(Qn=(Jn=C==null?void 0:C.recommendation_facts)==null?void 0:Jn.facts)==null?void 0:Qn.usage)!=null&&ei.data_transfer_gb?typeof C.recommendation_facts.facts.usage.data_transfer_gb=="object"?`${C.recommendation_facts.facts.usage.data_transfer_gb.min||0} - ${C.recommendation_facts.facts.usage.data_transfer_gb.max||0} GB`:`${C.recommendation_facts.facts.usage.data_transfer_gb} GB`:"50 GB"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Data Transfer"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:(ti=_==null?void 0:_.usage_profile)!=null&&ti.data_storage_gb?typeof _.usage_profile.data_storage_gb=="object"?`${_.usage_profile.data_storage_gb.min||0} - ${_.usage_profile.data_storage_gb.max||0} GB`:`${_.usage_profile.data_storage_gb} GB`:(ni=(ri=(si=C==null?void 0:C.recommendation_facts)==null?void 0:si.facts)==null?void 0:ri.usage)!=null&&ni.data_storage_gb?typeof C.recommendation_facts.facts.usage.data_storage_gb=="object"?`${C.recommendation_facts.facts.usage.data_storage_gb.min||0} - ${C.recommendation_facts.facts.usage.data_storage_gb.max||0} GB`:`${C.recommendation_facts.facts.usage.data_storage_gb} GB`:"10 GB"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Storage"})]})]}),r.jsx("div",{className:"mt-6 pt-4 border-t border-white/5",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{var B,re,de;return((((B=C.recommended)==null?void 0:B.provider)===b?C.recommended.services:null)||((de=(re=C.provider_details)==null?void 0:re[b||"aws"])==null?void 0:de.services)||[]).slice(0,6).map((ye,me)=>r.jsx("span",{className:"px-3 py-1 bg-white/5 border border-white/10 rounded-full text-xs text-gray-300",children:ye.cloud_service||ye.display_name},me))})()})}),(C==null?void 0:C.recommendation_facts)&&C.recommendation_facts.provider&&r.jsx("div",{className:"mt-4 pt-4 border-t border-amber-500/20",children:r.jsxs("details",{className:"group",children:[r.jsxs("summary",{className:"text-xs text-amber-400 font-bold uppercase tracking-wider mb-2 cursor-pointer flex items-center justify-between list-none",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"material-icons text-xs mr-1 group-open:rotate-180 transition-transform",children:"expand_more"}),r.jsxs("span",{children:["Why ",(C.recommendation_facts.provider||"This Provider").toUpperCase(),"?"]})]}),r.jsx("span",{className:"text-[10px] text-gray-500 font-normal normal-case group-open:hidden",children:"Click to see rationale & cost"})]}),r.jsxs("div",{className:"space-y-3 mt-3 animate-fade-in",children:[r.jsx("div",{className:"space-y-1 text-xs text-gray-300",children:(C.recommendation_facts.pros||[]).map((I,K)=>r.jsxs("div",{className:"flex items-start",children:[r.jsx("span",{className:"text-green-400 mr-1",children:""}),r.jsx("span",{children:I})]},K))}),r.jsxs("div",{className:"mt-3 p-3 bg-white/5 rounded-xl border border-white/5 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Estimated Cost"}),r.jsx("div",{className:"text-sm font-bold text-white",children:(()=>{var K,B;const I=(K=C==null?void 0:C.rankings)==null?void 0:K.find(re=>re.provider===b);return(I==null?void 0:I.formatted_cost)||`$${((B=I==null?void 0:I.monthly_cost)==null?void 0:B.toFixed(2))||"0.00"}`})()})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Competitiveness"}),r.jsxs("div",{className:"text-sm font-bold text-primary",children:[((ai=(ii=C.rankings)==null?void 0:ii.find(I=>I.provider===b))==null?void 0:ai.score)||0,"%"]})]})]})]})]})}),((li=(oi=C==null?void 0:C.recommendation_facts)==null?void 0:oi.warnings)==null?void 0:li.length)>0&&r.jsxs("div",{className:"bg-yellow-500/5 border border-yellow-500/10 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("span",{className:"material-icons text-yellow-500 text-sm",children:"lightbulb"}),r.jsx("span",{className:"text-xs font-bold text-yellow-500 uppercase",children:"Optimization Tips"})]}),r.jsx("ul",{className:"space-y-1",children:C.recommendation_facts.warnings.slice(0,2).map((I,K)=>r.jsxs("li",{className:"text-xs text-gray-400 pl-4 relative",children:[r.jsx("span",{className:"absolute left-0 top-1 w-1 h-1 rounded-full bg-yellow-500/50"}),I]},K))})]})]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-white/5",children:[r.jsxs("button",{onClick:()=>xe("usage_review"),className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons",children:"arrow_back"}),r.jsx("span",{children:"Back to Usage Review"})]}),r.jsxs("button",{onClick:()=>xe("architecture"),className:"px-8 py-4 bg-primary hover:bg-primary-hover text-black font-bold rounded-xl transition-all shadow-lg shadow-primary/20 flex items-center justify-center space-x-2",children:[r.jsx("span",{children:"View Architecture Diagram"}),r.jsx("span",{className:"material-icons text-sm",children:"arrow_forward"})]})]})]})]}),s==="requirements"&&r.jsx(ld,{workspaceId:e,infraSpec:d,costEstimation:C,onNext:()=>xe("architecture"),onBack:()=>xe("cost_estimation"),onRequirementsCaptured:O,isDeployed:S}),s==="architecture"&&r.jsx(tg,{workspaceId:e,infraSpec:d,costEstimation:C,selectedProvider:b,selectedProfile:$,usageProfile:_,requirementsData:ie,architectureData:ae,onArchitectureDataLoaded:W,onInfraSpecUpdate:f,onDiagramImageSave:je,onNext:I=>{Z(I),I==="self"?xe("feedback"):pe("One-Click deployment coming soon!",{icon:""})},onBack:()=>xe("cost_estimation"),isDeployed:S}),s==="feedback"&&r.jsx(rd,{workspaceId:e,costEstimation:C,selectedProvider:b,costIntent:_==null?void 0:_.intent,onFeedbackSubmitted:()=>H(!0),onNext:()=>xe("terraform_view"),onBack:()=>xe("architecture"),isDeployed:S}),s==="terraform_view"&&r.jsx(od,{workspaceId:e,infraSpec:d,selectedProvider:b,costEstimation:C,onComplete:()=>xe("deployment_summary"),onBack:()=>xe("feedback"),isDeployed:S}),s==="processing_cost"&&r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-6 animate-fade-in",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-primary/20"}),r.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full border-4 border-transparent border-t-primary animate-spin"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xl font-semibold text-white",children:"Analyzing Cloud Costs"}),r.jsx("p",{className:"text-gray-400 mt-2",children:"Comparing AWS, GCP, and Azure pricing..."})]})]}),s==="deployment_ready"&&r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-8 animate-fade-in",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-500/20 mb-6",children:r.jsx("span",{className:"material-icons text-4xl text-green-400",children:"check_circle"})}),r.jsx("h2",{className:"text-3xl font-bold text-white",children:"Deployment Active"}),r.jsx("p",{className:"text-gray-400 mt-3 max-w-md",children:"Your infrastructure is live and running."})]}),r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsxs("button",{onClick:()=>t("/workspaces"),className:"px-10 py-4 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-green-500/20",children:[r.jsx("span",{className:"material-icons",children:"dashboard"}),r.jsx("span",{children:"Return to Dashboard"})]}),r.jsxs("button",{onClick:()=>xe("terraform_view"),className:"px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-400 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons",children:"code"}),r.jsx("span",{children:"View Code"})]})]})]}),s==="deployment_summary"&&r.jsxs("div",{className:"space-y-8 animate-fade-in pb-20 max-w-5xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-500/20 mb-6",children:r.jsx("span",{className:"material-icons text-5xl text-green-400",children:"rocket_launch"})}),r.jsx("h2",{className:"text-4xl font-bold text-white tracking-tight",children:"Deployment Ready"}),r.jsxs("p",{className:"text-gray-400 mt-3 text-lg",children:["Your infrastructure configuration for ",r.jsx("span",{className:"text-primary font-bold",children:d.project_name||"Cloudiverse Project"})," is complete."]})]}),r.jsxs("div",{className:"max-w-2xl mx-auto bg-surface/50 border border-white/5 rounded-3xl overflow-hidden divide-y divide-white/5 mb-10",children:[r.jsxs("div",{className:"p-6 flex items-center justify-between hover:bg-white/5 transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-cyan-500/10 flex items-center justify-center",children:r.jsx("span",{className:"material-icons text-cyan-400",children:"cloud"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest leading-none mb-1",children:"Provider"}),r.jsx("div",{className:"text-white font-bold text-lg",children:b==null?void 0:b.toUpperCase()})]})]}),r.jsx("div",{className:"text-right",children:r.jsx("span",{className:"px-3 py-1 bg-cyan-500/10 text-cyan-400 text-[10px] font-bold rounded-full border border-cyan-500/20",children:"Active"})})]}),r.jsx("div",{className:"p-6 flex items-center justify-between hover:bg-white/5 transition-colors",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/10 flex items-center justify-center",children:r.jsx("span",{className:"material-icons text-purple-400",children:"public"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest leading-none mb-1",children:"Region"}),r.jsx("div",{className:"text-white font-bold text-lg",children:((ci=d.region)==null?void 0:ci.resolved_region)||"Discovery Needed"})]})]})}),r.jsxs("div",{className:"p-6 flex items-center justify-between hover:bg-white/5 transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-500/10 flex items-center justify-center",children:r.jsx("span",{className:"material-icons text-green-400",children:"payments"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest leading-none mb-1",children:"Est. Monthly Cost"}),r.jsx("div",{className:"text-white font-bold text-lg",children:(()=>{var K,B;const I=(K=C==null?void 0:C.rankings)==null?void 0:K.find(re=>re.provider===b);return(I==null?void 0:I.formatted_cost)||`$${((B=I==null?void 0:I.monthly_cost)==null?void 0:B.toFixed(2))||"0.00"}`})()})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-[10px] text-gray-500 font-bold",children:"OPTIMIZED BY AI"}),r.jsx("div",{className:"text-green-400 text-[10px] font-bold",children:"READY FOR PRODUCTION"})]})]}),r.jsx("div",{className:"p-6 flex items-center justify-between hover:bg-white/5 transition-colors",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-amber-500/10 flex items-center justify-center",children:r.jsx("span",{className:"material-icons text-amber-400",children:"verified"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest leading-none mb-1",children:"Architecture Confidence"}),r.jsxs("div",{className:"text-white font-bold text-lg",children:[typeof(C==null?void 0:C.confidence)=="number"?(C.confidence*100).toFixed(0):"0","%"]})]})]})})]}),r.jsxs("div",{className:"flex justify-center items-center space-x-6 pt-10 border-t border-white/5 mt-8",children:[r.jsxs("button",{onClick:()=>xe("terraform_view"),className:"px-8 py-3 bg-white/5 border border-white/10 rounded-xl text-gray-300 font-medium hover:bg-white/10 transition-colors flex items-center space-x-2",children:[r.jsx("span",{className:"material-icons",children:"arrow_back"}),r.jsx("span",{children:"Review Code"})]}),!S&&r.jsxs("button",{onClick:async()=>{if(!z){N(!0);try{const I=localStorage.getItem("token"),K=I?{Authorization:`Bearer ${I}`}:{};await Me.put(`${ht}/api/workspaces/${e}/deploy`,{deployment_method:"self",provider:b},{headers:K}),pe.success(" Project marked as Self-Deployed!",{duration:4e3}),J(!0),t("/workspaces")}catch(I){he(I,"Failed to confirm deployment.")}finally{N(!1)}}},className:"px-10 py-4 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl text-white font-bold uppercase tracking-wider flex items-center space-x-3 hover:opacity-90 transition-all shadow-lg shadow-green-500/20",children:[z?r.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-white/30 border-t-white animate-spin"}):r.jsx("span",{className:"material-icons",children:"check_circle"}),r.jsx("span",{children:z?"Processing...":"Mark as Self-Deployed"})]}),S&&r.jsxs("button",{onClick:()=>t("/workspaces"),className:"px-10 py-4 bg-primary text-black font-bold rounded-xl flex items-center space-x-2 hover:bg-primary-hover transition-colors shadow-lg",children:[r.jsx("span",{className:"material-icons",children:"dashboard"}),r.jsx("span",{children:"Return to Dashboard"})]})]})]})]})})})]})]})};export{lg as default};
