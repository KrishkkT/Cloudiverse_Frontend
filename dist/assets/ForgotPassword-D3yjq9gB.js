import{j as e}from"./index-BJnrtPxY.js";import{r as l,u as k,L as v}from"./vendor-C8h9W7XM.js";import{a as x,B as d}from"./utils-Bh3U_nHs.js";import{A as j}from"./AuthHeader-D3bW7v8R.js";import"./ui-fva4O29X.js";const E=()=>{const[u,b]=l.useState(1),[i,h]=l.useState(""),[m,p]=l.useState(""),[n,g]=l.useState(""),[r,a]=l.useState(!1),f=k(),y=async t=>{var s,o;t.preventDefault(),a(!0);try{await x.post("http://localhost:5000/api/auth/forgot-password",{email:i}),d.success("OTP sent to your email!"),b(2)}catch(c){d.error(((o=(s=c.response)==null?void 0:s.data)==null?void 0:o.message)||"Failed to send OTP.")}finally{a(!1)}},w=async t=>{var s,o;t.preventDefault(),a(!0);try{if(n.length<6){d.error("Password must be at least 6 characters."),a(!1);return}await x.post("http://localhost:5000/api/auth/reset-password",{email:i,otp:m,newPassword:n}),d.success("Password reset successfully! Please login."),f("/login")}catch(c){d.error(((o=(s=c.response)==null?void 0:s.data)==null?void 0:o.message)||"Failed to reset password.")}finally{a(!1)}};return e.jsxs("div",{className:"font-display bg-background-light dark:bg-background-dark min-h-screen relative overflow-hidden",children:[e.jsx(j,{}),e.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-gradient-to-tr from-primary/20 via-blue-500/10 to-purple-500/20 rounded-full blur-[120px] pointer-events-none opacity-60 dark:opacity-30 z-0"}),e.jsx("div",{className:"relative z-10 pt-[72px] min-h-screen flex flex-col items-center justify-center pb-12",children:e.jsxs("div",{className:"w-full max-w-[460px] bg-white/80 dark:bg-card-dark/80 backdrop-blur-2xl rounded-[20px] shadow-2xl border border-white/60 dark:border-white/5 overflow-hidden p-10 box-border mt-8",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-gradient-to-br from-primary/10 to-blue-500/10 text-primary mb-5 shadow-inner border border-white/20",children:e.jsx("span",{className:"material-symbols-outlined text-[28px]",children:"lock_reset"})}),e.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 dark:text-white tracking-tight",children:"Reset Password"}),e.jsx("p",{className:"text-base text-gray-500 dark:text-gray-400 mt-2 font-medium",children:u===1?"Enter your email to receive an OTP":"Enter the OTP sent to your email"})]}),u===1?e.jsxs("form",{onSubmit:y,className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-200",children:"Email Address"}),e.jsx("input",{type:"email",value:i,onChange:t=>h(t.target.value),className:"w-full h-12 px-4 rounded-xl bg-white dark:bg-black/20 border-2 border-transparent focus:border-primary/20 dark:focus:border-primary/20 bg-gray-50/50 dark:bg-white/5 text-gray-900 dark:text-white focus:bg-white dark:focus:bg-black/40 focus:ring-4 focus:ring-primary/10 outline-none transition-all placeholder:text-gray-400 font-medium",placeholder:"het@gmail.com",required:!0})]}),e.jsxs("button",{type:"submit",disabled:r,className:"w-full h-14 mt-2 bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 text-white font-bold rounded-xl transition-all shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40 hover:scale-[1.01] disabled:opacity-70 disabled:hover:scale-100 flex items-center justify-center gap-2 text-lg active:scale-[0.98]",children:[r?"Sending...":"Send OTP",!r&&e.jsx("span",{className:"material-symbols-outlined text-[20px] font-bold",children:"send"})]})]}):e.jsxs("form",{onSubmit:w,className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-200",children:"OTP Code"}),e.jsx("input",{type:"text",value:m,onChange:t=>p(t.target.value),className:"w-full h-12 px-4 rounded-xl bg-white dark:bg-black/20 border-2 border-transparent focus:border-primary/20 dark:focus:border-primary/20 bg-50/50 dark:bg-white/5 text-gray-900 dark:text-white focus:bg-white dark:focus:bg-black/40 focus:ring-4 focus:ring-primary/10 outline-none transition-all placeholder:text-gray-400 font-medium tracking-[0.5em] text-center text-lg uppercase",placeholder:"123456",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-bold text-gray-700 dark:text-gray-200",children:"New Password"}),e.jsx("input",{type:"password",value:n,onChange:t=>g(t.target.value),className:"w-full h-12 px-4 rounded-xl bg-white dark:bg-black/20 border-2 border-transparent focus:border-primary/20 dark:focus:border-primary/20 bg-gray-50/50 dark:bg-white/5 text-gray-900 dark:text-white focus:bg-white dark:focus:bg-black/40 focus:ring-4 focus:ring-primary/10 outline-none transition-all placeholder:text-gray-400 font-medium",placeholder:"New password",required:!0})]}),e.jsxs("button",{type:"submit",disabled:r,className:"w-full h-14 mt-2 bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 text-white font-bold rounded-xl transition-all shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40 hover:scale-[1.01] disabled:opacity-70 disabled:hover:scale-100 flex items-center justify-center gap-2 text-lg active:scale-[0.98]",children:[r?"Resetting...":"Reset Password",!r&&e.jsx("span",{className:"material-symbols-outlined text-[20px] font-bold",children:"check_circle"})]})]}),e.jsx("div",{className:"mt-10 pt-6 border-t border-gray-100 dark:border-white/5 text-center",children:e.jsx(v,{to:"/login",className:"font-bold text-gray-500 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Back to Login"})})]})})]})};export{E as default};
