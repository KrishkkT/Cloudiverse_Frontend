import{u as m,j as e}from"./index-BJ2RQODn.js";import{u as p,r as l,f as u}from"./vendor-Bj8RrwSB.js";import{b as h}from"./ui-27QXhGAK.js";import"./utils-D7-Zsnno.js";const N=()=>{const{user:b}=m(),t=p(),[f,s]=l.useState(!0),[o,a]=l.useState(null),i=u.useRef(!1);l.useEffect(()=>{i.current||(i.current=!0,d())},[]);const d=async()=>{try{const c=localStorage.getItem("token"),x={name:"New Project",description:"",project_data:{appDescription:"",projectName:"New Project"}},n=await fetch("http://localhost:5000/api/workspaces",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify(x)});if(n.ok){const r=await n.json();t(`/workspace/${r.id}`,{replace:!0})}else{const r=await n.json();if(r.deviceLimitReached){a("DEVICE_LIMIT_REACHED"),s(!1);return}a(r.msg||r.message||"Failed to create workspace"),s(!1)}}catch(c){console.error("Error creating workspace:",c),a("Failed to create workspace. Please try again."),s(!1)}};return o?o==="DEVICE_LIMIT_REACHED"?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-red-500/10 border border-red-500 rounded-2xl p-8 max-w-lg w-full text-center shadow-2xl shadow-red-500/20",children:[e.jsx("div",{className:"bg-red-500/20 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("span",{className:"material-icons text-5xl text-red-500",children:"block"})}),e.jsx("h2",{className:"text-3xl font-black text-white mb-4 uppercase tracking-wider",children:"Access Denied"}),e.jsxs("p",{className:"text-red-200 text-lg mb-8 leading-relaxed",children:["Security Limit Reached: Maximum 2 accounts allowed per device.",e.jsx("br",{}),"You cannot create new projects from this device."]}),e.jsx("button",{onClick:()=>t("/workspaces"),className:"px-8 py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl transition-all shadow-lg",children:"Return to Dashboard"})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-surface border border-border rounded-xl p-8 max-w-md w-full text-center shadow-2xl",children:[e.jsx("div",{className:"text-red-500 mb-4 flex justify-center",children:e.jsx("span",{className:"material-icons text-5xl",children:"lock"})}),e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"Limit Reached"}),e.jsx("p",{className:"text-text-secondary mb-8",children:o}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{onClick:()=>t("/settings"),className:"w-full px-6 py-3 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-bold rounded-xl transition-all shadow-lg transform hover:scale-[1.02] flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-icons text-lg",children:"star"})," Upgrade Plan"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>t("/workspaces"),className:"flex-1 px-4 py-2 bg-surface hover:bg-white/5 border border-border rounded-xl text-text-secondary transition-colors",title:"Back to Dashboard",children:"Dashboard"}),e.jsx("button",{onClick:()=>{a(null),s(!0),d()},className:"flex-1 px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary border border-primary/20 rounded-xl transition-colors",children:"Try Again"})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{className:"animate-spin text-primary mx-auto mb-4",size:48}),e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Creating Workspace..."}),e.jsx("p",{className:"text-text-secondary",children:"Setting up your new project"})]})})};export{N as default};
