import{f as p,r as P}from"./vendor-Bj8RrwSB.js";import{bA as d}from"./ui-27QXhGAK.js";function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J(Object(r),!0).forEach(function(n){Z(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?I=function(t){return typeof t}:I=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(e)}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function me(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function he(e,t){if(e==null)return{};var r=me(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ye(e,t){return ve(e)||Ee(e,t)||ge(e,t)||Ce()}function ve(e){if(Array.isArray(e))return e}function Ee(e,t){var r=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(r!=null){var n=[],o=!0,a=!1,s,u;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));o=!0);}catch(i){a=!0,u=i}finally{try{!o&&r.return!=null&&r.return()}finally{if(a)throw u}}return n}}function ge(e,t){if(e){if(typeof e=="string")return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}}function q(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=function(t,r,n){var o=!!n,a=p.useRef(n);p.useEffect(function(){a.current=n},[n]),p.useEffect(function(){if(!o||!t)return function(){};var s=function(){a.current&&a.current.apply(a,arguments)};return t.on(r,s),function(){t.off(r,s)}},[o,r,t,a])},be=function(t){var r=p.useRef(t);return p.useEffect(function(){r.current=t},[t]),r.current},N=function(t){return t!==null&&I(t)==="object"},z="[object Object]",Se=function e(t,r){if(!N(t)||!N(r))return t===r;var n=Array.isArray(t),o=Array.isArray(r);if(n!==o)return!1;var a=Object.prototype.toString.call(t)===z,s=Object.prototype.toString.call(r)===z;if(a!==s)return!1;if(!a&&!n)return t===r;var u=Object.keys(t),i=Object.keys(r);if(u.length!==i.length)return!1;for(var f={},y=0;y<u.length;y+=1)f[u[y]]=!0;for(var c=0;c<i.length;c+=1)f[i[c]]=!0;var l=Object.keys(f);if(l.length!==u.length)return!1;var C=t,O=r,k=function(x){return e(C[x],O[x])};return l.every(k)},Oe=function(t,r,n){return N(t)?Object.keys(t).reduce(function(o,a){var s=!N(r)||!Se(t[a],r[a]);return n.includes(a)?(s&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),o):s?W(W({},o||{}),{},Z({},a,t[a])):o},null):null},H=p.createContext(null);H.displayName="ElementsContext";var we=function(t,r){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return t};d.any,d.object;d.func.isRequired;var X=p.createContext(null);X.displayName="CheckoutSdkContext";var Ae=function(t,r){if(!t)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(r," in an <CheckoutProvider> provider."));return t},Pe=p.createContext(null);Pe.displayName="CheckoutContext";d.any,d.shape({fetchClientSecret:d.func.isRequired,elementsOptions:d.object}).isRequired;var G=function(t){var r=p.useContext(X),n=p.useContext(H);if(r&&n)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return r?Ae(r,t):we(n,t)},ke=["mode"],xe=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},m=function(t,r){var n="".concat(xe(t),"Element"),o=function(i){var f=i.id,y=i.className,c=i.options,l=c===void 0?{}:c,C=i.onBlur,O=i.onFocus,k=i.onReady,U=i.onChange,x=i.onEscape,re=i.onClick,ne=i.onLoadError,oe=i.onLoaderStart,ae=i.onNetworksChange,ie=i.onConfirm,se=i.onCancel,ce=i.onShippingAddressChange,ue=i.onShippingRateChange,le=i.onSavedPaymentMethodRemove,de=i.onSavedPaymentMethodUpdate,R=G("mounts <".concat(n,">")),_="elements"in R?R.elements:null,b="checkoutSdk"in R?R.checkoutSdk:null,fe=p.useState(null),$=ye(fe,2),v=$[0],pe=$[1],S=p.useRef(null),j=p.useRef(null);g(v,"blur",C),g(v,"focus",O),g(v,"escape",x),g(v,"click",re),g(v,"loaderror",ne),g(v,"loaderstart",oe),g(v,"networkschange",ae),g(v,"confirm",ie),g(v,"cancel",se),g(v,"shippingaddresschange",ce),g(v,"shippingratechange",ue),g(v,"savedpaymentmethodremove",le),g(v,"savedpaymentmethodupdate",de),g(v,"change",U);var D;k&&(t==="expressCheckout"?D=k:D=function(){k(v)}),g(v,"ready",D),p.useLayoutEffect(function(){if(S.current===null&&j.current!==null&&(_||b)){var E=null;if(b)switch(t){case"payment":E=b.createPaymentElement(l);break;case"address":if("mode"in l){var B=l.mode,K=he(l,ke);if(B==="shipping")E=b.createShippingAddressElement(K);else if(B==="billing")E=b.createBillingAddressElement(K);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":E=b.createExpressCheckoutElement(l);break;case"currencySelector":E=b.createCurrencySelectorElement();break;case"taxId":E=b.createTaxIdElement(l);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else _&&(E=_.create(t,l));S.current=E,pe(E),E&&E.mount(j.current)}},[_,b,l]);var Y=be(l);return p.useEffect(function(){if(S.current){var E=Oe(l,Y,["paymentRequest"]);E&&"update"in S.current&&S.current.update(E)}},[l,Y]),p.useLayoutEffect(function(){return function(){if(S.current&&typeof S.current.destroy=="function")try{S.current.destroy(),S.current=null}catch{}}},[]),p.createElement("div",{id:f,className:y,ref:j})},a=function(i){G("mounts <".concat(n,">"));var f=i.id,y=i.className;return p.createElement("div",{id:f,className:y})},s=r?a:o;return s.propTypes={id:d.string,className:d.string,onChange:d.func,onBlur:d.func,onFocus:d.func,onReady:d.func,onEscape:d.func,onClick:d.func,onLoadError:d.func,onLoaderStart:d.func,onNetworksChange:d.func,onConfirm:d.func,onCancel:d.func,onShippingAddressChange:d.func,onShippingRateChange:d.func,onSavedPaymentMethodRemove:d.func,onSavedPaymentMethodUpdate:d.func,options:d.object},s.displayName=n,s.__elementType=t,s},h=typeof window>"u",Re=p.createContext(null);Re.displayName="EmbeddedCheckoutProviderContext";m("auBankAccount",h);var _e=m("card",h);m("cardNumber",h);m("cardExpiry",h);m("cardCvc",h);m("fpxBank",h);m("iban",h);m("idealBank",h);m("p24Bank",h);m("epsBank",h);m("payment",h);m("expressCheckout",h);m("currencySelector",h);m("paymentRequestButton",h);m("linkAuthentication",h);m("address",h);m("shippingAddress",h);m("paymentMethodMessaging",h);m("affirmMessage",h);m("afterpayClearpayMessage",h);m("taxId",h);var M=Object.defineProperty,Ie=Object.getOwnPropertyDescriptor,Te=Object.getOwnPropertyNames,Ne=Object.prototype.hasOwnProperty,je=(e,t)=>{for(var r in t)M(e,r,{get:t[r],enumerable:!0})},De=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Te(t))!Ne.call(e,o)&&o!==r&&M(e,o,{get:()=>t[o],enumerable:!(n=Ie(t,o))||n.enumerable});return e},Fe=e=>De(M({},"__esModule",{value:!0}),e),V=(e,t,r)=>new Promise((n,o)=>{var a=i=>{try{u(r.next(i))}catch(f){o(f)}},s=i=>{try{u(r.throw(i))}catch(f){o(f)}},u=i=>i.done?n(i.value):Promise.resolve(i.value).then(a,s);u((r=r.apply(e,t)).next())}),ee={};je(ee,{SubmissionError:()=>A,appendExtraData:()=>T,createClient:()=>te,getDefaultClient:()=>nt,isSubmissionError:()=>qe});var L=Fe(ee),w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Me=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;function Le(e){e=String(e);for(var t,r,n,o,a="",s=0,u=e.length%3;s<e.length;){if((r=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255||(o=e.charCodeAt(s++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");t=r<<16|n<<8|o,a+=w.charAt(t>>18&63)+w.charAt(t>>12&63)+w.charAt(t>>6&63)+w.charAt(t&63)}return u?a.slice(0,u-3)+"===".substring(u):a}function Ue(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!Me.test(e))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");e+="==".slice(2-(e.length&3));for(var t,r="",n,o,a=0;a<e.length;)t=w.indexOf(e.charAt(a++))<<18|w.indexOf(e.charAt(a++))<<12|(n=w.indexOf(e.charAt(a++)))<<6|(o=w.indexOf(e.charAt(a++))),r+=n===64?String.fromCharCode(t>>16&255):o===64?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,t&255);return r}var $e=()=>navigator.webdriver||!!document.documentElement.getAttribute(Ue("d2ViZHJpdmVy"))||!!window.callPhantom||!!window._phantom,Ye=class{constructor(){this.loadedAt=Date.now(),this.webdriver=$e()}data(){return{loadedAt:this.loadedAt,webdriver:this.webdriver}}},Be=class{constructor(e){this.kind="success",this.next=e.next}};function Ke(e){return"next"in e&&typeof e.next=="string"}var Je=class{constructor(t,r){this.paymentIntentClientSecret=t,this.resubmitKey=r,this.kind="stripePluginPending"}};function We(e){if("stripe"in e&&"resubmitKey"in e&&typeof e.resubmitKey=="string"){let{stripe:t}=e;return typeof t=="object"&&t!=null&&"paymentIntentClientSecret"in t&&typeof t.paymentIntentClientSecret=="string"}return!1}function qe(e){return e.kind==="error"}var A=class{constructor(...e){this.kind="error",this.formErrors=[],this.fieldErrors=new Map;var t;for(let r of e){if(!r.field){this.formErrors.push({code:r.code&&ze(r.code)?r.code:"UNSPECIFIED",message:r.message});continue}let n=(t=this.fieldErrors.get(r.field))!=null?t:[];n.push({code:r.code&&Ve(r.code)?r.code:"UNSPECIFIED",message:r.message}),this.fieldErrors.set(r.field,n)}}getFormErrors(){return[...this.formErrors]}getFieldErrors(e){var t;return(t=this.fieldErrors.get(e))!=null?t:[]}getAllFieldErrors(){return Array.from(this.fieldErrors)}};function ze(e){return e in Ge}var Ge={BLOCKED:"BLOCKED",EMPTY:"EMPTY",FILES_TOO_BIG:"FILES_TOO_BIG",FORM_NOT_FOUND:"FORM_NOT_FOUND",INACTIVE:"INACTIVE",NO_FILE_UPLOADS:"NO_FILE_UPLOADS",PROJECT_NOT_FOUND:"PROJECT_NOT_FOUND",TOO_MANY_FILES:"TOO_MANY_FILES"};function Ve(e){return e in Qe}var Qe={REQUIRED_FIELD_EMPTY:"REQUIRED_FIELD_EMPTY",REQUIRED_FIELD_MISSING:"REQUIRED_FIELD_MISSING",STRIPE_CLIENT_ERROR:"STRIPE_CLIENT_ERROR",STRIPE_SCA_ERROR:"STRIPE_SCA_ERROR",TYPE_EMAIL:"TYPE_EMAIL",TYPE_NUMERIC:"TYPE_NUMERIC",TYPE_TEXT:"TYPE_TEXT"};function Ze(e){return"errors"in e&&Array.isArray(e.errors)&&e.errors.every(t=>typeof t.message=="string")||"error"in e&&typeof e.error=="string"}var He="4.0.0",Xe=e=>Le(JSON.stringify(e)),et=e=>{let t=`@formspree/core@${He}`;return e?`${e} ${t}`:t};function T(e,t,r){e instanceof FormData?e.append(t,r):e[t]=r}function tt(e){return e!==null&&typeof e=="object"}var rt=class{constructor(e={}){this.project=e.project,this.stripe=e.stripe,typeof window<"u"&&(this.session=new Ye)}submitForm(e,t){return V(this,arguments,function*(r,n,o={}){let a=o.endpoint||"https://formspree.io",s=this.project?`${a}/p/${this.project}/f/${r}`:`${a}/f/${r}`,u={Accept:"application/json","Formspree-Client":et(o.clientName)};this.session&&(u["Formspree-Session-Data"]=Xe(this.session.data())),n instanceof FormData||(u["Content-Type"]="application/json");function i(y){return V(this,null,function*(){try{let c=yield(yield fetch(s,{method:"POST",mode:"cors",body:y instanceof FormData?y:JSON.stringify(y),headers:u})).json();if(tt(c)){if(Ze(c))return Array.isArray(c.errors)?new A(...c.errors):new A({message:c.error});if(We(c))return new Je(c.stripe.paymentIntentClientSecret,c.resubmitKey);if(Ke(c))return new Be({next:c.next})}return new A({message:"Unexpected response format"})}catch(c){let l=c instanceof Error?c.message:`Unknown error while posting to Formspree: ${JSON.stringify(c)}`;return new A({message:l})}})}if(this.stripe&&o.createPaymentMethod){let y=yield o.createPaymentMethod();if(y.error)return new A({code:"STRIPE_CLIENT_ERROR",field:"paymentMethod",message:"Error creating payment method"});T(n,"paymentMethod",y.paymentMethod.id);let c=yield i(n);if(c.kind==="error")return c;if(c.kind==="stripePluginPending"){let l=yield this.stripe.handleCardAction(c.paymentIntentClientSecret);if(l.error)return new A({code:"STRIPE_CLIENT_ERROR",field:"paymentMethod",message:"Stripe SCA error"});n instanceof FormData?n.delete("paymentMethod"):delete n.paymentMethod,T(n,"paymentIntent",l.paymentIntent.id),T(n,"resubmitKey",c.resubmitKey);let C=yield i(n);return Q(C),C}return c}let f=yield i(n);return Q(f),f})}};function Q(e){let{kind:t}=e;if(t!=="success"&&t!=="error")throw new Error(`Unexpected submission result (kind: ${t})`)}var te=e=>new rt(e),nt=()=>(F||(F=te()),F),F;function Et(e){let{prefix:t,field:r,errors:n,...o}=e;if(n==null)return null;let a=r?n.getFieldErrors(r):n.getFormErrors();return a.length===0?null:p.createElement("div",{...o},t?`${t} `:null,a.map(s=>s.message).join(", "))}var ot=P.createContext({elements:null});function at(){return P.useContext(ot)}var it=p.createContext(null);function st(){return P.useContext(it)??{client:L.getDefaultClient()}}var ct="3.0.0",ut=`@formspree/react@${ct}`;function lt(e,t={}){let r=st(),{client:n=r.client,extraData:o,origin:a}=t,{elements:s}=at(),{stripe:u}=n;return async function(i){let f=dt(i)?ft(i):i;if(typeof o=="object")for(let[l,C]of Object.entries(o)){let O;typeof C=="function"?O=await C():O=C,O!==void 0&&L.appendExtraData(f,l,O)}let y=s==null?void 0:s.getElement(_e),c=u&&y?()=>u.createPaymentMethod({type:"card",card:y,billing_details:pt(f)}):void 0;return n.submitForm(e,f,{endpoint:a,clientName:ut,createPaymentMethod:c})}}function dt(e){return"preventDefault"in e&&typeof e.preventDefault=="function"}function ft(e){e.preventDefault();let t=e.currentTarget;if(t.tagName!="FORM")throw new Error("submit was triggered for a non-form element");return new FormData(t)}function pt(e){let t={address:mt(e)};for(let r of["name","email","phone"]){let n=e instanceof FormData?e.get(r):e[r];n&&typeof n=="string"&&(t[r]=n)}return t}function mt(e){let t={};for(let[r,n]of[["address_line1","line1"],["address_line2","line2"],["address_city","city"],["address_country","country"],["address_state","state"],["address_postal_code","postal_code"]]){let o=e instanceof FormData?e.get(r):e[r];o&&typeof o=="string"&&(t[n]=o)}return t}function gt(e,t={}){let[r,n]=P.useState(null),[o,a]=P.useState(null),[s,u]=P.useState(!1),[i,f]=P.useState(!1),y=lt(e,{client:t.client,extraData:t.data,origin:t.endpoint});return[{errors:r,result:o,submitting:s,succeeded:i},async function(c){u(!0);let l=await y(c);u(!1),L.isSubmissionError(l)?(n(l),f(!1)):(n(null),a(l),f(!0))},function(){n(null),a(null),u(!1),f(!1)}]}export{gt as J,Et as V};
