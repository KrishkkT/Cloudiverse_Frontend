import{r as S,g as Gs,f as N}from"./vendor-C8h9W7XM.js";import{a6 as zc,a7 as Ui,a8 as Oc,a9 as Yi,aa as Fc,ab as qc,ac as Vc,ad as Us,ae as Bc,af as Ys,ag as mi,ah as at,ai as Hc,aj as gi,ak as Gc,al as vi,am as yi,an as wi,ao as Ws,ap as Xs,aq as Uc,ar as Zs,as as Yc,at as Wc,au as Xc,av as wn,aw as Zc,ax as _i,ay as Kc,az as jc,aA as Qc,aB as bi,aC as Jc,aD as el,aE as tl,aF as Ks,aG as js,aH as Qs,aI as Js,aJ as _n,aK as ea,aL as ta,aM as nl,aN as rl,aO as il,aP as ol,aQ as sl,aR as al,aS as ul,aT as cl,aU as na,aV as ll,aW as fl,aX as ra,aY as dl,aZ as hl,a_ as pl,a$ as ml,b0 as gl,b1 as vl,b2 as yl,b3 as wl,b4 as _l,b5 as bl,b6 as El,b7 as xl,b8 as Sl,b9 as Nl}from"./ui-fva4O29X.js";function Ei(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function ce(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ce(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var ia={exports:{}},oa={},sa={exports:{}},aa={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Et=S;function kl(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cl=typeof Object.is=="function"?Object.is:kl,Al=Et.useState,Il=Et.useEffect,Rl=Et.useLayoutEffect,Tl=Et.useDebugValue;function Ml(e,t){var n=t(),r=Al({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return Rl(function(){i.value=n,i.getSnapshot=t,Pn(i)&&s({inst:i})},[e,n,t]),Il(function(){return Pn(i)&&s({inst:i}),e(function(){Pn(i)&&s({inst:i})})},[e]),Tl(n),n}function Pn(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Cl(e,n)}catch{return!0}}function $l(e,t){return t()}var Pl=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$l:Ml;aa.useSyncExternalStore=Et.useSyncExternalStore!==void 0?Et.useSyncExternalStore:Pl;sa.exports=aa;var Dl=sa.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bn=S,Ll=Dl;function zl(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ol=typeof Object.is=="function"?Object.is:zl,Fl=Ll.useSyncExternalStore,ql=bn.useRef,Vl=bn.useEffect,Bl=bn.useMemo,Hl=bn.useDebugValue;oa.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=ql(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Bl(function(){function c(d){if(!l){if(l=!0,u=d,d=r(d),i!==void 0&&o.hasValue){var p=o.value;if(i(p,d))return f=p}return f=d}if(p=f,Ol(u,d))return p;var g=r(d);return i!==void 0&&i(p,g)?(u=d,p):(u=d,f=g)}var l=!1,u,f,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,r,i]);var a=Fl(e,s[0],s[1]);return Vl(function(){o.hasValue=!0,o.value=a},[a]),Hl(a),a};ia.exports=oa;var Gl=ia.exports;const Ul=Gs(Gl),Yl={},Wi=e=>{let t;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const d=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(p=>p(t,d))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(Yl?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(r,i,c);return c},Wl=e=>e?Wi(e):Wi,{useDebugValue:Xl}=N,{useSyncExternalStoreWithSelector:Zl}=Ul,Kl=e=>e;function ua(e,t=Kl,n){const r=Zl(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Xl(r),r}const Xi=(e,t)=>{const n=Wl(e),r=(i,s=t)=>ua(n,i,s);return Object.assign(r,n),r},jl=(e,t)=>e?Xi(e,t):Xi;function ue(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var Ql={value:()=>{}};function En(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new nn(n)}function nn(e){this._=e}function Jl(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}nn.prototype=En.prototype={constructor:nn,on:function(e,t){var n=this._,r=Jl(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=ef(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Zi(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Zi(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new nn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function ef(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Zi(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ql,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Jr="http://www.w3.org/1999/xhtml";const Ki={svg:"http://www.w3.org/2000/svg",xhtml:Jr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ki.hasOwnProperty(t)?{space:Ki[t],local:e}:e}function tf(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Jr&&t.documentElement.namespaceURI===Jr?t.createElement(e):t.createElementNS(n,e)}}function nf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ca(e){var t=xn(e);return(t.local?nf:tf)(t)}function rf(){}function xi(e){return e==null?rf:function(){return this.querySelector(e)}}function of(e){typeof e!="function"&&(e=xi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),c,l,u=0;u<o;++u)(c=s[u])&&(l=e.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new he(r,this._parents)}function sf(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function af(){return[]}function la(e){return e==null?af:function(){return this.querySelectorAll(e)}}function uf(e){return function(){return sf(e.apply(this,arguments))}}function cf(e){typeof e=="function"?e=uf(e):e=la(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&(r.push(e.call(c,c.__data__,l,o)),i.push(c));return new he(r,i)}function fa(e){return function(){return this.matches(e)}}function da(e){return function(t){return t.matches(e)}}var lf=Array.prototype.find;function ff(e){return function(){return lf.call(this.children,e)}}function df(){return this.firstElementChild}function hf(e){return this.select(e==null?df:ff(typeof e=="function"?e:da(e)))}var pf=Array.prototype.filter;function mf(){return Array.from(this.children)}function gf(e){return function(){return pf.call(this.children,e)}}function vf(e){return this.selectAll(e==null?mf:gf(typeof e=="function"?e:da(e)))}function yf(e){typeof e!="function"&&(e=fa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new he(r,this._parents)}function ha(e){return new Array(e.length)}function wf(){return new he(this._enter||this._groups.map(ha),this._parents)}function an(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}an.prototype={constructor:an,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _f(e){return function(){return e}}function bf(e,t,n,r,i,s){for(var o=0,a,c=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new an(e,s[o]);for(;o<c;++o)(a=t[o])&&(i[o]=a)}function Ef(e,t,n,r,i,s,o){var a,c,l=new Map,u=t.length,f=s.length,h=new Array(u),d;for(a=0;a<u;++a)(c=t[a])&&(h[a]=d=o.call(c,c.__data__,a,t)+"",l.has(d)?i[a]=c:l.set(d,c));for(a=0;a<f;++a)d=o.call(e,s[a],a,s)+"",(c=l.get(d))?(r[a]=c,c.__data__=s[a],l.delete(d)):n[a]=new an(e,s[a]);for(a=0;a<u;++a)(c=t[a])&&l.get(h[a])===c&&(i[a]=c)}function xf(e){return e.__data__}function Sf(e,t){if(!arguments.length)return Array.from(this,xf);var n=t?Ef:bf,r=this._parents,i=this._groups;typeof e!="function"&&(e=_f(e));for(var s=i.length,o=new Array(s),a=new Array(s),c=new Array(s),l=0;l<s;++l){var u=r[l],f=i[l],h=f.length,d=Nf(e.call(u,u&&u.__data__,l,r)),p=d.length,g=a[l]=new Array(p),y=o[l]=new Array(p),v=c[l]=new Array(h);n(u,f,g,y,v,d,t);for(var E=0,k=0,w,I;E<p;++E)if(w=g[E]){for(E>=k&&(k=E+1);!(I=y[k])&&++k<p;);w._next=I||null}}return o=new he(o,r),o._enter=a,o._exit=c,o}function Nf(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kf(){return new he(this._exit||this._groups.map(ha),this._parents)}function Cf(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Af(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],f=l.length,h=a[c]=new Array(f),d,p=0;p<f;++p)(d=l[p]||u[p])&&(h[p]=d);for(;c<i;++c)a[c]=n[c];return new he(a,this._parents)}function If(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Rf(e){e||(e=Tf);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,c=i[s]=new Array(a),l,u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new he(i,this._parents).order()}function Tf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Mf(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $f(){return Array.from(this)}function Pf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Df(){let e=0;for(const t of this)++e;return e}function Lf(){return!this.node()}function zf(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Of(e){return function(){this.removeAttribute(e)}}function Ff(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qf(e,t){return function(){this.setAttribute(e,t)}}function Vf(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Bf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Hf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Gf(e,t){var n=xn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ff:Of:typeof t=="function"?n.local?Hf:Bf:n.local?Vf:qf)(n,t))}function pa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Uf(e){return function(){this.style.removeProperty(e)}}function Yf(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Wf(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Xf(e,t,n){return arguments.length>1?this.each((t==null?Uf:typeof t=="function"?Wf:Yf)(e,t,n??"")):xt(this.node(),e)}function xt(e,t){return e.style.getPropertyValue(t)||pa(e).getComputedStyle(e,null).getPropertyValue(t)}function Zf(e){return function(){delete this[e]}}function Kf(e,t){return function(){this[e]=t}}function jf(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Qf(e,t){return arguments.length>1?this.each((t==null?Zf:typeof t=="function"?jf:Kf)(e,t)):this.node()[e]}function ma(e){return e.trim().split(/^|\s+/)}function Si(e){return e.classList||new ga(e)}function ga(e){this._node=e,this._names=ma(e.getAttribute("class")||"")}ga.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function va(e,t){for(var n=Si(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ya(e,t){for(var n=Si(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Jf(e){return function(){va(this,e)}}function ed(e){return function(){ya(this,e)}}function td(e,t){return function(){(t.apply(this,arguments)?va:ya)(this,e)}}function nd(e,t){var n=ma(e+"");if(arguments.length<2){for(var r=Si(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?td:t?Jf:ed)(n,t))}function rd(){this.textContent=""}function id(e){return function(){this.textContent=e}}function od(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function sd(e){return arguments.length?this.each(e==null?rd:(typeof e=="function"?od:id)(e)):this.node().textContent}function ad(){this.innerHTML=""}function ud(e){return function(){this.innerHTML=e}}function cd(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ld(e){return arguments.length?this.each(e==null?ad:(typeof e=="function"?cd:ud)(e)):this.node().innerHTML}function fd(){this.nextSibling&&this.parentNode.appendChild(this)}function dd(){return this.each(fd)}function hd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pd(){return this.each(hd)}function md(e){var t=typeof e=="function"?e:ca(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function gd(){return null}function vd(e,t){var n=typeof e=="function"?e:ca(e),r=t==null?gd:typeof t=="function"?t:xi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function yd(){var e=this.parentNode;e&&e.removeChild(this)}function wd(){return this.each(yd)}function _d(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bd(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ed(e){return this.select(e?bd:_d)}function xd(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Sd(e){return function(t){e.call(this,t,this.__data__)}}function Nd(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function kd(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Cd(e,t,n){return function(){var r=this.__on,i,s=Sd(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Ad(e,t,n){var r=Nd(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?Cd:kd,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function wa(e,t,n){var r=pa(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Id(e,t){return function(){return wa(this,e,t)}}function Rd(e,t){return function(){return wa(this,e,t.apply(this,arguments))}}function Td(e,t){return this.each((typeof t=="function"?Rd:Id)(e,t))}function*Md(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var _a=[null];function he(e,t){this._groups=e,this._parents=t}function Yt(){return new he([[document.documentElement]],_a)}function $d(){return this}he.prototype=Yt.prototype={constructor:he,select:of,selectAll:cf,selectChild:hf,selectChildren:vf,filter:yf,data:Sf,enter:wf,exit:kf,join:Cf,merge:Af,selection:$d,order:If,sort:Rf,call:Mf,nodes:$f,node:Pf,size:Df,empty:Lf,each:zf,attr:Gf,style:Xf,property:Qf,classed:nd,text:sd,html:ld,raise:dd,lower:pd,append:md,insert:vd,remove:wd,clone:Ed,datum:xd,on:Ad,dispatch:Td,[Symbol.iterator]:Md};function be(e){return typeof e=="string"?new he([[document.querySelector(e)]],[document.documentElement]):new he([[e]],_a)}function Pd(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ce(e,t){if(e=Pd(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Dd={passive:!1},Vt={capture:!0,passive:!1};function Dn(e){e.stopImmediatePropagation()}function wt(e){e.preventDefault(),e.stopImmediatePropagation()}function ba(e){var t=e.document.documentElement,n=be(e).on("dragstart.drag",wt,Vt);"onselectstart"in t?n.on("selectstart.drag",wt,Vt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ea(e,t){var n=e.document.documentElement,r=be(e).on("dragstart.drag",null);t&&(r.on("click.drag",wt,Vt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Xt=e=>()=>e;function ei(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}ei.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ld(e){return!e.ctrlKey&&!e.button}function zd(){return this.parentNode}function Od(e,t){return t??{x:e.x,y:e.y}}function Fd(){return navigator.maxTouchPoints||"ontouchstart"in this}function qd(){var e=Ld,t=zd,n=Od,r=Fd,i={},s=En("start","drag","end"),o=0,a,c,l,u,f=0;function h(w){w.on("mousedown.drag",d).filter(r).on("touchstart.drag",y).on("touchmove.drag",v,Dd).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(w,I){if(!(u||!e.call(this,w,I))){var T=k(this,t.call(this,w,I),w,I,"mouse");T&&(be(w.view).on("mousemove.drag",p,Vt).on("mouseup.drag",g,Vt),ba(w.view),Dn(w),l=!1,a=w.clientX,c=w.clientY,T("start",w))}}function p(w){if(wt(w),!l){var I=w.clientX-a,T=w.clientY-c;l=I*I+T*T>f}i.mouse("drag",w)}function g(w){be(w.view).on("mousemove.drag mouseup.drag",null),Ea(w.view,l),wt(w),i.mouse("end",w)}function y(w,I){if(e.call(this,w,I)){var T=w.changedTouches,z=t.call(this,w,I),M=T.length,R,D;for(R=0;R<M;++R)(D=k(this,z,w,I,T[R].identifier,T[R]))&&(Dn(w),D("start",w,T[R]))}}function v(w){var I=w.changedTouches,T=I.length,z,M;for(z=0;z<T;++z)(M=i[I[z].identifier])&&(wt(w),M("drag",w,I[z]))}function E(w){var I=w.changedTouches,T=I.length,z,M;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),z=0;z<T;++z)(M=i[I[z].identifier])&&(Dn(w),M("end",w,I[z]))}function k(w,I,T,z,M,R){var D=s.copy(),L=Ce(R||T,I),q,F,m;if((m=n.call(w,new ei("beforestart",{sourceEvent:T,target:h,identifier:M,active:o,x:L[0],y:L[1],dx:0,dy:0,dispatch:D}),z))!=null)return q=m.x-L[0]||0,F=m.y-L[1]||0,function x(b,A,$){var _=L,C;switch(b){case"start":i[M]=x,C=o++;break;case"end":delete i[M],--o;case"drag":L=Ce($||A,I),C=o;break}D.call(b,w,new ei(b,{sourceEvent:A,subject:m,target:h,identifier:M,active:C,x:L[0]+q,y:L[1]+F,dx:L[0]-_[0],dy:L[1]-_[1],dispatch:D}),z)}}return h.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Xt(!!w),h):e},h.container=function(w){return arguments.length?(t=typeof w=="function"?w:Xt(w),h):t},h.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Xt(w),h):n},h.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Xt(!!w),h):r},h.on=function(){var w=s.on.apply(s,arguments);return w===s?h:w},h.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,h):Math.sqrt(f)},h}var St=0,Dt=0,Rt=0,xa=1e3,un,Lt,cn=0,ot=0,Sn=0,Bt=typeof performance=="object"&&performance.now?performance:Date,Sa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ni(){return ot||(Sa(Vd),ot=Bt.now()+Sn)}function Vd(){ot=0}function ln(){this._call=this._time=this._next=null}ln.prototype=Na.prototype={constructor:ln,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ni():+n)+(t==null?0:+t),!this._next&&Lt!==this&&(Lt?Lt._next=this:un=this,Lt=this),this._call=e,this._time=n,ti()},stop:function(){this._call&&(this._call=null,this._time=1/0,ti())}};function Na(e,t,n){var r=new ln;return r.restart(e,t,n),r}function Bd(){Ni(),++St;for(var e=un,t;e;)(t=ot-e._time)>=0&&e._call.call(void 0,t),e=e._next;--St}function ji(){ot=(cn=Bt.now())+Sn,St=Dt=0;try{Bd()}finally{St=0,Gd(),ot=0}}function Hd(){var e=Bt.now(),t=e-cn;t>xa&&(Sn-=t,cn=e)}function Gd(){for(var e,t=un,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:un=n);Lt=e,ti(r)}function ti(e){if(!St){Dt&&(Dt=clearTimeout(Dt));var t=e-ot;t>24?(e<1/0&&(Dt=setTimeout(ji,e-Bt.now()-Sn)),Rt&&(Rt=clearInterval(Rt))):(Rt||(cn=Bt.now(),Rt=setInterval(Hd,xa)),St=1,Sa(ji))}}function Qi(e,t,n){var r=new ln;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Ud=En("start","end","cancel","interrupt"),Yd=[],ka=0,Ji=1,ni=2,rn=3,eo=4,ri=5,on=6;function Nn(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Wd(e,n,{name:t,index:r,group:i,on:Ud,tween:Yd,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ka})}function ki(e,t){var n=xe(e,t);if(n.state>ka)throw new Error("too late; already scheduled");return n}function Ie(e,t){var n=xe(e,t);if(n.state>rn)throw new Error("too late; already running");return n}function xe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Wd(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Na(s,0,n.time);function s(l){n.state=Ji,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var u,f,h,d;if(n.state!==Ji)return c();for(u in r)if(d=r[u],d.name===n.name){if(d.state===rn)return Qi(o);d.state===eo?(d.state=on,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[u]):+u<t&&(d.state=on,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[u])}if(Qi(function(){n.state===rn&&(n.state=eo,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=ni,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ni){for(n.state=rn,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=ri,1),f=-1,h=i.length;++f<h;)i[f].call(e,u);n.state===ri&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=on,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function sn(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>ni&&r.state<ri,r.state=on,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Xd(e){return this.each(function(){sn(this,e)})}function Zd(e,t){var n,r;return function(){var i=Ie(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Kd(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ie(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=a;break}c===l&&i.push(a)}s.tween=i}}function jd(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=xe(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Zd:Kd)(n,e,t))}function Ci(e,t,n){var r=e._id;return e.each(function(){var i=Ie(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return xe(i,r).value[t]}}function Ca(e,t){var n;return(typeof t=="number"?zc:t instanceof Yi?Ui:(n=Yi(t))?(t=n,Ui):Oc)(e,t)}function Qd(e){return function(){this.removeAttribute(e)}}function Jd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function eh(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function th(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function nh(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function rh(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function ih(e,t){var n=xn(e),r=n==="transform"?Fc:Ca;return this.attrTween(e,typeof t=="function"?(n.local?rh:nh)(n,r,Ci(this,"attr."+e,t)):t==null?(n.local?Jd:Qd)(n):(n.local?th:eh)(n,r,t))}function oh(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function sh(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ah(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&sh(e,s)),n}return i._value=t,i}function uh(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&oh(e,s)),n}return i._value=t,i}function ch(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=xn(e);return this.tween(n,(r.local?ah:uh)(r,t))}function lh(e,t){return function(){ki(this,e).delay=+t.apply(this,arguments)}}function fh(e,t){return t=+t,function(){ki(this,e).delay=t}}function dh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lh:fh)(t,e)):xe(this.node(),t).delay}function hh(e,t){return function(){Ie(this,e).duration=+t.apply(this,arguments)}}function ph(e,t){return t=+t,function(){Ie(this,e).duration=t}}function mh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hh:ph)(t,e)):xe(this.node(),t).duration}function gh(e,t){if(typeof t!="function")throw new Error;return function(){Ie(this,e).ease=t}}function vh(e){var t=this._id;return arguments.length?this.each(gh(t,e)):xe(this.node(),t).ease}function yh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ie(this,e).ease=n}}function wh(e){if(typeof e!="function")throw new Error;return this.each(yh(this._id,e))}function _h(e){typeof e!="function"&&(e=fa(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new ze(r,this._parents,this._name,this._id)}function bh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var c=t[a],l=n[a],u=c.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=c[d]||l[d])&&(f[d]=h);for(;a<r;++a)o[a]=t[a];return new ze(o,this._parents,this._name,this._id)}function Eh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function xh(e,t,n){var r,i,s=Eh(t)?ki:Ie;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Sh(e,t){var n=this._id;return arguments.length<2?xe(this.node(),n).on.on(e):this.each(xh(n,e,t))}function Nh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function kh(){return this.on("end.remove",Nh(this._id))}function Ch(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xi(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],c=a.length,l=s[o]=new Array(c),u,f,h=0;h<c;++h)(u=a[h])&&(f=e.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,Nn(l[h],t,n,h,l,xe(u,n)));return new ze(s,this._parents,t,n)}function Ah(e){var t=this._name,n=this._id;typeof e!="function"&&(e=la(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var h=e.call(u,u.__data__,f,c),d,p=xe(u,n),g=0,y=h.length;g<y;++g)(d=h[g])&&Nn(d,t,n,g,h,p);s.push(h),o.push(u)}return new ze(s,o,t,n)}var Ih=Yt.prototype.constructor;function Rh(){return new Ih(this._groups,this._parents)}function Th(e,t){var n,r,i;return function(){var s=xt(this,e),o=(this.style.removeProperty(e),xt(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Aa(e){return function(){this.style.removeProperty(e)}}function Mh(e,t,n){var r,i=n+"",s;return function(){var o=xt(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function $h(e,t,n){var r,i,s;return function(){var o=xt(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),xt(this,e))),o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a))}}function Ph(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var c=Ie(this,e),l=c.on,u=c.value[s]==null?a||(a=Aa(t)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function Dh(e,t,n){var r=(e+="")=="transform"?qc:Ca;return t==null?this.styleTween(e,Th(e,r)).on("end.style."+e,Aa(e)):typeof t=="function"?this.styleTween(e,$h(e,r,Ci(this,"style."+e,t))).each(Ph(this._id,e)):this.styleTween(e,Mh(e,r,t),n).on("end.style."+e,null)}function Lh(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function zh(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Lh(e,o,n)),r}return s._value=t,s}function Oh(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,zh(e,t,n??""))}function Fh(e){return function(){this.textContent=e}}function qh(e){return function(){var t=e(this);this.textContent=t??""}}function Vh(e){return this.tween("text",typeof e=="function"?qh(Ci(this,"text",e)):Fh(e==null?"":e+""))}function Bh(e){return function(t){this.textContent=e.call(this,t)}}function Hh(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Bh(i)),t}return r._value=e,r}function Gh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Hh(e))}function Uh(){for(var e=this._name,t=this._id,n=Ia(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)if(c=o[l]){var u=xe(c,t);Nn(c,e,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ze(r,this._parents,e,n)}function Yh(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var l=Ie(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t}),i===0&&s()})}var Wh=0;function ze(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ia(){return++Wh}var Me=Yt.prototype;ze.prototype={constructor:ze,select:Ch,selectAll:Ah,selectChild:Me.selectChild,selectChildren:Me.selectChildren,filter:_h,merge:bh,selection:Rh,transition:Uh,call:Me.call,nodes:Me.nodes,node:Me.node,size:Me.size,empty:Me.empty,each:Me.each,on:Sh,attr:ih,attrTween:ch,style:Dh,styleTween:Oh,text:Vh,textTween:Gh,remove:kh,tween:jd,delay:dh,duration:mh,ease:vh,easeVarying:wh,end:Yh,[Symbol.iterator]:Me[Symbol.iterator]};function Xh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Zh={time:null,delay:0,duration:250,ease:Xh};function Kh(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function jh(e){var t,n;e instanceof ze?(t=e._id,e=e._name):(t=Ia(),(n=Zh).time=Ni(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&Nn(c,e,t,l,o,n||Kh(c,t));return new ze(r,this._parents,e,t)}Yt.prototype.interrupt=Xd;Yt.prototype.transition=jh;const Zt=e=>()=>e;function Qh(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Pe(e,t,n){this.k=e,this.x=t,this.y=n}Pe.prototype={constructor:Pe,scale:function(e){return e===1?this:new Pe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Pe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ue=new Pe(1,0,0);Pe.prototype;function Ln(e){e.stopImmediatePropagation()}function Tt(e){e.preventDefault(),e.stopImmediatePropagation()}function Jh(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ep(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function to(){return this.__zoom||Ue}function tp(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function np(){return navigator.maxTouchPoints||"ontouchstart"in this}function rp(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function ip(){var e=Jh,t=ep,n=rp,r=tp,i=np,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Vc,l=En("start","zoom","end"),u,f,h,d=500,p=150,g=0,y=10;function v(m){m.property("__zoom",to).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",L).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(m,x,b,A){var $=m.selection?m.selection():m;$.property("__zoom",to),m!==$?I(m,x,b,A):$.interrupt().each(function(){T(this,arguments).event(A).start().zoom(null,typeof x=="function"?x.apply(this,arguments):x).end()})},v.scaleBy=function(m,x,b,A){v.scaleTo(m,function(){var $=this.__zoom.k,_=typeof x=="function"?x.apply(this,arguments):x;return $*_},b,A)},v.scaleTo=function(m,x,b,A){v.transform(m,function(){var $=t.apply(this,arguments),_=this.__zoom,C=b==null?w($):typeof b=="function"?b.apply(this,arguments):b,P=_.invert(C),O=typeof x=="function"?x.apply(this,arguments):x;return n(k(E(_,O),C,P),$,o)},b,A)},v.translateBy=function(m,x,b,A){v.transform(m,function(){return n(this.__zoom.translate(typeof x=="function"?x.apply(this,arguments):x,typeof b=="function"?b.apply(this,arguments):b),t.apply(this,arguments),o)},null,A)},v.translateTo=function(m,x,b,A,$){v.transform(m,function(){var _=t.apply(this,arguments),C=this.__zoom,P=A==null?w(_):typeof A=="function"?A.apply(this,arguments):A;return n(Ue.translate(P[0],P[1]).scale(C.k).translate(typeof x=="function"?-x.apply(this,arguments):-x,typeof b=="function"?-b.apply(this,arguments):-b),_,o)},A,$)};function E(m,x){return x=Math.max(s[0],Math.min(s[1],x)),x===m.k?m:new Pe(x,m.x,m.y)}function k(m,x,b){var A=x[0]-b[0]*m.k,$=x[1]-b[1]*m.k;return A===m.x&&$===m.y?m:new Pe(m.k,A,$)}function w(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function I(m,x,b,A){m.on("start.zoom",function(){T(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(A).end()}).tween("zoom",function(){var $=this,_=arguments,C=T($,_).event(A),P=t.apply($,_),O=b==null?w(P):typeof b=="function"?b.apply($,_):b,B=Math.max(P[1][0]-P[0][0],P[1][1]-P[0][1]),V=$.__zoom,U=typeof x=="function"?x.apply($,_):x,Z=c(V.invert(O).concat(B/V.k),U.invert(O).concat(B/U.k));return function(K){if(K===1)K=U;else{var Q=Z(K),re=B/Q[2];K=new Pe(re,O[0]-Q[0]*re,O[1]-Q[1]*re)}C.zoom(null,K)}})}function T(m,x,b){return!b&&m.__zooming||new z(m,x)}function z(m,x){this.that=m,this.args=x,this.active=0,this.sourceEvent=null,this.extent=t.apply(m,x),this.taps=0}z.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,x){return this.mouse&&m!=="mouse"&&(this.mouse[1]=x.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=x.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=x.invert(this.touch1[0])),this.that.__zoom=x,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var x=be(this.that).datum();l.call(m,this.that,new Qh(m,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:l}),x)}};function M(m,...x){if(!e.apply(this,arguments))return;var b=T(this,x).event(m),A=this.__zoom,$=Math.max(s[0],Math.min(s[1],A.k*Math.pow(2,r.apply(this,arguments)))),_=Ce(m);if(b.wheel)(b.mouse[0][0]!==_[0]||b.mouse[0][1]!==_[1])&&(b.mouse[1]=A.invert(b.mouse[0]=_)),clearTimeout(b.wheel);else{if(A.k===$)return;b.mouse=[_,A.invert(_)],sn(this),b.start()}Tt(m),b.wheel=setTimeout(C,p),b.zoom("mouse",n(k(E(A,$),b.mouse[0],b.mouse[1]),b.extent,o));function C(){b.wheel=null,b.end()}}function R(m,...x){if(h||!e.apply(this,arguments))return;var b=m.currentTarget,A=T(this,x,!0).event(m),$=be(m.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",B,!0),_=Ce(m,b),C=m.clientX,P=m.clientY;ba(m.view),Ln(m),A.mouse=[_,this.__zoom.invert(_)],sn(this),A.start();function O(V){if(Tt(V),!A.moved){var U=V.clientX-C,Z=V.clientY-P;A.moved=U*U+Z*Z>g}A.event(V).zoom("mouse",n(k(A.that.__zoom,A.mouse[0]=Ce(V,b),A.mouse[1]),A.extent,o))}function B(V){$.on("mousemove.zoom mouseup.zoom",null),Ea(V.view,A.moved),Tt(V),A.event(V).end()}}function D(m,...x){if(e.apply(this,arguments)){var b=this.__zoom,A=Ce(m.changedTouches?m.changedTouches[0]:m,this),$=b.invert(A),_=b.k*(m.shiftKey?.5:2),C=n(k(E(b,_),A,$),t.apply(this,x),o);Tt(m),a>0?be(this).transition().duration(a).call(I,C,A,m):be(this).call(v.transform,C,A,m)}}function L(m,...x){if(e.apply(this,arguments)){var b=m.touches,A=b.length,$=T(this,x,m.changedTouches.length===A).event(m),_,C,P,O;for(Ln(m),C=0;C<A;++C)P=b[C],O=Ce(P,this),O=[O,this.__zoom.invert(O),P.identifier],$.touch0?!$.touch1&&$.touch0[2]!==O[2]&&($.touch1=O,$.taps=0):($.touch0=O,_=!0,$.taps=1+!!u);u&&(u=clearTimeout(u)),_&&($.taps<2&&(f=O[0],u=setTimeout(function(){u=null},d)),sn(this),$.start())}}function q(m,...x){if(this.__zooming){var b=T(this,x).event(m),A=m.changedTouches,$=A.length,_,C,P,O;for(Tt(m),_=0;_<$;++_)C=A[_],P=Ce(C,this),b.touch0&&b.touch0[2]===C.identifier?b.touch0[0]=P:b.touch1&&b.touch1[2]===C.identifier&&(b.touch1[0]=P);if(C=b.that.__zoom,b.touch1){var B=b.touch0[0],V=b.touch0[1],U=b.touch1[0],Z=b.touch1[1],K=(K=U[0]-B[0])*K+(K=U[1]-B[1])*K,Q=(Q=Z[0]-V[0])*Q+(Q=Z[1]-V[1])*Q;C=E(C,Math.sqrt(K/Q)),P=[(B[0]+U[0])/2,(B[1]+U[1])/2],O=[(V[0]+Z[0])/2,(V[1]+Z[1])/2]}else if(b.touch0)P=b.touch0[0],O=b.touch0[1];else return;b.zoom("touch",n(k(C,P,O),b.extent,o))}}function F(m,...x){if(this.__zooming){var b=T(this,x).event(m),A=m.changedTouches,$=A.length,_,C;for(Ln(m),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),_=0;_<$;++_)C=A[_],b.touch0&&b.touch0[2]===C.identifier?delete b.touch0:b.touch1&&b.touch1[2]===C.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(C=Ce(C,this),Math.hypot(f[0]-C[0],f[1]-C[1])<y)){var P=be(this).on("dblclick.zoom");P&&P.apply(this,arguments)}}}return v.wheelDelta=function(m){return arguments.length?(r=typeof m=="function"?m:Zt(+m),v):r},v.filter=function(m){return arguments.length?(e=typeof m=="function"?m:Zt(!!m),v):e},v.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:Zt(!!m),v):i},v.extent=function(m){return arguments.length?(t=typeof m=="function"?m:Zt([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),v):t},v.scaleExtent=function(m){return arguments.length?(s[0]=+m[0],s[1]=+m[1],v):[s[0],s[1]]},v.translateExtent=function(m){return arguments.length?(o[0][0]=+m[0][0],o[1][0]=+m[1][0],o[0][1]=+m[0][1],o[1][1]=+m[1][1],v):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},v.constrain=function(m){return arguments.length?(n=m,v):n},v.duration=function(m){return arguments.length?(a=+m,v):a},v.interpolate=function(m){return arguments.length?(c=m,v):c},v.on=function(){var m=l.on.apply(l,arguments);return m===l?v:m},v.clickDistance=function(m){return arguments.length?(g=(m=+m)*m,v):Math.sqrt(g)},v.tapDistance=function(m){return arguments.length?(y=+m,v):y},v}const kn=S.createContext(null),op=kn.Provider,Oe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Ra=Oe.error001();function ne(e,t){const n=S.useContext(kn);if(n===null)throw new Error(Ra);return ua(n,e,t)}const se=()=>{const e=S.useContext(kn);if(e===null)throw new Error(Ra);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},sp=e=>e.userSelectionActive?"none":"all";function Ta({position:e,children:t,className:n,style:r,...i}){const s=ne(sp),o=`${e}`.split("-");return N.createElement("div",{className:ce(["react-flow__panel",n,...o]),style:{...r,pointerEvents:s},...i},t)}function ap({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:N.createElement(Ta,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},N.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const up=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:c,className:l,...u})=>{const f=S.useRef(null),[h,d]=S.useState({x:0,y:0,width:0,height:0}),p=ce(["react-flow__edge-textwrapper",l]);return S.useEffect(()=>{if(f.current){const g=f.current.getBBox();d({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:N.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:p,visibility:h.width?"visible":"hidden",...u},i&&N.createElement("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),N.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:r},n),c)};var cp=S.memo(up);const Ai=e=>({width:e.offsetWidth,height:e.offsetHeight}),Nt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ii=(e={x:0,y:0},t)=>({x:Nt(e.x,t[0][0],t[1][0]),y:Nt(e.y,t[0][1],t[1][1])}),no=(e,t,n)=>e<t?Nt(Math.abs(e-t),1,50)/50:e>n?-Nt(Math.abs(e-n),1,50)/50:0,Ma=(e,t)=>{const n=no(e.x,35,t.width-35)*20,r=no(e.y,35,t.height-35)*20;return[n,r]},$a=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Pa=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ht=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Da=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ro=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Q0=(e,t)=>Da(Pa(Ht(e),Ht(t))),ii=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},lp=e=>ge(e.width)&&ge(e.height)&&ge(e.x)&&ge(e.y),ge=e=>!isNaN(e)&&isFinite(e),ie=Symbol.for("internals"),La=["Enter"," ","Escape"],fp=(e,t)=>{},dp=e=>"nativeEvent"in e;function oi(e){var i,s;const t=dp(e)?e.nativeEvent:e,n=((s=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const za=e=>"clientX"in e,Ye=(e,t)=>{var s,o;const n=za(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},fn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Wt=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:f,markerStart:h,interactionWidth:d=20})=>N.createElement(N.Fragment,null,N.createElement("path",{id:e,style:u,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),d&&N.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),i&&ge(n)&&ge(r)?N.createElement(cp,{x:n,y:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l}):null);Wt.displayName="BaseEdge";function Mt(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(s=>s.id===e);i&&n(r,{...i})}}function Oa({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function Fa({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const c=e*.125+i*.375+o*.375+n*.125,l=t*.125+s*.375+a*.375+r*.125,u=Math.abs(c-e),f=Math.abs(l-t);return[c,l,u,f]}var st;(function(e){e.Strict="strict",e.Loose="loose"})(st||(st={}));var rt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(rt||(rt={}));var Gt;(function(e){e.Partial="partial",e.Full="full"})(Gt||(Gt={}));var He;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(He||(He={}));var dn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(dn||(dn={}));var H;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(H||(H={}));function io({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===H.Left||e===H.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function qa({sourceX:e,sourceY:t,sourcePosition:n=H.Bottom,targetX:r,targetY:i,targetPosition:s=H.Top}){const[o,a]=io({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,l]=io({pos:s,x1:r,y1:i,x2:e,y2:t}),[u,f,h,d]=Fa({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:c,targetControlY:l});return[`M${e},${t} C${o},${a} ${c},${l} ${r},${i}`,u,f,h,d]}const Ri=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=H.Bottom,targetPosition:s=H.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:d,markerStart:p,interactionWidth:g})=>{const[y,v,E]=qa({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return N.createElement(Wt,{path:y,labelX:v,labelY:E,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:d,markerStart:p,interactionWidth:g})});Ri.displayName="SimpleBezierEdge";const oo={[H.Left]:{x:-1,y:0},[H.Right]:{x:1,y:0},[H.Top]:{x:0,y:-1},[H.Bottom]:{x:0,y:1}},hp=({source:e,sourcePosition:t=H.Bottom,target:n})=>t===H.Left||t===H.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},so=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function pp({source:e,sourcePosition:t=H.Bottom,target:n,targetPosition:r=H.Top,center:i,offset:s}){const o=oo[t],a=oo[r],c={x:e.x+o.x*s,y:e.y+o.y*s},l={x:n.x+a.x*s,y:n.y+a.y*s},u=hp({source:c,sourcePosition:t,target:l}),f=u.x!==0?"x":"y",h=u[f];let d=[],p,g;const y={x:0,y:0},v={x:0,y:0},[E,k,w,I]=Oa({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[f]*a[f]===-1){p=i.x??E,g=i.y??k;const z=[{x:p,y:c.y},{x:p,y:l.y}],M=[{x:c.x,y:g},{x:l.x,y:g}];o[f]===h?d=f==="x"?z:M:d=f==="x"?M:z}else{const z=[{x:c.x,y:l.y}],M=[{x:l.x,y:c.y}];if(f==="x"?d=o.x===h?M:z:d=o.y===h?z:M,t===r){const F=Math.abs(e[f]-n[f]);if(F<=s){const m=Math.min(s-1,s-F);o[f]===h?y[f]=(c[f]>e[f]?-1:1)*m:v[f]=(l[f]>n[f]?-1:1)*m}}if(t!==r){const F=f==="x"?"y":"x",m=o[f]===a[F],x=c[F]>l[F],b=c[F]<l[F];(o[f]===1&&(!m&&x||m&&b)||o[f]!==1&&(!m&&b||m&&x))&&(d=f==="x"?z:M)}const R={x:c.x+y.x,y:c.y+y.y},D={x:l.x+v.x,y:l.y+v.y},L=Math.max(Math.abs(R.x-d[0].x),Math.abs(D.x-d[0].x)),q=Math.max(Math.abs(R.y-d[0].y),Math.abs(D.y-d[0].y));L>=q?(p=(R.x+D.x)/2,g=d[0].y):(p=d[0].x,g=(R.y+D.y)/2)}return[[e,{x:c.x+y.x,y:c.y+y.y},...d,{x:l.x+v.x,y:l.y+v.y},n],p,g,w,I]}function mp(e,t,n,r){const i=Math.min(so(e,t)/2,so(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${s+i*l},${o}Q ${s},${o} ${s},${o+i*u}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${o+i*c}Q ${s},${o} ${s+i*a},${o}`}function si({sourceX:e,sourceY:t,sourcePosition:n=H.Bottom,targetX:r,targetY:i,targetPosition:s=H.Top,borderRadius:o=5,centerX:a,centerY:c,offset:l=20}){const[u,f,h,d,p]=pp({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:c},offset:l});return[u.reduce((y,v,E)=>{let k="";return E>0&&E<u.length-1?k=mp(u[E-1],v,u[E+1],o):k=`${E===0?"M":"L"}${v.x} ${v.y}`,y+=k,y},""),f,h,d,p]}const Cn=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,sourcePosition:f=H.Bottom,targetPosition:h=H.Top,markerEnd:d,markerStart:p,pathOptions:g,interactionWidth:y})=>{const[v,E,k]=si({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:h,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return N.createElement(Wt,{path:v,labelX:E,labelY:k,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:p,interactionWidth:y})});Cn.displayName="SmoothStepEdge";const Ti=S.memo(e=>{var t;return N.createElement(Cn,{...e,pathOptions:S.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Ti.displayName="StepEdge";function gp({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=Oa({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const Mi=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:f,markerStart:h,interactionWidth:d})=>{const[p,g,y]=gp({sourceX:e,sourceY:t,targetX:n,targetY:r});return N.createElement(Wt,{path:p,labelX:g,labelY:y,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:f,markerStart:h,interactionWidth:d})});Mi.displayName="StraightEdge";function Kt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ao({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case H.Left:return[t-Kt(t-r,s),n];case H.Right:return[t+Kt(r-t,s),n];case H.Top:return[t,n-Kt(n-i,s)];case H.Bottom:return[t,n+Kt(i-n,s)]}}function Va({sourceX:e,sourceY:t,sourcePosition:n=H.Bottom,targetX:r,targetY:i,targetPosition:s=H.Top,curvature:o=.25}){const[a,c]=ao({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[l,u]=ao({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[f,h,d,p]=Fa({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${c} ${l},${u} ${r},${i}`,f,h,d,p]}const hn=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=H.Bottom,targetPosition:s=H.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:d,markerStart:p,pathOptions:g,interactionWidth:y})=>{const[v,E,k]=Va({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:g==null?void 0:g.curvature});return N.createElement(Wt,{path:v,labelX:E,labelY:k,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:f,style:h,markerEnd:d,markerStart:p,interactionWidth:y})});hn.displayName="BezierEdge";const $i=S.createContext(null),vp=$i.Provider;$i.Consumer;const yp=()=>S.useContext($i),wp=e=>"id"in e&&"source"in e&&"target"in e,_p=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,ai=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,bp=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Ep=(e,t)=>{if(!e.source||!e.target)return t;let n;return wp(e)?n={...e}:n={...e,id:_p(e)},bp(n,t)?t:t.concat(n)},ui=({x:e,y:t},[n,r,i],s,[o,a])=>{const c={x:(e-n)/i,y:(t-r)/i};return s?{x:o*Math.round(c.x/o),y:a*Math.round(c.y/a)}:c},Ba=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),_t=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},An=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:s,y:o}=_t(i,t).positionAbsolute;return Pa(r,Ht({x:s,y:o,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Da(n)},J0=(e,t=[0,0])=>(console.warn("[DEPRECATED] `getRectOfNodes` is deprecated. Instead use `getNodesBounds` https://reactflow.dev/api-reference/utils/get-nodes-bounds."),An(e,t)),Ha=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1,a=[0,0])=>{const c={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},l=[];return e.forEach(u=>{const{width:f,height:h,selectable:d=!0,hidden:p=!1}=u;if(o&&!d||p)return!1;const{positionAbsolute:g}=_t(u,a),y={x:g.x,y:g.y,width:f||0,height:h||0},v=ii(c,y),E=typeof f>"u"||typeof h>"u"||f===null||h===null,k=s&&v>0,w=(f||0)*(h||0);(E||k||v>=w||u.dragging)&&l.push(u)}),l},Ga=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Ua=(e,t,n,r,i,s=.1)=>{const o=t/(e.width*(1+s)),a=n/(e.height*(1+s)),c=Math.min(o,a),l=Nt(c,r,i),u=e.x+e.width/2,f=e.y+e.height/2,h=t/2-u*l,d=n/2-f*l;return{x:h,y:d,zoom:l}},nt=(e,t=0)=>e.transition().duration(t);function uo(e,t,n,r){return(t[n]||[]).reduce((i,s)=>{var o,a;return`${e.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),i},[])}function xp(e,t,n,r,i,s){const{x:o,y:a}=Ye(e),l=t.elementsFromPoint(o,a).find(p=>p.classList.contains("react-flow__handle"));if(l){const p=l.getAttribute("data-nodeid");if(p){const g=Pi(void 0,l),y=l.getAttribute("data-handleid"),v=s({nodeId:p,id:y,type:g});if(v){const E=i.find(k=>k.nodeId===p&&k.type===g&&k.id===y);return{handle:{id:y,type:g,nodeId:p,x:(E==null?void 0:E.x)||n.x,y:(E==null?void 0:E.y)||n.y},validHandleResult:v}}}}let u=[],f=1/0;if(i.forEach(p=>{const g=Math.sqrt((p.x-n.x)**2+(p.y-n.y)**2);if(g<=r){const y=s(p);g<=f&&(g<f?u=[{handle:p,validHandleResult:y}]:g===f&&u.push({handle:p,validHandleResult:y}),f=g)}}),!u.length)return{handle:null,validHandleResult:Ya()};if(u.length===1)return u[0];const h=u.some(({validHandleResult:p})=>p.isValid),d=u.some(({handle:p})=>p.type==="target");return u.find(({handle:p,validHandleResult:g})=>d?p.type==="target":h?g.isValid:!0)||u[0]}const Sp={source:null,target:null,sourceHandle:null,targetHandle:null},Ya=()=>({handleDomNode:null,isValid:!1,connection:Sp,endHandle:null});function Wa(e,t,n,r,i,s,o){const a=i==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),l={...Ya(),handleDomNode:c};if(c){const u=Pi(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),d=c.classList.contains("connectable"),p=c.classList.contains("connectableend"),g={source:a?f:n,sourceHandle:a?h:r,target:a?n:f,targetHandle:a?r:h};l.connection=g,d&&p&&(t===st.Strict?a&&u==="source"||!a&&u==="target":f!==n||h!==r)&&(l.endHandle={nodeId:f,handleId:h,type:u},l.isValid=s(g))}return l}function Np({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,s)=>{if(s[ie]){const{handleBounds:o}=s[ie];let a=[],c=[];o&&(a=uo(s,o,"source",`${t}-${n}-${r}`),c=uo(s,o,"target",`${t}-${n}-${r}`)),i.push(...a,...c)}return i},[])}function Pi(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function zn(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function kp(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Xa({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:o,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:l}){const u=$a(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:d,connectionRadius:p,onConnectStart:g,panBy:y,getNodes:v,cancelConnection:E}=s();let k=0,w;const{x:I,y:T}=Ye(e),z=u==null?void 0:u.elementFromPoint(I,T),M=Pi(c,z),R=h==null?void 0:h.getBoundingClientRect();if(!R||!M)return;let D,L=Ye(e,R),q=!1,F=null,m=!1,x=null;const b=Np({nodes:v(),nodeId:n,handleId:t,handleType:M}),A=()=>{if(!d)return;const[C,P]=Ma(L,R);y({x:C,y:P}),k=requestAnimationFrame(A)};o({connectionPosition:L,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:M,connectionStartHandle:{nodeId:n,handleId:t,type:M},connectionEndHandle:null}),g==null||g(e,{nodeId:n,handleId:t,handleType:M});function $(C){const{transform:P}=s();L=Ye(C,R);const{handle:O,validHandleResult:B}=xp(C,u,ui(L,P,!1,[1,1]),p,b,V=>Wa(V,f,n,t,i?"target":"source",a,u));if(w=O,q||(A(),q=!0),x=B.handleDomNode,F=B.connection,m=B.isValid,o({connectionPosition:w&&m?Ba({x:w.x,y:w.y},P):L,connectionStatus:kp(!!w,m),connectionEndHandle:B.endHandle}),!w&&!m&&!x)return zn(D);F.source!==F.target&&x&&(zn(D),D=x,x.classList.add("connecting","react-flow__handle-connecting"),x.classList.toggle("valid",m),x.classList.toggle("react-flow__handle-valid",m))}function _(C){var P,O;(w||x)&&F&&m&&(r==null||r(F)),(O=(P=s()).onConnectEnd)==null||O.call(P,C),c&&(l==null||l(C)),zn(D),E(),cancelAnimationFrame(k),q=!1,m=!1,F=null,x=null,u.removeEventListener("mousemove",$),u.removeEventListener("mouseup",_),u.removeEventListener("touchmove",$),u.removeEventListener("touchend",_)}u.addEventListener("mousemove",$),u.addEventListener("mouseup",_),u.addEventListener("touchmove",$),u.addEventListener("touchend",_)}const co=()=>!0,Cp=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Ap=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:o}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},Za=S.forwardRef(({type:e="source",position:t=H.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:c,className:l,onMouseDown:u,onTouchStart:f,...h},d)=>{var R,D;const p=o||null,g=e==="target",y=se(),v=yp(),{connectOnClick:E,noPanClassName:k}=ne(Cp,ue),{connecting:w,clickConnecting:I}=ne(Ap(v,p,e),ue);v||(D=(R=y.getState()).onError)==null||D.call(R,"010",Oe.error010());const T=L=>{const{defaultEdgeOptions:q,onConnect:F,hasDefaultEdges:m}=y.getState(),x={...q,...L};if(m){const{edges:b,setEdges:A}=y.getState();A(Ep(x,b))}F==null||F(x),a==null||a(x)},z=L=>{if(!v)return;const q=za(L);i&&(q&&L.button===0||!q)&&Xa({event:L,handleId:p,nodeId:v,onConnect:T,isTarget:g,getState:y.getState,setState:y.setState,isValidConnection:n||y.getState().isValidConnection||co}),q?u==null||u(L):f==null||f(L)},M=L=>{const{onClickConnectStart:q,onClickConnectEnd:F,connectionClickStartHandle:m,connectionMode:x,isValidConnection:b}=y.getState();if(!v||!m&&!i)return;if(!m){q==null||q(L,{nodeId:v,handleId:p,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:v,type:e,handleId:p}});return}const A=$a(L.target),$=n||b||co,{connection:_,isValid:C}=Wa({nodeId:v,id:p,type:e},x,m.nodeId,m.handleId||null,m.type,$,A);C&&T(_),F==null||F(L),y.setState({connectionClickStartHandle:null})};return N.createElement("div",{"data-handleid":p,"data-nodeid":v,"data-handlepos":t,"data-id":`${v}-${p}-${e}`,className:ce(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,l,{source:!g,target:g,connectable:r,connectablestart:i,connectableend:s,connecting:I,connectionindicator:r&&(i&&!w||s&&w)}]),onMouseDown:z,onTouchStart:z,onClick:E?M:void 0,ref:d,...h},c)});Za.displayName="Handle";var pn=S.memo(Za);const Ka=({data:e,isConnectable:t,targetPosition:n=H.Top,sourcePosition:r=H.Bottom})=>N.createElement(N.Fragment,null,N.createElement(pn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,N.createElement(pn,{type:"source",position:r,isConnectable:t}));Ka.displayName="DefaultNode";var ci=S.memo(Ka);const ja=({data:e,isConnectable:t,sourcePosition:n=H.Bottom})=>N.createElement(N.Fragment,null,e==null?void 0:e.label,N.createElement(pn,{type:"source",position:n,isConnectable:t}));ja.displayName="InputNode";var Qa=S.memo(ja);const Ja=({data:e,isConnectable:t,targetPosition:n=H.Top})=>N.createElement(N.Fragment,null,N.createElement(pn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Ja.displayName="OutputNode";var eu=S.memo(Ja);const Di=()=>null;Di.displayName="GroupNode";const Ip=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),jt=e=>e.id;function Rp(e,t){return ue(e.selectedNodes.map(jt),t.selectedNodes.map(jt))&&ue(e.selectedEdges.map(jt),t.selectedEdges.map(jt))}const tu=S.memo(({onSelectionChange:e})=>{const t=se(),{selectedNodes:n,selectedEdges:r}=ne(Ip,Rp);return S.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChange.forEach(s=>s(i))},[n,r,e]),null});tu.displayName="SelectionListener";const Tp=e=>!!e.onSelectionChange;function Mp({onSelectionChange:e}){const t=ne(Tp);return e||t?N.createElement(tu,{onSelectionChange:e}):null}const $p=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function pt(e,t){S.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function X(e,t,n){S.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Pp=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:l,nodesConnectable:u,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:d,elevateNodesOnSelect:p,minZoom:g,maxZoom:y,nodeExtent:v,onNodesChange:E,onEdgesChange:k,elementsSelectable:w,connectionMode:I,snapGrid:T,snapToGrid:z,translateExtent:M,connectOnClick:R,defaultEdgeOptions:D,fitView:L,fitViewOptions:q,onNodesDelete:F,onEdgesDelete:m,onNodeDrag:x,onNodeDragStart:b,onNodeDragStop:A,onSelectionDrag:$,onSelectionDragStart:_,onSelectionDragStop:C,noPanClassName:P,nodeOrigin:O,rfId:B,autoPanOnConnect:V,autoPanOnNodeDrag:U,onError:Z,connectionRadius:K,isValidConnection:Q,nodeDragThreshold:re})=>{const{setNodes:J,setEdges:ye,setDefaultNodesAndEdges:pe,setMinZoom:we,setMaxZoom:me,setTranslateExtent:oe,setNodeExtent:Ne,reset:ee}=ne($p,ue),G=se();return S.useEffect(()=>{const fe=r==null?void 0:r.map(Ze=>({...Ze,...D}));return pe(n,fe),()=>{ee()}},[]),X("defaultEdgeOptions",D,G.setState),X("connectionMode",I,G.setState),X("onConnect",i,G.setState),X("onConnectStart",s,G.setState),X("onConnectEnd",o,G.setState),X("onClickConnectStart",a,G.setState),X("onClickConnectEnd",c,G.setState),X("nodesDraggable",l,G.setState),X("nodesConnectable",u,G.setState),X("nodesFocusable",f,G.setState),X("edgesFocusable",h,G.setState),X("edgesUpdatable",d,G.setState),X("elementsSelectable",w,G.setState),X("elevateNodesOnSelect",p,G.setState),X("snapToGrid",z,G.setState),X("snapGrid",T,G.setState),X("onNodesChange",E,G.setState),X("onEdgesChange",k,G.setState),X("connectOnClick",R,G.setState),X("fitViewOnInit",L,G.setState),X("fitViewOnInitOptions",q,G.setState),X("onNodesDelete",F,G.setState),X("onEdgesDelete",m,G.setState),X("onNodeDrag",x,G.setState),X("onNodeDragStart",b,G.setState),X("onNodeDragStop",A,G.setState),X("onSelectionDrag",$,G.setState),X("onSelectionDragStart",_,G.setState),X("onSelectionDragStop",C,G.setState),X("noPanClassName",P,G.setState),X("nodeOrigin",O,G.setState),X("rfId",B,G.setState),X("autoPanOnConnect",V,G.setState),X("autoPanOnNodeDrag",U,G.setState),X("onError",Z,G.setState),X("connectionRadius",K,G.setState),X("isValidConnection",Q,G.setState),X("nodeDragThreshold",re,G.setState),pt(e,J),pt(t,ye),pt(g,we),pt(y,me),pt(M,oe),pt(v,Ne),null},lo={display:"none"},Dp={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},nu="react-flow__node-desc",ru="react-flow__edge-desc",Lp="react-flow__aria-live",zp=e=>e.ariaLiveMessage;function Op({rfId:e}){const t=ne(zp);return N.createElement("div",{id:`${Lp}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Dp},t)}function Fp({rfId:e,disableKeyboardA11y:t}){return N.createElement(N.Fragment,null,N.createElement("div",{id:`${nu}-${e}`,style:lo},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),N.createElement("div",{id:`${ru}-${e}`,style:lo},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&N.createElement(Op,{rfId:e}))}var Ut=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=S.useState(!1),i=S.useRef(!1),s=S.useRef(new Set([])),[o,a]=S.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),u=l.reduce((f,h)=>f.concat(...h),[]);return[l,u]}return[[],[]]},[e]);return S.useEffect(()=>{const c=typeof document<"u"?document:null,l=(t==null?void 0:t.target)||c;if(e!==null){const u=d=>{if(i.current=d.ctrlKey||d.metaKey||d.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&oi(d))return!1;const g=ho(d.code,a);s.current.add(d[g]),fo(o,s.current,!1)&&(d.preventDefault(),r(!0))},f=d=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&oi(d))return!1;const g=ho(d.code,a);fo(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(d[g]),d.key==="Meta"&&s.current.clear(),i.current=!1},h=()=>{s.current.clear(),r(!1)};return l==null||l.addEventListener("keydown",u),l==null||l.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{l==null||l.removeEventListener("keydown",u),l==null||l.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,r]),n};function fo(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function ho(e,t){return t.includes(e)?"code":"key"}function iu(e,t,n,r){var a,c;const i=e.parentNode||e.parentId;if(!i)return n;const s=t.get(i),o=_t(s,r);return iu(s,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((a=s[ie])==null?void 0:a.z)??0)>(n.z??0)?((c=s[ie])==null?void 0:c.z)??0:n.z??0},r)}function ou(e,t,n){e.forEach(r=>{var s;const i=r.parentNode||r.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:o,y:a,z:c}=iu(r,e,{...r.position,z:((s=r[ie])==null?void 0:s.z)??0},t);r.positionAbsolute={x:o,y:a},r[ie].z=c,n!=null&&n[r.id]&&(r[ie].isParent=!0)}})}function On(e,t,n,r){const i=new Map,s={},o=r?1e3:0;return e.forEach(a=>{var d;const c=(ge(a.zIndex)?a.zIndex:0)+(a.selected?o:0),l=t.get(a.id),u={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},f=a.parentNode||a.parentId;f&&(s[f]=!0);const h=(l==null?void 0:l.type)&&(l==null?void 0:l.type)!==a.type;Object.defineProperty(u,ie,{enumerable:!1,value:{handleBounds:h||(d=l==null?void 0:l[ie])==null?void 0:d.handleBounds,z:c}}),i.set(a.id,u)}),ou(i,n,s),i}function su(e,t={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:o,d3Zoom:a,d3Selection:c,fitViewOnInitDone:l,fitViewOnInit:u,nodeOrigin:f}=e(),h=t.initial&&!l&&u;if(a&&c&&(h||!t.initial)){const p=n().filter(y=>{var E;const v=t.includeHiddenNodes?y.width&&y.height:!y.hidden;return(E=t.nodes)!=null&&E.length?v&&t.nodes.some(k=>k.id===y.id):v}),g=p.every(y=>y.width&&y.height);if(p.length>0&&g){const y=An(p,f),{x:v,y:E,zoom:k}=Ua(y,r,i,t.minZoom??s,t.maxZoom??o,t.padding??.1),w=Ue.translate(v,E).scale(k);return typeof t.duration=="number"&&t.duration>0?a.transform(nt(c,t.duration),w):a.transform(c,w),!0}}return!1}function qp(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[ie]:r[ie],selected:n.selected})}),new Map(t)}function Vp(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Qt({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:l}=n();e!=null&&e.length&&(c&&r({nodeInternals:qp(e,i)}),o==null||o(e)),t!=null&&t.length&&(l&&r({edges:Vp(t,s)}),a==null||a(t))}const mt=()=>{},Bp={zoomIn:mt,zoomOut:mt,zoomTo:mt,getZoom:()=>1,setViewport:mt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:mt,fitBounds:mt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Hp=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Gp=()=>{const e=se(),{d3Zoom:t,d3Selection:n}=ne(Hp,ue);return S.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(nt(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(nt(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>t.scaleTo(nt(n,s==null?void 0:s.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,s)=>{const[o,a,c]=e.getState().transform,l=Ue.translate(i.x??o,i.y??a).scale(i.zoom??c);t.transform(nt(n,s==null?void 0:s.duration),l)},getViewport:()=>{const[i,s,o]=e.getState().transform;return{x:i,y:s,zoom:o}},fitView:i=>su(e.getState,i),setCenter:(i,s,o)=>{const{width:a,height:c,maxZoom:l}=e.getState(),u=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:l,f=a/2-i*u,h=c/2-s*u,d=Ue.translate(f,h).scale(u);t.transform(nt(n,o==null?void 0:o.duration),d)},fitBounds:(i,s)=>{const{width:o,height:a,minZoom:c,maxZoom:l}=e.getState(),{x:u,y:f,zoom:h}=Ua(i,o,a,c,l,(s==null?void 0:s.padding)??.1),d=Ue.translate(u,f).scale(h);t.transform(nt(n,s==null?void 0:s.duration),d)},project:i=>{const{transform:s,snapToGrid:o,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ui(i,s,o,a)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:o,snapGrid:a,domNode:c}=e.getState();if(!c)return i;const{x:l,y:u}=c.getBoundingClientRect(),f={x:i.x-l,y:i.y-u};return ui(f,s,o,a)},flowToScreenPosition:i=>{const{transform:s,domNode:o}=e.getState();if(!o)return i;const{x:a,y:c}=o.getBoundingClientRect(),l=Ba(i,s);return{x:l.x+a,y:l.y+c}},viewportInitialized:!0}:Bp,[t,n])};function Li(){const e=Gp(),t=se(),n=S.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),r=S.useCallback(g=>t.getState().nodeInternals.get(g),[]),i=S.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(y=>({...y}))},[]),s=S.useCallback(g=>{const{edges:y=[]}=t.getState();return y.find(v=>v.id===g)},[]),o=S.useCallback(g=>{const{getNodes:y,setNodes:v,hasDefaultNodes:E,onNodesChange:k}=t.getState(),w=y(),I=typeof g=="function"?g(w):g;if(E)v(I);else if(k){const T=I.length===0?w.map(z=>({type:"remove",id:z.id})):I.map(z=>({item:z,type:"reset"}));k(T)}},[]),a=S.useCallback(g=>{const{edges:y=[],setEdges:v,hasDefaultEdges:E,onEdgesChange:k}=t.getState(),w=typeof g=="function"?g(y):g;if(E)v(w);else if(k){const I=w.length===0?y.map(T=>({type:"remove",id:T.id})):w.map(T=>({item:T,type:"reset"}));k(I)}},[]),c=S.useCallback(g=>{const y=Array.isArray(g)?g:[g],{getNodes:v,setNodes:E,hasDefaultNodes:k,onNodesChange:w}=t.getState();if(k){const T=[...v(),...y];E(T)}else if(w){const I=y.map(T=>({item:T,type:"add"}));w(I)}},[]),l=S.useCallback(g=>{const y=Array.isArray(g)?g:[g],{edges:v=[],setEdges:E,hasDefaultEdges:k,onEdgesChange:w}=t.getState();if(k)E([...v,...y]);else if(w){const I=y.map(T=>({item:T,type:"add"}));w(I)}},[]),u=S.useCallback(()=>{const{getNodes:g,edges:y=[],transform:v}=t.getState(),[E,k,w]=v;return{nodes:g().map(I=>({...I})),edges:y.map(I=>({...I})),viewport:{x:E,y:k,zoom:w}}},[]),f=S.useCallback(({nodes:g,edges:y})=>{const{nodeInternals:v,getNodes:E,edges:k,hasDefaultNodes:w,hasDefaultEdges:I,onNodesDelete:T,onEdgesDelete:z,onNodesChange:M,onEdgesChange:R}=t.getState(),D=(g||[]).map(x=>x.id),L=(y||[]).map(x=>x.id),q=E().reduce((x,b)=>{const A=b.parentNode||b.parentId,$=!D.includes(b.id)&&A&&x.find(C=>C.id===A);return(typeof b.deletable=="boolean"?b.deletable:!0)&&(D.includes(b.id)||$)&&x.push(b),x},[]),F=k.filter(x=>typeof x.deletable=="boolean"?x.deletable:!0),m=F.filter(x=>L.includes(x.id));if(q||m){const x=Ga(q,F),b=[...m,...x],A=b.reduce(($,_)=>($.includes(_.id)||$.push(_.id),$),[]);if((I||w)&&(I&&t.setState({edges:k.filter($=>!A.includes($.id))}),w&&(q.forEach($=>{v.delete($.id)}),t.setState({nodeInternals:new Map(v)}))),A.length>0&&(z==null||z(b),R&&R(A.map($=>({id:$,type:"remove"})))),q.length>0&&(T==null||T(q),M)){const $=q.map(_=>({id:_.id,type:"remove"}));M($)}}},[]),h=S.useCallback(g=>{const y=lp(g),v=y?null:t.getState().nodeInternals.get(g.id);return!y&&!v?[null,null,y]:[y?g:ro(v),v,y]},[]),d=S.useCallback((g,y=!0,v)=>{const[E,k,w]=h(g);return E?(v||t.getState().getNodes()).filter(I=>{if(!w&&(I.id===k.id||!I.positionAbsolute))return!1;const T=ro(I),z=ii(T,E);return y&&z>0||z>=E.width*E.height}):[]},[]),p=S.useCallback((g,y,v=!0)=>{const[E]=h(g);if(!E)return!1;const k=ii(E,y);return v&&k>0||k>=E.width*E.height},[]);return S.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:o,setEdges:a,addNodes:c,addEdges:l,toObject:u,deleteElements:f,getIntersectingNodes:d,isNodeIntersecting:p}),[e,n,r,i,s,o,a,c,l,u,f,d,p])}const Up={actInsideInputWithModifier:!1};var Yp=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=se(),{deleteElements:r}=Li(),i=Ut(e,Up),s=Ut(t);S.useEffect(()=>{if(i){const{edges:o,getNodes:a}=n.getState(),c=a().filter(u=>u.selected),l=o.filter(u=>u.selected);r({nodes:c,edges:l}),n.setState({nodesSelectionActive:!1})}},[i]),S.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function Wp(e){const t=se();S.useEffect(()=>{let n;const r=()=>{var s,o;if(!e.current)return;const i=Ai(e.current);(i.height===0||i.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",Oe.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const zi={position:"absolute",width:"100%",height:"100%",top:0,left:0},Xp=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Jt=e=>({x:e.x,y:e.y,zoom:e.k}),gt=(e,t)=>e.target.closest(`.${t}`),po=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),mo=e=>{const t=e.ctrlKey&&fn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Zp=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Kp=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=rt.Free,zoomOnDoubleClick:l=!0,elementsSelectable:u,panOnDrag:f=!0,defaultViewport:h,translateExtent:d,minZoom:p,maxZoom:g,zoomActivationKeyCode:y,preventScrolling:v=!0,children:E,noWheelClassName:k,noPanClassName:w})=>{const I=S.useRef(),T=se(),z=S.useRef(!1),M=S.useRef(!1),R=S.useRef(null),D=S.useRef({x:0,y:0,zoom:0}),{d3Zoom:L,d3Selection:q,d3ZoomHandler:F,userSelectionActive:m}=ne(Zp,ue),x=Ut(y),b=S.useRef(0),A=S.useRef(!1),$=S.useRef();return Wp(R),S.useEffect(()=>{if(R.current){const _=R.current.getBoundingClientRect(),C=ip().scaleExtent([p,g]).translateExtent(d),P=be(R.current).call(C),O=Ue.translate(h.x,h.y).scale(Nt(h.zoom,p,g)),B=[[0,0],[_.width,_.height]],V=C.constrain()(O,B,d);C.transform(P,V),C.wheelDelta(mo),T.setState({d3Zoom:C,d3Selection:P,d3ZoomHandler:P.on("wheel.zoom"),transform:[V.x,V.y,V.k],domNode:R.current.closest(".react-flow")})}},[]),S.useEffect(()=>{q&&L&&(o&&!x&&!m?q.on("wheel.zoom",_=>{if(gt(_,k))return!1;_.preventDefault(),_.stopImmediatePropagation();const C=q.property("__zoom").k||1;if(_.ctrlKey&&s){const Q=Ce(_),re=mo(_),J=C*Math.pow(2,re);L.scaleTo(q,J,Q,_);return}const P=_.deltaMode===1?20:1;let O=c===rt.Vertical?0:_.deltaX*P,B=c===rt.Horizontal?0:_.deltaY*P;!fn()&&_.shiftKey&&c!==rt.Vertical&&(O=_.deltaY*P,B=0),L.translateBy(q,-(O/C)*a,-(B/C)*a,{internal:!0});const V=Jt(q.property("__zoom")),{onViewportChangeStart:U,onViewportChange:Z,onViewportChangeEnd:K}=T.getState();clearTimeout($.current),A.current||(A.current=!0,t==null||t(_,V),U==null||U(V)),A.current&&(e==null||e(_,V),Z==null||Z(V),$.current=setTimeout(()=>{n==null||n(_,V),K==null||K(V),A.current=!1},150))},{passive:!1}):typeof F<"u"&&q.on("wheel.zoom",function(_,C){if(!v&&_.type==="wheel"&&!_.ctrlKey||gt(_,k))return null;_.preventDefault(),F.call(this,_,C)},{passive:!1}))},[m,o,c,q,L,F,x,s,v,k,t,e,n]),S.useEffect(()=>{L&&L.on("start",_=>{var O,B;if(!_.sourceEvent||_.sourceEvent.internal)return null;b.current=(O=_.sourceEvent)==null?void 0:O.button;const{onViewportChangeStart:C}=T.getState(),P=Jt(_.transform);z.current=!0,D.current=P,((B=_.sourceEvent)==null?void 0:B.type)==="mousedown"&&T.setState({paneDragging:!0}),C==null||C(P),t==null||t(_.sourceEvent,P)})},[L,t]),S.useEffect(()=>{L&&(m&&!z.current?L.on("zoom",null):m||L.on("zoom",_=>{var P;const{onViewportChange:C}=T.getState();if(T.setState({transform:[_.transform.x,_.transform.y,_.transform.k]}),M.current=!!(r&&po(f,b.current??0)),(e||C)&&!((P=_.sourceEvent)!=null&&P.internal)){const O=Jt(_.transform);C==null||C(O),e==null||e(_.sourceEvent,O)}}))},[m,L,e,f,r]),S.useEffect(()=>{L&&L.on("end",_=>{if(!_.sourceEvent||_.sourceEvent.internal)return null;const{onViewportChangeEnd:C}=T.getState();if(z.current=!1,T.setState({paneDragging:!1}),r&&po(f,b.current??0)&&!M.current&&r(_.sourceEvent),M.current=!1,(n||C)&&Xp(D.current,_.transform)){const P=Jt(_.transform);D.current=P,clearTimeout(I.current),I.current=setTimeout(()=>{C==null||C(P),n==null||n(_.sourceEvent,P)},o?150:0)}})},[L,o,f,n,r]),S.useEffect(()=>{L&&L.filter(_=>{const C=x||i,P=s&&_.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&_.button===1&&_.type==="mousedown"&&(gt(_,"react-flow__node")||gt(_,"react-flow__edge")))return!0;if(!f&&!C&&!o&&!l&&!s||m||!l&&_.type==="dblclick"||gt(_,k)&&_.type==="wheel"||gt(_,w)&&(_.type!=="wheel"||o&&_.type==="wheel"&&!x)||!s&&_.ctrlKey&&_.type==="wheel"||!C&&!o&&!P&&_.type==="wheel"||!f&&(_.type==="mousedown"||_.type==="touchstart")||Array.isArray(f)&&!f.includes(_.button)&&_.type==="mousedown")return!1;const O=Array.isArray(f)&&f.includes(_.button)||!_.button||_.button<=1;return(!_.ctrlKey||_.type==="wheel")&&O})},[m,L,i,s,o,l,f,u,x]),N.createElement("div",{className:"react-flow__renderer",ref:R,style:zi},E)},jp=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Qp(){const{userSelectionActive:e,userSelectionRect:t}=ne(jp,ue);return e&&t?N.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function go(e,t){const n=t.parentNode||t.parentId,r=e.find(i=>i.id===n);if(r){const i=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(i>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),s>0&&(r.style.height+=s),t.position.x<0){const o=Math.abs(t.position.x);r.position.x=r.position.x-o,r.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);r.position.y=r.position.y-o,r.style.height+=o,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function au(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const s=e.filter(a=>a.id===i.id);if(s.length===0)return r.push(i),r;const o={...i};for(const a of s)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&go(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&go(r,o);break}case"remove":return r}return r.push(o),r},n)}function uu(e,t){return au(e,t)}function Jp(e,t){return au(e,t)}const Be=(e,t)=>({id:e,type:"select",selected:t});function yt(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Be(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Be(r.id,!1))),n},[])}const Fn=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},em=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),cu=S.memo(({isSelecting:e,selectionMode:t=Gt.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:l,onPaneMouseLeave:u,children:f})=>{const h=S.useRef(null),d=se(),p=S.useRef(0),g=S.useRef(0),y=S.useRef(),{userSelectionActive:v,elementsSelectable:E,dragging:k}=ne(em,ue),w=()=>{d.setState({userSelectionActive:!1,userSelectionRect:null}),p.current=0,g.current=0},I=F=>{s==null||s(F),d.getState().resetSelectedElements(),d.setState({nodesSelectionActive:!1})},T=F=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){F.preventDefault();return}o==null||o(F)},z=a?F=>a(F):void 0,M=F=>{const{resetSelectedElements:m,domNode:x}=d.getState();if(y.current=x==null?void 0:x.getBoundingClientRect(),!E||!e||F.button!==0||F.target!==h.current||!y.current)return;const{x:b,y:A}=Ye(F,y.current);m(),d.setState({userSelectionRect:{width:0,height:0,startX:b,startY:A,x:b,y:A}}),r==null||r(F)},R=F=>{const{userSelectionRect:m,nodeInternals:x,edges:b,transform:A,onNodesChange:$,onEdgesChange:_,nodeOrigin:C,getNodes:P}=d.getState();if(!e||!y.current||!m)return;d.setState({userSelectionActive:!0,nodesSelectionActive:!1});const O=Ye(F,y.current),B=m.startX??0,V=m.startY??0,U={...m,x:O.x<B?O.x:B,y:O.y<V?O.y:V,width:Math.abs(O.x-B),height:Math.abs(O.y-V)},Z=P(),K=Ha(x,U,A,t===Gt.Partial,!0,C),Q=Ga(K,b).map(J=>J.id),re=K.map(J=>J.id);if(p.current!==re.length){p.current=re.length;const J=yt(Z,re);J.length&&($==null||$(J))}if(g.current!==Q.length){g.current=Q.length;const J=yt(b,Q);J.length&&(_==null||_(J))}d.setState({userSelectionRect:U})},D=F=>{if(F.button!==0)return;const{userSelectionRect:m}=d.getState();!v&&m&&F.target===h.current&&(I==null||I(F)),d.setState({nodesSelectionActive:p.current>0}),w(),i==null||i(F)},L=F=>{v&&(d.setState({nodesSelectionActive:p.current>0}),i==null||i(F)),w()},q=E&&(e||v);return N.createElement("div",{className:ce(["react-flow__pane",{dragging:k,selection:e}]),onClick:q?void 0:Fn(I,h),onContextMenu:Fn(T,h),onWheel:Fn(z,h),onMouseEnter:q?void 0:c,onMouseDown:q?M:void 0,onMouseMove:q?R:l,onMouseUp:q?D:void 0,onMouseLeave:q?L:u,ref:h,style:zi},f,N.createElement(Qp,null))});cu.displayName="Pane";function lu(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:lu(r,t):!1}function vo(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function tm(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!lu(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var s,o;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((o=i.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function nm(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function fu(e,t,n,r,i=[0,0],s){const o=nm(e,e.extent||r);let a=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:h,y:d}=_t(f,i).positionAbsolute;a=f&&ge(h)&&ge(d)&&ge(f.width)&&ge(f.height)?[[h+e.width*i[0],d+e.height*i[1]],[h+f.width-e.width+e.width*i[0],d+f.height-e.height+e.height*i[1]]]:a}else s==null||s("005",Oe.error005()),a=o;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:h,y:d}=_t(f,i).positionAbsolute;a=[[e.extent[0][0]+h,e.extent[0][1]+d],[e.extent[1][0]+h,e.extent[1][1]+d]]}let l={x:0,y:0};if(c){const f=n.get(c);l=_t(f,i).positionAbsolute}const u=a&&a!=="parent"?Ii(t,a):t;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function qn({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const yo=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const s=Array.from(i),o=t.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return s.map(c=>{const l=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(l.left-o.left-a.x)/n,y:(l.top-o.top-a.y)/n,...Ai(c)}})};function $t(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function li({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:a,onError:c}=t.getState(),l=a.get(e);if(!l){c==null||c("012",Oe.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&o)&&(s({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):i([e])}function rm(){const e=se();return S.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(c.x/i[0]):c.x,ySnapped:s?i[1]*Math.round(c.y/i[1]):c.y,...c}},[])}function Vn(e){return(t,n,r)=>e==null?void 0:e(t,r)}function du({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:o}){const a=se(),[c,l]=S.useState(!1),u=S.useRef([]),f=S.useRef({x:null,y:null}),h=S.useRef(0),d=S.useRef(null),p=S.useRef({x:0,y:0}),g=S.useRef(null),y=S.useRef(!1),v=S.useRef(!1),E=S.useRef(!1),k=rm();return S.useEffect(()=>{if(e!=null&&e.current){const w=be(e.current),I=({x:M,y:R})=>{const{nodeInternals:D,onNodeDrag:L,onSelectionDrag:q,updateNodePositions:F,nodeExtent:m,snapGrid:x,snapToGrid:b,nodeOrigin:A,onError:$}=a.getState();f.current={x:M,y:R};let _=!1,C={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&m){const O=An(u.current,A);C=Ht(O)}if(u.current=u.current.map(O=>{const B={x:M-O.distance.x,y:R-O.distance.y};b&&(B.x=x[0]*Math.round(B.x/x[0]),B.y=x[1]*Math.round(B.y/x[1]));const V=[[m[0][0],m[0][1]],[m[1][0],m[1][1]]];u.current.length>1&&m&&!O.extent&&(V[0][0]=O.positionAbsolute.x-C.x+m[0][0],V[1][0]=O.positionAbsolute.x+(O.width??0)-C.x2+m[1][0],V[0][1]=O.positionAbsolute.y-C.y+m[0][1],V[1][1]=O.positionAbsolute.y+(O.height??0)-C.y2+m[1][1]);const U=fu(O,B,D,V,A,$);return _=_||O.position.x!==U.position.x||O.position.y!==U.position.y,O.position=U.position,O.positionAbsolute=U.positionAbsolute,O}),!_)return;F(u.current,!0,!0),l(!0);const P=i?L:Vn(q);if(P&&g.current){const[O,B]=qn({nodeId:i,dragItems:u.current,nodeInternals:D});P(g.current,O,B)}},T=()=>{if(!d.current)return;const[M,R]=Ma(p.current,d.current);if(M!==0||R!==0){const{transform:D,panBy:L}=a.getState();f.current.x=(f.current.x??0)-M/D[2],f.current.y=(f.current.y??0)-R/D[2],L({x:M,y:R})&&I(f.current)}h.current=requestAnimationFrame(T)},z=M=>{var A;const{nodeInternals:R,multiSelectionActive:D,nodesDraggable:L,unselectNodesAndEdges:q,onNodeDragStart:F,onSelectionDragStart:m}=a.getState();v.current=!0;const x=i?F:Vn(m);(!o||!s)&&!D&&i&&((A=R.get(i))!=null&&A.selected||q()),i&&s&&o&&li({id:i,store:a,nodeRef:e});const b=k(M);if(f.current=b,u.current=tm(R,L,b,i),x&&u.current){const[$,_]=qn({nodeId:i,dragItems:u.current,nodeInternals:R});x(M.sourceEvent,$,_)}};if(t)w.on(".drag",null);else{const M=qd().on("start",R=>{const{domNode:D,nodeDragThreshold:L}=a.getState();L===0&&z(R),E.current=!1;const q=k(R);f.current=q,d.current=(D==null?void 0:D.getBoundingClientRect())||null,p.current=Ye(R.sourceEvent,d.current)}).on("drag",R=>{var F,m;const D=k(R),{autoPanOnNodeDrag:L,nodeDragThreshold:q}=a.getState();if(R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1&&(E.current=!0),!E.current){if(!y.current&&v.current&&L&&(y.current=!0,T()),!v.current){const x=D.xSnapped-(((F=f==null?void 0:f.current)==null?void 0:F.x)??0),b=D.ySnapped-(((m=f==null?void 0:f.current)==null?void 0:m.y)??0);Math.sqrt(x*x+b*b)>q&&z(R)}(f.current.x!==D.xSnapped||f.current.y!==D.ySnapped)&&u.current&&v.current&&(g.current=R.sourceEvent,p.current=Ye(R.sourceEvent,d.current),I(D))}}).on("end",R=>{if(!(!v.current||E.current)&&(l(!1),y.current=!1,v.current=!1,cancelAnimationFrame(h.current),u.current)){const{updateNodePositions:D,nodeInternals:L,onNodeDragStop:q,onSelectionDragStop:F}=a.getState(),m=i?q:Vn(F);if(D(u.current,!1,!1),m){const[x,b]=qn({nodeId:i,dragItems:u.current,nodeInternals:L});m(R.sourceEvent,x,b)}}}).filter(R=>{const D=R.target;return!R.button&&(!n||!vo(D,`.${n}`,e))&&(!r||vo(D,r,e))});return w.call(M),()=>{w.on(".drag",null)}}}},[e,t,n,r,s,a,i,o,k]),c}function hu(){const e=se();return S.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:o,snapToGrid:a,snapGrid:c,onError:l,nodesDraggable:u}=e.getState(),f=o().filter(E=>E.selected&&(E.draggable||u&&typeof E.draggable>"u")),h=a?c[0]:5,d=a?c[1]:5,p=n.isShiftPressed?4:1,g=n.x*h*p,y=n.y*d*p,v=f.map(E=>{if(E.positionAbsolute){const k={x:E.positionAbsolute.x+g,y:E.positionAbsolute.y+y};a&&(k.x=c[0]*Math.round(k.x/c[0]),k.y=c[1]*Math.round(k.y/c[1]));const{positionAbsolute:w,position:I}=fu(E,k,r,i,void 0,l);E.position=I,E.positionAbsolute=w}return E});s(v,!0,!1)},[])}const bt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Pt=e=>{const t=({id:n,type:r,data:i,xPos:s,yPos:o,xPosOrigin:a,yPosOrigin:c,selected:l,onClick:u,onMouseEnter:f,onMouseMove:h,onMouseLeave:d,onContextMenu:p,onDoubleClick:g,style:y,className:v,isDraggable:E,isSelectable:k,isConnectable:w,isFocusable:I,selectNodesOnDrag:T,sourcePosition:z,targetPosition:M,hidden:R,resizeObserver:D,dragHandle:L,zIndex:q,isParent:F,noDragClassName:m,noPanClassName:x,initialized:b,disableKeyboardA11y:A,ariaLabel:$,rfId:_,hasHandleBounds:C})=>{const P=se(),O=S.useRef(null),B=S.useRef(null),V=S.useRef(z),U=S.useRef(M),Z=S.useRef(r),K=k||E||u||f||h||d,Q=hu(),re=$t(n,P.getState,f),J=$t(n,P.getState,h),ye=$t(n,P.getState,d),pe=$t(n,P.getState,p),we=$t(n,P.getState,g),me=ee=>{const{nodeDragThreshold:G}=P.getState();if(k&&(!T||!E||G>0)&&li({id:n,store:P,nodeRef:O}),u){const fe=P.getState().nodeInternals.get(n);fe&&u(ee,{...fe})}},oe=ee=>{if(!oi(ee)&&!A)if(La.includes(ee.key)&&k){const G=ee.key==="Escape";li({id:n,store:P,unselect:G,nodeRef:O})}else E&&l&&Object.prototype.hasOwnProperty.call(bt,ee.key)&&(P.setState({ariaLiveMessage:`Moved selected node ${ee.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),Q({x:bt[ee.key].x,y:bt[ee.key].y,isShiftPressed:ee.shiftKey}))};S.useEffect(()=>()=>{B.current&&(D==null||D.unobserve(B.current),B.current=null)},[]),S.useEffect(()=>{if(O.current&&!R){const ee=O.current;(!b||!C||B.current!==ee)&&(B.current&&(D==null||D.unobserve(B.current)),D==null||D.observe(ee),B.current=ee)}},[R,b,C]),S.useEffect(()=>{const ee=Z.current!==r,G=V.current!==z,fe=U.current!==M;O.current&&(ee||G||fe)&&(ee&&(Z.current=r),G&&(V.current=z),fe&&(U.current=M),P.getState().updateNodeDimensions([{id:n,nodeElement:O.current,forceUpdate:!0}]))},[n,r,z,M]);const Ne=du({nodeRef:O,disabled:R||!E,noDragClassName:m,handleSelector:L,nodeId:n,isSelectable:k,selectNodesOnDrag:T});return R?null:N.createElement("div",{className:ce(["react-flow__node",`react-flow__node-${r}`,{[x]:E},v,{selected:l,selectable:k,parent:F,dragging:Ne}]),ref:O,style:{zIndex:q,transform:`translate(${a}px,${c}px)`,pointerEvents:K?"all":"none",visibility:b?"visible":"hidden",...y},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:re,onMouseMove:J,onMouseLeave:ye,onContextMenu:pe,onClick:me,onDoubleClick:we,onKeyDown:I?oe:void 0,tabIndex:I?0:void 0,role:I?"button":void 0,"aria-describedby":A?void 0:`${nu}-${_}`,"aria-label":$},N.createElement(vp,{value:n},N.createElement(e,{id:n,data:i,type:r,xPos:s,yPos:o,selected:l,isConnectable:w,sourcePosition:z,targetPosition:M,dragging:Ne,dragHandle:L,zIndex:q})))};return t.displayName="NodeWrapper",S.memo(t)};const im=e=>{const t=e.getNodes().filter(n=>n.selected);return{...An(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function om({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=se(),{width:i,height:s,x:o,y:a,transformString:c,userSelectionActive:l}=ne(im,ue),u=hu(),f=S.useRef(null);if(S.useEffect(()=>{var p;n||(p=f.current)==null||p.focus({preventScroll:!0})},[n]),du({nodeRef:f}),l||!i||!s)return null;const h=e?p=>{const g=r.getState().getNodes().filter(y=>y.selected);e(p,g)}:void 0,d=p=>{Object.prototype.hasOwnProperty.call(bt,p.key)&&u({x:bt[p.key].x,y:bt[p.key].y,isShiftPressed:p.shiftKey})};return N.createElement("div",{className:ce(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},N.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:i,height:s,top:a,left:o}}))}var sm=S.memo(om);const am=e=>e.nodesSelectionActive,pu=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:a,onMove:c,onMoveStart:l,onMoveEnd:u,selectionKeyCode:f,selectionOnDrag:h,selectionMode:d,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:y,panActivationKeyCode:v,zoomActivationKeyCode:E,elementsSelectable:k,zoomOnScroll:w,zoomOnPinch:I,panOnScroll:T,panOnScrollSpeed:z,panOnScrollMode:M,zoomOnDoubleClick:R,panOnDrag:D,defaultViewport:L,translateExtent:q,minZoom:F,maxZoom:m,preventScrolling:x,onSelectionContextMenu:b,noWheelClassName:A,noPanClassName:$,disableKeyboardA11y:_})=>{const C=ne(am),P=Ut(f),O=Ut(v),B=O||D,V=O||T,U=P||h&&B!==!0;return Yp({deleteKeyCode:a,multiSelectionKeyCode:y}),N.createElement(Kp,{onMove:c,onMoveStart:l,onMoveEnd:u,onPaneContextMenu:s,elementsSelectable:k,zoomOnScroll:w,zoomOnPinch:I,panOnScroll:V,panOnScrollSpeed:z,panOnScrollMode:M,zoomOnDoubleClick:R,panOnDrag:!P&&B,defaultViewport:L,translateExtent:q,minZoom:F,maxZoom:m,zoomActivationKeyCode:E,preventScrolling:x,noWheelClassName:A,noPanClassName:$},N.createElement(cu,{onSelectionStart:p,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:B,isSelecting:!!U,selectionMode:d},e,C&&N.createElement(sm,{onSelectionContextMenu:b,noPanClassName:$,disableKeyboardA11y:_})))};pu.displayName="FlowRenderer";var um=S.memo(pu);function cm(e){return ne(S.useCallback(n=>e?Ha(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function lm(e){const t={input:Pt(e.input||Qa),default:Pt(e.default||ci),output:Pt(e.output||eu),group:Pt(e.group||Di)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=Pt(e[s]||ci),i),n);return{...t,...r}}const fm=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},dm=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),mu=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:o}=ne(dm,ue),a=cm(e.onlyRenderVisibleElements),c=S.useRef(),l=S.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const u=new ResizeObserver(f=>{const h=f.map(d=>({id:d.target.getAttribute("data-id"),nodeElement:d.target,forceUpdate:!0}));s(h)});return c.current=u,u},[]);return S.useEffect(()=>()=>{var u;(u=c==null?void 0:c.current)==null||u.disconnect()},[]),N.createElement("div",{className:"react-flow__nodes",style:zi},a.map(u=>{var I,T,z;let f=u.type||"default";e.nodeTypes[f]||(o==null||o("003",Oe.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,d=!!(u.draggable||t&&typeof u.draggable>"u"),p=!!(u.selectable||i&&typeof u.selectable>"u"),g=!!(u.connectable||n&&typeof u.connectable>"u"),y=!!(u.focusable||r&&typeof u.focusable>"u"),v=e.nodeExtent?Ii(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,E=(v==null?void 0:v.x)??0,k=(v==null?void 0:v.y)??0,w=fm({x:E,y:k,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return N.createElement(h,{key:u.id,id:u.id,className:u.className,style:u.style,type:f,data:u.data,sourcePosition:u.sourcePosition||H.Bottom,targetPosition:u.targetPosition||H.Top,hidden:u.hidden,xPos:E,yPos:k,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:d,isSelectable:p,isConnectable:g,isFocusable:y,resizeObserver:l,dragHandle:u.dragHandle,zIndex:((I=u[ie])==null?void 0:I.z)??0,isParent:!!((T=u[ie])!=null&&T.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!((z=u[ie])!=null&&z.handleBounds)})}))};mu.displayName="NodeRenderer";var hm=S.memo(mu);const pm=(e,t,n)=>n===H.Left?e-t:n===H.Right?e+t:e,mm=(e,t,n)=>n===H.Top?e-t:n===H.Bottom?e+t:e,wo="react-flow__edgeupdater",_o=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a})=>N.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:ce([wo,`${wo}-${a}`]),cx:pm(t,r,e),cy:mm(n,r,e),r,stroke:"transparent",fill:"transparent"}),gm=()=>!0;var vt=e=>{const t=({id:n,className:r,type:i,data:s,onClick:o,onEdgeDoubleClick:a,selected:c,animated:l,label:u,labelStyle:f,labelShowBg:h,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:g,style:y,source:v,target:E,sourceX:k,sourceY:w,targetX:I,targetY:T,sourcePosition:z,targetPosition:M,elementsSelectable:R,hidden:D,sourceHandleId:L,targetHandleId:q,onContextMenu:F,onMouseEnter:m,onMouseMove:x,onMouseLeave:b,reconnectRadius:A,onReconnect:$,onReconnectStart:_,onReconnectEnd:C,markerEnd:P,markerStart:O,rfId:B,ariaLabel:V,isFocusable:U,isReconnectable:Z,pathOptions:K,interactionWidth:Q,disableKeyboardA11y:re})=>{const J=S.useRef(null),[ye,pe]=S.useState(!1),[we,me]=S.useState(!1),oe=se(),Ne=S.useMemo(()=>`url('#${ai(O,B)}')`,[O,B]),ee=S.useMemo(()=>`url('#${ai(P,B)}')`,[P,B]);if(D)return null;const G=ae=>{var ke;const{edges:_e,addSelectedEdges:Qe,unselectNodesAndEdges:Je,multiSelectionActive:et}=oe.getState(),Te=_e.find(At=>At.id===n);Te&&(R&&(oe.setState({nodesSelectionActive:!1}),Te.selected&&et?(Je({nodes:[],edges:[Te]}),(ke=J.current)==null||ke.blur()):Qe([n])),o&&o(ae,Te))},fe=Mt(n,oe.getState,a),Ze=Mt(n,oe.getState,F),kt=Mt(n,oe.getState,m),ct=Mt(n,oe.getState,x),lt=Mt(n,oe.getState,b),Re=(ae,_e)=>{if(ae.button!==0)return;const{edges:Qe,isValidConnection:Je}=oe.getState(),et=_e?E:v,Te=(_e?q:L)||null,ke=_e?"target":"source",At=Je||gm,Tn=_e,It=Qe.find(tt=>tt.id===n);me(!0),_==null||_(ae,It,ke);const Mn=tt=>{me(!1),C==null||C(tt,It,ke)};Xa({event:ae,handleId:Te,nodeId:et,onConnect:tt=>$==null?void 0:$(It,tt),isTarget:Tn,getState:oe.getState,setState:oe.setState,isValidConnection:At,edgeUpdaterType:ke,onReconnectEnd:Mn})},ft=ae=>Re(ae,!0),Ke=ae=>Re(ae,!1),je=()=>pe(!0),dt=()=>pe(!1),ht=!R&&!o,Ct=ae=>{var _e;if(!re&&La.includes(ae.key)&&R){const{unselectNodesAndEdges:Qe,addSelectedEdges:Je,edges:et}=oe.getState();ae.key==="Escape"?((_e=J.current)==null||_e.blur(),Qe({edges:[et.find(ke=>ke.id===n)]})):Je([n])}};return N.createElement("g",{className:ce(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:c,animated:l,inactive:ht,updating:ye}]),onClick:G,onDoubleClick:fe,onContextMenu:Ze,onMouseEnter:kt,onMouseMove:ct,onMouseLeave:lt,onKeyDown:U?Ct:void 0,tabIndex:U?0:void 0,role:U?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":V===null?void 0:V||`Edge from ${v} to ${E}`,"aria-describedby":U?`${ru}-${B}`:void 0,ref:J},!we&&N.createElement(e,{id:n,source:v,target:E,selected:c,animated:l,label:u,labelStyle:f,labelShowBg:h,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:g,data:s,style:y,sourceX:k,sourceY:w,targetX:I,targetY:T,sourcePosition:z,targetPosition:M,sourceHandleId:L,targetHandleId:q,markerStart:Ne,markerEnd:ee,pathOptions:K,interactionWidth:Q}),Z&&N.createElement(N.Fragment,null,(Z==="source"||Z===!0)&&N.createElement(_o,{position:z,centerX:k,centerY:w,radius:A,onMouseDown:ft,onMouseEnter:je,onMouseOut:dt,type:"source"}),(Z==="target"||Z===!0)&&N.createElement(_o,{position:M,centerX:I,centerY:T,radius:A,onMouseDown:Ke,onMouseEnter:je,onMouseOut:dt,type:"target"})))};return t.displayName="EdgeWrapper",S.memo(t)};function vm(e){const t={default:vt(e.default||hn),straight:vt(e.bezier||Mi),step:vt(e.step||Ti),smoothstep:vt(e.step||Cn),simplebezier:vt(e.simplebezier||Ri)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=vt(e[s]||hn),i),n);return{...t,...r}}function bo(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case H.Top:return{x:r+s/2,y:i};case H.Right:return{x:r+s,y:i+o/2};case H.Bottom:return{x:r+s/2,y:i+o};case H.Left:return{x:r,y:i+o/2}}}function Eo(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const ym=(e,t,n,r,i,s)=>{const o=bo(n,e,t),a=bo(s,r,i);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function wm({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:o,height:a,transform:c}){const l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+s)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const u=Ht({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:a/c[2]}),f=Math.max(0,Math.min(u.x2,l.x2)-Math.max(u.x,l.x)),h=Math.max(0,Math.min(u.y2,l.y2)-Math.max(u.y,l.y));return Math.ceil(f*h)>0}function xo(e){var r,i,s,o,a;const t=((r=e==null?void 0:e[ie])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const _m=[{level:0,isMaxLevel:!0,edges:[]}];function bm(e,t,n=!1){let r=-1;const i=e.reduce((o,a)=>{var u,f;const c=ge(a.zIndex);let l=c?a.zIndex:0;if(n){const h=t.get(a.target),d=t.get(a.source),p=a.selected||(h==null?void 0:h.selected)||(d==null?void 0:d.selected),g=Math.max(((u=d==null?void 0:d[ie])==null?void 0:u.z)||0,((f=h==null?void 0:h[ie])==null?void 0:f.z)||0,1e3);l=(c?a.zIndex:0)+(p?g:0)}return o[l]?o[l].push(a):o[l]=[a],r=l>r?l:r,o},{}),s=Object.entries(i).map(([o,a])=>{const c=+o;return{edges:a,level:c,isMaxLevel:c===r}});return s.length===0?_m:s}function Em(e,t,n){const r=ne(S.useCallback(i=>e?i.edges.filter(s=>{const o=t.get(s.source),a=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&wm({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return bm(r,t,n)}const xm=({color:e="none",strokeWidth:t=1})=>N.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Sm=({color:e="none",strokeWidth:t=1})=>N.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),So={[dn.Arrow]:xm,[dn.ArrowClosed]:Sm};function Nm(e){const t=se();return S.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(So,e)?So[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",Oe.error009(e)),null)},[e])}const km=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const c=Nm(t);return c?N.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},N.createElement(c,{color:n,strokeWidth:o})):null},Cm=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=ai(o,t);r.includes(a)||(i.push({id:a,color:o.color||e,...o}),r.push(a))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},gu=({defaultColor:e,rfId:t})=>{const n=ne(S.useCallback(Cm({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((s,o)=>s.id!==i[o].id)));return N.createElement("defs",null,n.map(r=>N.createElement(km,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};gu.displayName="MarkerDefinitions";var Am=S.memo(gu);const Im=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),vu=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:d,onReconnectEnd:p,reconnectRadius:g,children:y,disableKeyboardA11y:v})=>{const{edgesFocusable:E,edgesUpdatable:k,elementsSelectable:w,width:I,height:T,connectionMode:z,nodeInternals:M,onError:R}=ne(Im,ue),D=Em(t,M,n);return I?N.createElement(N.Fragment,null,D.map(({level:L,edges:q,isMaxLevel:F})=>N.createElement("svg",{key:L,style:{zIndex:L},width:I,height:T,className:"react-flow__edges react-flow__container"},F&&N.createElement(Am,{defaultColor:e,rfId:r}),N.createElement("g",null,q.map(m=>{const[x,b,A]=xo(M.get(m.source)),[$,_,C]=xo(M.get(m.target));if(!A||!C)return null;let P=m.type||"default";i[P]||(R==null||R("011",Oe.error011(P)),P="default");const O=i[P]||i.default,B=z===st.Strict?_.target:(_.target??[]).concat(_.source??[]),V=Eo(b.source,m.sourceHandle),U=Eo(B,m.targetHandle),Z=(V==null?void 0:V.position)||H.Bottom,K=(U==null?void 0:U.position)||H.Top,Q=!!(m.focusable||E&&typeof m.focusable>"u"),re=m.reconnectable||m.updatable,J=typeof h<"u"&&(re||k&&typeof re>"u");if(!V||!U)return R==null||R("008",Oe.error008(V,m)),null;const{sourceX:ye,sourceY:pe,targetX:we,targetY:me}=ym(x,V,Z,$,U,K);return N.createElement(O,{key:m.id,id:m.id,className:ce([m.className,s]),type:P,data:m.data,selected:!!m.selected,animated:!!m.animated,hidden:!!m.hidden,label:m.label,labelStyle:m.labelStyle,labelShowBg:m.labelShowBg,labelBgStyle:m.labelBgStyle,labelBgPadding:m.labelBgPadding,labelBgBorderRadius:m.labelBgBorderRadius,style:m.style,source:m.source,target:m.target,sourceHandleId:m.sourceHandle,targetHandleId:m.targetHandle,markerEnd:m.markerEnd,markerStart:m.markerStart,sourceX:ye,sourceY:pe,targetX:we,targetY:me,sourcePosition:Z,targetPosition:K,elementsSelectable:w,onContextMenu:o,onMouseEnter:a,onMouseMove:c,onMouseLeave:l,onClick:u,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:d,onReconnectEnd:p,reconnectRadius:g,rfId:r,ariaLabel:m.ariaLabel,isFocusable:Q,isReconnectable:J,pathOptions:"pathOptions"in m?m.pathOptions:void 0,interactionWidth:m.interactionWidth,disableKeyboardA11y:v})})))),y):null};vu.displayName="EdgeRenderer";var Rm=S.memo(vu);const Tm=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Mm({children:e}){const t=ne(Tm);return N.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function $m(e){const t=Li(),n=S.useRef(!1);S.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Pm={[H.Left]:H.Right,[H.Right]:H.Left,[H.Top]:H.Bottom,[H.Bottom]:H.Top},yu=({nodeId:e,handleType:t,style:n,type:r=He.Bezier,CustomComponent:i,connectionStatus:s})=>{var T,z,M;const{fromNode:o,handleId:a,toX:c,toY:l,connectionMode:u}=ne(S.useCallback(R=>({fromNode:R.nodeInternals.get(e),handleId:R.connectionHandleId,toX:(R.connectionPosition.x-R.transform[0])/R.transform[2],toY:(R.connectionPosition.y-R.transform[1])/R.transform[2],connectionMode:R.connectionMode}),[e]),ue),f=(T=o==null?void 0:o[ie])==null?void 0:T.handleBounds;let h=f==null?void 0:f[t];if(u===st.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!h)return null;const d=a?h.find(R=>R.id===a):h[0],p=d?d.x+d.width/2:(o.width??0)/2,g=d?d.y+d.height/2:o.height??0,y=(((z=o.positionAbsolute)==null?void 0:z.x)??0)+p,v=(((M=o.positionAbsolute)==null?void 0:M.y)??0)+g,E=d==null?void 0:d.position,k=E?Pm[E]:null;if(!E||!k)return null;if(i)return N.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:d,fromX:y,fromY:v,toX:c,toY:l,fromPosition:E,toPosition:k,connectionStatus:s});let w="";const I={sourceX:y,sourceY:v,sourcePosition:E,targetX:c,targetY:l,targetPosition:k};return r===He.Bezier?[w]=Va(I):r===He.Step?[w]=si({...I,borderRadius:0}):r===He.SmoothStep?[w]=si(I):r===He.SimpleBezier?[w]=qa(I):w=`M${y},${v} ${c},${l}`,N.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};yu.displayName="ConnectionLine";const Dm=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Lm({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:o,width:a,height:c,connectionStatus:l}=ne(Dm,ue);return!(i&&s&&a&&o)?null:N.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},N.createElement("g",{className:ce(["react-flow__connection",l])},N.createElement(yu,{nodeId:i,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:l})))}function No(e,t){return S.useRef(null),se(),S.useMemo(()=>t(e),[e])}const wu=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:d,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:y,connectionLineType:v,connectionLineStyle:E,connectionLineComponent:k,connectionLineContainerStyle:w,selectionKeyCode:I,selectionOnDrag:T,selectionMode:z,multiSelectionKeyCode:M,panActivationKeyCode:R,zoomActivationKeyCode:D,deleteKeyCode:L,onlyRenderVisibleElements:q,elementsSelectable:F,selectNodesOnDrag:m,defaultViewport:x,translateExtent:b,minZoom:A,maxZoom:$,preventScrolling:_,defaultMarkerColor:C,zoomOnScroll:P,zoomOnPinch:O,panOnScroll:B,panOnScrollSpeed:V,panOnScrollMode:U,zoomOnDoubleClick:Z,panOnDrag:K,onPaneClick:Q,onPaneMouseEnter:re,onPaneMouseMove:J,onPaneMouseLeave:ye,onPaneScroll:pe,onPaneContextMenu:we,onEdgeContextMenu:me,onEdgeMouseEnter:oe,onEdgeMouseMove:Ne,onEdgeMouseLeave:ee,onReconnect:G,onReconnectStart:fe,onReconnectEnd:Ze,reconnectRadius:kt,noDragClassName:ct,noWheelClassName:lt,noPanClassName:Re,elevateEdgesOnSelect:ft,disableKeyboardA11y:Ke,nodeOrigin:je,nodeExtent:dt,rfId:ht})=>{const Ct=No(e,lm),ae=No(t,vm);return $m(s),N.createElement(um,{onPaneClick:Q,onPaneMouseEnter:re,onPaneMouseMove:J,onPaneMouseLeave:ye,onPaneContextMenu:we,onPaneScroll:pe,deleteKeyCode:L,selectionKeyCode:I,selectionOnDrag:T,selectionMode:z,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:M,panActivationKeyCode:R,zoomActivationKeyCode:D,elementsSelectable:F,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:P,zoomOnPinch:O,zoomOnDoubleClick:Z,panOnScroll:B,panOnScrollSpeed:V,panOnScrollMode:U,panOnDrag:K,defaultViewport:x,translateExtent:b,minZoom:A,maxZoom:$,onSelectionContextMenu:p,preventScrolling:_,noDragClassName:ct,noWheelClassName:lt,noPanClassName:Re,disableKeyboardA11y:Ke},N.createElement(Mm,null,N.createElement(Rm,{edgeTypes:ae,onEdgeClick:a,onEdgeDoubleClick:l,onlyRenderVisibleElements:q,onEdgeContextMenu:me,onEdgeMouseEnter:oe,onEdgeMouseMove:Ne,onEdgeMouseLeave:ee,onReconnect:G,onReconnectStart:fe,onReconnectEnd:Ze,reconnectRadius:kt,defaultMarkerColor:C,noPanClassName:Re,elevateEdgesOnSelect:!!ft,disableKeyboardA11y:Ke,rfId:ht},N.createElement(Lm,{style:E,type:v,component:k,containerStyle:w})),N.createElement("div",{className:"react-flow__edgelabel-renderer"}),N.createElement(hm,{nodeTypes:Ct,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:d,selectNodesOnDrag:m,onlyRenderVisibleElements:q,noPanClassName:Re,noDragClassName:ct,disableKeyboardA11y:Ke,nodeOrigin:je,nodeExtent:dt,rfId:ht})))};wu.displayName="GraphView";var zm=S.memo(wu);const fi=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],qe={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:fi,nodeExtent:fi,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:st.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:fp,isValidConnection:void 0},Om=()=>jl((e,t)=>({...qe,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=t();e({nodeInternals:On(n,r,i,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",o=i?On(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:c,nodeOrigin:l}=t(),u=c==null?void 0:c.querySelector(".react-flow__viewport");if(!u)return;const f=window.getComputedStyle(u),{m22:h}=new window.DOMMatrixReadOnly(f.transform),d=n.reduce((g,y)=>{const v=i.get(y.id);if(v!=null&&v.hidden)i.set(v.id,{...v,[ie]:{...v[ie],handleBounds:void 0}});else if(v){const E=Ai(y.nodeElement);!!(E.width&&E.height&&(v.width!==E.width||v.height!==E.height||y.forceUpdate))&&(i.set(v.id,{...v,[ie]:{...v[ie],handleBounds:{source:yo(".source",y.nodeElement,h,l),target:yo(".target",y.nodeElement,h,l)}},...E}),g.push({id:v.id,type:"dimensions",dimensions:E}))}return g},[]);ou(i,l);const p=o||s&&!o&&su(t,{initial:!0,...a});e({nodeInternals:new Map(i),fitViewOnInitDone:p}),(d==null?void 0:d.length)>0&&(r==null||r(d))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=t(),o=n.map(a=>{const c={id:a.id,type:"position",dragging:i};return r&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});s(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(s){const l=uu(n,a()),u=On(l,i,o,c);e({nodeInternals:u})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let o,a=null;r?o=n.map(c=>Be(c,!0)):(o=yt(s(),n),a=yt(i,[])),Qt({changedNodes:o,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let o,a=null;r?o=n.map(c=>Be(c,!0)):(o=yt(i,n),a=yt(s(),[])),Qt({changedNodes:a,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=t(),o=n||s(),a=r||i,c=o.map(u=>(u.selected=!1,Be(u.id,!1))),l=a.map(u=>Be(u.id,!1));Qt({changedNodes:c,changedEdges:l,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(a=>a.selected).map(a=>Be(a.id,!1)),o=n.filter(a=>a.selected).map(a=>Be(a.id,!1));Qt({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=Ii(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:o,d3Selection:a,translateExtent:c}=t();if(!o||!a||!n.x&&!n.y)return!1;const l=Ue.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),u=[[0,0],[i,s]],f=o==null?void 0:o.constrain()(l,u,c);return o.transform(a,f),r[0]!==f.x||r[1]!==f.y||r[2]!==f.k},cancelConnection:()=>e({connectionNodeId:qe.connectionNodeId,connectionHandleId:qe.connectionHandleId,connectionHandleType:qe.connectionHandleType,connectionStatus:qe.connectionStatus,connectionStartHandle:qe.connectionStartHandle,connectionEndHandle:qe.connectionEndHandle}),reset:()=>e({...qe})}),Object.is),_u=({children:e})=>{const t=S.useRef(null);return t.current||(t.current=Om()),N.createElement(op,{value:t.current},e)};_u.displayName="ReactFlowProvider";const bu=({children:e})=>S.useContext(kn)?N.createElement(N.Fragment,null,e):N.createElement(_u,null,e);bu.displayName="ReactFlowWrapper";const Fm={input:Qa,default:ci,output:eu,group:Di},qm={default:hn,straight:Mi,step:Ti,smoothstep:Cn,simplebezier:Ri},Vm=[0,0],Bm=[15,15],Hm={x:0,y:0,zoom:1},Gm={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Um=S.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=Fm,edgeTypes:o=qm,onNodeClick:a,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:f,onMoveEnd:h,onConnect:d,onConnectStart:p,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:v,onNodeMouseEnter:E,onNodeMouseMove:k,onNodeMouseLeave:w,onNodeContextMenu:I,onNodeDoubleClick:T,onNodeDragStart:z,onNodeDrag:M,onNodeDragStop:R,onNodesDelete:D,onEdgesDelete:L,onSelectionChange:q,onSelectionDragStart:F,onSelectionDrag:m,onSelectionDragStop:x,onSelectionContextMenu:b,onSelectionStart:A,onSelectionEnd:$,connectionMode:_=st.Strict,connectionLineType:C=He.Bezier,connectionLineStyle:P,connectionLineComponent:O,connectionLineContainerStyle:B,deleteKeyCode:V="Backspace",selectionKeyCode:U="Shift",selectionOnDrag:Z=!1,selectionMode:K=Gt.Full,panActivationKeyCode:Q="Space",multiSelectionKeyCode:re=fn()?"Meta":"Control",zoomActivationKeyCode:J=fn()?"Meta":"Control",snapToGrid:ye=!1,snapGrid:pe=Bm,onlyRenderVisibleElements:we=!1,selectNodesOnDrag:me=!0,nodesDraggable:oe,nodesConnectable:Ne,nodesFocusable:ee,nodeOrigin:G=Vm,edgesFocusable:fe,edgesUpdatable:Ze,elementsSelectable:kt,defaultViewport:ct=Hm,minZoom:lt=.5,maxZoom:Re=2,translateExtent:ft=fi,preventScrolling:Ke=!0,nodeExtent:je,defaultMarkerColor:dt="#b1b1b7",zoomOnScroll:ht=!0,zoomOnPinch:Ct=!0,panOnScroll:ae=!1,panOnScrollSpeed:_e=.5,panOnScrollMode:Qe=rt.Free,zoomOnDoubleClick:Je=!0,panOnDrag:et=!0,onPaneClick:Te,onPaneMouseEnter:ke,onPaneMouseMove:At,onPaneMouseLeave:Tn,onPaneScroll:It,onPaneContextMenu:Mn,children:Vi,onEdgeContextMenu:tt,onEdgeDoubleClick:ic,onEdgeMouseEnter:oc,onEdgeMouseMove:sc,onEdgeMouseLeave:ac,onEdgeUpdate:uc,onEdgeUpdateStart:cc,onEdgeUpdateEnd:lc,onReconnect:fc,onReconnectStart:dc,onReconnectEnd:hc,reconnectRadius:pc=10,edgeUpdaterRadius:mc=10,onNodesChange:gc,onEdgesChange:vc,noDragClassName:yc="nodrag",noWheelClassName:wc="nowheel",noPanClassName:Bi="nopan",fitView:_c=!1,fitViewOptions:bc,connectOnClick:Ec=!0,attributionPosition:xc,proOptions:Sc,defaultEdgeOptions:Nc,elevateNodesOnSelect:kc=!0,elevateEdgesOnSelect:Cc=!1,disableKeyboardA11y:Hi=!1,autoPanOnConnect:Ac=!0,autoPanOnNodeDrag:Ic=!0,connectionRadius:Rc=20,isValidConnection:Tc,onError:Mc,style:$c,id:Gi,nodeDragThreshold:Pc,...Dc},Lc)=>{const $n=Gi||"1";return N.createElement("div",{...Dc,style:{...$c,...Gm},ref:Lc,className:ce(["react-flow",i]),"data-testid":"rf__wrapper",id:Gi},N.createElement(bu,null,N.createElement(zm,{onInit:l,onMove:u,onMoveStart:f,onMoveEnd:h,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:E,onNodeMouseMove:k,onNodeMouseLeave:w,onNodeContextMenu:I,onNodeDoubleClick:T,nodeTypes:s,edgeTypes:o,connectionLineType:C,connectionLineStyle:P,connectionLineComponent:O,connectionLineContainerStyle:B,selectionKeyCode:U,selectionOnDrag:Z,selectionMode:K,deleteKeyCode:V,multiSelectionKeyCode:re,panActivationKeyCode:Q,zoomActivationKeyCode:J,onlyRenderVisibleElements:we,selectNodesOnDrag:me,defaultViewport:ct,translateExtent:ft,minZoom:lt,maxZoom:Re,preventScrolling:Ke,zoomOnScroll:ht,zoomOnPinch:Ct,zoomOnDoubleClick:Je,panOnScroll:ae,panOnScrollSpeed:_e,panOnScrollMode:Qe,panOnDrag:et,onPaneClick:Te,onPaneMouseEnter:ke,onPaneMouseMove:At,onPaneMouseLeave:Tn,onPaneScroll:It,onPaneContextMenu:Mn,onSelectionContextMenu:b,onSelectionStart:A,onSelectionEnd:$,onEdgeContextMenu:tt,onEdgeDoubleClick:ic,onEdgeMouseEnter:oc,onEdgeMouseMove:sc,onEdgeMouseLeave:ac,onReconnect:fc??uc,onReconnectStart:dc??cc,onReconnectEnd:hc??lc,reconnectRadius:pc??mc,defaultMarkerColor:dt,noDragClassName:yc,noWheelClassName:wc,noPanClassName:Bi,elevateEdgesOnSelect:Cc,rfId:$n,disableKeyboardA11y:Hi,nodeOrigin:G,nodeExtent:je}),N.createElement(Pp,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:d,onConnectStart:p,onConnectEnd:g,onClickConnectStart:y,onClickConnectEnd:v,nodesDraggable:oe,nodesConnectable:Ne,nodesFocusable:ee,edgesFocusable:fe,edgesUpdatable:Ze,elementsSelectable:kt,elevateNodesOnSelect:kc,minZoom:lt,maxZoom:Re,nodeExtent:je,onNodesChange:gc,onEdgesChange:vc,snapToGrid:ye,snapGrid:pe,connectionMode:_,translateExtent:ft,connectOnClick:Ec,defaultEdgeOptions:Nc,fitView:_c,fitViewOptions:bc,onNodesDelete:D,onEdgesDelete:L,onNodeDragStart:z,onNodeDrag:M,onNodeDragStop:R,onSelectionDrag:m,onSelectionDragStart:F,onSelectionDragStop:x,noPanClassName:Bi,nodeOrigin:G,rfId:$n,autoPanOnConnect:Ac,autoPanOnNodeDrag:Ic,onError:Mc,connectionRadius:Rc,isValidConnection:Tc,nodeDragThreshold:Pc}),N.createElement(Mp,{onSelectionChange:q}),Vi,N.createElement(ap,{proOptions:Sc,position:xc}),N.createElement(Fp,{rfId:$n,disableKeyboardA11y:Hi})))});Um.displayName="ReactFlow";function Eu(e){return t=>{const[n,r]=S.useState(t),i=S.useCallback(s=>r(o=>e(s,o)),[]);return[n,r,i]}}const ew=Eu(uu),tw=Eu(Jp);function Ym(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},N.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Wm(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},N.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Xm(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},N.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Zm(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},N.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Km(){return N.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},N.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const zt=({children:e,className:t,...n})=>N.createElement("button",{type:"button",className:ce(["react-flow__controls-button",t]),...n},e);zt.displayName="ControlButton";const jm=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),xu=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:c,className:l,children:u,position:f="bottom-left"})=>{const h=se(),[d,p]=S.useState(!1),{isInteractive:g,minZoomReached:y,maxZoomReached:v}=ne(jm,ue),{zoomIn:E,zoomOut:k,fitView:w}=Li();if(S.useEffect(()=>{p(!0)},[]),!d)return null;const I=()=>{E(),s==null||s()},T=()=>{k(),o==null||o()},z=()=>{w(i),a==null||a()},M=()=>{h.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),c==null||c(!g)};return N.createElement(Ta,{className:ce(["react-flow__controls",l]),position:f,style:e,"data-testid":"rf__controls"},t&&N.createElement(N.Fragment,null,N.createElement(zt,{onClick:I,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v},N.createElement(Ym,null)),N.createElement(zt,{onClick:T,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y},N.createElement(Wm,null))),n&&N.createElement(zt,{className:"react-flow__controls-fitview",onClick:z,title:"fit view","aria-label":"fit view"},N.createElement(Xm,null)),r&&N.createElement(zt,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity"},g?N.createElement(Km,null):N.createElement(Zm,null)),u)};xu.displayName="Controls";var nw=S.memo(xu),Ee;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ee||(Ee={}));function Qm({color:e,dimensions:t,lineWidth:n}){return N.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Jm({color:e,radius:t}){return N.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const eg={[Ee.Dots]:"#91919a",[Ee.Lines]:"#eee",[Ee.Cross]:"#e2e2e2"},tg={[Ee.Dots]:1,[Ee.Lines]:1,[Ee.Cross]:6},ng=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Su({id:e,variant:t=Ee.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:o,style:a,className:c}){const l=S.useRef(null),{transform:u,patternId:f}=ne(ng,ue),h=o||eg[t],d=r||tg[t],p=t===Ee.Dots,g=t===Ee.Cross,y=Array.isArray(n)?n:[n,n],v=[y[0]*u[2]||1,y[1]*u[2]||1],E=d*u[2],k=g?[E,E]:v,w=p?[E/s,E/s]:[k[0]/s,k[1]/s];return N.createElement("svg",{className:ce(["react-flow__background",c]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:l,"data-testid":"rf__background"},N.createElement("pattern",{id:f+e,x:u[0]%v[0],y:u[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`},p?N.createElement(Jm,{color:h,radius:E/s}):N.createElement(Qm,{dimensions:k,color:h,lineWidth:i})),N.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}Su.displayName="Background";var rw=S.memo(Su),Bn,ko;function rg(){if(ko)return Bn;ko=1;var e=Us,t=4;function n(r){return e(r,t)}return Bn=n,Bn}var Hn,Co;function Nu(){if(Co)return Hn;Co=1;var e=Bc;function t(n){return typeof n=="function"?n:e}return Hn=t,Hn}var Gn,Ao;function ku(){if(Ao)return Gn;Ao=1;var e=Ys,t=mi,n=Nu(),r=at;function i(s,o){var a=r(s)?e:t;return a(s,n(o))}return Gn=i,Gn}var Un,Io;function Cu(){return Io||(Io=1,Un=ku()),Un}var Yn,Ro;function ig(){if(Ro)return Yn;Ro=1;var e=mi;function t(n,r){var i=[];return e(n,function(s,o,a){r(s,o,a)&&i.push(s)}),i}return Yn=t,Yn}var Wn,To;function Au(){if(To)return Wn;To=1;var e=Hc,t=ig(),n=gi,r=at;function i(s,o){var a=r(s)?e:t;return a(s,n(o))}return Wn=i,Wn}var Xn,Mo;function og(){if(Mo)return Xn;Mo=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Xn=n,Xn}var Zn,$o;function Iu(){if($o)return Zn;$o=1;var e=og(),t=Gc;function n(r,i){return r!=null&&t(r,i,e)}return Zn=n,Zn}var Kn,Po;function sg(){if(Po)return Kn;Po=1;var e=Zs,t=Xs,n=Ws,r=at,i=vi,s=yi,o=Uc,a=wi,c="[object Map]",l="[object Set]",u=Object.prototype,f=u.hasOwnProperty;function h(d){if(d==null)return!0;if(i(d)&&(r(d)||typeof d=="string"||typeof d.splice=="function"||s(d)||a(d)||n(d)))return!d.length;var p=t(d);if(p==c||p==l)return!d.size;if(o(d))return!e(d).length;for(var g in d)if(f.call(d,g))return!1;return!0}return Kn=h,Kn}var jn,Do;function Ru(){if(Do)return jn;Do=1;function e(t){return t===void 0}return jn=e,jn}var Qn,Lo;function ag(){if(Lo)return Qn;Lo=1;function e(t,n,r,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(r=t[++s]);++s<o;)r=n(r,t[s],s,t);return r}return Qn=e,Qn}var Jn,zo;function ug(){if(zo)return Jn;zo=1;function e(t,n,r,i,s){return s(t,function(o,a,c){r=i?(i=!1,o):n(r,o,a,c)}),r}return Jn=e,Jn}var er,Oo;function Tu(){if(Oo)return er;Oo=1;var e=ag(),t=mi,n=gi,r=ug(),i=at;function s(o,a,c){var l=i(o)?e:r,u=arguments.length<3;return l(o,n(a),c,u,t)}return er=s,er}var tr,Fo;function cg(){if(Fo)return tr;Fo=1;var e=Yc,t=e("length");return tr=t,tr}var nr,qo;function lg(){if(qo)return nr;qo=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="["+e+"]",a="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",l="(?:"+a+"|"+c+")",u="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",p=l+"?",g="["+s+"]?",y="(?:"+d+"(?:"+[u,f,h].join("|")+")"+g+p+")*",v=g+p+y,E="(?:"+[u+a+"?",a,f,h,o].join("|")+")",k=RegExp(c+"(?="+c+")|"+E+v,"g");function w(I){for(var T=k.lastIndex=0;k.test(I);)++T;return T}return nr=w,nr}var rr,Vo;function fg(){if(Vo)return rr;Vo=1;var e=cg(),t=Wc,n=lg();function r(i){return t(i)?n(i):e(i)}return rr=r,rr}var ir,Bo;function dg(){if(Bo)return ir;Bo=1;var e=Zs,t=Xs,n=vi,r=Xc,i=fg(),s="[object Map]",o="[object Set]";function a(c){if(c==null)return 0;if(n(c))return r(c)?i(c):c.length;var l=t(c);return l==s||l==o?c.size:e(c).length}return ir=a,ir}var or,Ho;function hg(){if(Ho)return or;Ho=1;var e=Ys,t=Zc,n=jc,r=gi,i=Kc,s=at,o=yi,a=_i,c=wn,l=wi;function u(f,h,d){var p=s(f),g=p||o(f)||l(f);if(h=r(h),d==null){var y=f&&f.constructor;g?d=p?new y:[]:c(f)?d=a(y)?t(i(f)):{}:d={}}return(g?e:n)(f,function(v,E,k){return h(d,v,E,k)}),d}return or=u,or}var sr,Go;function Mu(){if(Go)return sr;Go=1;var e=vi,t=Qc;function n(r){return t(r)&&e(r)}return sr=n,sr}var ar,Uo;function pg(){if(Uo)return ar;Uo=1;var e=el,t=bi,n=Jc,r=Mu(),i=t(function(s){return n(e(s,1,r,!0))});return ar=i,ar}var ur,Yo;function mg(){if(Yo)return ur;Yo=1;var e=tl;function t(n,r){return e(r,function(i){return n[i]})}return ur=t,ur}var cr,Wo;function $u(){if(Wo)return cr;Wo=1;var e=mg(),t=Ks;function n(r){return r==null?[]:e(r,t(r))}return cr=n,cr}var lr,Xo;function ve(){if(Xo)return lr;Xo=1;var e;if(typeof Ei=="function")try{e={clone:rg(),constant:Qs,each:Cu(),filter:Au(),has:Iu(),isArray:at,isEmpty:sg(),isFunction:_i,isUndefined:Ru(),keys:Ks,map:js,reduce:Tu(),size:dg(),transform:hg(),union:pg(),values:$u()}}catch{}return e||(e=window._),lr=e,lr}var fr,Zo;function Oi(){if(Zo)return fr;Zo=1;var e=ve();fr=i;var t="\0",n="\0",r="";function i(u){this._isDirected=e.has(u,"directed")?u.directed:!0,this._isMultigraph=e.has(u,"multigraph")?u.multigraph:!1,this._isCompound=e.has(u,"compound")?u.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(u){return this._label=u,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultNodeLabelFn=u,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var u=this;return e.filter(this.nodes(),function(f){return e.isEmpty(u._in[f])})},i.prototype.sinks=function(){var u=this;return e.filter(this.nodes(),function(f){return e.isEmpty(u._out[f])})},i.prototype.setNodes=function(u,f){var h=arguments,d=this;return e.each(u,function(p){h.length>1?d.setNode(p,f):d.setNode(p)}),this},i.prototype.setNode=function(u,f){return e.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=f),this):(this._nodes[u]=arguments.length>1?f:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=n,this._children[u]={},this._children[n][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},i.prototype.node=function(u){return this._nodes[u]},i.prototype.hasNode=function(u){return e.has(this._nodes,u)},i.prototype.removeNode=function(u){var f=this;if(e.has(this._nodes,u)){var h=function(d){f.removeEdge(f._edgeObjs[d])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],e.each(this.children(u),function(d){f.setParent(d)}),delete this._children[u]),e.each(e.keys(this._in[u]),h),delete this._in[u],delete this._preds[u],e.each(e.keys(this._out[u]),h),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},i.prototype.setParent=function(u,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=n;else{f+="";for(var h=f;!e.isUndefined(h);h=this.parent(h))if(h===u)throw new Error("Setting "+f+" as parent of "+u+" would create a cycle");this.setNode(f)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=f,this._children[f][u]=!0,this},i.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},i.prototype.parent=function(u){if(this._isCompound){var f=this._parent[u];if(f!==n)return f}},i.prototype.children=function(u){if(e.isUndefined(u)&&(u=n),this._isCompound){var f=this._children[u];if(f)return e.keys(f)}else{if(u===n)return this.nodes();if(this.hasNode(u))return[]}},i.prototype.predecessors=function(u){var f=this._preds[u];if(f)return e.keys(f)},i.prototype.successors=function(u){var f=this._sucs[u];if(f)return e.keys(f)},i.prototype.neighbors=function(u){var f=this.predecessors(u);if(f)return e.union(f,this.successors(u))},i.prototype.isLeaf=function(u){var f;return this.isDirected()?f=this.successors(u):f=this.neighbors(u),f.length===0},i.prototype.filterNodes=function(u){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;e.each(this._nodes,function(g,y){u(y)&&f.setNode(y,g)}),e.each(this._edgeObjs,function(g){f.hasNode(g.v)&&f.hasNode(g.w)&&f.setEdge(g,h.edge(g))});var d={};function p(g){var y=h.parent(g);return y===void 0||f.hasNode(y)?(d[g]=y,y):y in d?d[y]:p(y)}return this._isCompound&&e.each(f.nodes(),function(g){f.setParent(g,p(g))}),f},i.prototype.setDefaultEdgeLabel=function(u){return e.isFunction(u)||(u=e.constant(u)),this._defaultEdgeLabelFn=u,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(u,f){var h=this,d=arguments;return e.reduce(u,function(p,g){return d.length>1?h.setEdge(p,g,f):h.setEdge(p,g),g}),this},i.prototype.setEdge=function(){var u,f,h,d,p=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(u=g.v,f=g.w,h=g.name,arguments.length===2&&(d=arguments[1],p=!0)):(u=g,f=arguments[1],h=arguments[3],arguments.length>2&&(d=arguments[2],p=!0)),u=""+u,f=""+f,e.isUndefined(h)||(h=""+h);var y=a(this._isDirected,u,f,h);if(e.has(this._edgeLabels,y))return p&&(this._edgeLabels[y]=d),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(f),this._edgeLabels[y]=p?d:this._defaultEdgeLabelFn(u,f,h);var v=c(this._isDirected,u,f,h);return u=v.v,f=v.w,Object.freeze(v),this._edgeObjs[y]=v,s(this._preds[f],u),s(this._sucs[u],f),this._in[f][y]=v,this._out[u][y]=v,this._edgeCount++,this},i.prototype.edge=function(u,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):a(this._isDirected,u,f,h);return this._edgeLabels[d]},i.prototype.hasEdge=function(u,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):a(this._isDirected,u,f,h);return e.has(this._edgeLabels,d)},i.prototype.removeEdge=function(u,f,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):a(this._isDirected,u,f,h),p=this._edgeObjs[d];return p&&(u=p.v,f=p.w,delete this._edgeLabels[d],delete this._edgeObjs[d],o(this._preds[f],u),o(this._sucs[u],f),delete this._in[f][d],delete this._out[u][d],this._edgeCount--),this},i.prototype.inEdges=function(u,f){var h=this._in[u];if(h){var d=e.values(h);return f?e.filter(d,function(p){return p.v===f}):d}},i.prototype.outEdges=function(u,f){var h=this._out[u];if(h){var d=e.values(h);return f?e.filter(d,function(p){return p.w===f}):d}},i.prototype.nodeEdges=function(u,f){var h=this.inEdges(u,f);if(h)return h.concat(this.outEdges(u,f))};function s(u,f){u[f]?u[f]++:u[f]=1}function o(u,f){--u[f]||delete u[f]}function a(u,f,h,d){var p=""+f,g=""+h;if(!u&&p>g){var y=p;p=g,g=y}return p+r+g+r+(e.isUndefined(d)?t:d)}function c(u,f,h,d){var p=""+f,g=""+h;if(!u&&p>g){var y=p;p=g,g=y}var v={v:p,w:g};return d&&(v.name=d),v}function l(u,f){return a(u,f.v,f.w,f.name)}return fr}var dr,Ko;function gg(){return Ko||(Ko=1,dr="2.1.8"),dr}var hr,jo;function vg(){return jo||(jo=1,hr={Graph:Oi(),version:gg()}),hr}var pr,Qo;function yg(){if(Qo)return pr;Qo=1;var e=ve(),t=Oi();pr={write:n,read:s};function n(o){var a={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return e.isUndefined(o.graph())||(a.value=e.clone(o.graph())),a}function r(o){return e.map(o.nodes(),function(a){var c=o.node(a),l=o.parent(a),u={v:a};return e.isUndefined(c)||(u.value=c),e.isUndefined(l)||(u.parent=l),u})}function i(o){return e.map(o.edges(),function(a){var c=o.edge(a),l={v:a.v,w:a.w};return e.isUndefined(a.name)||(l.name=a.name),e.isUndefined(c)||(l.value=c),l})}function s(o){var a=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(c){a.setNode(c.v,c.value),c.parent&&a.setParent(c.v,c.parent)}),e.each(o.edges,function(c){a.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),a}return pr}var mr,Jo;function wg(){if(Jo)return mr;Jo=1;var e=ve();mr=t;function t(n){var r={},i=[],s;function o(a){e.has(r,a)||(r[a]=!0,s.push(a),e.each(n.successors(a),o),e.each(n.predecessors(a),o))}return e.each(n.nodes(),function(a){s=[],o(a),s.length&&i.push(s)}),i}return mr}var gr,es;function Pu(){if(es)return gr;es=1;var e=ve();gr=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],a=i[r];i[n]=a,i[r]=o,s[a.key]=n,s[o.key]=r},gr}var vr,ts;function Du(){if(ts)return vr;ts=1;var e=ve(),t=Pu();vr=r;var n=e.constant(1);function r(s,o,a,c){return i(s,String(o),a||n,c||function(l){return s.outEdges(l)})}function i(s,o,a,c){var l={},u=new t,f,h,d=function(p){var g=p.v!==f?p.v:p.w,y=l[g],v=a(p),E=h.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+p+" Weight: "+v);E<y.distance&&(y.distance=E,y.predecessor=f,u.decrease(g,E))};for(s.nodes().forEach(function(p){var g=p===o?0:Number.POSITIVE_INFINITY;l[p]={distance:g},u.add(p,g)});u.size()>0&&(f=u.removeMin(),h=l[f],h.distance!==Number.POSITIVE_INFINITY);)c(f).forEach(d);return l}return vr}var yr,ns;function _g(){if(ns)return yr;ns=1;var e=Du(),t=ve();yr=n;function n(r,i,s){return t.transform(r.nodes(),function(o,a){o[a]=e(r,a,i,s)},{})}return yr}var wr,rs;function Lu(){if(rs)return wr;rs=1;var e=ve();wr=t;function t(n){var r=0,i=[],s={},o=[];function a(c){var l=s[c]={onStack:!0,lowlink:r,index:r++};if(i.push(c),n.successors(c).forEach(function(h){e.has(s,h)?s[h].onStack&&(l.lowlink=Math.min(l.lowlink,s[h].index)):(a(h),l.lowlink=Math.min(l.lowlink,s[h].lowlink))}),l.lowlink===l.index){var u=[],f;do f=i.pop(),s[f].onStack=!1,u.push(f);while(c!==f);o.push(u)}}return n.nodes().forEach(function(c){e.has(s,c)||a(c)}),o}return wr}var _r,is;function bg(){if(is)return _r;is=1;var e=ve(),t=Lu();_r=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return _r}var br,os;function Eg(){if(os)return br;os=1;var e=ve();br=n;var t=e.constant(1);function n(i,s,o){return r(i,s||t,o||function(a){return i.outEdges(a)})}function r(i,s,o){var a={},c=i.nodes();return c.forEach(function(l){a[l]={},a[l][l]={distance:0},c.forEach(function(u){l!==u&&(a[l][u]={distance:Number.POSITIVE_INFINITY})}),o(l).forEach(function(u){var f=u.v===l?u.w:u.v,h=s(u);a[l][f]={distance:h,predecessor:l}})}),c.forEach(function(l){var u=a[l];c.forEach(function(f){var h=a[f];c.forEach(function(d){var p=h[l],g=u[d],y=h[d],v=p.distance+g.distance;v<y.distance&&(y.distance=v,y.predecessor=g.predecessor)})})}),a}return br}var Er,ss;function zu(){if(ss)return Er;ss=1;var e=ve();Er=t,t.CycleException=n;function t(r){var i={},s={},o=[];function a(c){if(e.has(s,c))throw new n;e.has(i,c)||(s[c]=!0,i[c]=!0,e.each(r.predecessors(c),a),delete s[c],o.push(c))}if(e.each(r.sinks(),a),e.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,Er}var xr,as;function xg(){if(as)return xr;as=1;var e=zu();xr=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return xr}var Sr,us;function Ou(){if(us)return Sr;us=1;var e=ve();Sr=t;function t(r,i,s){e.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),a=[],c={};return e.each(i,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);n(r,l,s==="post",c,o,a)}),a}function n(r,i,s,o,a,c){e.has(o,i)||(o[i]=!0,s||c.push(i),e.each(a(i),function(l){n(r,l,s,o,a,c)}),s&&c.push(i))}return Sr}var Nr,cs;function Sg(){if(cs)return Nr;cs=1;var e=Ou();Nr=t;function t(n,r){return e(n,r,"post")}return Nr}var kr,ls;function Ng(){if(ls)return kr;ls=1;var e=Ou();kr=t;function t(n,r){return e(n,r,"pre")}return kr}var Cr,fs;function kg(){if(fs)return Cr;fs=1;var e=ve(),t=Oi(),n=Pu();Cr=r;function r(i,s){var o=new t,a={},c=new n,l;function u(h){var d=h.v===l?h.w:h.v,p=c.priority(d);if(p!==void 0){var g=s(h);g<p&&(a[d]=l,c.decrease(d,g))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(h){c.add(h,Number.POSITIVE_INFINITY),o.setNode(h)}),c.decrease(i.nodes()[0],0);for(var f=!1;c.size()>0;){if(l=c.removeMin(),e.has(a,l))o.setEdge(l,a[l]);else{if(f)throw new Error("Input graph is not connected: "+i);f=!0}i.nodeEdges(l).forEach(u)}return o}return Cr}var Ar,ds;function Cg(){return ds||(ds=1,Ar={components:wg(),dijkstra:Du(),dijkstraAll:_g(),findCycles:bg(),floydWarshall:Eg(),isAcyclic:xg(),postorder:Sg(),preorder:Ng(),prim:kg(),tarjan:Lu(),topsort:zu()}),Ar}var Ir,hs;function Ag(){if(hs)return Ir;hs=1;var e=vg();return Ir={Graph:e.Graph,json:yg(),alg:Cg(),version:e.version},Ir}var mn;if(typeof Ei=="function")try{mn=Ag()}catch{}mn||(mn=window.graphlib);var Se=mn,Rr,ps;function Ig(){if(ps)return Rr;ps=1;var e=Us,t=1,n=4;function r(i){return e(i,t|n)}return Rr=r,Rr}var Tr,ms;function Rg(){if(ms)return Tr;ms=1;var e=bi,t=ea,n=Js,r=_n,i=Object.prototype,s=i.hasOwnProperty,o=e(function(a,c){a=Object(a);var l=-1,u=c.length,f=u>2?c[2]:void 0;for(f&&n(c[0],c[1],f)&&(u=1);++l<u;)for(var h=c[l],d=r(h),p=-1,g=d.length;++p<g;){var y=d[p],v=a[y];(v===void 0||t(v,i[y])&&!s.call(a,y))&&(a[y]=h[y])}return a});return Tr=o,Tr}var Mr,gs;function Tg(){if(gs)return Mr;gs=1;var e=ta,t=Nu(),n=_n;function r(i,s){return i==null?i:e(i,t(s),n)}return Mr=r,Mr}var $r,vs;function Fu(){if(vs)return $r;vs=1;var e=nl,t=ea;function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return $r=n,$r}var Pr,ys;function qu(){if(ys)return Pr;ys=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return Pr=e,Pr}var Dr,ws;function Mg(){if(ws)return Dr;ws=1;var e=rl,t=_n;function n(r){return e(r,t(r))}return Dr=n,Dr}var Lr,_s;function $g(){if(_s)return Lr;_s=1;var e=Fu(),t=ol,n=sl,r=il,i=ul,s=Ws,o=at,a=Mu(),c=yi,l=_i,u=wn,f=al,h=wi,d=qu(),p=Mg();function g(y,v,E,k,w,I,T){var z=d(y,E),M=d(v,E),R=T.get(M);if(R){e(y,E,R);return}var D=I?I(z,M,E+"",y,v,T):void 0,L=D===void 0;if(L){var q=o(M),F=!q&&c(M),m=!q&&!F&&h(M);D=M,q||F||m?o(z)?D=z:a(z)?D=r(z):F?(L=!1,D=t(M,!0)):m?(L=!1,D=n(M,!0)):D=[]:f(M)||s(M)?(D=z,s(z)?D=p(z):(!u(z)||l(z))&&(D=i(M))):L=!1}L&&(T.set(M,D),w(D,M,k,I,T),T.delete(M)),e(y,E,D)}return Lr=g,Lr}var zr,bs;function Pg(){if(bs)return zr;bs=1;var e=cl,t=Fu(),n=ta,r=$g(),i=wn,s=_n,o=qu();function a(c,l,u,f,h){c!==l&&n(l,function(d,p){if(h||(h=new e),i(d))r(c,l,p,u,a,f,h);else{var g=f?f(o(c,p),d,p+"",c,l,h):void 0;g===void 0&&(g=d),t(c,p,g)}},s)}return zr=a,zr}var Or,Es;function Dg(){if(Es)return Or;Es=1;var e=bi,t=Js;function n(r){return e(function(i,s){var o=-1,a=s.length,c=a>1?s[a-1]:void 0,l=a>2?s[2]:void 0;for(c=r.length>3&&typeof c=="function"?(a--,c):void 0,l&&t(s[0],s[1],l)&&(c=a<3?void 0:c,a=1),i=Object(i);++o<a;){var u=s[o];u&&r(i,u,o,c)}return i})}return Or=n,Or}var Fr,xs;function Lg(){if(xs)return Fr;xs=1;var e=Pg(),t=Dg(),n=t(function(r,i,s){e(r,i,s)});return Fr=n,Fr}var qr,Ss;function zg(){if(Ss)return qr;Ss=1;var e=ra,t=na,n=fl,r=wn,i=ll;function s(o,a,c,l){if(!r(o))return o;a=t(a,o);for(var u=-1,f=a.length,h=f-1,d=o;d!=null&&++u<f;){var p=i(a[u]),g=c;if(p==="__proto__"||p==="constructor"||p==="prototype")return o;if(u!=h){var y=d[p];g=l?l(y,p,d):void 0,g===void 0&&(g=r(y)?y:n(a[u+1])?[]:{})}e(d,p,g),d=d[p]}return o}return qr=s,qr}var Vr,Ns;function Og(){if(Ns)return Vr;Ns=1;var e=dl,t=zg(),n=na;function r(i,s,o){for(var a=-1,c=s.length,l={};++a<c;){var u=s[a],f=e(i,u);o(f,u)&&t(l,n(u,i),f)}return l}return Vr=r,Vr}var Br,ks;function Fg(){if(ks)return Br;ks=1;var e=Og(),t=hl;function n(r,i){return e(r,i,function(s,o){return t(r,o)})}return Br=n,Br}var Hr,Cs;function qg(){if(Cs)return Hr;Cs=1;var e=Fg(),t=pl,n=t(function(r,i){return r==null?{}:e(r,i)});return Hr=n,Hr}var Gr,As;function Vg(){if(As)return Gr;As=1;var e=ml,t=0;function n(r){var i=++t;return e(r)+i}return Gr=n,Gr}var Ur,Is;function Bg(){if(Is)return Ur;Is=1;function e(t,n,r){for(var i=-1,s=t.length,o=n.length,a={};++i<s;){var c=i<o?n[i]:void 0;r(a,t[i],c)}return a}return Ur=e,Ur}var Yr,Rs;function Hg(){if(Rs)return Yr;Rs=1;var e=ra,t=Bg();function n(r,i){return t(r||[],i||[],e)}return Yr=n,Yr}var gn;if(typeof Ei=="function")try{gn={cloneDeep:Ig(),constant:Qs,defaults:Rg(),each:Cu(),filter:Au(),find:Nl,flatten:Sl,forEach:ku(),forIn:Tg(),has:Iu(),isUndefined:Ru(),last:xl,map:js,mapValues:El,max:bl,merge:Lg(),min:_l,minBy:wl,now:yl,pick:qg(),range:vl,reduce:Tu(),sortBy:gl,uniqueId:Vg(),values:$u(),zipObject:Hg()}}catch{}gn||(gn=window._);var te=gn,Gg=In;function In(){var e={};e._next=e._prev=e,this._sentinel=e}In.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Vu(t),t};In.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Vu(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};In.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,Ug)),n=n._prev;return"["+e.join(", ")+"]"};function Vu(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Ug(e,t){if(e!=="_next"&&e!=="_prev")return t}var De=te,Yg=Se.Graph,Wg=Gg,Xg=Kg,Zg=De.constant(1);function Kg(e,t){if(e.nodeCount()<=1)return[];var n=Qg(e,t||Zg),r=jg(n.graph,n.buckets,n.zeroIdx);return De.flatten(De.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function jg(e,t,n){for(var r=[],i=t[t.length-1],s=t[0],o;e.nodeCount();){for(;o=s.dequeue();)Wr(e,t,n,o);for(;o=i.dequeue();)Wr(e,t,n,o);if(e.nodeCount()){for(var a=t.length-2;a>0;--a)if(o=t[a].dequeue(),o){r=r.concat(Wr(e,t,n,o,!0));break}}}return r}function Wr(e,t,n,r,i){var s=i?[]:void 0;return De.forEach(e.inEdges(r.v),function(o){var a=e.edge(o),c=e.node(o.v);i&&s.push({v:o.v,w:o.w}),c.out-=a,di(t,n,c)}),De.forEach(e.outEdges(r.v),function(o){var a=e.edge(o),c=o.w,l=e.node(c);l.in-=a,di(t,n,l)}),e.removeNode(r.v),s}function Qg(e,t){var n=new Yg,r=0,i=0;De.forEach(e.nodes(),function(a){n.setNode(a,{v:a,in:0,out:0})}),De.forEach(e.edges(),function(a){var c=n.edge(a.v,a.w)||0,l=t(a),u=c+l;n.setEdge(a.v,a.w,u),i=Math.max(i,n.node(a.v).out+=l),r=Math.max(r,n.node(a.w).in+=l)});var s=De.range(i+r+3).map(function(){return new Wg}),o=r+1;return De.forEach(n.nodes(),function(a){di(s,o,n.node(a))}),{graph:n,buckets:s,zeroIdx:o}}function di(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var it=te,Jg=Xg,ev={run:tv,undo:rv};function tv(e){var t=e.graph().acyclicer==="greedy"?Jg(e,n(e)):nv(e);it.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,it.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function nv(e){var t=[],n={},r={};function i(s){it.has(r,s)||(r[s]=!0,n[s]=!0,it.forEach(e.outEdges(s),function(o){it.has(n,o.w)?t.push(o):i(o.w)}),delete n[s])}return it.forEach(e.nodes(),i),t}function rv(e){it.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var j=te,Bu=Se.Graph,le={addDummyNode:Hu,simplify:iv,asNonCompoundGraph:ov,successorWeights:sv,predecessorWeights:av,intersectRect:uv,buildLayerMatrix:cv,normalizeRanks:lv,removeEmptyRanks:fv,addBorderNode:dv,maxRank:Gu,partition:hv,time:pv,notime:mv};function Hu(e,t,n,r){var i;do i=j.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function iv(e){var t=new Bu().setGraph(e.graph());return j.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),j.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function ov(e){var t=new Bu({multigraph:e.isMultigraph()}).setGraph(e.graph());return j.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),j.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function sv(e){var t=j.map(e.nodes(),function(n){var r={};return j.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return j.zipObject(e.nodes(),t)}function av(e){var t=j.map(e.nodes(),function(n){var r={};return j.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return j.zipObject(e.nodes(),t)}function uv(e,t){var n=e.x,r=e.y,i=t.x-n,s=t.y-r,o=e.width/2,a=e.height/2;if(!i&&!s)throw new Error("Not possible to find intersection inside of the rectangle");var c,l;return Math.abs(s)*o>Math.abs(i)*a?(s<0&&(a=-a),c=a*i/s,l=a):(i<0&&(o=-o),c=o,l=o*s/i),{x:n+c,y:r+l}}function cv(e){var t=j.map(j.range(Gu(e)+1),function(){return[]});return j.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;j.isUndefined(i)||(t[i][r.order]=n)}),t}function lv(e){var t=j.min(j.map(e.nodes(),function(n){return e.node(n).rank}));j.forEach(e.nodes(),function(n){var r=e.node(n);j.has(r,"rank")&&(r.rank-=t)})}function fv(e){var t=j.min(j.map(e.nodes(),function(s){return e.node(s).rank})),n=[];j.forEach(e.nodes(),function(s){var o=e.node(s).rank-t;n[o]||(n[o]=[]),n[o].push(s)});var r=0,i=e.graph().nodeRankFactor;j.forEach(n,function(s,o){j.isUndefined(s)&&o%i!==0?--r:r&&j.forEach(s,function(a){e.node(a).rank+=r})})}function dv(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),Hu(e,"border",i,t)}function Gu(e){return j.max(j.map(e.nodes(),function(t){var n=e.node(t).rank;if(!j.isUndefined(n))return n}))}function hv(e,t){var n={lhs:[],rhs:[]};return j.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function pv(e,t){var n=j.now();try{return t()}finally{console.log(e+" time: "+(j.now()-n)+"ms")}}function mv(e,t){return t()}var Uu=te,gv=le,vv={run:yv,undo:_v};function yv(e){e.graph().dummyChains=[],Uu.forEach(e.edges(),function(t){wv(e,t)})}function wv(e,t){var n=t.v,r=e.node(n).rank,i=t.w,s=e.node(i).rank,o=t.name,a=e.edge(t),c=a.labelRank;if(s!==r+1){e.removeEdge(t);var l,u,f;for(f=0,++r;r<s;++f,++r)a.points=[],u={width:0,height:0,edgeLabel:a,edgeObj:t,rank:r},l=gv.addDummyNode(e,"edge",u,"_d"),r===c&&(u.width=a.width,u.height=a.height,u.dummy="edge-label",u.labelpos=a.labelpos),e.setEdge(n,l,{weight:a.weight},o),f===0&&e.graph().dummyChains.push(l),n=l;e.setEdge(n,i,{weight:a.weight},o)}}function _v(e){Uu.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var en=te,Rn={longestPath:bv,slack:Ev};function bv(e){var t={};function n(r){var i=e.node(r);if(en.has(t,r))return i.rank;t[r]=!0;var s=en.min(en.map(e.outEdges(r),function(o){return n(o.w)-e.edge(o).minlen}));return(s===Number.POSITIVE_INFINITY||s===void 0||s===null)&&(s=0),i.rank=s}en.forEach(e.sources(),n)}function Ev(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var vn=te,xv=Se.Graph,yn=Rn.slack,Yu=Sv;function Sv(e){var t=new xv({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,s;Nv(t,e)<r;)i=kv(t,e),s=t.hasNode(i.v)?yn(e,i):-yn(e,i),Cv(t,e,s);return t}function Nv(e,t){function n(r){vn.forEach(t.nodeEdges(r),function(i){var s=i.v,o=r===s?i.w:s;!e.hasNode(o)&&!yn(t,i)&&(e.setNode(o,{}),e.setEdge(r,o,{}),n(o))})}return vn.forEach(e.nodes(),n),e.nodeCount()}function kv(e,t){return vn.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return yn(t,n)})}function Cv(e,t,n){vn.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Fe=te,Av=Yu,Iv=Rn.slack,Rv=Rn.longestPath,Tv=Se.alg.preorder,Mv=Se.alg.postorder,$v=le.simplify,Pv=ut;ut.initLowLimValues=qi;ut.initCutValues=Fi;ut.calcCutValue=Wu;ut.leaveEdge=Zu;ut.enterEdge=Ku;ut.exchangeEdges=ju;function ut(e){e=$v(e),Rv(e);var t=Av(e);qi(t),Fi(t,e);for(var n,r;n=Zu(t);)r=Ku(t,e,n),ju(t,e,n,r)}function Fi(e,t){var n=Mv(e,e.nodes());n=n.slice(0,n.length-1),Fe.forEach(n,function(r){Dv(e,t,r)})}function Dv(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=Wu(e,t,n)}function Wu(e,t,n){var r=e.node(n),i=r.parent,s=!0,o=t.edge(n,i),a=0;return o||(s=!1,o=t.edge(i,n)),a=o.weight,Fe.forEach(t.nodeEdges(n),function(c){var l=c.v===n,u=l?c.w:c.v;if(u!==i){var f=l===s,h=t.edge(c).weight;if(a+=f?h:-h,zv(e,n,u)){var d=e.edge(n,u).cutvalue;a+=f?-d:d}}}),a}function qi(e,t){arguments.length<2&&(t=e.nodes()[0]),Xu(e,{},1,t)}function Xu(e,t,n,r,i){var s=n,o=e.node(r);return t[r]=!0,Fe.forEach(e.neighbors(r),function(a){Fe.has(t,a)||(n=Xu(e,t,n,a,r))}),o.low=s,o.lim=n++,i?o.parent=i:delete o.parent,n}function Zu(e){return Fe.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Ku(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var s=e.node(r),o=e.node(i),a=s,c=!1;s.lim>o.lim&&(a=o,c=!0);var l=Fe.filter(t.edges(),function(u){return c===Ts(e,e.node(u.v),a)&&c!==Ts(e,e.node(u.w),a)});return Fe.minBy(l,function(u){return Iv(t,u)})}function ju(e,t,n,r){var i=n.v,s=n.w;e.removeEdge(i,s),e.setEdge(r.v,r.w,{}),qi(e),Fi(e,t),Lv(e,t)}function Lv(e,t){var n=Fe.find(e.nodes(),function(i){return!t.node(i).parent}),r=Tv(e,n);r=r.slice(1),Fe.forEach(r,function(i){var s=e.node(i).parent,o=t.edge(i,s),a=!1;o||(o=t.edge(s,i),a=!0),t.node(i).rank=t.node(s).rank+(a?o.minlen:-o.minlen)})}function zv(e,t,n){return e.hasEdge(t,n)}function Ts(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var Ov=Rn,Qu=Ov.longestPath,Fv=Yu,qv=Pv,Vv=Bv;function Bv(e){switch(e.graph().ranker){case"network-simplex":Ms(e);break;case"tight-tree":Gv(e);break;case"longest-path":Hv(e);break;default:Ms(e)}}var Hv=Qu;function Gv(e){Qu(e),Fv(e)}function Ms(e){qv(e)}var hi=te,Uv=Yv;function Yv(e){var t=Xv(e);hi.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,s=Wv(e,t,i.v,i.w),o=s.path,a=s.lca,c=0,l=o[c],u=!0;n!==i.w;){if(r=e.node(n),u){for(;(l=o[c])!==a&&e.node(l).maxRank<r.rank;)c++;l===a&&(u=!1)}if(!u){for(;c<o.length-1&&e.node(l=o[c+1]).minRank<=r.rank;)c++;l=o[c]}e.setParent(n,l),n=e.successors(n)[0]}})}function Wv(e,t,n,r){var i=[],s=[],o=Math.min(t[n].low,t[r].low),a=Math.max(t[n].lim,t[r].lim),c,l;c=n;do c=e.parent(c),i.push(c);while(c&&(t[c].low>o||a>t[c].lim));for(l=c,c=r;(c=e.parent(c))!==l;)s.push(c);return{path:i.concat(s.reverse()),lca:l}}function Xv(e){var t={},n=0;function r(i){var s=n;hi.forEach(e.children(i),r),t[i]={low:s,lim:n++}}return hi.forEach(e.children(),r),t}var Le=te,pi=le,Zv={run:Kv,cleanup:Jv};function Kv(e){var t=pi.addDummyNode(e,"root",{},"_root"),n=jv(e),r=Le.max(Le.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,Le.forEach(e.edges(),function(o){e.edge(o).minlen*=i});var s=Qv(e)+1;Le.forEach(e.children(),function(o){Ju(e,t,i,s,r,n,o)}),e.graph().nodeRankFactor=i}function Ju(e,t,n,r,i,s,o){var a=e.children(o);if(!a.length){o!==t&&e.setEdge(t,o,{weight:0,minlen:n});return}var c=pi.addBorderNode(e,"_bt"),l=pi.addBorderNode(e,"_bb"),u=e.node(o);e.setParent(c,o),u.borderTop=c,e.setParent(l,o),u.borderBottom=l,Le.forEach(a,function(f){Ju(e,t,n,r,i,s,f);var h=e.node(f),d=h.borderTop?h.borderTop:f,p=h.borderBottom?h.borderBottom:f,g=h.borderTop?r:2*r,y=d!==p?1:i-s[o]+1;e.setEdge(c,d,{weight:g,minlen:y,nestingEdge:!0}),e.setEdge(p,l,{weight:g,minlen:y,nestingEdge:!0})}),e.parent(o)||e.setEdge(t,c,{weight:0,minlen:i+s[o]})}function jv(e){var t={};function n(r,i){var s=e.children(r);s&&s.length&&Le.forEach(s,function(o){n(o,i+1)}),t[r]=i}return Le.forEach(e.children(),function(r){n(r,1)}),t}function Qv(e){return Le.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function Jv(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Le.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var Xr=te,ey=le,ty=ny;function ny(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Xr.forEach(r,t),Xr.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var s=i.minRank,o=i.maxRank+1;s<o;++s)$s(e,"borderLeft","_bl",n,i,s),$s(e,"borderRight","_br",n,i,s)}}Xr.forEach(e.children(),t)}function $s(e,t,n,r,i,s){var o={width:0,height:0,rank:s,borderType:t},a=i[t][s-1],c=ey.addDummyNode(e,"border",o,n);i[t][s]=c,e.setParent(c,r),a&&e.setEdge(a,c,{weight:1})}var Ae=te,ry={adjust:iy,undo:oy};function iy(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&ec(e)}function oy(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&sy(e),(t==="lr"||t==="rl")&&(ay(e),ec(e))}function ec(e){Ae.forEach(e.nodes(),function(t){Ps(e.node(t))}),Ae.forEach(e.edges(),function(t){Ps(e.edge(t))})}function Ps(e){var t=e.width;e.width=e.height,e.height=t}function sy(e){Ae.forEach(e.nodes(),function(t){Zr(e.node(t))}),Ae.forEach(e.edges(),function(t){var n=e.edge(t);Ae.forEach(n.points,Zr),Ae.has(n,"y")&&Zr(n)})}function Zr(e){e.y=-e.y}function ay(e){Ae.forEach(e.nodes(),function(t){Kr(e.node(t))}),Ae.forEach(e.edges(),function(t){var n=e.edge(t);Ae.forEach(n.points,Kr),Ae.has(n,"x")&&Kr(n)})}function Kr(e){var t=e.x;e.x=e.y,e.y=t}var $e=te,uy=cy;function cy(e){var t={},n=$e.filter(e.nodes(),function(a){return!e.children(a).length}),r=$e.max($e.map(n,function(a){return e.node(a).rank})),i=$e.map($e.range(r+1),function(){return[]});function s(a){if(!$e.has(t,a)){t[a]=!0;var c=e.node(a);i[c.rank].push(a),$e.forEach(e.successors(a),s)}}var o=$e.sortBy(n,function(a){return e.node(a).rank});return $e.forEach(o,s),i}var Ve=te,ly=fy;function fy(e,t){for(var n=0,r=1;r<t.length;++r)n+=dy(e,t[r-1],t[r]);return n}function dy(e,t,n){for(var r=Ve.zipObject(n,Ve.map(n,function(l,u){return u})),i=Ve.flatten(Ve.map(t,function(l){return Ve.sortBy(Ve.map(e.outEdges(l),function(u){return{pos:r[u.w],weight:e.edge(u).weight}}),"pos")}),!0),s=1;s<n.length;)s<<=1;var o=2*s-1;s-=1;var a=Ve.map(new Array(o),function(){return 0}),c=0;return Ve.forEach(i.forEach(function(l){var u=l.pos+s;a[u]+=l.weight;for(var f=0;u>0;)u%2&&(f+=a[u+1]),u=u-1>>1,a[u]+=l.weight;c+=l.weight*f})),c}var Ds=te,hy=py;function py(e,t){return Ds.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=Ds.reduce(r,function(s,o){var a=e.edge(o),c=e.node(o.v);return{sum:s.sum+a.weight*c.order,weight:s.weight+a.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var de=te,my=gy;function gy(e,t){var n={};de.forEach(e,function(i,s){var o=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:s};de.isUndefined(i.barycenter)||(o.barycenter=i.barycenter,o.weight=i.weight)}),de.forEach(t.edges(),function(i){var s=n[i.v],o=n[i.w];!de.isUndefined(s)&&!de.isUndefined(o)&&(o.indegree++,s.out.push(n[i.w]))});var r=de.filter(n,function(i){return!i.indegree});return vy(r)}function vy(e){var t=[];function n(s){return function(o){o.merged||(de.isUndefined(o.barycenter)||de.isUndefined(s.barycenter)||o.barycenter>=s.barycenter)&&yy(s,o)}}function r(s){return function(o){o.in.push(s),--o.indegree===0&&e.push(o)}}for(;e.length;){var i=e.pop();t.push(i),de.forEach(i.in.reverse(),n(i)),de.forEach(i.out,r(i))}return de.map(de.filter(t,function(s){return!s.merged}),function(s){return de.pick(s,["vs","i","barycenter","weight"])})}function yy(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Ot=te,wy=le,_y=by;function by(e,t){var n=wy.partition(e,function(u){return Ot.has(u,"barycenter")}),r=n.lhs,i=Ot.sortBy(n.rhs,function(u){return-u.i}),s=[],o=0,a=0,c=0;r.sort(Ey(!!t)),c=Ls(s,i,c),Ot.forEach(r,function(u){c+=u.vs.length,s.push(u.vs),o+=u.barycenter*u.weight,a+=u.weight,c=Ls(s,i,c)});var l={vs:Ot.flatten(s,!0)};return a&&(l.barycenter=o/a,l.weight=a),l}function Ls(e,t,n){for(var r;t.length&&(r=Ot.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function Ey(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var Ge=te,xy=hy,Sy=my,Ny=_y,ky=tc;function tc(e,t,n,r){var i=e.children(t),s=e.node(t),o=s?s.borderLeft:void 0,a=s?s.borderRight:void 0,c={};o&&(i=Ge.filter(i,function(p){return p!==o&&p!==a}));var l=xy(e,i);Ge.forEach(l,function(p){if(e.children(p.v).length){var g=tc(e,p.v,n,r);c[p.v]=g,Ge.has(g,"barycenter")&&Ay(p,g)}});var u=Sy(l,n);Cy(u,c);var f=Ny(u,r);if(o&&(f.vs=Ge.flatten([o,f.vs,a],!0),e.predecessors(o).length)){var h=e.node(e.predecessors(o)[0]),d=e.node(e.predecessors(a)[0]);Ge.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+h.order+d.order)/(f.weight+2),f.weight+=2}return f}function Cy(e,t){Ge.forEach(e,function(n){n.vs=Ge.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function Ay(e,t){Ge.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var Ft=te,Iy=Se.Graph,Ry=Ty;function Ty(e,t,n){var r=My(e),i=new Iy({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(s){return e.node(s)});return Ft.forEach(e.nodes(),function(s){var o=e.node(s),a=e.parent(s);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(i.setNode(s),i.setParent(s,a||r),Ft.forEach(e[n](s),function(c){var l=c.v===s?c.w:c.v,u=i.edge(l,s),f=Ft.isUndefined(u)?0:u.weight;i.setEdge(l,s,{weight:e.edge(c).weight+f})}),Ft.has(o,"minRank")&&i.setNode(s,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),i}function My(e){for(var t;e.hasNode(t=Ft.uniqueId("_root")););return t}var $y=te,Py=Dy;function Dy(e,t,n){var r={},i;$y.forEach(n,function(s){for(var o=e.parent(s),a,c;o;){if(a=e.parent(o),a?(c=r[a],r[a]=o):(c=i,i=o),c&&c!==o){t.setEdge(c,o);return}o=a}})}var We=te,Ly=uy,zy=ly,Oy=ky,Fy=Ry,qy=Py,Vy=Se.Graph,zs=le,By=Hy;function Hy(e){var t=zs.maxRank(e),n=Os(e,We.range(1,t+1),"inEdges"),r=Os(e,We.range(t-1,-1,-1),"outEdges"),i=Ly(e);Fs(e,i);for(var s=Number.POSITIVE_INFINITY,o,a=0,c=0;c<4;++a,++c){Gy(a%2?n:r,a%4>=2),i=zs.buildLayerMatrix(e);var l=zy(e,i);l<s&&(c=0,o=We.cloneDeep(i),s=l)}Fs(e,o)}function Os(e,t,n){return We.map(t,function(r){return Fy(e,r,n)})}function Gy(e,t){var n=new Vy;We.forEach(e,function(r){var i=r.graph().root,s=Oy(r,i,n,t);We.forEach(s.vs,function(o,a){r.node(o).order=a}),qy(r,n,s.vs)})}function Fs(e,t){We.forEach(t,function(n){We.forEach(n,function(r,i){e.node(r).order=i})})}var Y=te,Uy=Se.Graph,Yy=le,Wy={positionX:i0};function Xy(e,t){var n={};function r(i,s){var o=0,a=0,c=i.length,l=Y.last(s);return Y.forEach(s,function(u,f){var h=Ky(e,u),d=h?e.node(h).order:c;(h||u===l)&&(Y.forEach(s.slice(a,f+1),function(p){Y.forEach(e.predecessors(p),function(g){var y=e.node(g),v=y.order;(v<o||d<v)&&!(y.dummy&&e.node(p).dummy)&&nc(n,g,p)})}),a=f+1,o=d)}),s}return Y.reduce(t,r),n}function Zy(e,t){var n={};function r(s,o,a,c,l){var u;Y.forEach(Y.range(o,a),function(f){u=s[f],e.node(u).dummy&&Y.forEach(e.predecessors(u),function(h){var d=e.node(h);d.dummy&&(d.order<c||d.order>l)&&nc(n,h,u)})})}function i(s,o){var a=-1,c,l=0;return Y.forEach(o,function(u,f){if(e.node(u).dummy==="border"){var h=e.predecessors(u);h.length&&(c=e.node(h[0]).order,r(o,l,f,a,c),l=f,a=c)}r(o,l,o.length,c,s.length)}),o}return Y.reduce(t,i),n}function Ky(e,t){if(e.node(t).dummy)return Y.find(e.predecessors(t),function(n){return e.node(n).dummy})}function nc(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function jy(e,t,n){if(t>n){var r=t;t=n,n=r}return Y.has(e[t],n)}function Qy(e,t,n,r){var i={},s={},o={};return Y.forEach(t,function(a){Y.forEach(a,function(c,l){i[c]=c,s[c]=c,o[c]=l})}),Y.forEach(t,function(a){var c=-1;Y.forEach(a,function(l){var u=r(l);if(u.length){u=Y.sortBy(u,function(g){return o[g]});for(var f=(u.length-1)/2,h=Math.floor(f),d=Math.ceil(f);h<=d;++h){var p=u[h];s[l]===l&&c<o[p]&&!jy(n,l,p)&&(s[p]=l,s[l]=i[l]=i[p],c=o[p])}}})}),{root:i,align:s}}function Jy(e,t,n,r,i){var s={},o=e0(e,t,n,i),a=i?"borderLeft":"borderRight";function c(f,h){for(var d=o.nodes(),p=d.pop(),g={};p;)g[p]?f(p):(g[p]=!0,d.push(p),d=d.concat(h(p))),p=d.pop()}function l(f){s[f]=o.inEdges(f).reduce(function(h,d){return Math.max(h,s[d.v]+o.edge(d))},0)}function u(f){var h=o.outEdges(f).reduce(function(p,g){return Math.min(p,s[g.w]-o.edge(g))},Number.POSITIVE_INFINITY),d=e.node(f);h!==Number.POSITIVE_INFINITY&&d.borderType!==a&&(s[f]=Math.max(s[f],h))}return c(l,o.predecessors.bind(o)),c(u,o.successors.bind(o)),Y.forEach(r,function(f){s[f]=s[n[f]]}),s}function e0(e,t,n,r){var i=new Uy,s=e.graph(),o=o0(s.nodesep,s.edgesep,r);return Y.forEach(t,function(a){var c;Y.forEach(a,function(l){var u=n[l];if(i.setNode(u),c){var f=n[c],h=i.edge(f,u);i.setEdge(f,u,Math.max(o(e,l,c),h||0))}c=l})}),i}function t0(e,t){return Y.minBy(Y.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Y.forIn(n,function(s,o){var a=s0(e,o)/2;r=Math.max(s+a,r),i=Math.min(s-a,i)}),r-i})}function n0(e,t){var n=Y.values(t),r=Y.min(n),i=Y.max(n);Y.forEach(["u","d"],function(s){Y.forEach(["l","r"],function(o){var a=s+o,c=e[a],l;if(c!==t){var u=Y.values(c);l=o==="l"?r-Y.min(u):i-Y.max(u),l&&(e[a]=Y.mapValues(c,function(f){return f+l}))}})})}function r0(e,t){return Y.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=Y.sortBy(Y.map(e,r));return(i[1]+i[2])/2})}function i0(e){var t=Yy.buildLayerMatrix(e),n=Y.merge(Xy(e,t),Zy(e,t)),r={},i;Y.forEach(["u","d"],function(o){i=o==="u"?t:Y.values(t).reverse(),Y.forEach(["l","r"],function(a){a==="r"&&(i=Y.map(i,function(f){return Y.values(f).reverse()}));var c=(o==="u"?e.predecessors:e.successors).bind(e),l=Qy(e,i,n,c),u=Jy(e,i,l.root,l.align,a==="r");a==="r"&&(u=Y.mapValues(u,function(f){return-f})),r[o+a]=u})});var s=t0(e,r);return n0(r,s),r0(r,e.graph().align)}function o0(e,t,n){return function(r,i,s){var o=r.node(i),a=r.node(s),c=0,l;if(c+=o.width/2,Y.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":l=-o.width/2;break;case"r":l=o.width/2;break}if(l&&(c+=n?l:-l),l=0,c+=(o.dummy?t:e)/2,c+=(a.dummy?t:e)/2,c+=a.width/2,Y.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":l=a.width/2;break;case"r":l=-a.width/2;break}return l&&(c+=n?l:-l),l=0,c}}function s0(e,t){return e.node(t).width}var qt=te,rc=le,a0=Wy.positionX,u0=c0;function c0(e){e=rc.asNonCompoundGraph(e),l0(e),qt.forEach(a0(e),function(t,n){e.node(n).x=t})}function l0(e){var t=rc.buildLayerMatrix(e),n=e.graph().ranksep,r=0;qt.forEach(t,function(i){var s=qt.max(qt.map(i,function(o){return e.node(o).height}));qt.forEach(i,function(o){e.node(o).y=r+s/2}),r+=s+n})}var W=te,qs=ev,Vs=vv,f0=Vv,d0=le.normalizeRanks,h0=Uv,p0=le.removeEmptyRanks,Bs=Zv,m0=ty,Hs=ry,g0=By,v0=u0,Xe=le,y0=Se.Graph,w0=_0;function _0(e,t){var n=t&&t.debugTiming?Xe.time:Xe.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return T0(e)});n("  runLayout",function(){b0(r,n)}),n("  updateInputGraph",function(){E0(e,r)})})}function b0(e,t){t("    makeSpaceForEdgeLabels",function(){M0(e)}),t("    removeSelfEdges",function(){V0(e)}),t("    acyclic",function(){qs.run(e)}),t("    nestingGraph.run",function(){Bs.run(e)}),t("    rank",function(){f0(Xe.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){$0(e)}),t("    removeEmptyRanks",function(){p0(e)}),t("    nestingGraph.cleanup",function(){Bs.cleanup(e)}),t("    normalizeRanks",function(){d0(e)}),t("    assignRankMinMax",function(){P0(e)}),t("    removeEdgeLabelProxies",function(){D0(e)}),t("    normalize.run",function(){Vs.run(e)}),t("    parentDummyChains",function(){h0(e)}),t("    addBorderSegments",function(){m0(e)}),t("    order",function(){g0(e)}),t("    insertSelfEdges",function(){B0(e)}),t("    adjustCoordinateSystem",function(){Hs.adjust(e)}),t("    position",function(){v0(e)}),t("    positionSelfEdges",function(){H0(e)}),t("    removeBorderNodes",function(){q0(e)}),t("    normalize.undo",function(){Vs.undo(e)}),t("    fixupEdgeLabelCoords",function(){O0(e)}),t("    undoCoordinateSystem",function(){Hs.undo(e)}),t("    translateGraph",function(){L0(e)}),t("    assignNodeIntersects",function(){z0(e)}),t("    reversePoints",function(){F0(e)}),t("    acyclic.undo",function(){qs.undo(e)})}function E0(e,t){W.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),W.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,W.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var x0=["nodesep","edgesep","ranksep","marginx","marginy"],S0={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},N0=["acyclicer","ranker","rankdir","align"],k0=["width","height"],C0={width:0,height:0},A0=["minlen","weight","width","height","labeloffset"],I0={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R0=["labelpos"];function T0(e){var t=new y0({multigraph:!0,compound:!0}),n=Qr(e.graph());return t.setGraph(W.merge({},S0,jr(n,x0),W.pick(n,N0))),W.forEach(e.nodes(),function(r){var i=Qr(e.node(r));t.setNode(r,W.defaults(jr(i,k0),C0)),t.setParent(r,e.parent(r))}),W.forEach(e.edges(),function(r){var i=Qr(e.edge(r));t.setEdge(r,W.merge({},I0,jr(i,A0),W.pick(i,R0)))}),t}function M0(e){var t=e.graph();t.ranksep/=2,W.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function $0(e){W.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),s={rank:(i.rank-r.rank)/2+r.rank,e:t};Xe.addDummyNode(e,"edge-proxy",s,"_ep")}})}function P0(e){var t=0;W.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=W.max(t,r.maxRank))}),e.graph().maxRank=t}function D0(e){W.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function L0(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,s=e.graph(),o=s.marginx||0,a=s.marginy||0;function c(l){var u=l.x,f=l.y,h=l.width,d=l.height;t=Math.min(t,u-h/2),n=Math.max(n,u+h/2),r=Math.min(r,f-d/2),i=Math.max(i,f+d/2)}W.forEach(e.nodes(),function(l){c(e.node(l))}),W.forEach(e.edges(),function(l){var u=e.edge(l);W.has(u,"x")&&c(u)}),t-=o,r-=a,W.forEach(e.nodes(),function(l){var u=e.node(l);u.x-=t,u.y-=r}),W.forEach(e.edges(),function(l){var u=e.edge(l);W.forEach(u.points,function(f){f.x-=t,f.y-=r}),W.has(u,"x")&&(u.x-=t),W.has(u,"y")&&(u.y-=r)}),s.width=n-t+o,s.height=i-r+a}function z0(e){W.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),s,o;n.points?(s=n.points[0],o=n.points[n.points.length-1]):(n.points=[],s=i,o=r),n.points.unshift(Xe.intersectRect(r,s)),n.points.push(Xe.intersectRect(i,o))})}function O0(e){W.forEach(e.edges(),function(t){var n=e.edge(t);if(W.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function F0(e){W.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function q0(e){W.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),s=e.node(W.last(n.borderLeft)),o=e.node(W.last(n.borderRight));n.width=Math.abs(o.x-s.x),n.height=Math.abs(i.y-r.y),n.x=s.x+n.width/2,n.y=r.y+n.height/2}}),W.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function V0(e){W.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function B0(e){var t=Xe.buildLayerMatrix(e);W.forEach(t,function(n){var r=0;W.forEach(n,function(i,s){var o=e.node(i);o.order=s+r,W.forEach(o.selfEdges,function(a){Xe.addDummyNode(e,"selfedge",{width:a.label.width,height:a.label.height,rank:o.rank,order:s+ ++r,e:a.e,label:a.label},"_se")}),delete o.selfEdges})})}function H0(e){W.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,s=r.y,o=n.x-i,a=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*o/3,y:s-a},{x:i+5*o/6,y:s-a},{x:i+o,y:s},{x:i+5*o/6,y:s+a},{x:i+2*o/3,y:s+a}],n.label.x=n.x,n.label.y=n.y}})}function jr(e,t){return W.mapValues(W.pick(e,t),Number)}function Qr(e){var t={};return W.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var tn=te,G0=le,U0=Se.Graph,Y0={debugOrdering:W0};function W0(e){var t=G0.buildLayerMatrix(e),n=new U0({compound:!0,multigraph:!0}).setGraph({});return tn.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),tn.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),tn.forEach(t,function(r,i){var s="layer"+i;n.setNode(s,{rank:"same"}),tn.reduce(r,function(o,a){return n.setEdge(o,a,{style:"invis"}),a})}),n}var X0="0.8.5",Z0={graphlib:Se,layout:w0,debug:Y0,util:{time:le.time,notime:le.notime},version:X0};const iw=Gs(Z0);export{rw as B,nw as C,Ta as P,Um as R,ne as a,ce as b,Ei as c,ue as d,Q0 as e,An as f,_t as g,ew as h,Ue as i,tw as j,J0 as k,iw as l,Ce as p,be as s,se as u,ip as z};
